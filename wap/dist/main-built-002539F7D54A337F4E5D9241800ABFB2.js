/*
 AngularJS v1.3.0-beta.14
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(M,U,r){'use strict';function G(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.0-beta.14/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function db(b){if(null==b||Oa(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:v(b)||L(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function q(b,a,c){var d,e;if(b)if(P(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(L(b)||db(b))for(d=0,e=b.length;d<e;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==q)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Wb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}
function id(b,a,c){for(var d=Wb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function Xb(b){return function(a,c){b(c,a)}}function jd(){return++eb}function Yb(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function z(b){var a=b.$$hashKey;q(arguments,function(a){a!==b&&q(a,function(a,c){b[c]=a})});Yb(b,a);return b}function Y(b){return parseInt(b,10)}function Zb(b,a){return z(new (z(function(){},{prototype:b})),a)}function A(){}function Ea(b){return b}function da(b){return function(){return b}}function w(b){return"undefined"===
typeof b}function E(b){return"undefined"!==typeof b}function S(b){return null!=b&&"object"===typeof b}function v(b){return"string"===typeof b}function Fa(b){return"number"===typeof b}function ra(b){return"[object Date]"===ya.call(b)}function P(b){return"function"===typeof b}function fb(b){return"[object RegExp]"===ya.call(b)}function Oa(b){return b&&b.window===b}function kd(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function ld(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=
!0;return a}function md(b,a,c){var d=[];q(b,function(b,f,g){d.push(a.call(c,b,f,g))});return d}function Pa(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Ga(b,a){var c=Pa(b,a);0<=c&&b.splice(c,1);return a}function za(b,a,c,d){if(Oa(b)||b&&b.$evalAsync&&b.$watch)throw Qa("cpws");if(a){if(b===a)throw Qa("cpi");c=c||[];d=d||[];if(S(b)){var e=Pa(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(L(b))for(var f=a.length=0;f<b.length;f++)e=za(b[f],
null,c,d),S(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;q(a,function(b,c){delete a[c]});for(f in b)b.hasOwnProperty(f)&&(e=za(b[f],null,c,d),S(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);Yb(a,g)}}else if(a=b)L(b)?a=za(b,[],c,d):ra(b)?a=new Date(b.getTime()):fb(b)?a=RegExp(b.source):S(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=za(b,e,c,d));return a}function ka(b,a){var c=0;if(L(b))for(a=a||[];c<b.length;c++)a[c]=b[c];else if(S(b)){a=a||{};for(var d=Object.keys(b),e=d.length;c<
e;c++){var f=d[c];if("$"!==f.charAt(0)||"$"!==f.charAt(1))a[f]=b[f]}}return a||b}function Aa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(L(b)){if(!L(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!Aa(b[d],a[d]))return!1;return!0}}else{if(ra(b))return ra(a)&&b.getTime()==a.getTime();if(fb(b)&&fb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Oa(b)||Oa(a)||L(a))return!1;
c={};for(d in b)if("$"!==d.charAt(0)&&!P(b[d])){if(!Aa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==r&&!P(a[d]))return!1;return!0}return!1}function $b(){return U.securityPolicy&&U.securityPolicy.isActive||U.querySelector&&!(!U.querySelector("[ng-csp]")&&!U.querySelector("[data-ng-csp]"))}function Ab(b,a){var c=2<arguments.length?la.call(arguments,2):[];return!P(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(la.call(arguments,
0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function nd(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?c=r:Oa(a)?c="$WINDOW":a&&U===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function sa(b,a){return"undefined"===typeof b?r:JSON.stringify(b,nd,a?"  ":null)}function ac(b){return v(b)?JSON.parse(b):b}function ha(b){b=D(b).clone();try{b.empty()}catch(a){}var c=D("<div>").append(b).html();try{return 3===b[0].nodeType?
K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function bc(b){try{return decodeURIComponent(b)}catch(a){}}function cc(b){var a={},c,d;q((b||"").split("&"),function(b){b&&(c=b.split("="),d=bc(c[0]),E(d)&&(b=E(c[1])?bc(c[1]):!0,a[d]?L(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Bb(b){var a=[];q(b,function(b,d){L(b)?q(b,function(b){a.push(Ba(d,!0)+(!0===b?"":"="+Ba(b,!0)))}):a.push(Ba(d,!0)+(!0===b?"":"="+Ba(b,!0)))});return a.length?
a.join("&"):""}function gb(b){return Ba(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ba(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function od(b,a){var c,d,e=dc.length;b=D(b);for(d=0;d<e;++d)if(c=dc[d]+a,v(c=b.attr(c)))return c;return null}function pd(b,a){function c(a){a&&d.push(a)}var d=[b],e,f,g={},h=["ng:app","ng-app","x-ng-app","data-ng-app"],n=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;
q(h,function(a){h[a]=!0;c(U.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(q(b.querySelectorAll("."+a),c),q(b.querySelectorAll("."+a+"\\:"),c),q(b.querySelectorAll("["+a+"]"),c))});q(d,function(a){if(!e){var b=n.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):q(a.attributes,function(b){!e&&h[b.name]&&(e=a,f=b.value)})}});e&&(g.strictDi=null!==od(e,"strict-di"),a(e,f?[f]:[],g))}function ec(b,a,c){S(c)||(c={});c=z({strictDi:!1},c);var d=function(){b=D(b);if(b.injector()){var d=
b[0]===U?"document":ha(b);throw Qa("btstrpd",d);}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");d=Cb(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return d},e=/^NG_DEFER_BOOTSTRAP!/;if(M&&!e.test(M.name))return d();M.name=M.name.replace(e,"");Ra.resumeBootstrap=function(b){q(b,function(b){a.push(b)});d()}}function hb(b,a){a=a||"_";return b.replace(qd,function(b,
d){return(d?a:"")+b.toLowerCase()})}function rd(){var b;(ta=M.jQuery)&&ta.fn.on?(D=ta,z(ta.fn,{scope:Ha.scope,isolateScope:Ha.isolateScope,controller:Ha.controller,injector:Ha.injector,inheritedData:Ha.inheritedData}),b=ta.cleanData,b=b.$$original||b,ta.cleanData=function(a){for(var c=0,d;null!=(d=a[c]);c++)ta(d).triggerHandler("$destroy");b(a)},ta.cleanData.$$original=b):D=Q;Ra.element=D}function Db(b,a,c){if(!b)throw Qa("areq",a||"?",c||"required");return b}function Sa(b,a,c){c&&L(b)&&(b=b[b.length-
1]);Db(P(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Ca(b,a){if("hasOwnProperty"===b)throw Qa("badname",a);}function fc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&P(b)?Ab(e,b):b}function Eb(b){var a=b[0];b=b[b.length-1];if(a===b)return D(a);var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return D(c)}function sd(b){var a=G("$injector"),c=G("ng");b=b.angular||
(b.angular={});b.$$minErr=b.$$minErr||G;return b.module||(b.module=function(){var b={};return function(e,f,g){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e,f){f||(f=c);return function(){f[e||"push"]([a,d,arguments]);return k}}if(!f)throw a("nomod",e);var c=[],d=[],m=[],p=b("$injector","invoke","push",d),k={_invokeQueue:c,_configBlocks:d,_runBlocks:m,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide",
"factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:p,run:function(a){m.push(a);return this}};g&&p(g);return k}())}}())}function td(b){z(b,{bootstrap:ec,copy:za,extend:z,equals:Aa,element:D,forEach:q,injector:Cb,noop:A,bind:Ab,toJson:sa,fromJson:ac,identity:Ea,
isUndefined:w,isDefined:E,isString:v,isFunction:P,isObject:S,isNumber:Fa,isElement:kd,isArray:L,version:ud,isDate:ra,lowercase:K,uppercase:ib,callbacks:{counter:0},$$minErr:G,$$csp:$b});Ta=sd(M);try{Ta("ngLocale")}catch(a){Ta("ngLocale",[]).provider("$locale",vd)}Ta("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:wd});a.provider("$compile",gc).directive({a:xd,input:hc,textarea:hc,form:yd,script:zd,select:Ad,style:Bd,option:Cd,ngBind:Dd,ngBindHtml:Ed,ngBindTemplate:Fd,ngClass:Gd,
ngClassEven:Hd,ngClassOdd:Id,ngCloak:Jd,ngController:Kd,ngForm:Ld,ngHide:Md,ngIf:Nd,ngInclude:Od,ngInit:Pd,ngNonBindable:Qd,ngPluralize:Rd,ngRepeat:Sd,ngShow:Td,ngStyle:Ud,ngSwitch:Vd,ngSwitchWhen:Wd,ngSwitchDefault:Xd,ngOptions:Yd,ngTransclude:Zd,ngModel:$d,ngList:ae,ngChange:be,pattern:ic,ngPattern:ic,required:jc,ngRequired:jc,minlength:kc,ngMinlength:kc,maxlength:lc,ngMaxlength:lc,ngValue:ce,ngModelOptions:de}).directive({ngInclude:ee}).directive(jb).directive(mc);a.provider({$anchorScroll:fe,
$animate:ge,$browser:he,$cacheFactory:ie,$controller:je,$document:ke,$exceptionHandler:le,$filter:nc,$interpolate:me,$interval:ne,$http:oe,$httpBackend:pe,$location:qe,$log:re,$parse:se,$rootScope:te,$q:ue,$$q:ve,$sce:we,$sceDelegate:xe,$sniffer:ye,$templateCache:ze,$timeout:Ae,$window:Be,$$rAF:Ce,$$asyncCallback:De})}])}function Ua(b){return b.replace(Ee,function(a,b,d,e){return e?d.toUpperCase():d}).replace(Fe,"Moz$1")}function Ge(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Fb.test(b)){c=
c||e.appendChild(a.createElement("div"));d=(He.exec(b)||["",""])[1].toLowerCase();d=fa[d]||fa._default;c.innerHTML=d[1]+b.replace(Ie,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=f.concat(la.call(c.childNodes,void 0));c=e.firstChild;c.textContent=""}else f.push(a.createTextNode(b));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function Q(b){if(b instanceof Q)return b;v(b)&&(b=aa(b));if(!(this instanceof Q)){if(v(b)&&"<"!=b.charAt(0))throw Gb("nosel");return new Q(b)}if(v(b)){var a;
a=U;var c;b=(c=Je.exec(b))?[a.createElement(c[1])]:(c=Ge(b,a))?c.childNodes:[]}oc(this,b)}function Hb(b){return b.cloneNode(!0)}function Ia(b){pc(b);for(var a=0,c=b.children,d=c&&c.length||0;a<d;a++)b=c[a],Ia(b)}function qc(b,a,c,d){if(E(d))throw Gb("offargs");var e=ma(b,"events");ma(b,"handle")&&(w(a)?q(e,function(a,c){Va(b,c,a);delete e[c]}):q(a.split(" "),function(a){w(c)?(Va(b,a,e[a]),delete e[a]):Ga(e[a]||[],c)}))}function pc(b,a){var c=b.ng339,d=Wa[c];d&&(a?delete Wa[c].data[a]:(d.handle&&(d.events.$destroy&&
d.handle({},"$destroy"),qc(b)),delete Wa[c],b.ng339=r))}function ma(b,a,c){var d=b.ng339,d=Wa[d||-1];if(E(c))d||(b.ng339=d=++Ke,d=Wa[d]={}),d[a]=c;else return d&&d[a]}function rc(b,a,c){if(!b.nodeType||1===b.nodeType||9===b.nodeType){var d=ma(b,"data"),e=E(c),f=!e&&E(a),g=f&&!S(a);d||g||ma(b,"data",d={});if(e)d[a]=c;else if(f){if(g)return d&&d[a];z(d,a)}else return d}}function Ib(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function kb(b,
a){a&&b.setAttribute&&q(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+aa(a)+" "," ")))})}function lb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(a.split(" "),function(a){a=aa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",aa(c))}}function oc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;"number"===typeof c&&a.window!==a?c&&(a.item&&
(a=la.call(a)),sc.apply(b,a)):b[b.length++]=a}}function tc(b,a){return mb(b,"$"+(a||"ngController")+"Controller")}function mb(b,a,c){b=D(b);9==b[0].nodeType&&(b=b.find("html"));for(a=L(a)?a:[a];b.length;){for(var d=b[0],e=0,f=a.length;e<f;e++)if((c=b.data(a[e]))!==r)return c;b=D(d.parentNode||11===d.nodeType&&d.host)}}function uc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ia(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function vc(b,a){var c=nb[a.toLowerCase()];return c&&wc[na(b)]&&c}function Le(b,
a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&xc[a]}function Me(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||U);if(w(c.defaultPrevented)){var f=c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var g=ka(a[e||c.type]||
[]);q(g,function(a){a.call(b,c)});8>=W?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ja(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=b.$$hashKey)?d=b.$$hashKey():d===r&&(d=b.$$hashKey=(a||jd)()):d=b;return c+":"+d}function Xa(b,a){if(a){var c=0;this.nextUid=function(){return++c}}q(b,this.put,this)}function Ne(b){return(b=b.toString().replace(yc,
"").match(zc))?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Jb(b,a,c){var d;if("function"===typeof b){if(!(d=b.$inject)){d=[];if(b.length){if(a)throw v(c)&&c||(c=b.name||Ne(b)),Ka("strictdi",c);a=b.toString().replace(yc,"");a=a.match(zc);q(a[1].split(Oe),function(a){a.replace(Pe,function(a,b,c){d.push(c)})})}b.$inject=d}}else L(b)?(a=b.length-1,Sa(b[a],"fn"),d=b.slice(0,a)):Sa(b,"fn",!0);return d}function Cb(b,a){function c(a){return function(b,c){if(S(b))q(b,Xb(a));else return a(b,
c)}}function d(a,b){Ca(a,"service");if(P(b)||L(b))b=k.instantiate(b);if(!b.$get)throw Ka("pget",a);return p[a+n]=b}function e(a,b){return d(a,{$get:b})}function f(a){var b=[],c;q(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=k.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{v(a)?(c=Ta(a),b=b.concat(f(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):P(a)?b.push(k.invoke(a)):L(a)?b.push(k.invoke(a)):Sa(a,"module")}catch(e){throw L(a)&&
(a=a[a.length-1]),e.message&&(e.stack&&-1==e.stack.indexOf(e.message))&&(e=e.message+"\n"+e.stack),Ka("modulerr",a,e.stack||e.message||e);}}});return b}function g(b,c){function d(a){if(b.hasOwnProperty(a)){if(b[a]===h)throw Ka("cdep",a+" <- "+l.join(" <- "));return b[a]}try{return l.unshift(a),b[a]=h,b[a]=c(a)}catch(e){throw b[a]===h&&delete b[a],e;}finally{l.shift()}}function e(b,c,f,g){"string"===typeof f&&(g=f,f=null);var h=[];g=Jb(b,a,g);var n,k,l;k=0;for(n=g.length;k<n;k++){l=g[k];if("string"!==
typeof l)throw Ka("itkn",l);h.push(f&&f.hasOwnProperty(l)?f[l]:d(l))}L(b)&&(b=b[n]);return b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=function(){};d.prototype=(L(a)?a[a.length-1]:a).prototype;d=new d;a=e(a,d,b,c);return S(a)||P(a)?a:d},get:d,annotate:Jb,has:function(a){return p.hasOwnProperty(a+n)||b.hasOwnProperty(a)}}}a=!0===a;var h={},n="Provider",l=[],m=new Xa([],!0),p={$provide:{provider:c(d),factory:c(e),service:c(function(a,b){return e(a,["$injector",function(a){return a.instantiate(b)}])}),
value:c(function(a,b){return e(a,da(b))}),constant:c(function(a,b){Ca(a,"constant");p[a]=b;t[a]=b}),decorator:function(a,b){var c=k.get(a+n),d=c.$get;c.$get=function(){var a=s.invoke(d,c);return s.invoke(b,null,{$delegate:a})}}}},k=p.$injector=g(p,function(){throw Ka("unpr",l.join(" <- "));},a),t={},s=t.$injector=g(t,function(a){var b=k.get(a+n);return s.invoke(b.$get,b,r,a)},a);q(f(b),function(a){s.invoke(a||A)});return s}function fe(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=
["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;q(a,function(a){b||"a"!==na(a)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=g.getElementById(b))?d.scrollIntoView():(d=e(g.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var g=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function De(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,
0,!1)}}]}function Qe(b,a,c,d){function e(a){try{a.apply(null,la.call(arguments,1))}finally{if(s--,0===s)for(;I.length;)try{I.pop()()}catch(b){c.error(b)}}}function f(a,b){(function Re(){q(y,function(a){a()});F=b(Re,a)})()}function g(){x=null;B!=h.url()&&(B=h.url(),q(X,function(a){a(h.url())}))}var h=this,n=a[0],l=b.location,m=b.history,p=b.setTimeout,k=b.clearTimeout,t={};h.isMock=!1;var s=0,I=[];h.$$completeOutstandingRequest=e;h.$$incOutstandingRequestCount=function(){s++};h.notifyWhenNoOutstandingRequests=
function(a){q(y,function(a){a()});0===s?a():I.push(a)};var y=[],F;h.addPollFn=function(a){w(F)&&f(100,p);y.push(a);return a};var B=l.href,u=a.find("base"),x=null;h.url=function(a,c){l!==b.location&&(l=b.location);m!==b.history&&(m=b.history);if(a){if(B!=a)return B=a,d.history?c?m.replaceState(null,"",a):(m.pushState(null,"",a),u.attr("href",u.attr("href"))):(x=a,c?l.replace(a):l.href=a),h}else return x||l.href.replace(/%27/g,"'")};var X=[],N=!1;h.onUrlChange=function(a){if(!N){if(d.history)D(b).on("popstate",
g);if(d.hashchange)D(b).on("hashchange",g);else h.addPollFn(g);N=!0}X.push(a);return a};h.baseHref=function(){var a=u.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var T={},O="",V=h.baseHref();h.cookies=function(a,b){var d,e,f,g;if(a)b===r?n.cookie=escape(a)+"=;path="+V+";expires=Thu, 01 Jan 1970 00:00:00 GMT":v(b)&&(d=(n.cookie=escape(a)+"="+escape(b)+";path="+V).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));
else{if(n.cookie!==O)for(O=n.cookie,d=O.split("; "),T={},f=0;f<d.length;f++)e=d[f],g=e.indexOf("="),0<g&&(a=unescape(e.substring(0,g)),T[a]===r&&(T[a]=unescape(e.substring(g+1))));return T}};h.defer=function(a,b){var c;s++;c=p(function(){delete t[c];e(a)},b||0);t[c]=!0;return c};h.defer.cancel=function(a){return t[a]?(delete t[a],k(a),e(A),!0):!1}}function he(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new Qe(b,d,a,c)}]}function ie(){this.$get=function(){function b(b,
d){function e(a){a!=p&&(k?k==a&&(k=a.n):k=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw G("$cacheFactory")("iid",b);var g=0,h=z({},d,{id:b}),n={},l=d&&d.capacity||Number.MAX_VALUE,m={},p=null,k=null;return a[b]={put:function(a,b){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}if(!w(b))return a in n||g++,n[a]=b,g>l&&this.remove(k.key),b},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return n[a]},remove:function(a){if(l<
Number.MAX_VALUE){var b=m[a];if(!b)return;b==p&&(p=b.p);b==k&&(k=b.n);f(b.n,b.p);delete m[a]}delete n[a];g--},removeAll:function(){n={};g=0;m={};p=k=null},destroy:function(){m=h=n=null;delete a[b]},info:function(){return z({},h,{size:g})}}}var a={};b.info=function(){var b={};q(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function ze(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function gc(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,
f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,g=ld("ngSrc,ngSrcset,src,srcset"),h=/^(on[a-z]+|formaction)$/;this.directive=function l(a,e){Ca(a,"directive");v(a)?(Db(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];q(c[a],function(c,f){try{var g=b.invoke(c);P(g)?g={compile:da(g)}:!g.compile&&g.link&&(g.compile=da(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||
"A";e.push(g)}catch(h){d(h)}});return e}])),c[a].push(e)):q(a,Xb(l));return this};this.aHrefSanitizationWhitelist=function(b){return E(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return E(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",
function(a,b,p,k,t,s,I,y,F,B,u,x){function X(a,b,c,d,e){a instanceof D||(a=D(a));q(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=D(b).wrap("<span></span>").parent()[0])});var f=T(a,b,a,c,d,e);N(a,"ng-scope");return function(b,c,d,e){Db(b,"scope");var g=c?Ha.clone.call(a):a;q(d,function(a,b){g.data("$"+b+"Controller",a)});d=0;for(var h=g.length;d<h;d++){var k=g[d].nodeType;1!==k&&9!==k||g.eq(d).data("$scope",b)}c&&c(g,b);f&&f(b,g,g,e);return g}}function N(a,b){try{a.addClass(b)}catch(c){}}
function T(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,p,t,F;f=c.length;var s=Array(f);for(p=0;p<f;p++)s[p]=c[p];F=p=0;for(t=h.length;p<t;F++)k=s[F],c=h[p++],f=h[p++],l=D(k),c?(c.scope?(m=a.$new(),l.data("$scope",m)):m=a,l=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?O(a,b):null,c(f,m,k,d,l)):f&&f(a,k.childNodes,r,e)}for(var h=[],k,l,m,p,t=0;t<a.length;t++)k=new Kb,l=V(a[t],[],k,0===t?d:r,e),(f=l.length?J(l,a[t],k,b,c,null,[],[],f):null)&&f.scope&&N(D(a[t]),"ng-scope"),
k=f&&f.terminal||!(m=a[t].childNodes)||!m.length?null:T(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),h.push(f,k),p=p||f||k,f=null;return p?g:null}function O(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function V(a,b,c,d,g){var h=c.$attr,k;switch(a.nodeType){case 1:ua(b,pa(na(a)),"E",d,g);for(var l,m,p,t=a.attributes,F=0,s=t&&t.length;F<s;F++){var I=!1,B=!1;l=t[F];if(!W||
8<=W||l.specified){k=l.name;m=aa(l.value);l=pa(k);if(p=Da.test(l))k=hb(l.substr(6),"-");var y=l.replace(/(Start|End)$/,"");l===y+"Start"&&(I=k,B=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6));l=pa(k.toLowerCase());h[l]=k;if(p||!c.hasOwnProperty(l))c[l]=m,vc(a,l)&&(c[l]=!0);Z(a,b,m,l);ua(b,l,"A",d,g,I,B)}}a=a.className;if(v(a)&&""!==a)for(;k=f.exec(a);)l=pa(k[2]),ua(b,l,"C",d,g)&&(c[l]=aa(k[3])),a=a.substr(k.index+k[0].length);break;case 3:G(b,a.nodeValue);break;case 8:try{if(k=e.exec(a.nodeValue))l=
pa(k[1]),ua(b,l,"M",d,g)&&(c[l]=aa(k[2]))}catch(u){}}b.sort(w);return b}function C(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ia("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return D(d)}function $(a,b,c){return function(d,e,f,g,h){e=C(e[0],b,c);return a(d,e,f,g,h)}}function J(a,c,d,e,f,g,h,k,l){function t(a,b,c,d){if(a){c&&(a=$(a,c,d));a.require=H.require;a.directiveName=z;if(x===
H||H.$$isolateScope)a=Bc(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=$(b,c,d));b.require=H.require;b.directiveName=z;if(x===H||H.$$isolateScope)b=Bc(b,{isolateScope:!0});k.push(b)}}function F(a,b,c,d){var e,f="data",g=!1;if(v(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ia("ctreq",b,a);}else L(b)&&(e=[],q(b,function(b){e.push(F(a,b,c,d))}));return e}function B(a,e,f,g,l){function t(a,
b){var c;2>arguments.length&&(b=a,a=r);w&&(c=V);return l(a,b,c)}var y,u,Ac,C,X,J,V={},$;y=c===f?d:ka(d,new Kb(D(f),d.$attr));u=y.$$element;if(x){var Se=/^\s*([@=&])(\??)\s*(\w*)\s*$/;g=D(f);J=e.$new(!0);!T||T!==x&&T!==x.$$originalDirective?g.data("$isolateScopeNoTemplate",J):g.data("$isolateScope",J);N(g,"ng-isolate-scope");q(x.scope,function(a,c){var d=a.match(Se)||[],f=d[3]||c,g="?"==d[2],d=d[1],h,k,l,p;J.$$isolateBindings[c]=d+f;switch(d){case "@":y.$observe(f,function(a){J[c]=a});y.$$observers[f].$$scope=
e;y[f]&&(J[c]=b(y[f])(e));break;case "=":if(g&&!y[f])break;k=s(y[f]);p=k.literal?Aa:function(a,b){return a===b};l=k.assign||function(){h=J[c]=k(e);throw ia("nonassign",y[f],x.name);};h=J[c]=k(e);J.$watch(function Te(){var a=k(e);p(a,J[c])||(p(a,h)?l(e,a=J[c]):J[c]=a);Te.$$unwatch=k.$$unwatch;return h=a},null,k.literal);break;case "&":k=s(y[f]);J[c]=function(a){return k(e,a)};break;default:throw ia("iscp",x.name,c,a);}})}$=l&&t;O&&q(O,function(a){var b={$scope:a===x||a.$$isolateScope?J:e,$element:u,
$attrs:y,$transclude:$},c;X=a.controller;"@"==X&&(X=y[a.name]);c=I(X,b);V[a.name]=c;w||u.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(Ac=h.length;g<Ac;g++)try{C=h[g],C(C.isolateScope?J:e,u,y,C.require&&F(C.directiveName,C.require,u,V),$)}catch(oa){p(oa,ha(u))}g=e;x&&(x.template||null===x.templateUrl)&&(g=J);a&&a(g,f.childNodes,r,l);for(g=k.length-1;0<=g;g--)try{C=k[g],C(C.isolateScope?J:e,u,y,C.require&&F(C.directiveName,C.require,u,V),$)}catch(R){p(R,ha(u))}}
l=l||{};for(var y=-Number.MAX_VALUE,u,O=l.controllerDirectives,x=l.newIsolateScopeDirective,T=l.templateDirective,J=l.nonTlbTranscludeDirective,ua=!1,Ya=!1,w=l.hasElementTranscludeDirective,Z=d.$$element=D(c),H,z,R,K=e,G,M=0,Q=a.length;M<Q;M++){H=a[M];var Da=H.$$start,ob=H.$$end;Da&&(Z=C(c,Da,ob));R=r;if(y>H.priority)break;if(R=H.scope)H.templateUrl||(S(R)?(La("new/isolated scope",x||u,H,Z),x=H):La("new/isolated scope",x,H,Z)),u=u||H;z=H.name;!H.templateUrl&&H.controller&&(R=H.controller,O=O||{},
La("'"+z+"' controller",O[z],H,Z),O[z]=H);if(R=H.transclude)ua=!0,H.$$tlb||(La("transclusion",J,H,Z),J=H),"element"==R?(w=!0,y=H.priority,R=C(c,Da,ob),Z=d.$$element=D(U.createComment(" "+z+": "+d[z]+" ")),c=Z[0],pb(f,D(la.call(R,0)),c),K=X(R,e,y,g&&g.name,{nonTlbTranscludeDirective:J})):(R=D(Hb(c)).contents(),Z.empty(),K=X(R,e));if(H.template)if(Ya=!0,La("template",T,H,Z),T=H,R=P(H.template)?H.template(Z,d):H.template,R=Cc(R),H.replace){g=H;R=Fb.test(R)?D(Dc(H.type,aa(R))):[];c=R[0];if(1!=R.length||
1!==c.nodeType)throw ia("tplrt",z,"");pb(f,Z,c);Q={$attr:{}};R=V(c,[],Q);var W=a.splice(M+1,a.length-(M+1));x&&E(R);a=a.concat(R).concat(W);oa(d,Q);Q=a.length}else Z.html(R);if(H.templateUrl)Ya=!0,La("template",T,H,Z),T=H,H.replace&&(g=H),B=A(a.splice(M,a.length-M),Z,d,f,ua&&K,h,k,{controllerDirectives:O,newIsolateScopeDirective:x,templateDirective:T,nonTlbTranscludeDirective:J}),Q=a.length;else if(H.compile)try{G=H.compile(Z,d,K),P(G)?t(null,G,Da,ob):G&&t(G.pre,G.post,Da,ob)}catch(Y){p(Y,ha(Z))}H.terminal&&
(B.terminal=!0,y=Math.max(y,H.priority))}B.scope=u&&!0===u.scope;B.transcludeOnThisElement=ua;B.templateOnThisElement=Ya;B.transclude=K;l.hasElementTranscludeDirective=w;return B}function E(a){for(var b=0,c=a.length;b<c;b++)a[b]=Zb(a[b],{$$isolateScope:!0})}function ua(b,e,f,g,h,k,m){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var t;e=a.get(e+d);for(var F=0,s=e.length;F<s;F++)try{t=e[F],(g===r||g>t.priority)&&-1!=t.restrict.indexOf(f)&&(k&&(t=Zb(t,{$$start:k,$$end:m})),b.push(t),h=t)}catch(y){p(y)}}return h}
function oa(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;q(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,f){"class"==f?(N(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function A(a,b,c,d,e,f,g,h){var l=[],m,p,F=b[0],s=a.shift(),y=z({},s,{templateUrl:null,transclude:null,replace:null,
$$originalDirective:s}),u=P(s.templateUrl)?s.templateUrl(b,c):s.templateUrl,I=s.type;b.empty();k.get(B.getTrustedResourceUrl(u),{cache:t}).success(function(k){var t,B;k=Cc(k);if(s.replace){k=Fb.test(k)?D(Dc(I,aa(k))):[];t=k[0];if(1!=k.length||1!==t.nodeType)throw ia("tplrt",s.name,u);k={$attr:{}};pb(d,b,t);var x=V(t,[],k);S(s.scope)&&E(x);a=x.concat(a);oa(c,k)}else t=F,b.html(k);a.unshift(y);m=J(a,t,c,e,b,s,f,g,h);q(d,function(a,c){a==t&&(d[c]=b[0])});for(p=T(b[0].childNodes,e);l.length;){k=l.shift();
B=l.shift();var C=l.shift(),X=l.shift(),x=b[0];if(B!==F){var $=B.className;h.hasElementTranscludeDirective&&s.replace||(x=Hb(t));pb(C,D(B),x);N(D(x),$)}B=m.transcludeOnThisElement?O(k,m.transclude,X):X;m(p,k,x,d,B)}l=null}).error(function(a,b,c,d){throw ia("tpload",d.url);});return function(a,b,c,d,e){a=e;l?(l.push(b),l.push(c),l.push(d),l.push(a)):(m.transcludeOnThisElement&&(a=O(b,m.transclude,e)),m(p,b,c,d,a))}}function w(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?
-1:1:a.index-b.index}function La(a,b,c,d){if(b)throw ia("multidir",b.name,c.name,a,ha(d));}function G(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var e=a.parent().length;e&&N(a.parent(),"ng-binding");return function(a,f){var g=f.parent(),h=g.data("$binding")||[];d=b(c);h.push(d);g.data("$binding",h);e||N(g,"ng-binding");a.$watch(d,function(a){f[0].nodeValue=a})}}})}function Dc(a,b){a=K(a||"html");switch(a){case "svg":case "math":var c=U.createElement("div");c.innerHTML="<"+a+">"+
b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function Ya(a,b){if("srcdoc"==b)return B.HTML;var c=na(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return B.RESOURCE_URL}function Z(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"select"===na(a))throw ia("selmulti",ha(a));c.push({priority:100,compile:function(){return{pre:function(c,d,k){d=k.$$observers||(k.$$observers={});if(h.test(e))throw ia("nodomevents");if(f=b(k[e],!0,Ya(a,e),g[e]))k[e]=f(c),
(d[e]||(d[e]=[])).$$inter=!0,(k.$$observers&&k.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?k.$updateClass(a,b):k.$set(e,a)})}}}})}}function pb(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=U.createDocumentFragment();a.appendChild(d);c[D.expando]=d[D.expando];d=1;for(e=b.length;d<e;d++)f=b[d],D(f).remove(),a.appendChild(f),
delete b[d];b[0]=c;b.length=1}function Bc(a,b){return z(function(){return a.apply(null,arguments)},a,b)}var Kb=function(a,b){this.$$element=a;this.$attr=b||{}};Kb.prototype={$normalize:pa,$addClass:function(a){a&&0<a.length&&u.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&u.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Ec(a,b),d=Ec(b,a);0===c.length?u.removeClass(this.$$element,d):0===d.length?u.addClass(this.$$element,c):u.setClass(this.$$element,c,d)},$set:function(a,
b,c,d){var e=this.$$element[0],f=vc(e,a),g=Le(e,a),e=a;f?(this.$$element.prop(a,b),d=f):g&&(this[g]=b,e=g);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=hb(a,"-"));f=na(this.$$element);if("a"===f&&"href"===a||"img"===f&&"src"===a)this[a]=b=x(b,"src"===a);!1!==c&&(null===b||b===r?this.$$element.removeAttr(d):this.$$element.attr(d,b));(a=this.$$observers)&&q(a[e],function(a){try{a(b)}catch(c){p(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=
[]);e.push(b);y.$evalAsync(function(){e.$$inter||b(c[a])});return function(){Ga(e,b)}}};var M=b.startSymbol(),Q=b.endSymbol(),Cc="{{"==M||"}}"==Q?Ea:function(a){return a.replace(/\{\{/g,M).replace(/}}/g,Q)},Da=/^ngAttr[A-Z]/;return X}]}function pa(b){return Ua(b.replace(Ue,""))}function Ec(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(0<c.length?" ":"")+g}return c}function je(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;
this.register=function(a,d){Ca(a,"controller");S(a)?z(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,f){var g,h,n;v(e)&&(g=e.match(a),h=g[1],n=g[3],e=b.hasOwnProperty(h)?b[h]:fc(f.$scope,h,!0)||fc(d,h,!0),Sa(e,h,!0));g=c.instantiate(e,f,h);if(n){if(!f||"object"!==typeof f.$scope)throw G("$controller")("noscp",h||e.name,n);f.$scope[n]=g}return g}}]}function ke(){this.$get=["$window",function(b){return D(b.document)}]}function le(){this.$get=["$log",function(b){return function(a,
c){b.error.apply(b,arguments)}}]}function Fc(b){var a={},c,d,e;if(!b)return a;q(b.split("\n"),function(b){e=b.indexOf(":");c=K(aa(b.substr(0,e)));d=aa(b.substr(e+1));c&&(a[c]=a[c]?a[c]+(", "+d):d)});return a}function Gc(b){var a=S(b)?b:r;return function(c){a||(a=Fc(b));return c?a[K(c)]||null:a}}function Hc(b,a,c){if(P(c))return c(b,a);q(c,function(c){b=c(b,a)});return b}function oe(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults=
{transformResponse:[function(d){v(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=ac(d)));return d}],transformRequest:[function(a){return S(a)&&"[object File]"!==ya.call(a)&&"[object Blob]"!==ya.call(a)?sa(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ka(d),put:ka(d),patch:ka(d)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,m,p){function k(a){function b(a){var d=
z({},a,{data:Hc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:m.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){function b(a){var c;q(a,function(b,d){P(b)&&(c=b(),null!=c?a[d]=c:delete a[d])})}var c=e.headers,d=z({},a.headers),f,g,c=z({},c.common,c[K(a.method)]);b(c);b(d);a:for(f in c){a=K(f);for(g in d)if(K(g)===a)continue a;d[f]=c[f]}return d}(a);z(c,a);c.headers=d;c.method=ib(c.method);var f=[function(a){d=
a.headers;var c=Hc(a.data,Gc(d),a.transformRequest);w(a.data)&&q(d,function(a,b){"content-type"===K(b)&&delete d[b]});w(a.withCredentials)&&!w(e.withCredentials)&&(a.withCredentials=e.withCredentials);return t(a,c,d).then(b,b)},r],g=m.when(c);for(q(y,function(a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var h=f.shift(),g=g.then(a,h)}g.success=function(a){g.then(function(b){a(b.data,b.status,
b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function t(c,f,n){function t(a,b,c,e){V&&(200<=a&&300>a?V.put($,[a,b,Fc(c),e]):V.remove($));p(b,a,c,e);d.$$phase||d.$apply()}function p(a,b,d,e){b=Math.max(b,0);(200<=b&&300>b?q.resolve:q.reject)({data:a,status:b,headers:Gc(d),config:c,statusText:e})}function y(){var a=Pa(k.pendingRequests,c);-1!==a&&k.pendingRequests.splice(a,1)}var q=m.defer(),O=q.promise,V,C,$=s(c.url,c.params);
k.pendingRequests.push(c);O.then(y,y);(c.cache||e.cache)&&(!1!==c.cache&&"GET"==c.method)&&(V=S(c.cache)?c.cache:S(e.cache)?e.cache:I);if(V)if(C=V.get($),E(C)){if(C.then)return C.then(y,y),C;L(C)?p(C[1],C[0],ka(C[2]),C[3]):p(C,200,{},"OK")}else V.put($,O);w(C)&&((C=Lb(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:r)&&(n[c.xsrfHeaderName||e.xsrfHeaderName]=C),a(c.method,$,f,t,n,c.timeout,c.withCredentials,c.responseType));return O}function s(a,b){if(!b)return a;var c=[];id(b,function(a,b){null===
a||w(a)||(L(a)||(a=[a]),q(a,function(a){S(a)&&(a=sa(a));c.push(Ba(b)+"="+Ba(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var I=c("$http"),y=[];q(f,function(a){y.unshift(v(a)?p.get(a):p.invoke(a))});k.pendingRequests=[];(function(a){q(arguments,function(a){k[a]=function(b,c){return k(z(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){k[a]=function(b,c,d){return k(z(d||{},{method:a,url:b,data:c}))}})})("post","put","patch");
k.defaults=e;return k}]}function Ve(b){if(8>=W&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!M.XMLHttpRequest))return new M.ActiveXObject("Microsoft.XMLHTTP");if(M.XMLHttpRequest)return new M.XMLHttpRequest;throw G("$httpBackend")("noxhr");}function pe(){this.$get=["$browser","$window","$document",function(b,a,c){return We(b,Ve,b.defer,a.angular.callbacks,c[0])}]}function We(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),g=null;f.type="text/javascript";f.src=a;f.async=!0;g=function(a){Va(f,
"load",g);Va(f,"error",g);e.body.removeChild(f);f=null;var h=-1,s="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),s=a.type,h="error"===a.type?404:200);c&&c(h,s)};qb(f,"load",g);qb(f,"error",g);e.body.appendChild(f);return g}var g=-1;return function(e,n,l,m,p,k,t,s){function I(){F=g;u&&u();x&&x.abort()}function y(a,d,e,f,g){N&&c.cancel(N);u=x=null;0===d&&(d=e?200:"file"==va(n).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(A)}var F;b.$$incOutstandingRequestCount();
n=n||b.url();if("jsonp"==K(e)){var B="_"+(d.counter++).toString(36);d[B]=function(a){d[B].data=a;d[B].called=!0};var u=f(n.replace("JSON_CALLBACK","angular.callbacks."+B),B,function(a,b){y(m,a,d[B].data,"",b);d[B]=A})}else{var x=a(e);x.open(e,n,!0);q(p,function(a,b){E(a)&&x.setRequestHeader(b,a)});x.onreadystatechange=function(){if(x&&4==x.readyState){var a=null,b=null,c="";F!==g&&(a=x.getAllResponseHeaders(),b="response"in x?x.response:x.responseText);F===g&&10>W||(c=x.statusText);y(m,F||x.status,
b,a,c)}};t&&(x.withCredentials=!0);if(s)try{x.responseType=s}catch(X){if("json"!==s)throw X;}x.send(l||null)}if(0<k)var N=c(I,k);else k&&k.then&&k.then(I)}}function me(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,t,s){s=!!s;for(var I,y,F=0,B=[],u=[],x=[],X=f.length,N=!1,T=!1,O=[],V={},C={};F<X;)if(-1!=(I=f.indexOf(b,
F))&&-1!=(y=f.indexOf(a,I+h)))F!==I&&(T=!0),B.push(f.substring(F,I)),F=f.substring(I+h,y),u.push(F),x.push(c(F)),F=y+n,N=!0;else{F!==X&&(T=!0,B.push(f.substring(F)));break}q(B,function(c,d){B[d]=B[d].replace(l,b).replace(m,a)});B.length===u.length&&B.push("");if(t&&N&&(T||1<u.length))throw Ic("noconcat",f);if(!g||N){O.length=B.length+u.length;var $=function(a){for(var b=0,c=u.length;b<c;b++)O[2*b]=B[b],O[2*b+1]=a[b];O[2*c]=B[c];return O.join("")},J=function(a){return a=t?e.getTrusted(t,a):e.valueOf(a)},
D=function(a){if(null==a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=sa(a)}return a};return z(function oa(a){var b=a&&a.$id||"notAScope",c=V[b],e=C[b],g=0,h=u.length,k=Array(h),n,l=e===r?!0:!1;c||(c=[],l=!0,a&&a.$on&&a.$on("$destroy",function(){V[b]=null;C[b]=null}));try{for(oa.$$unwatch=!0;g<h;g++){n=J(x[g](a));if(s&&w(n)){oa.$$unwatch=r;return}n=D(n);n!==c[g]&&(l=!0);k[g]=n;oa.$$unwatch=oa.$$unwatch&&x[g].$$unwatch}l&&(V[b]=k,C[b]=e=$(k))}catch(t){a=Ic("interr",
f,t.toString()),d(a)}return e},{exp:f,separators:B,expressions:u})}}var h=b.length,n=a.length,l=RegExp(b.replace(/./g,f),"g"),m=RegExp(a.replace(/./g,f),"g");g.startSymbol=function(){return b};g.endSymbol=function(){return a};return g}]}function ne(){this.$get=["$rootScope","$window","$q","$$q",function(b,a,c,d){function e(e,h,n,l){var m=a.setInterval,p=a.clearInterval,k=0,t=E(l)&&!l,s=(t?d:c).defer(),I=s.promise;n=E(n)?n:0;I.then(null,null,e);I.$$intervalId=m(function(){s.notify(k++);0<n&&k>=n&&
(s.resolve(k),p(I.$$intervalId),delete f[I.$$intervalId]);t||b.$apply()},h);f[I.$$intervalId]=s;return I}var f={};e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1};return e}]}function vd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,
posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",
longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Mb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=gb(b[a]);return b.join("/")}function Jc(b,a,c){b=va(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=Y(b.port)||Xe[b.protocol]||null}function Kc(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=va(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):
b.pathname);a.$$search=cc(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function qa(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Za(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Nb(b){return b.substr(0,Za(b).lastIndexOf("/")+1)}function Lc(b,a){this.$$html5=!0;a=a||"";var c=Nb(b);Jc(b,this,b);this.$$parse=function(a){var e=qa(c,a);if(!v(e))throw Ob("ipthprfx",a,c);Kc(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};
this.$$compose=function(){var a=Bb(this.$$search),b=this.$$hash?"#"+gb(this.$$hash):"";this.$$url=Mb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;if((e=qa(b,d))!==r)return d=e,(e=qa(a,e))!==r?c+(qa("/",e)||e):b+d;if((e=qa(c,d))!==r)return c+e;if(c==d+"/")return c}}function Pb(b,a){var c=Nb(b);Jc(b,this,b);this.$$parse=function(d){var e=qa(b,d)||qa(c,d),e="#"==e.charAt(0)?qa(a,e):this.$$html5?e:"";if(!v(e))throw Ob("ihshprfx",d,a);Kc(e,this,b);
d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Bb(this.$$search),e=this.$$hash?"#"+gb(this.$$hash):"";this.$$url=Mb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(Za(b)==Za(a))return a}}function Qb(b,a){this.$$html5=!0;Pb.apply(this,arguments);var c=Nb(b);this.$$rewrite=function(d){var e;if(b==Za(d))return d;if(e=
qa(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Bb(this.$$search),e=this.$$hash?"#"+gb(this.$$hash):"";this.$$url=Mb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function rb(b){return function(){return this[b]}}function Mc(b,a){return function(c){if(w(c))return this[b];this[b]=a(c);this.$$compose();return this}}function qe(){var b="",a=!1;this.hashPrefix=function(a){return E(a)?(b=a,this):b};this.html5Mode=function(b){return E(b)?(a=b,this):a};this.$get=["$rootScope",
"$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a){c.$broadcast("$locationChangeSuccess",h.absUrl(),a)}var h,n,l=d.baseHref(),m=d.url(),p;a?(p=m.substring(0,m.indexOf("/",m.indexOf("//")+2))+(l||"/"),n=e.history?Lc:Qb):(p=Za(m),n=Pb);h=new n(p,"#"+b);h.$$parse(h.$$rewrite(m));f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=D(a.target);"a"!==na(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href");S(g)&&"[object SVGAnimatedString]"===g.toString()&&
(g=va(g.animVal).href);if(n===Qb){var k=e.attr("href")||e.attr("xlink:href");if(0>k.indexOf("://"))if(g="#"+b,"/"==k[0])g=p+g+k;else if("#"==k[0])g=p+g+(h.path()||"/")+k;else{for(var l=h.path().split("/"),k=k.split("/"),m=0;m<k.length;m++)"."!=k[m]&&(".."==k[m]?l.pop():k[m].length&&l.push(k[m]));g=p+g+l.join("/")}}l=h.$$rewrite(g);g&&(!e.attr("target")&&l&&!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(h.$$parse(l),c.$apply(),M.angular["ff-684208-preventDefault"]=!0))}});h.absUrl()!=m&&
d.url(h.absUrl(),!0);d.onUrlChange(function(a){h.absUrl()!=a&&(c.$evalAsync(function(){var b=h.absUrl();h.$$parse(a);c.$broadcast("$locationChangeStart",a,b).defaultPrevented?(h.$$parse(b),d.url(b)):g(b)}),c.$$phase||c.$digest())});var k=0;c.$watch(function(){var a=d.url(),b=h.$$replace;k&&a==h.absUrl()||(k++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",h.absUrl(),a).defaultPrevented?h.$$parse(a):(d.url(h.absUrl(),b),g(a))}));h.$$replace=!1;return k});return h}]}function re(){var b=
!0,a=this;this.debugEnabled=function(a){return E(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||A;a=!1;try{a=!!e.apply}catch(n){}return a?function(){var a=[];q(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),
info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ea(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw ja("isecfld",a);return b}function Ma(b,a){if(b){if(b.constructor===b)throw ja("isecfn",a);if(b.window===b)throw ja("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw ja("isecdom",a);if(b===Object)throw ja("isecobj",
a);}return b}function sb(b,a,c,d){a=a.split(".");for(var e,f=0;1<a.length;f++){e=ea(a.shift(),d);var g=b[e];g||(g={},b[e]=g);b=g}e=ea(a.shift(),d);Ma(b,d);Ma(b[e],d);return b[e]=c}function Nc(b,a,c,d,e,f){ea(b,f);ea(a,f);ea(c,f);ea(d,f);ea(e,f);return function(f,h){var n=h&&h.hasOwnProperty(b)?h:f;if(null==n)return n;n=n[b];if(!a)return n;if(null==n)return r;n=n[a];if(!c)return n;if(null==n)return r;n=n[c];if(!d)return n;if(null==n)return r;n=n[d];return e?null==n?r:n=n[e]:n}}function Ye(b,a){ea(b,
a);return function(a,d){return null==a?r:(d&&d.hasOwnProperty(b)?d:a)[b]}}function Ze(b,a,c){ea(b,c);ea(a,c);return function(c,e){if(null==c)return r;c=(e&&e.hasOwnProperty(b)?e:c)[b];return null==c?r:c[a]}}function Oc(b,a,c){if(Rb.hasOwnProperty(b))return Rb[b];var d=b.split("."),e=d.length;if(1===e)a=Ye(d[0],c);else if(2===e)a=Ze(d[0],d[1],c);else if(a.csp)a=6>e?Nc(d[0],d[1],d[2],d[3],d[4],c):function(a,b){var f=0,l;do l=Nc(d[f++],d[f++],d[f++],d[f++],d[f++],c)(a,b),b=r,a=l;while(f<e);return l};
else{var f="var p;\n";q(d,function(a,b){ea(a,c);f+="if(s == null) return undefined;\ns="+(b?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'});f+="return s;";a=new Function("s","k",f);a.toString=da(f)}"hasOwnProperty"!==b&&(Rb[b]=a);return a}function se(){var b={},a={csp:!1};this.$get=["$filter","$sniffer",function(c,d){a.csp=d.csp;return function(d){function f(a){function b(e,f){c||(d=a.constant&&d?d:a(e,f),b.$$unwatch=E(d),b.$$unwatch&&(e&&e.$$postDigestQueue)&&e.$$postDigestQueue.push(function(){!(c=
E(d))||null!==d&&d.$$unwrapTrustedValue||(d=za(d,null))}));return d}var c=!1,d;b.literal=a.literal;b.constant=a.constant;b.assign=a.assign;return b}var g,h;switch(typeof d){case "string":d=aa(d);":"===d.charAt(0)&&":"===d.charAt(1)&&(h=!0,d=d.substring(2));if(b.hasOwnProperty(d))return h?f(b[d]):b[d];g=new Sb(a);g=(new $a(g,c,a)).parse(d);"hasOwnProperty"!==d&&(b[d]=g);return h||g.constant?f(g):g;case "function":return d;default:return A}}}]}function ue(){this.$get=["$rootScope","$exceptionHandler",
function(b,a){return Pc(function(a){b.$evalAsync(a)},a)}]}function ve(){this.$get=["$browser","$exceptionHandler",function(b,a){return Pc(function(a){b.defer(a)},a)}]}function Pc(b,a){function c(a){return a}function d(a){return g(a)}var e=function(){var g=[],l,m;return m={resolve:function(a){if(g){var c=g;g=r;l=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],l.then(a[0],a[1],a[2])})}},reject:function(a){m.resolve(h(a))},notify:function(a){if(g){var c=g;g.length&&b(function(){for(var b,
d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,h){var m=e(),I=function(d){try{m.resolve((P(b)?b:c)(d))}catch(e){m.reject(e),a(e)}},y=function(b){try{m.resolve((P(f)?f:d)(b))}catch(c){m.reject(c),a(c)}},F=function(b){try{m.notify((P(h)?h:c)(b))}catch(d){a(d)}};g?g.push([I,y,F]):l.then(I,y,F);return m.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):d.reject(a);return d.promise}function d(e,f){var g=null;try{g=
(a||c)()}catch(h){return b(h,!1)}return g&&P(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&P(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},g=function(a){var b=e();b.reject(a);return b.promise},h=function(c){return{then:function(f,g){var h=e();b(function(){try{h.resolve((P(g)?g:d)(c))}catch(b){h.reject(b),a(b)}});return h.promise}}};
return{defer:e,reject:g,when:function(h,l,m,p){var k=e(),t,s=function(b){try{return(P(l)?l:c)(b)}catch(d){return a(d),g(d)}},I=function(b){try{return(P(m)?m:d)(b)}catch(c){return a(c),g(c)}},y=function(b){try{return(P(p)?p:c)(b)}catch(d){a(d)}};b(function(){f(h).then(function(a){t||(t=!0,k.resolve(f(a).then(s,I,y)))},function(a){t||(t=!0,k.resolve(I(a)))},function(a){t||k.notify(y(a))})});return k.promise},all:function(a){var b=e(),c=0,d=L(a)?[]:{};q(a,function(a,e){c++;f(a).then(function(a){d.hasOwnProperty(e)||
(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function Ce(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};
f.supported=e;return f}]}function te(){var b=10,a=G("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,g){function h(){this.$id=++eb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=[];this.$$listeners={};this.$$listenerCount={};
this.$$isolateBindings={}}function n(b){if(k.$$phase)throw a("inprog",k.$$phase);k.$$phase=b}function l(a,b){var c=f(a);Sa(c,b);return c}function m(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function p(){}h.prototype={constructor:h,$new:function(a){a?(a=new h,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=
this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=++eb;this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d){var e=l(a,"watch"),f=this.$$watchers,g={fn:b,last:p,get:e,exp:a,eq:!!d};c=null;if(!P(b)){var h=l(b||A,"listener");
g.fn=function(a,b,c){h(c)}}f||(f=this.$$watchers=[]);f.unshift(g);return function(){Ga(f,g);c=null}},$watchGroup:function(a,b){function c(){return h}var d=Array(a.length),e=Array(a.length),g=[],h=0,k=this,l=Array(a.length),n=a.length;q(a,function(a,b){var c=f(a);g.push(k.$watch(c,function(a,f){e[b]=a;d[b]=f;h++;l[b]&&!c.$$unwatch&&n++;!l[b]&&c.$$unwatch&&n--;l[b]=c.$$unwatch}))},this);g.push(k.$watch(c,function(){b(e,d,k);c.$$unwatch=0===n?!0:!1}));return function(){q(g,function(a){a()})}},$watchCollection:function(a,
b){function c(){e=n(d);var a,b;if(S(e))if(db(e))for(g!==m&&(g=m,C=g.length=0,l++),a=e.length,C!==a&&(l++,g.length=C=a),b=0;b<a;b++)g[b]!==g[b]&&e[b]!==e[b]||g[b]===e[b]||(l++,g[b]=e[b]);else{g!==p&&(g=p={},C=0,l++);a=0;for(b in e)e.hasOwnProperty(b)&&(a++,g.hasOwnProperty(b)?g[b]!==e[b]&&(l++,g[b]=e[b]):(C++,g[b]=e[b],l++));if(C>a)for(b in l++,g)g.hasOwnProperty(b)&&!e.hasOwnProperty(b)&&(C--,delete g[b])}else g!==e&&(g=e,l++);c.$$unwatch=n.$$unwatch;return l}var d=this,e,g,h,k=1<b.length,l=0,n=f(a),
m=[],p={},q=!0,C=0;return this.$watch(c,function(){q?(q=!1,b(e,e,d)):b(e,h,d);if(k)if(S(e))if(db(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)Qc.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var d,f,g,h,l=this.$$asyncQueue,m=this.$$postDigestQueue,u,q,r=b,N,T=[],O=[],D,C,E;n("$digest");c=null;do{q=!1;for(N=this;l.length;){try{E=l.shift(),E.scope.$eval(E.expression)}catch(J){k.$$phase=null,e(J)}c=null}a:do{if(h=N.$$watchers)for(u=h.length;u--;)try{if(d=h[u])if((f=
d.get(N))!==(g=d.last)&&!(d.eq?Aa(f,g):"number"===typeof f&&"number"===typeof g&&isNaN(f)&&isNaN(g)))q=!0,c=d,d.last=d.eq?za(f,null):f,d.fn(f,g===p?f:g,N),5>r&&(D=4-r,T[D]||(T[D]=[]),C=P(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,C+="; newVal: "+sa(f)+"; oldVal: "+sa(g),T[D].push(C)),d.get.$$unwatch&&O.push({watch:d,array:h});else if(d===c){q=!1;break a}}catch(v){k.$$phase=null,e(v)}if(!(u=N.$$childHead||N!==this&&N.$$nextSibling))for(;N!==this&&!(u=N.$$nextSibling);)N=N.$parent}while(N=u);
if((q||l.length)&&!r--)throw k.$$phase=null,a("infdig",b,sa(T));}while(q||l.length);for(k.$$phase=null;m.length;)try{m.shift()()}catch(z){e(z)}for(u=O.length-1;0<=u;--u)d=O[u],d.watch.get.$$unwatch&&Ga(d.array,d.watch)},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==k&&(q(this.$$listenerCount,Ab(null,m,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&
(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=A,this.$on=this.$watch=this.$watchGroup=function(){return A})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){k.$$phase||k.$$asyncQueue.length||
g.defer(function(){k.$$asyncQueue.length&&k.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return n("$apply"),this.$eval(a)}catch(b){e(b)}finally{k.$$phase=null;try{k.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Pa(c,
b)]=null;m(e,1,a)}},$emit:function(a,b){var c=[],d,f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=[h].concat(la.call(arguments,1)),l,n;do{d=f.$$listeners[a]||c;h.currentScope=f;l=0;for(n=d.length;l<n;l++)if(d[l])try{d[l].apply(null,k)}catch(m){e(m)}else d.splice(l,1),l--,n--;if(g)return h.currentScope=null,h;f=f.$parent}while(f);h.currentScope=null;return h},$broadcast:function(a,b){for(var c=this,d=this,
f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(la.call(arguments,1)),h,k;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){e(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}f.currentScope=null;return f}};var k=new h;return k}]}function wd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,
a=/^\s*(https?|ftp|file|blob):|data:image\//;this.aHrefSanitizationWhitelist=function(a){return E(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return E(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!W||8<=W)if(f=va(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function $e(b){if("self"===b)return b;if(v(b)){if(-1<b.indexOf("***"))throw wa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",
".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(fb(b))return RegExp("^"+b.source+"$");throw wa("imatcher");}function Rc(b){var a=[];E(b)&&q(b,function(b){a.push($e(b))});return a}function xe(){this.SCE_CONTEXTS=ga;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Rc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Rc(b));return a};this.$get=["$injector",function(c){function d(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};
a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw wa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),g={};g[ga.HTML]=d(f);g[ga.CSS]=d(f);g[ga.URL]=d(f);g[ga.JS]=d(f);g[ga.RESOURCE_URL]=d(g[ga.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw wa("icontext",a,b);if(null===b||b===r||""===b)return b;if("string"!==
typeof b)throw wa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===r||""===d)return d;var f=g.hasOwnProperty(c)?g[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ga.RESOURCE_URL){var f=va(d.toString()),m,p,k=!1;m=0;for(p=b.length;m<p;m++)if("self"===b[m]?Lb(f):b[m].exec(f.href)){k=!0;break}if(k)for(m=0,p=a.length;m<p;m++)if("self"===a[m]?Lb(f):a[m].exec(f.href)){k=!1;break}if(k)return d;throw wa("insecurl",d.toString());}if(c===ga.HTML)return e(d);throw wa("unsafe");
},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function we(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw wa("iequirks");var e=ka(ga);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=Ea);e.parseAs=function(b,c){var d=a(c);return d.literal&&
d.constant?d:function k(a,c){var f=e.getTrusted(b,d(a,c));k.$$unwatch=d.$$unwatch;return f}};var f=e.parseAs,g=e.getTrusted,h=e.trustAs;q(ga,function(a,b){var c=K(b);e[Ua("parse_as_"+c)]=function(b){return f(a,b)};e[Ua("get_trusted_"+c)]=function(b){return g(a,b)};e[Ua("trust_as_"+c)]=function(b){return h(a,b)}});return e}]}function ye(){this.$get=["$window","$document",function(b,a){var c={},d=Y((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),
f=a[0]||{},g=f.documentMode,h,n=/^(Moz|webkit|O|ms)(?=[A-Z])/,l=f.body&&f.body.style,m=!1,p=!1;if(l){for(var k in l)if(m=n.exec(k)){h=m[0];h=h.substr(0,1).toUpperCase()+h.substr(1);break}h||(h="WebkitOpacity"in l&&"webkit");m=!!("transition"in l||h+"Transition"in l);p=!!("animation"in l||h+"Animation"in l);!d||m&&p||(m=v(f.body.style.webkitTransition),p=v(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!g||7<g),hasEvent:function(a){if("input"==
a&&9==W)return!1;if(w(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:$b(),vendorPrefix:h,transitions:m,animations:p,android:d,msie:W,msieDocumentMode:g}}]}function Ae(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,n,l){var m=E(l)&&!l,p=(m?d:c).defer(),k=p.promise;n=a.defer(function(){try{p.resolve(f())}catch(a){p.reject(a),e(a)}finally{delete g[k.$$timeoutId]}m||b.$apply()},n);k.$$timeoutId=n;g[n]=p;return k}var g={};f.cancel=
function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return f}]}function va(b,a){var c=b;W&&(ba.setAttribute("href",c),c=ba.href);ba.setAttribute("href",c);return{href:ba.href,protocol:ba.protocol?ba.protocol.replace(/:$/,""):"",host:ba.host,search:ba.search?ba.search.replace(/^\?/,""):"",hash:ba.hash?ba.hash.replace(/^#/,""):"",hostname:ba.hostname,port:ba.port,pathname:"/"===ba.pathname.charAt(0)?ba.pathname:"/"+
ba.pathname}}function Lb(b){b=v(b)?va(b):b;return b.protocol===Sc.protocol&&b.host===Sc.host}function Be(){this.$get=da(M)}function nc(b){function a(d,e){if(S(d)){var f={};q(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Tc);a("date",Uc);a("filter",af);a("json",bf);a("limitTo",cf);a("lowercase",df);a("number",Vc);a("orderBy",Wc);a("uppercase",ef)}function af(){return function(b,
a,c){if(!L(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return Ra.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&Qc.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,
b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(g);break;case "function":e.push(a);break;default:return b}d=[];for(g=0;g<b.length;g++){var h=
b[g];e.check(h)&&d.push(h)}return d}}function Tc(b){var a=b.NUMBER_FORMATS;return function(b,d){w(d)&&(d=a.CURRENCY_SYM);return Xc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Vc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Xc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Xc(b,a,c,d,e){if(null==b||!isFinite(b)||S(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",h="",n=[],l=!1;if(-1!==g.indexOf("e")){var m=g.match(/([\d\.]+)e(-?)(\d+)/);m&&"-"==m[2]&&
m[3]>e+1?(g="0",b=0):(h=g,l=!0)}if(l)0<e&&(-1<b&&1>b)&&(h=b.toFixed(e));else{g=(g.split(Yc)[1]||"").length;w(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);b=(""+b).split(Yc);g=b[0];b=b[1]||"";var m=0,p=a.lgSize,k=a.gSize;if(g.length>=p+k)for(m=g.length-p,l=0;l<m;l++)0===(m-l)%k&&0!==l&&(h+=c),h+=g.charAt(l);for(l=m;l<g.length;l++)0===(g.length-l)%p&&0!==l&&(h+=c),h+=g.charAt(l);for(;b.length<e;)b+="0";e&&"0"!==e&&(h+=d+b.substr(0,e))}n.push(f?
a.negPre:a.posPre);n.push(h);n.push(f?a.negSuf:a.posSuf);return n.join("")}function tb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function ca(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return tb(e,a,d)}}function ub(b,a){return function(c,d){var e=c["get"+b](),f=ib(a?"SHORT"+b:b);return d[f][e]}}function Zc(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function $c(b){return function(a){var c=
Zc(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-+c;a=1+Math.round(a/6048E5);return tb(a,b)}}function Uc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,n=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Y(b[9]+b[10]),g=Y(b[9]+b[11]));h.call(a,Y(b[1]),Y(b[2])-1,Y(b[3]));f=Y(b[4]||0)-f;g=Y(b[5]||0)-g;h=Y(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));n.call(a,f,g,h,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,e){var f="",g=[],h,n;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;v(c)&&(c=ff.test(c)?Y(c):a(c));Fa(c)&&(c=new Date(c));if(!ra(c))return c;for(;e;)(n=gf.exec(e))?(g=g.concat(la.call(n,1)),e=g.pop()):(g.push(e),e=null);q(g,function(a){h=hf[a];f+=h?h(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function bf(){return function(b){return sa(b,!0)}}function cf(){return function(b,a){if(!L(b)&&!v(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):Y(a);
if(v(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Wc(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?("string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!L(a)||!c)return a;c=L(c)?c:[c];c=md(c,function(a){var c=!1,d=a||Ea;if(v(a)){if("+"==
a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var g=[],h=0;h<a.length;h++)g.push(a[h]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function xa(b){P(b)&&(b={link:b});b.restrict=b.restrict||"AC";return da(b)}function ad(b,a,c,d){function e(a,c){c=c?"-"+hb(c,"-"):"";d.removeClass(b,(a?vb:
wb)+c);d.addClass(b,(a?wb:vb)+c)}var f=this,g=b.parent().controller("form")||xb,h=0,n=f.$error={},l=[];f.$name=a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;g.$addControl(f);b.addClass(Na);e(!0);f.$commitViewValue=function(){q(l,function(a){a.$commitViewValue()})};f.$addControl=function(a){Ca(a.$name,"input");l.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];q(n,function(b,c){f.$setValidity(c,!0,a)});Ga(l,a)};f.$setValidity=
function(a,b,c){var d=n[a];if(b)d&&(Ga(d,c),d.length||(h--,h||(e(b),f.$valid=!0,f.$invalid=!1),n[a]=!1,e(!0,a),g.$setValidity(a,!0,f)));else{h||e(b);if(d){if(-1!=Pa(d,c))return}else n[a]=d=[],h++,e(!1,a),g.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Na);d.addClass(b,yb);f.$dirty=!0;f.$pristine=!1;g.$setDirty()};f.$setPristine=function(){d.removeClass(b,yb);d.addClass(b,Na);f.$dirty=!1;f.$pristine=!0;q(l,function(a){a.$setPristine()})}}function Tb(b,
a,c,d){b.$setValidity(a,c);return c?d:r}function bd(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function jf(b,a,c,d,e){S(e)&&(b.$$hasNativeValidators=!0,b.$parsers.push(function(f){if(b.$error[a]||bd(e,d)||!bd(e,c))return f;b.$setValidity(a,!1)}))}function ab(b,a,c,d,e,f){var g=a.prop(kf),h=a[0].placeholder,n={};d.$$validityState=g;if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;m()})}var m=function(e){if(!l){var f=
a.val(),k=e&&e.type;if(W&&"input"===(e||n).type&&a[0].placeholder!==h)h=a[0].placeholder;else{c.ngTrim&&"false"===c.ngTrim||(f=aa(f));var m=g&&d.$$hasNativeValidators;if(d.$viewValue!==f||""===f&&m)b.$$phase?d.$setViewValue(f,k,m):b.$apply(function(){d.$setViewValue(f,k,m)})}}};if(e.hasEvent("input"))a.on("input",m);else{var p,k=function(a){p||(p=f.defer(function(){m(a);p=null}))};a.on("keydown",function(a){var b=a.keyCode;91===b||(15<b&&19>b||37<=b&&40>=b)||k(a)});if(e.hasEvent("paste"))a.on("paste cut",
k)}a.on("change",m);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function zb(b,a){return function(c){var d;return ra(c)?c:v(c)&&(b.lastIndex=0,c=b.exec(c))?(c.shift(),d={yyyy:0,MM:1,dd:1,HH:0,mm:0},q(c,function(b,c){c<a.length&&(d[a[c]]=+b)}),new Date(d.yyyy,d.MM-1,d.dd,d.HH,d.mm)):NaN}}function bb(b,a,c,d){return function(e,f,g,h,n,l,m){ab(e,f,g,h,n,l);h.$parsers.push(function(d){if(h.$isEmpty(d))return h.$setValidity(b,!0),null;if(a.test(d))return h.$setValidity(b,!0),c(d);
h.$setValidity(b,!1);return r});h.$formatters.push(function(a){return ra(a)?m("date")(a,d):""});g.min&&(e=function(a){var b=h.$isEmpty(a)||c(a)>=c(g.min);h.$setValidity("min",b);return b?a:r},h.$parsers.push(e),h.$formatters.push(e));g.max&&(e=function(a){var b=h.$isEmpty(a)||c(a)<=c(g.max);h.$setValidity("max",b);return b?a:r},h.$parsers.push(e),h.$formatters.push(e))}}function Ub(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],
m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){if(!L(a)){if(v(a))return a.split(" ");if(S(a)){var b=[];q(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,h){function n(a,b){var c=g.data("$classCounts")||{},d=[];q(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function l(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!m){var l=n(k,1);h.$addClass(l)}else if(!Aa(b,
m)){var q=e(m),l=d(k,q),k=d(q,k),k=n(k,-1),l=n(l,1);0===l.length?c.removeClass(g,k):0===k.length?c.addClass(g,l):c.setClass(g,l,k)}}m=ka(b)}var m;f.$watch(h[b],l,!0);h.$observe("class",function(a){l(f.$eval(h[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var l=e(f.$eval(h[b]));g===a?(g=n(l,1),h.$addClass(g)):(g=n(l,-1),h.$removeClass(g))}})}}}]}var lf=/^\/(.+)\/([a-z]*)$/,kf="validity",K=function(b){return v(b)?b.toLowerCase():b},Qc=Object.prototype.hasOwnProperty,
ib=function(b){return v(b)?b.toUpperCase():b},W,D,ta,la=[].slice,sc=[].push,ya=Object.prototype.toString,Qa=G("ng"),Ra=M.angular||(M.angular={}),Ta,na,eb=0;W=Y((/msie (\d+)/.exec(K(navigator.userAgent))||[])[1]);isNaN(W)&&(W=Y((/trident\/.*; rv:(\d+)/.exec(K(navigator.userAgent))||[])[1]));A.$inject=[];Ea.$inject=[];var L=function(){return P(Array.isArray)?Array.isArray:function(b){return"[object Array]"===ya.call(b)}}(),aa=function(){return String.prototype.trim?function(b){return v(b)?b.trim():
b}:function(b){return v(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();na=9>W?function(b){b=b.nodeName?b:b[0];return K(b.scopeName&&"HTML"!=b.scopeName?b.scopeName+":"+b.nodeName:b.nodeName)}:function(b){return K(b.nodeName?b.nodeName:b[0].nodeName)};var dc=["ng-","data-ng-","ng:","x-ng-"],qd=/[A-Z]/g,ud={full:"1.3.0-beta.14",major:1,minor:3,dot:0,codeName:"harmonious-cacophonies"};Q.expando="ng339";var Wa=Q.cache={},Ke=1,qb=M.document.addEventListener?function(b,a,c){b.addEventListener(a,c,
!1)}:function(b,a,c){b.attachEvent("on"+a,c)},Va=M.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};Q._data=function(b){return this.cache[b[this.expando]]||{}};var Ee=/([\:\-\_]+(.))/g,Fe=/^moz([A-Z])/,Gb=G("jqLite"),Je=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Fb=/<|&#?\w+;/,He=/<([\w:]+)/,Ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,fa={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>",
"</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};fa.optgroup=fa.option;fa.tbody=fa.tfoot=fa.colgroup=fa.caption=fa.thead;fa.th=fa.td;var Ha=Q.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===U.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),Q(M).on("load",a))},toString:function(){var b=[];q(this,function(a){b.push(""+a)});return"["+b.join(", ")+
"]"},eq:function(b){return 0<=b?D(this[b]):D(this[this.length+b])},length:0,push:sc,sort:[].sort,splice:[].splice},nb={};q("multiple selected checked disabled readOnly required open".split(" "),function(b){nb[K(b)]=b});var wc={};q("input select option textarea button form details".split(" "),function(b){wc[b]=!0});var xc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngPattern:"pattern"};q({data:rc,inheritedData:mb,scope:function(b){return D(b).data("$scope")||mb(b.parentNode||b,["$isolateScope",
"$scope"])},isolateScope:function(b){return D(b).data("$isolateScope")||D(b).data("$isolateScopeNoTemplate")},controller:tc,injector:function(b){return mb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Ib,css:function(b,a,c){a=Ua(a);if(E(c))b.style[a]=c;else{var d;8>=W&&(d=b.currentStyle&&b.currentStyle[a],""===d&&(d="auto"));d=d||b.style[a];8>=W&&(d=""===d?r:d);return d}},attr:function(b,a,c){var d=K(a);if(nb[d])if(E(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));
else return b[a]||(b.attributes.getNamedItem(a)||A).specified?d:r;else if(E(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?r:b},prop:function(b,a,c){if(E(c))b[a]=c;else return b[a]},text:function(){function b(a,b){if(w(b)){var d=a.nodeType;return 1===d||3===d?a.textContent:""}a.textContent=b}b.$dv="";return b}(),val:function(b,a){if(w(a)){if(b.multiple&&"select"===na(b)){var c=[];q(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?
null:c}return b.value}b.value=a},html:function(b,a){if(w(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ia(d[c]);b.innerHTML=a},empty:uc},function(b,a){Q.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==uc&&(2==b.length&&b!==Ib&&b!==tc?a:d)===r){if(S(a)){for(e=0;e<g;e++)if(b===rc)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===r?Math.min(g,1):g;for(f=0;f<g;f++){var h=b(this[f],a,d);e=e?e+h:h}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});q({removeData:pc,
dealoc:Ia,on:function a(c,d,e,f){if(E(f))throw Gb("onargs");if(!c.nodeType||1===c.nodeType||9===c.nodeType){var g=ma(c,"events"),h=ma(c,"handle");g||ma(c,"events",g={});h||ma(c,"handle",h=Me(c,g));q(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var m=U.body.contains||U.body.compareDocumentPosition?function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&
16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||m(this,c))||h(a,d)})}else qb(c,d,h),g[d]=[];f=g[d]}f.push(e)})}},off:qc,one:function(a,c,d){a=D(a);a.on(c,function f(){a.off(c,d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ia(a);q(new Q(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=
[];q(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){q(new Q(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;q(new Q(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=D(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){Ia(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,
c){var d=a,e=a.parentNode;q(new Q(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:lb,removeClass:kb,toggleClass:function(a,c,d){c&&q(c.split(" "),function(c){var f=d;w(f)&&(f=!Ib(a,c));(f?lb:kb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},
clone:Hb,triggerHandler:function(a,c,d){c=(ma(a,"events")||{})[c];d=d||[];var e=[{preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:A}];q(c,function(c){c.apply(a,e.concat(d))})}},function(a,c){Q.prototype[c]=function(c,e,f){for(var g,h=0;h<this.length;h++)w(g)?(g=a(this[h],c,e,f),E(g)&&(g=D(g))):oc(g,a(this[h],c,e,f));return E(g)?g:this};Q.prototype.bind=Q.prototype.on;Q.prototype.unbind=Q.prototype.off});Xa.prototype=
{put:function(a,c){this[Ja(a,this.nextUid)]=c},get:function(a){return this[Ja(a,this.nextUid)]},remove:function(a){var c=this[a=Ja(a,this.nextUid)];delete this[a];return c}};var zc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Oe=/,/,Pe=/^\s*(_?)(\S+?)\1\s*$/,yc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ka=G("$injector");Cb.$$annotate=Jb;var mf=G("$animate"),ge=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw mf("notcsel",c);this.$$selectors[c.substr(1)]=
e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,g,h){g?g.after(a):c.prepend(a);h&&d(h)},leave:function(a,c){a.remove();c&&d(c)},move:function(a,c,d,h){this.enter(a,c,d,h)},addClass:function(a,c,g){c=v(c)?c:L(c)?c.join(" "):"";q(a,function(a){lb(a,c)});g&&d(g)},removeClass:function(a,c,g){c=v(c)?c:L(c)?c.join(" "):
"";q(a,function(a){kb(a,c)});g&&d(g)},setClass:function(a,c,g,h){q(a,function(a){lb(a,c);kb(a,g)});h&&d(h)},enabled:A}}]}],ia=G("$compile");gc.$inject=["$provide","$$sanitizeUriProvider"];var Ue=/^(x[\:\-_]|data[\:\-_])/i,Ic=G("$interpolate"),nf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Xe={http:80,https:443,ftp:21},Ob=G("$location");Qb.prototype=Pb.prototype=Lc.prototype={$$html5:!1,$$replace:!1,absUrl:rb("$$absUrl"),url:function(a,c){if(w(a))return this.$$url;var d=nf.exec(a);d[1]&&this.path(decodeURIComponent(d[1]));
(d[2]||d[1])&&this.search(d[3]||"");this.hash(d[5]||"",c);return this},protocol:rb("$$protocol"),host:rb("$$host"),port:rb("$$port"),path:Mc("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(v(a))this.$$search=cc(a);else if(S(a))this.$$search=a;else throw Ob("isrcharg");break;default:w(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Mc("$$hash",Ea),replace:function(){this.$$replace=
!0;return this}};var ja=G("$parse"),of=Function.prototype.call,pf=Function.prototype.apply,qf=Function.prototype.bind,cb={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:A,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return E(d)?E(e)?d+e:d:E(e)?e:r},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(E(d)?d:0)-(E(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,
c,d,e){return d(a,c)^e(a,c)},"=":A,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,
c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},rf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Sb=function(a){this.options=a};Sb.prototype={constructor:Sb,lex:function(a){this.text=a;this.index=0;this.ch=r;for(this.tokens=[];this.index<this.text.length;)if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();
else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{a=this.ch+this.peek();var c=a+this.peek(2),d=cb[this.ch],e=cb[a],f=cb[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},
is:function(a){return-1!==a.indexOf(this.ch)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=E(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,
d)+"]":" "+d;throw ja("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=1;this.tokens.push({index:c,
text:a,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,g,h;this.index<this.text.length;){h=this.text.charAt(this.index);if("."===h||this.isIdent(h)||this.isNumber(h))"."===h&&(e=this.index),c+=h;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){h=this.text.charAt(f);if("("===h){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(h))f++;else break}d={index:d,text:c};if(cb.hasOwnProperty(c))d.fn=cb[c],d.constant=
!0;else{var n=Oc(c,this.options,this.text);d.fn=z(function(a,c){return n(a,c)},{assign:function(d,e){return sb(d,c,e,a.text)}})}this.tokens.push(d);g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(g=this.text.substring(this.index+1,this.index+5),g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+
g+"]"),this.index+=4,d+=String.fromCharCode(parseInt(g,16))):d=(f=rf[g])?d+f:d+g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,constant:!0,fn:function(){return d}});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var $a=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};$a.ZERO=z(function(){return 0},{constant:!0});$a.prototype={constructor:$a,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();
0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);c.constant&&(a.constant=!0,a.literal=!0)}for(var d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,
d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw ja("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw ja("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=
this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return z(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return z(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return z(function(e,f){return c(e,f,a,d)},{constant:a.constant&&d.constant})},statements:function(){for(var a=[];;)if(0<
this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var g=a[f];g&&(e=g(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];this.expect(":");)d.push(this.expression());return da(function(a,f,g){g=[g];for(var h=0;h<d.length;h++)g.push(d[h](a,
f));return c.apply(a,g)})},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.ternary();if(d=this.expect(":"))return this.ternaryFn(a,c,this.ternary());this.throwError("expected :",
d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,
c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn($a.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=
this,d=this.expect().text,e=Oc(d,this.options,this.text);return z(function(c,d,h){return e(h||a(c,d))},{assign:function(e,g,h){return sb(a(e,h),d,g,c.text)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return z(function(e,f){var g=a(e,f),h=d(e,f);ea(h,c.text);return g?Ma(g[h],c.text):r},{assign:function(e,f,g){var h=d(e,g);return Ma(a(e,g),c.text)[h]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))
}this.consume(")");var e=this;return function(f,g){for(var h=[],n=c?c(f,g):f,l=0;l<d.length;l++)h.push(d[l](f,g));l=a(f,g,n)||A;Ma(n,e.text);var m=e.text;if(l){if(l.constructor===l)throw ja("isecfn",m);if(l===of||l===pf||l===qf)throw ja("isecff",m);}h=l.apply?l.apply(n,h):l(h[0],h[1],h[2],h[3],h[4]);return Ma(h,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");
return z(function(c,d){for(var g=[],h=0;h<a.length;h++)g.push(a[h](c,d));return g},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return z(function(c,d){for(var e={},n=0;n<a.length;n++){var l=a[n];e[l.key]=l.value(c,d)}return e},{literal:!0,constant:c})}};var Rb={},
wa=G("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ba=U.createElement("a"),Sc=va(M.location.href,!0);nc.$inject=["$provide"];Tc.$inject=["$locale"];Vc.$inject=["$locale"];var Yc=".",hf={yyyy:ca("FullYear",4),yy:ca("FullYear",2,0,!0),y:ca("FullYear",1),MMMM:ub("Month"),MMM:ub("Month",!0),MM:ca("Month",2,1),M:ca("Month",1,1),dd:ca("Date",2),d:ca("Date",1),HH:ca("Hours",2),H:ca("Hours",1),hh:ca("Hours",2,-12),h:ca("Hours",1,-12),mm:ca("Minutes",2),m:ca("Minutes",1),
ss:ca("Seconds",2),s:ca("Seconds",1),sss:ca("Milliseconds",3),EEEE:ub("Day"),EEE:ub("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(tb(Math[0<a?"floor":"ceil"](a/60),2)+tb(Math.abs(a%60),2))},ww:$c(2),w:$c(1)},gf=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,ff=/^\-?\d+$/;Uc.$inject=["$locale"];var df=da(K),ef=da(ib);Wc.$inject=["$parse"];var xd=da({restrict:"E",compile:function(a,
c){8>=W&&(c.href||c.name||c.$set("href",""),a.append(U.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===ya.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}),jb={};q(nb,function(a,c){if("multiple"!=a){var d=pa("ng-"+c);jb[d]=function(){return{priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}});q(xc,function(a,c){jb[c]=function(){return{priority:100,
link:function(a,e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(lf))){f.$set("ngPattern",RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}});q(["src","srcset","href"],function(a){var c=pa("ng-"+a);jb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,h=a;"href"===a&&"[object SVGAnimatedString]"===ya.call(e.prop("href"))&&(h="xlinkHref",f.$attr[h]="xlink:href",g=null);f.$observe(c,function(a){a&&(f.$set(h,a),W&&g&&e.prop(g,f[h]))})}}}});var xb=
{$addControl:A,$removeControl:A,$setValidity:A,$setDirty:A,$setPristine:A};ad.$inject=["$element","$attrs","$scope","$animate"];var cd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:ad,compile:function(){return{pre:function(a,e,f,g){if(!f.action){var h=function(c){a.$apply(function(){g.$commitViewValue()});c.preventDefault?c.preventDefault():c.returnValue=!1};qb(e[0],"submit",h);e.on("$destroy",function(){c(function(){Va(e[0],"submit",h)},0,!1)})}var n=
e.parent().controller("form"),l=f.name||f.ngForm;l&&sb(a,l,g,l);if(n)e.on("$destroy",function(){n.$removeControl(g);l&&sb(a,l,r,l);z(g,xb)})}}}}}]},yd=cd(),Ld=cd(!0),sf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,tf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,uf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,dd=/^(\d{4})-(\d{2})-(\d{2})$/,ed=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)$/,Vb=/^(\d{4})-W(\d\d)$/,fd=/^(\d{4})-(\d\d)$/,gd=/^(\d\d):(\d\d)$/,vf=
/(\s+|^)default(\s+|$)/,hd={text:ab,date:bb("date",dd,zb(dd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":bb("datetimelocal",ed,zb(ed,["yyyy","MM","dd","HH","mm"]),"yyyy-MM-ddTHH:mm"),time:bb("time",gd,zb(gd,["HH","mm"]),"HH:mm"),week:bb("week",Vb,function(a){if(ra(a))return a;if(v(a)){Vb.lastIndex=0;var c=Vb.exec(a);if(c){a=+c[1];var d=+c[2],c=Zc(a),d=7*(d-1);return new Date(a,0,c.getDate()+d)}}return NaN},"yyyy-Www"),month:bb("month",fd,zb(fd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,
e,f,g){ab(a,c,d,e,f,g);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||uf.test(a))return e.$setValidity("number",!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return r});jf(e,"number",wf,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return Tb(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return Tb(e,"max",e.$isEmpty(a)||
a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return Tb(e,"number",e.$isEmpty(a)||Fa(a),a)})},url:function(a,c,d,e,f,g){ab(a,c,d,e,f,g);e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||sf.test(d)}},email:function(a,c,d,e,f,g){ab(a,c,d,e,f,g);e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||tf.test(d)}},radio:function(a,c,d,e){w(d.name)&&c.attr("name",++eb);c.on("click",function(f){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value,
f&&f.type)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,g=d.ngFalseValue;v(f)||(f=!0);v(g)||(g=!1);c.on("click",function(d){a.$apply(function(){e.$setViewValue(c[0].checked,d&&d.type)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==f};e.$formatters.push(function(a){return a===f});e.$parsers.push(function(a){return a?f:g})},hidden:A,button:A,submit:A,reset:A,file:A},wf=
["badInput"],hc=["$browser","$sniffer","$filter",function(a,c,d){return{restrict:"E",require:["?ngModel"],link:function(e,f,g,h){h[0]&&(hd[K(g.type)]||hd.text)(e,f,g,h[0],c,a,d)}}}],wb="ng-valid",vb="ng-invalid",Na="ng-pristine",yb="ng-dirty",xf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout",function(a,c,d,e,f,g,h){function n(a,c){c=c?"-"+hb(c,"-"):"";g.removeClass(e,(a?vb:wb)+c);g.addClass(e,(a?wb:vb)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$validators=
{};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=d.name;var l=f(d.ngModel),m=l.assign,p=null,k=this;if(!m)throw G("ngModel")("nonassign",d.ngModel,ha(e));this.$render=A;this.$isEmpty=function(a){return w(a)||""===a||null===a||a!==a};var t=e.inheritedData("$formController")||xb,s=0,I=this.$error={};e.addClass(Na).addClass("ng-untouched");n(!0);this.$setValidity=function(a,
c){I[a]!==!c&&(c?(I[a]&&s--,s||(n(!0),k.$valid=!0,k.$invalid=!1)):(n(!1),k.$invalid=!0,k.$valid=!1,s++),I[a]=!c,n(c,a),t.$setValidity(a,c,k))};this.$setPristine=function(){k.$dirty=!1;k.$pristine=!0;g.removeClass(e,yb);g.addClass(e,Na)};this.$setUntouched=function(){k.$touched=!1;k.$untouched=!0;g.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=function(){k.$touched=!0;k.$untouched=!1;g.setClass(e,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){h.cancel(p);k.$viewValue=
k.$$lastCommittedViewValue;k.$render()};this.$validate=function(){this.$$runValidators(k.$modelValue,k.$viewValue)};this.$$runValidators=function(a,c){q(k.$validators,function(d,e){k.$setValidity(e,d(a,c))})};this.$commitViewValue=function(d){var f=k.$viewValue;h.cancel(p);if(d||k.$$lastCommittedViewValue!==f){k.$$lastCommittedViewValue=f;k.$pristine&&(k.$dirty=!0,k.$pristine=!1,g.removeClass(e,Na),g.addClass(e,yb),t.$setDirty());var l=f;q(k.$parsers,function(a){l=a(l)});k.$modelValue===l||!w(k.$$invalidModelValue)&&
k.$$invalidModelValue==l||(k.$$runValidators(l,f),k.$modelValue=k.$valid?l:r,k.$$invalidModelValue=k.$valid?r:l,m(a,k.$modelValue),q(k.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))}};this.$setViewValue=function(a,c,d){k.$viewValue=a;k.$options&&!k.$options.updateOnDefault||k.$$debounceViewValueCommit(c,d)};this.$$debounceViewValueCommit=function(a,c){var d=0,e=k.$options;e&&E(e.debounce)&&(e=e.debounce,Fa(e)?d=e:Fa(e[a])?d=e[a]:Fa(e["default"])&&(d=e["default"]));h.cancel(p);d?p=h(function(){k.$commitViewValue(c)},
d):k.$commitViewValue(c)};a.$watch(function(){var c=l(a);if(k.$modelValue!==c&&(w(k.$$invalidModelValue)||k.$$invalidModelValue!=c)){for(var d=k.$formatters,e=d.length,f=c;e--;)f=d[e](f);k.$$runValidators(c,f);k.$modelValue=k.$valid?c:r;k.$$invalidModelValue=k.$valid?r:c;k.$viewValue!==f&&(k.$viewValue=k.$$lastCommittedViewValue=f,k.$render())}return c})}],$d=function(){return{require:["ngModel","^?form","^?ngModelOptions"],controller:xf,link:{pre:function(a,c,d,e){e[2]&&(e[0].$options=e[2].$options);
var f=e[0],g=e[1]||xb;g.$addControl(f);a.$on("$destroy",function(){g.$removeControl(f)})},post:function(a,c,d,e){var f=e[0];if(f.$options&&f.$options.updateOn)c.on(f.$options.updateOn,function(c){a.$apply(function(){f.$$debounceViewValueCommit(c&&c.type)})});c.on("blur",function(c){a.$apply(function(){f.$setTouched()})})}}}},be=da({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),jc=function(){return{require:"?ngModel",link:function(a,c,d,e){e&&
(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},ic=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){v(a)&&0<a.length&&(a=RegExp(a));if(a&&!a.test)throw G("ngPattern")("noregexp",g,a,ha(c));f=a||r;e.$validate()});e.$validators.pattern=function(a){return e.$isEmpty(a)||w(f)||f.test(a)}}}}},lc=function(){return{require:"?ngModel",
link:function(a,c,d,e){if(e){var f=0;d.$observe("maxlength",function(a){f=Y(a)||0;e.$validate()});e.$validators.maxlength=function(a){return e.$isEmpty(a)||a.length<=f}}}}},kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=Y(a)||0;e.$validate()});e.$validators.minlength=function(a){return e.$isEmpty(a)||a.length>=f}}}}},ae=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||
",";e.$parsers.push(function(a){if(!w(a)){var c=[];a&&q(a.split(f),function(a){a&&c.push(aa(a))});return c}});e.$formatters.push(function(a){return L(a)?a.join(", "):r});e.$isEmpty=function(a){return!a||!a.length}}}},yf=/^(true|false|\d+)$/,ce=function(){return{priority:100,compile:function(a,c){return yf.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},de=function(){return{controller:["$scope","$attrs",function(a,
c){var d=this;this.$options=a.$eval(c.ngModelOptions);this.$options.updateOn!==r?(this.$options.updateOnDefault=!1,this.$options.updateOn=aa(this.$options.updateOn.replace(vf,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},Dd=xa({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==r?"":a)})}}}),Fd=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));
d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],Ed=["$sce","$parse",function(a,c){return function(d,e,f){function g(){var a=h(d);g.$$unwatch=h.$$unwatch;return(a||"").toString()}e.addClass("ng-binding").data("$binding",f.ngBindHtml);var h=c(f.ngBindHtml);d.$watch(g,function(c){e.html(a.getTrustedHtml(h(d))||"")})}}],Gd=Ub("",!0),Id=Ub("Odd",0),Hd=Ub("Even",1),Jd=xa({compile:function(a,c){c.$set("ngCloak",r);a.removeClass("ng-cloak")}}),Kd=[function(){return{scope:!0,
controller:"@",priority:500}}],mc={};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=pa("ng-"+a);mc[c]=["$parse",function(d){return{compile:function(e,f){var g=d(f[c]);return function(c,d){d.on(K(a),function(a){c.$apply(function(){g(c,{$event:a})})})}}}}]});var Nd=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,
d,e,f,g){var h,n,l;c.$watch(e.ngIf,function(c){c?n||g(function(c,f){n=f;c[c.length++]=U.createComment(" end ngIf: "+e.ngIf+" ");h={clone:c};a.enter(c,d.parent(),d)}):(l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),h&&(l=Eb(h.clone),a.leave(l,function(){l=null}),h=null))})}}}],Od=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Ra.noop,compile:function(g,h){var n=h.ngInclude||h.src,l=h.onload||
"",m=h.autoscroll;return function(g,h,q,s,I){var y=0,r,B,u,x=function(){B&&(B.remove(),B=null);r&&(r.$destroy(),r=null);u&&(e.leave(u,function(){B=null}),B=u,u=null)};g.$watch(f.parseAsResourceUrl(n),function(f){var n=function(){!E(m)||m&&!g.$eval(m)||d()},q=++y;f?(a.get(f,{cache:c}).success(function(a){if(q===y){var c=g.$new();s.template=a;a=I(c,function(a){x();e.enter(a,null,h,n)});r=c;u=a;r.$emit("$includeContentLoaded");g.$eval(l)}}).error(function(){q===y&&(x(),g.$emit("$includeContentError"))}),
g.$emit("$includeContentRequested")):(x(),s.template=null)})}}}}],ee=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],Pd=xa({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Qd=xa({terminal:!0,priority:1E3}),Rd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var h=g.count,n=g.$attr.when&&f.attr(g.$attr.when),l=g.offset||0,m=
e.$eval(n)||{},p={},k=c.startSymbol(),t=c.endSymbol(),s=/^when(Minus)?(.+)$/;q(g,function(a,c){s.test(c)&&(m[K(c.replace("when","").replace("Minus","-"))]=f.attr(g.$attr[c]))});q(m,function(a,e){p[e]=c(a.replace(d,k+h+"-"+l+t))});e.$watch(function(){var c=parseFloat(e.$eval(h));if(isNaN(c))return"";c in m||(c=a.pluralCat(c-l));return p[c](e)},function(a){f.text(a)})}}}],Sd=["$parse","$animate",function(a,c){var d=G("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,
f,g,h,n){var l=g.ngRepeat,m=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),p,k,t,s,r,y,F={$id:Ja};if(!m)throw d("iexp",l);g=m[1];h=m[2];(m=m[3])?(p=a(m),k=function(a,c,d){y&&(F[y]=a);F[r]=c;F.$index=d;return p(e,F)}):(t=function(a,c){return Ja(c)},s=function(a){return a});m=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!m)throw d("iidexp",g);r=m[3]||m[1];y=m[2];var B={};e.$watchCollection(h,function(a){var e,g,h=f[0],m,p={},F,C,E,J,v,z,w,A=[],R=function(a,
c){a[r]=E;y&&(a[y]=C);a.$index=c;a.$first=0===c;a.$last=c===F-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(c&1))};if(db(a))z=a,v=k||t;else{v=k||s;z=[];for(g in a)a.hasOwnProperty(g)&&"$"!=g.charAt(0)&&z.push(g);z.sort()}F=z.length;g=A.length=z.length;for(e=0;e<g;e++)if(C=a===z?e:z[e],E=a[C],J=v(C,E,e),Ca(J,"`track by` id"),B.hasOwnProperty(J))w=B[J],delete B[J],p[J]=w,A[e]=w;else{if(p.hasOwnProperty(J))throw q(A,function(a){a&&a.scope&&(B[a.id]=a)}),d("dupes",l,J);A[e]={id:J};p[J]=!1}for(m in B)B.hasOwnProperty(m)&&
(w=B[m],g=Eb(w.clone),c.leave(g),q(g,function(a){a.$$NG_REMOVED=!0}),w.scope.$destroy());e=0;for(g=z.length;e<g;e++)if(C=a===z?e:z[e],E=a[C],w=A[e],A[e-1]&&(h=A[e-1].clone[A[e-1].clone.length-1]),w.scope){m=h;do m=m.nextSibling;while(m&&m.$$NG_REMOVED);w.clone[0]!=m&&c.move(Eb(w.clone),null,D(h));h=w.clone[w.clone.length-1];R(w.scope,e)}else n(function(a,d){w.scope=d;a[a.length++]=U.createComment(" end ngRepeat: "+l+" ");c.enter(a,null,D(h));h=a;w.clone=a;p[w.id]=w;R(w.scope,e)});B=p})}}}],Td=["$animate",
function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide")})}}],Md=["$animate",function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide")})}}],Ud=xa(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Vd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=
[],h=[],n=[],l=[];c.$watch(e.ngSwitch||e.on,function(d){var p,k;p=0;for(k=n.length;p<k;++p)n[p].remove();p=n.length=0;for(k=l.length;p<k;++p){var t=h[p];l[p].$destroy();n[p]=t;a.leave(t,function(){n.splice(p,1)})}h.length=0;l.length=0;if(g=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),q(g,function(d){var e=c.$new();l.push(e);d.transclude(e,function(c){var e=d.element;h.push(c);a.enter(c,e.parent(),e)})})})}}}],Wd=xa({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+
d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Xd=xa({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Zd=xa({link:function(a,c,d,e,f){if(!f)throw G("ngTransclude")("orphan",ha(c));f(function(a){c.empty();c.append(a)})}}),zd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&
a.put(d.id,c[0].text)}}}],zf=G("ngOptions"),Yd=da({terminal:!0}),Ad=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:A};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var n=this,l={},m=e,p;n.databound=d.ngModel;n.init=function(a,c,
d){m=a;p=d};n.addOption=function(c){Ca(c,'"option value"');l[c]=!0;m.$viewValue==c&&(a.val(c),p.parent()&&p.remove())};n.removeOption=function(a){this.hasOption(a)&&(delete l[a],m.$viewValue==a&&this.renderUnknownOption(a))};n.renderUnknownOption=function(c){c="? "+Ja(c)+" ?";p.val(c);a.prepend(p);a.val(c);p.prop("selected",!0)};n.hasOption=function(a){return l.hasOwnProperty(a)};c.$on("$destroy",function(){n.renderUnknownOption=A})}],link:function(e,g,h,n){function l(a,c,d,e){d.$render=function(){var a=
d.$viewValue;e.hasOption(a)?(u.parent()&&u.remove(),c.val(a),""===a&&y.prop("selected",!0)):w(a)&&y?c.val(""):e.renderUnknownOption(a)};c.on("change",function(){a.$apply(function(){u.parent()&&u.remove();d.$setViewValue(c.val())})})}function m(a,c,d){var e;d.$render=function(){var a=new Xa(d.$viewValue);q(c.find("option"),function(c){c.selected=E(a.get(c.value))})};a.$watch(function(){Aa(e,d.$viewValue)||(e=ka(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];q(c.find("option"),
function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function p(e,f,g){function h(){var a={"":[]},c=[""],d,k,r,s,w;s=g.$modelValue;w=y(e)||[];var C=n?Wb(w):w,D,v,A;v={};r=!1;var G,K;if(t)if(u&&L(s))for(r=new Xa([]),A=0;A<s.length;A++)v[m]=s[A],r.put(u(e,v),s[A]);else r=new Xa(s);for(A=0;D=C.length,A<D;A++){k=A;if(n){k=C[A];if("$"===k.charAt(0))continue;v[n]=k}v[m]=w[k];d=p(e,v)||"";(k=a[d])||(k=a[d]=[],c.push(d));t?d=E(r.remove(u?u(e,v):q(e,v))):(u?(d={},d[m]=s,d=u(e,d)===u(e,v)):d=s===
q(e,v),r=r||d);G=l(e,v);G=E(G)?G:"";k.push({id:u?u(e,v):n?C[A]:A,label:G,selected:d})}t||(z||null===s?a[""].unshift({id:"",label:"",selected:!r}):r||a[""].unshift({id:"?",label:"",selected:!0}));v=0;for(C=c.length;v<C;v++){d=c[v];k=a[d];x.length<=v?(s={element:B.clone().attr("label",d),label:k.label},w=[s],x.push(w),f.append(s.element)):(w=x[v],s=w[0],s.label!=d&&s.element.attr("label",s.label=d));G=null;A=0;for(D=k.length;A<D;A++)r=k[A],(d=w[A+1])?(G=d.element,d.label!==r.label&&G.text(d.label=r.label),
d.id!==r.id&&G.val(d.id=r.id),d.selected!==r.selected&&G.prop("selected",d.selected=r.selected)):(""===r.id&&z?K=z:(K=F.clone()).val(r.id).prop("selected",r.selected).text(r.label),w.push({element:K,label:r.label,id:r.id,selected:r.selected}),G?G.after(K):s.element.append(K),G=K);for(A++;w.length>A;)w.pop().element.remove()}for(;x.length>v;)x.pop()[0].element.remove()}var k;if(!(k=s.match(d)))throw zf("iexp",s,ha(f));var l=c(k[2]||k[1]),m=k[4]||k[6],n=k[5],p=c(k[3]||""),q=c(k[2]?k[1]:m),y=c(k[7]),
u=k[8]?c(k[8]):null,x=[[{element:f,label:""}]];z&&(a(z)(e),z.removeClass("ng-scope"),z.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=y(e)||[],d={},h,k,l,p,s,w,v;if(t)for(k=[],p=0,w=x.length;p<w;p++)for(a=x[p],l=1,s=a.length;l<s;l++){if((h=a[l].element)[0].selected){h=h.val();n&&(d[n]=h);if(u)for(v=0;v<c.length&&(d[m]=c[v],u(e,d)!=h);v++);else d[m]=c[h];k.push(q(e,d))}}else{h=f.val();if("?"==h)k=r;else if(""===h)k=null;else if(u)for(v=0;v<c.length;v++){if(d[m]=c[v],u(e,d)==
h){k=q(e,d);break}}else d[m]=c[h],n&&(d[n]=h),k=q(e,d);1<x[0].length&&x[0][1].id!==h&&(x[0][1].selected=!1)}g.$setViewValue(k)})});g.$render=h;e.$watch(h)}if(n[1]){var k=n[0];n=n[1];var t=h.multiple,s=h.ngOptions,z=!1,y,F=D(U.createElement("option")),B=D(U.createElement("optgroup")),u=F.clone();h=0;for(var x=g.children(),v=x.length;h<v;h++)if(""===x[h].value){y=z=x.eq(h);break}k.init(n,z,u);t&&(n.$isEmpty=function(a){return!a||0===a.length});s?p(e,g,n):t?m(e,g,n):l(e,g,n,k)}}}}],Cd=["$interpolate",
function(a){var c={addOption:A,removeOption:A};return{restrict:"E",priority:100,compile:function(d,e){if(w(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var l=d.parent(),m=l.data("$selectController")||l.parent().data("$selectController");m&&m.databound?d.prop("selected",!1):m=c;f?a.$watch(f,function(a,c){e.$set("value",a);c!==a&&m.removeOption(c);m.addOption(a)}):m.addOption(e.value);d.on("$destroy",function(){m.removeOption(e.value)})}}}}],Bd=da({restrict:"E",
terminal:!1});M.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(rd(),td(Ra),D(U).ready(function(){pd(U,ec)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-animate){display:none !important;}ng\\:form{display:block;}</style>');
//# sourceMappingURL=angular.min.js.map
;
define("angular", (function (global) {
    return function () {
        var ret, fn;
        return ret || global.angular;
    };
}(this)));

!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define('jweixin',[],function(){return b(a)}):b(a,!0)}(this,function(a,b){function c(b,c,d){a.WeixinJSBridge?WeixinJSBridge.invoke(b,e(c),function(a){g(b,a,d)}):j(b,d)}function d(b,c,d){a.WeixinJSBridge?WeixinJSBridge.on(b,function(a){d&&d.trigger&&d.trigger(a),g(b,a,c)}):d?j(b,d):j(b,c)}function e(a){return a=a||{},a.appId=E.appId,a.verifyAppId=E.appId,a.verifySignType="sha1",a.verifyTimestamp=E.timestamp+"",a.verifyNonceStr=E.nonceStr,a.verifySignature=E.signature,a}function f(a){return{timeStamp:a.timestamp+"",nonceStr:a.nonceStr,"package":a.package,paySign:a.paySign,signType:a.signType||"SHA1"}}function g(a,b,c){var d,e,f;switch(delete b.err_code,delete b.err_desc,delete b.err_detail,d=b.errMsg,d||(d=b.err_msg,delete b.err_msg,d=h(a,d),b.errMsg=d),c=c||{},c._complete&&(c._complete(b),delete c._complete),d=b.errMsg||"",E.debug&&!c.isInnerInvoke&&alert(JSON.stringify(b)),e=d.indexOf(":"),f=d.substring(e+1)){case"ok":c.success&&c.success(b);break;case"cancel":c.cancel&&c.cancel(b);break;default:c.fail&&c.fail(b)}c.complete&&c.complete(b)}function h(a,b){var e,f,c=a,d=p[c];return d&&(c=d),e="ok",b&&(f=b.indexOf(":"),e=b.substring(f+1),"confirm"==e&&(e="ok"),"failed"==e&&(e="fail"),-1!=e.indexOf("failed_")&&(e=e.substring(7)),-1!=e.indexOf("fail_")&&(e=e.substring(5)),e=e.replace(/_/g," "),e=e.toLowerCase(),("access denied"==e||"no permission to execute"==e)&&(e="permission denied"),"config"==c&&"function not exist"==e&&(e="ok"),""==e&&(e="fail")),b=c+":"+e}function i(a){var b,c,d,e;if(a){for(b=0,c=a.length;c>b;++b)d=a[b],e=o[d],e&&(a[b]=e);return a}}function j(a,b){if(!(!E.debug||b&&b.isInnerInvoke)){var c=p[a];c&&(a=c),b&&b._complete&&delete b._complete,console.log('"'+a+'",',b||"")}}function k(){0!=D.preVerifyState&&(u||v||E.debug||"6.0.2">z||D.systemType<0||A||(A=!0,D.appId=E.appId,D.initTime=C.initEndTime-C.initStartTime,D.preVerifyTime=C.preVerifyEndTime-C.preVerifyStartTime,H.getNetworkType({isInnerInvoke:!0,success:function(a){var b,c;D.networkType=a.networkType,b="http://open.weixin.qq.com/sdk/report?v="+D.version+"&o="+D.preVerifyState+"&s="+D.systemType+"&c="+D.clientVersion+"&a="+D.appId+"&n="+D.networkType+"&i="+D.initTime+"&p="+D.preVerifyTime+"&u="+D.url,c=new Image,c.src=b}})))}function l(){return(new Date).getTime()}function m(b){w&&(a.WeixinJSBridge?b():q.addEventListener&&q.addEventListener("WeixinJSBridgeReady",b,!1))}function n(){H.invoke||(H.invoke=function(b,c,d){a.WeixinJSBridge&&WeixinJSBridge.invoke(b,e(c),d)},H.on=function(b,c){a.WeixinJSBridge&&WeixinJSBridge.on(b,c)})}var o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if(!a.jWeixin)return o={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},p=function(){var b,a={};for(b in o)a[o[b]]=b;return a}(),q=a.document,r=q.title,s=navigator.userAgent.toLowerCase(),t=navigator.platform.toLowerCase(),u=!(!t.match("mac")&&!t.match("win")),v=-1!=s.indexOf("wxdebugger"),w=-1!=s.indexOf("micromessenger"),x=-1!=s.indexOf("android"),y=-1!=s.indexOf("iphone")||-1!=s.indexOf("ipad"),z=function(){var a=s.match(/micromessenger\/(\d+\.\d+\.\d+)/)||s.match(/micromessenger\/(\d+\.\d+)/);return a?a[1]:""}(),A=!1,B=!1,C={initStartTime:l(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},D={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",preVerifyState:1,systemType:y?1:x?2:-1,clientVersion:z,url:encodeURIComponent(location.href)},E={},F={_completes:[]},G={state:0,data:{}},m(function(){C.initEndTime=l()}),H={config:function(a){E=a,j("config",a);var b=E.check===!1?!1:!0;m(function(){var a,d,e;if(b)c(o.config,{verifyJsApiList:i(E.jsApiList)},function(){F._complete=function(a){C.preVerifyEndTime=l(),G.state=1,G.data=a},F.success=function(){D.preVerifyState=0},F.fail=function(a){F._fail?F._fail(a):G.state=-1};var a=F._completes;return a.push(function(){k()}),F.complete=function(){for(var c=0,d=a.length;d>c;++c)a[c]();F._completes=[]},F}()),C.preVerifyStartTime=l();else{for(G.state=1,a=F._completes,d=0,e=a.length;e>d;++d)a[d]();F._completes=[]}}),E.beta&&n()},ready:function(a){0!=G.state?a():(F._completes.push(a),!w&&E.debug&&a())},error:function(a){"6.0.2">z||B||(B=!0,-1==G.state?a(G.data):F._fail=a)},checkJsApi:function(a){var b=function(a){var c,d,b=a.checkResult;for(c in b)d=p[c],d&&(b[d]=b[c],delete b[c]);return a};c("checkJsApi",{jsApiList:i(a.jsApiList)},function(){return a._complete=function(a){if(x){var c=a.checkResult;c&&(a.checkResult=JSON.parse(c))}a=b(a)},a}())},onMenuShareTimeline:function(a){d(o.onMenuShareTimeline,{complete:function(){c("shareTimeline",{title:a.title||r,desc:a.title||r,img_url:a.imgUrl||"",link:a.link||location.href,type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareAppMessage:function(a){d(o.onMenuShareAppMessage,{complete:function(){c("sendAppMessage",{title:a.title||r,desc:a.desc||"",link:a.link||location.href,img_url:a.imgUrl||"",type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareQQ:function(a){d(o.onMenuShareQQ,{complete:function(){c("shareQQ",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareWeibo:function(a){d(o.onMenuShareWeibo,{complete:function(){c("shareWeiboApp",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareQZone:function(a){d(o.onMenuShareQZone,{complete:function(){c("shareQZone",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},startRecord:function(a){c("startRecord",{},a)},stopRecord:function(a){c("stopRecord",{},a)},onVoiceRecordEnd:function(a){d("onVoiceRecordEnd",a)},playVoice:function(a){c("playVoice",{localId:a.localId},a)},pauseVoice:function(a){c("pauseVoice",{localId:a.localId},a)},stopVoice:function(a){c("stopVoice",{localId:a.localId},a)},onVoicePlayEnd:function(a){d("onVoicePlayEnd",a)},uploadVoice:function(a){c("uploadVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadVoice:function(a){c("downloadVoice",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},translateVoice:function(a){c("translateVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},chooseImage:function(a){c("chooseImage",{scene:"1|2",count:a.count||9,sizeType:a.sizeType||["original","compressed"],sourceType:a.sourceType||["album","camera"]},function(){return a._complete=function(a){if(x){var b=a.localIds;b&&(a.localIds=JSON.parse(b))}},a}())},previewImage:function(a){c(o.previewImage,{current:a.current,urls:a.urls},a)},uploadImage:function(a){c("uploadImage",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadImage:function(a){c("downloadImage",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},getNetworkType:function(a){var b=function(a){var c,d,e,b=a.errMsg;if(a.errMsg="getNetworkType:ok",c=a.subtype,delete a.subtype,c)a.networkType=c;else switch(d=b.indexOf(":"),e=b.substring(d+1)){case"wifi":case"edge":case"wwan":a.networkType=e;break;default:a.errMsg="getNetworkType:fail"}return a};c("getNetworkType",{},function(){return a._complete=function(a){a=b(a)},a}())},openLocation:function(a){c("openLocation",{latitude:a.latitude,longitude:a.longitude,name:a.name||"",address:a.address||"",scale:a.scale||28,infoUrl:a.infoUrl||""},a)},getLocation:function(a){a=a||{},c(o.getLocation,{type:a.type||"wgs84"},function(){return a._complete=function(a){delete a.type},a}())},hideOptionMenu:function(a){c("hideOptionMenu",{},a)},showOptionMenu:function(a){c("showOptionMenu",{},a)},closeWindow:function(a){a=a||{},c("closeWindow",{},a)},hideMenuItems:function(a){c("hideMenuItems",{menuList:a.menuList},a)},showMenuItems:function(a){c("showMenuItems",{menuList:a.menuList},a)},hideAllNonBaseMenuItem:function(a){c("hideAllNonBaseMenuItem",{},a)},showAllNonBaseMenuItem:function(a){c("showAllNonBaseMenuItem",{},a)},scanQRCode:function(a){a=a||{},c("scanQRCode",{needResult:a.needResult||0,scanType:a.scanType||["qrCode","barCode"]},function(){return a._complete=function(a){var b,c;y&&(b=a.resultStr,b&&(c=JSON.parse(b),a.resultStr=c&&c.scan_code&&c.scan_code.scan_result))},a}())},openProductSpecificView:function(a){c(o.openProductSpecificView,{pid:a.productId,view_type:a.viewType||0,ext_info:a.extInfo},a)},addCard:function(a){var e,f,g,h,b=a.cardList,d=[];for(e=0,f=b.length;f>e;++e)g=b[e],h={card_id:g.cardId,card_ext:g.cardExt},d.push(h);c(o.addCard,{card_list:d},function(){return a._complete=function(a){var c,d,e,b=a.card_list;if(b){for(b=JSON.parse(b),c=0,d=b.length;d>c;++c)e=b[c],e.cardId=e.card_id,e.cardExt=e.card_ext,e.isSuccess=e.is_succ?!0:!1,delete e.card_id,delete e.card_ext,delete e.is_succ;a.cardList=b,delete a.card_list}},a}())},chooseCard:function(a){c("chooseCard",{app_id:E.appId,location_id:a.shopId||"",sign_type:a.signType||"SHA1",card_id:a.cardId||"",card_type:a.cardType||"",card_sign:a.cardSign,time_stamp:a.timestamp+"",nonce_str:a.nonceStr},function(){return a._complete=function(a){a.cardList=a.choose_card_info,delete a.choose_card_info},a}())},openCard:function(a){var e,f,g,h,b=a.cardList,d=[];for(e=0,f=b.length;f>e;++e)g=b[e],h={card_id:g.cardId,code:g.code},d.push(h);c(o.openCard,{card_list:d},a)},chooseWXPay:function(a){c(o.chooseWXPay,f(a),a)}},b&&(a.wx=a.jWeixin=H),H});
/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
(function( window, undefined ) {

// Can't do this because several apps including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
// Support: Firefox 18+
//"use strict";
var
	// The deferred used on DOM ready
	readyList,

	// A central reference to the root jQuery(document)
	rootjQuery,

	// Support: IE<9
	// For `typeof node.method` instead of `node.method !== undefined`
	core_strundefined = typeof undefined,

	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,
	location = window.location,

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$,

	// [[Class]] -> type pairs
	class2type = {},

	// List of deleted data cache ids, so we can reuse them
	core_deletedIds = [],

	core_version = "1.9.1",

	// Save a reference to some core methods
	core_concat = core_deletedIds.concat,
	core_push = core_deletedIds.push,
	core_slice = core_deletedIds.slice,
	core_indexOf = core_deletedIds.indexOf,
	core_toString = class2type.toString,
	core_hasOwn = class2type.hasOwnProperty,
	core_trim = core_version.trim,

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		return new jQuery.fn.init( selector, context, rootjQuery );
	},

	// Used for matching numbers
	core_pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,

	// Used for splitting on whitespace
	core_rnotwhite = /\S+/g,

	// Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	// Match a standalone tag
	rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,

	// JSON RegExp
	rvalidchars = /^[\],:{}\s]*$/,
	rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g,
	rvalidescape = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
	rvalidtokens = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	},

	// The ready event handler
	completed = function( event ) {

		// readyState === "complete" is good enough for us to call the dom ready in oldIE
		if ( document.addEventListener || event.type === "load" || document.readyState === "complete" ) {
			detach();
			jQuery.ready();
		}
	},
	// Clean-up method for dom ready events
	detach = function() {
		if ( document.addEventListener ) {
			document.removeEventListener( "DOMContentLoaded", completed, false );
			window.removeEventListener( "load", completed, false );

		} else {
			document.detachEvent( "onreadystatechange", completed );
			window.detachEvent( "onload", completed );
		}
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: core_version,

	constructor: jQuery,
	init: function( selector, context, rootjQuery ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// scripts is true for back-compat
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document #6963
					if ( elem && elem.parentNode ) {
						// Handle the case where IE and Opera return items
						// by name instead of ID
						if ( elem.id !== match[2] ) {
							return rootjQuery.find( selector );
						}

						// Otherwise, we inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return rootjQuery.ready( selector );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	},

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	// The number of elements contained in the matched element set
	size: function() {
		return this.length;
	},

	toArray: function() {
		return core_slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num == null ?

			// Return a 'clean' array
			this.toArray() :

			// Return just the object
			( num < 0 ? this[ this.length + num ] : this[ num ] );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	ready: function( fn ) {
		// Add the callback
		jQuery.ready.promise().done( fn );

		return this;
	},

	slice: function() {
		return this.pushStack( core_slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: core_push,
	sort: [].sort,
	splice: [].splice
};

// Give the init function the jQuery prototype for later instantiation
jQuery.fn.init.prototype = jQuery.fn;

jQuery.extend = jQuery.fn.extend = function() {
	var src, copyIsArray, copy, name, options, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;
		target = arguments[1] || {};
		// skip the boolean and the target
		i = 2;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// extend jQuery itself if only one argument is passed
	if ( length === i ) {
		target = this;
		--i;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	noConflict: function( deep ) {
		if ( window.$ === jQuery ) {
			window.$ = _$;
		}

		if ( deep && window.jQuery === jQuery ) {
			window.jQuery = _jQuery;
		}

		return jQuery;
	},

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
		if ( !document.body ) {
			return setTimeout( jQuery.ready );
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.trigger ) {
			jQuery( document ).trigger("ready").off("ready");
		}
	},

	// See test/unit/core.js for details concerning isFunction.
	// Since version 1.3, DOM methods and functions like alert
	// aren't supported. They return false on IE (#2968).
	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray || function( obj ) {
		return jQuery.type(obj) === "array";
	},

	isWindow: function( obj ) {
		return obj != null && obj == obj.window;
	},

	isNumeric: function( obj ) {
		return !isNaN( parseFloat(obj) ) && isFinite( obj );
	},

	type: function( obj ) {
		if ( obj == null ) {
			return String( obj );
		}
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ core_toString.call(obj) ] || "object" :
			typeof obj;
	},

	isPlainObject: function( obj ) {
		// Must be an Object.
		// Because of IE, we also have to check the presence of the constructor property.
		// Make sure that DOM nodes and window objects don't pass through, as well
		if ( !obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		try {
			// Not own constructor property must be Object
			if ( obj.constructor &&
				!core_hasOwn.call(obj, "constructor") &&
				!core_hasOwn.call(obj.constructor.prototype, "isPrototypeOf") ) {
				return false;
			}
		} catch ( e ) {
			// IE8,9 Will throw exceptions on certain host objects #9897
			return false;
		}

		// Own properties are enumerated firstly, so to speed up,
		// if last one is own, then all properties are own.

		var key;
		for ( key in obj ) {}

		return key === undefined || core_hasOwn.call( obj, key );
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	error: function( msg ) {
		throw new Error( msg );
	},

	// data: string of html
	// context (optional): If specified, the fragment will be created in this context, defaults to document
	// keepScripts (optional): If true, will include scripts passed in the html string
	parseHTML: function( data, context, keepScripts ) {
		if ( !data || typeof data !== "string" ) {
			return null;
		}
		if ( typeof context === "boolean" ) {
			keepScripts = context;
			context = false;
		}
		context = context || document;

		var parsed = rsingleTag.exec( data ),
			scripts = !keepScripts && [];

		// Single tag
		if ( parsed ) {
			return [ context.createElement( parsed[1] ) ];
		}

		parsed = jQuery.buildFragment( [ data ], context, scripts );
		if ( scripts ) {
			jQuery( scripts ).remove();
		}
		return jQuery.merge( [], parsed.childNodes );
	},

	parseJSON: function( data ) {
		// Attempt to parse using the native JSON parser first
		if ( window.JSON && window.JSON.parse ) {
			return window.JSON.parse( data );
		}

		if ( data === null ) {
			return data;
		}

		if ( typeof data === "string" ) {

			// Make sure leading/trailing whitespace is removed (IE can't handle it)
			data = jQuery.trim( data );

			if ( data ) {
				// Make sure the incoming data is actual JSON
				// Logic borrowed from http://json.org/json2.js
				if ( rvalidchars.test( data.replace( rvalidescape, "@" )
					.replace( rvalidtokens, "]" )
					.replace( rvalidbraces, "")) ) {

					return ( new Function( "return " + data ) )();
				}
			}
		}

		jQuery.error( "Invalid JSON: " + data );
	},

	// Cross-browser xml parsing
	parseXML: function( data ) {
		var xml, tmp;
		if ( !data || typeof data !== "string" ) {
			return null;
		}
		try {
			if ( window.DOMParser ) { // Standard
				tmp = new DOMParser();
				xml = tmp.parseFromString( data , "text/xml" );
			} else { // IE
				xml = new ActiveXObject( "Microsoft.XMLDOM" );
				xml.async = "false";
				xml.loadXML( data );
			}
		} catch( e ) {
			xml = undefined;
		}
		if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
			jQuery.error( "Invalid XML: " + data );
		}
		return xml;
	},

	noop: function() {},

	// Evaluates a script in a global context
	// Workarounds based on findings by Jim Driscoll
	// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
	globalEval: function( data ) {
		if ( data && jQuery.trim( data ) ) {
			// We use execScript on Internet Explorer
			// We use an anonymous function so that context is window
			// rather than jQuery in Firefox
			( window.execScript || function( data ) {
				window[ "eval" ].call( window, data );
			} )( data );
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Use native String.trim function wherever possible
	trim: core_trim && !core_trim.call("\uFEFF\xA0") ?
		function( text ) {
			return text == null ?
				"" :
				core_trim.call( text );
		} :

		// Otherwise use our own trimming functionality
		function( text ) {
			return text == null ?
				"" :
				( text + "" ).replace( rtrim, "" );
		},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				core_push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		var len;

		if ( arr ) {
			if ( core_indexOf ) {
				return core_indexOf.call( arr, elem, i );
			}

			len = arr.length;
			i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;

			for ( ; i < len; i++ ) {
				// Skip accessing in sparse arrays
				if ( i in arr && arr[ i ] === elem ) {
					return i;
				}
			}
		}

		return -1;
	},

	merge: function( first, second ) {
		var l = second.length,
			i = first.length,
			j = 0;

		if ( typeof l === "number" ) {
			for ( ; j < l; j++ ) {
				first[ i++ ] = second[ j ];
			}
		} else {
			while ( second[j] !== undefined ) {
				first[ i++ ] = second[ j++ ];
			}
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, inv ) {
		var retVal,
			ret = [],
			i = 0,
			length = elems.length;
		inv = !!inv;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			retVal = !!callback( elems[ i ], i );
			if ( inv !== retVal ) {
				ret.push( elems[ i ] );
			}
		}

		return ret;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret[ ret.length ] = value;
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret[ ret.length ] = value;
				}
			}
		}

		// Flatten any nested arrays
		return core_concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var args, proxy, tmp;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = core_slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	// Multifunctional method to get and set values of a collection
	// The value/s can optionally be executed if it's a function
	access: function( elems, fn, key, value, chainable, emptyGet, raw ) {
		var i = 0,
			length = elems.length,
			bulk = key == null;

		// Sets many values
		if ( jQuery.type( key ) === "object" ) {
			chainable = true;
			for ( i in key ) {
				jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
			}

		// Sets one value
		} else if ( value !== undefined ) {
			chainable = true;

			if ( !jQuery.isFunction( value ) ) {
				raw = true;
			}

			if ( bulk ) {
				// Bulk operations run against the entire set
				if ( raw ) {
					fn.call( elems, value );
					fn = null;

				// ...except when executing function values
				} else {
					bulk = fn;
					fn = function( elem, key, value ) {
						return bulk.call( jQuery( elem ), value );
					};
				}
			}

			if ( fn ) {
				for ( ; i < length; i++ ) {
					fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
				}
			}
		}

		return chainable ?
			elems :

			// Gets
			bulk ?
				fn.call( elems ) :
				length ? fn( elems[0], key ) : emptyGet;
	},

	now: function() {
		return ( new Date() ).getTime();
	}
});

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// we once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		// Standards-based browsers support DOMContentLoaded
		} else if ( document.addEventListener ) {
			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );

		// If IE event model is used
		} else {
			// Ensure firing before onload, maybe late but safe also for iframes
			document.attachEvent( "onreadystatechange", completed );

			// A fallback to window.onload, that will always work
			window.attachEvent( "onload", completed );

			// If IE and not a frame
			// continually check to see if the document is ready
			var top = false;

			try {
				top = window.frameElement == null && document.documentElement;
			} catch(e) {}

			if ( top && top.doScroll ) {
				(function doScrollCheck() {
					if ( !jQuery.isReady ) {

						try {
							// Use the trick by Diego Perini
							// http://javascript.nwbox.com/IEContentLoaded/
							top.doScroll("left");
						} catch(e) {
							return setTimeout( doScrollCheck, 50 );
						}

						// detach all dom ready events
						detach();

						// and execute any waiting functions
						jQuery.ready();
					}
				})();
			}
		}
	}
	return readyList.promise( obj );
};

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {
	var length = obj.length,
		type = jQuery.type( obj );

	if ( jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || type !== "function" &&
		( length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj );
}

// All jQuery objects should point back to these
rootjQuery = jQuery(document);
// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,
		// Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				args = args || [];
				args = [ context, args.slice ? args.slice() : args ];
				if ( list && ( !fired || stack ) ) {
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};
jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var action = tuple[ 0 ],
								fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ action + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = core_slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;
					if( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// if we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});
jQuery.support = (function() {

	var support, all, a,
		input, select, fragment,
		opt, eventName, isSupported, i,
		div = document.createElement("div");

	// Setup
	div.setAttribute( "className", "t" );
	div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";

	// Support tests won't run in some limited or non-browser environments
	all = div.getElementsByTagName("*");
	a = div.getElementsByTagName("a")[ 0 ];
	if ( !all || !a || !all.length ) {
		return {};
	}

	// First batch of tests
	select = document.createElement("select");
	opt = select.appendChild( document.createElement("option") );
	input = div.getElementsByTagName("input")[ 0 ];

	a.style.cssText = "top:1px;float:left;opacity:.5";
	support = {
		// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)
		getSetAttribute: div.className !== "t",

		// IE strips leading whitespace when .innerHTML is used
		leadingWhitespace: div.firstChild.nodeType === 3,

		// Make sure that tbody elements aren't automatically inserted
		// IE will insert them into empty tables
		tbody: !div.getElementsByTagName("tbody").length,

		// Make sure that link elements get serialized correctly by innerHTML
		// This requires a wrapper element in IE
		htmlSerialize: !!div.getElementsByTagName("link").length,

		// Get the style information from getAttribute
		// (IE uses .cssText instead)
		style: /top/.test( a.getAttribute("style") ),

		// Make sure that URLs aren't manipulated
		// (IE normalizes it by default)
		hrefNormalized: a.getAttribute("href") === "/a",

		// Make sure that element opacity exists
		// (IE uses filter instead)
		// Use a regex to work around a WebKit issue. See #5145
		opacity: /^0.5/.test( a.style.opacity ),

		// Verify style float existence
		// (IE uses styleFloat instead of cssFloat)
		cssFloat: !!a.style.cssFloat,

		// Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)
		checkOn: !!input.value,

		// Make sure that a selected-by-default option has a working selected property.
		// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
		optSelected: opt.selected,

		// Tests for enctype support on a form (#6743)
		enctype: !!document.createElement("form").enctype,

		// Makes sure cloning an html5 element does not cause problems
		// Where outerHTML is undefined, this still works
		html5Clone: document.createElement("nav").cloneNode( true ).outerHTML !== "<:nav></:nav>",

		// jQuery.support.boxModel DEPRECATED in 1.8 since we don't support Quirks Mode
		boxModel: document.compatMode === "CSS1Compat",

		// Will be defined later
		deleteExpando: true,
		noCloneEvent: true,
		inlineBlockNeedsLayout: false,
		shrinkWrapBlocks: false,
		reliableMarginRight: true,
		boxSizingReliable: true,
		pixelPosition: false
	};

	// Make sure checked status is properly cloned
	input.checked = true;
	support.noCloneChecked = input.cloneNode( true ).checked;

	// Make sure that the options inside disabled selects aren't marked as disabled
	// (WebKit marks them as disabled)
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<9
	try {
		delete div.test;
	} catch( e ) {
		support.deleteExpando = false;
	}

	// Check if we can trust getAttribute("value")
	input = document.createElement("input");
	input.setAttribute( "value", "" );
	support.input = input.getAttribute( "value" ) === "";

	// Check if an input maintains its value after becoming a radio
	input.value = "t";
	input.setAttribute( "type", "radio" );
	support.radioValue = input.value === "t";

	// #11217 - WebKit loses check when the name is after the checked attribute
	input.setAttribute( "checked", "t" );
	input.setAttribute( "name", "t" );

	fragment = document.createDocumentFragment();
	fragment.appendChild( input );

	// Check if a disconnected checkbox will retain its checked
	// value of true after appended to the DOM (IE6/7)
	support.appendChecked = input.checked;

	// WebKit doesn't clone checked state correctly in fragments
	support.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<9
	// Opera does not clone events (and typeof div.attachEvent === undefined).
	// IE9-10 clones events bound via attachEvent, but they don't trigger with .click()
	if ( div.attachEvent ) {
		div.attachEvent( "onclick", function() {
			support.noCloneEvent = false;
		});

		div.cloneNode( true ).click();
	}

	// Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)
	// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP), test/csp.php
	for ( i in { submit: true, change: true, focusin: true }) {
		div.setAttribute( eventName = "on" + i, "t" );

		support[ i + "Bubbles" ] = eventName in window || div.attributes[ eventName ].expando === false;
	}

	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	// Run tests that need a body at doc ready
	jQuery(function() {
		var container, marginDiv, tds,
			divReset = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
			body = document.getElementsByTagName("body")[0];

		if ( !body ) {
			// Return for frameset docs that don't have a body
			return;
		}

		container = document.createElement("div");
		container.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";

		body.appendChild( container ).appendChild( div );

		// Support: IE8
		// Check if table cells still have offsetWidth/Height when they are set
		// to display:none and there are still other visible table cells in a
		// table row; if so, offsetWidth/Height are not reliable for use when
		// determining if an element has been hidden directly using
		// display:none (it is still safe to use offsets if a parent element is
		// hidden; don safety goggles and see bug #4512 for more information).
		div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
		tds = div.getElementsByTagName("td");
		tds[ 0 ].style.cssText = "padding:0;margin:0;border:0;display:none";
		isSupported = ( tds[ 0 ].offsetHeight === 0 );

		tds[ 0 ].style.display = "";
		tds[ 1 ].style.display = "none";

		// Support: IE8
		// Check if empty table cells still have offsetWidth/Height
		support.reliableHiddenOffsets = isSupported && ( tds[ 0 ].offsetHeight === 0 );

		// Check box-sizing and margin behavior
		div.innerHTML = "";
		div.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
		support.boxSizing = ( div.offsetWidth === 4 );
		support.doesNotIncludeMarginInBodyOffset = ( body.offsetTop !== 1 );

		// Use window.getComputedStyle because jsdom on node.js will break without it.
		if ( window.getComputedStyle ) {
			support.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== "1%";
			support.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: "4px" } ).width === "4px";

			// Check if div with explicit width and no margin-right incorrectly
			// gets computed margin-right based on width of container. (#3333)
			// Fails in WebKit before Feb 2011 nightlies
			// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
			marginDiv = div.appendChild( document.createElement("div") );
			marginDiv.style.cssText = div.style.cssText = divReset;
			marginDiv.style.marginRight = marginDiv.style.width = "0";
			div.style.width = "1px";

			support.reliableMarginRight =
				!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );
		}

		if ( typeof div.style.zoom !== core_strundefined ) {
			// Support: IE<8
			// Check if natively block-level elements act like inline-block
			// elements when setting their display to 'inline' and giving
			// them layout
			div.innerHTML = "";
			div.style.cssText = divReset + "width:1px;padding:1px;display:inline;zoom:1";
			support.inlineBlockNeedsLayout = ( div.offsetWidth === 3 );

			// Support: IE6
			// Check if elements with layout shrink-wrap their children
			div.style.display = "block";
			div.innerHTML = "<div></div>";
			div.firstChild.style.width = "5px";
			support.shrinkWrapBlocks = ( div.offsetWidth !== 3 );

			if ( support.inlineBlockNeedsLayout ) {
				// Prevent IE 6 from affecting layout for positioned elements #11048
				// Prevent IE from shrinking the body in IE 7 mode #12869
				// Support: IE<8
				body.style.zoom = 1;
			}
		}

		body.removeChild( container );

		// Null elements to avoid leaks in IE
		container = div = tds = marginDiv = null;
	});

	// Null elements to avoid leaks in IE
	all = select = fragment = opt = a = input = null;

	return support;
})();

var rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
	rmultiDash = /([A-Z])/g;

function internalData( elem, name, data, pvt /* Internal Use Only */ ){
	if ( !jQuery.acceptData( elem ) ) {
		return;
	}

	var thisCache, ret,
		internalKey = jQuery.expando,
		getByName = typeof name === "string",

		// We have to handle DOM nodes and JS objects differently because IE6-7
		// can't GC object references properly across the DOM-JS boundary
		isNode = elem.nodeType,

		// Only DOM nodes need the global jQuery cache; JS object data is
		// attached directly to the object so GC can occur automatically
		cache = isNode ? jQuery.cache : elem,

		// Only defining an ID for JS objects if its cache already exists allows
		// the code to shortcut on the same path as a DOM node with no cache
		id = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;

	// Avoid doing any more work than we need to when trying to get data on an
	// object that has no data at all
	if ( (!id || !cache[id] || (!pvt && !cache[id].data)) && getByName && data === undefined ) {
		return;
	}

	if ( !id ) {
		// Only DOM nodes need a new unique ID for each element since their data
		// ends up in the global cache
		if ( isNode ) {
			elem[ internalKey ] = id = core_deletedIds.pop() || jQuery.guid++;
		} else {
			id = internalKey;
		}
	}

	if ( !cache[ id ] ) {
		cache[ id ] = {};

		// Avoids exposing jQuery metadata on plain JS objects when the object
		// is serialized using JSON.stringify
		if ( !isNode ) {
			cache[ id ].toJSON = jQuery.noop;
		}
	}

	// An object can be passed to jQuery.data instead of a key/value pair; this gets
	// shallow copied over onto the existing cache
	if ( typeof name === "object" || typeof name === "function" ) {
		if ( pvt ) {
			cache[ id ] = jQuery.extend( cache[ id ], name );
		} else {
			cache[ id ].data = jQuery.extend( cache[ id ].data, name );
		}
	}

	thisCache = cache[ id ];

	// jQuery data() is stored in a separate object inside the object's internal data
	// cache in order to avoid key collisions between internal data and user-defined
	// data.
	if ( !pvt ) {
		if ( !thisCache.data ) {
			thisCache.data = {};
		}

		thisCache = thisCache.data;
	}

	if ( data !== undefined ) {
		thisCache[ jQuery.camelCase( name ) ] = data;
	}

	// Check for both converted-to-camel and non-converted data property names
	// If a data property was specified
	if ( getByName ) {

		// First Try to find as-is property data
		ret = thisCache[ name ];

		// Test for null|undefined property data
		if ( ret == null ) {

			// Try to find the camelCased property
			ret = thisCache[ jQuery.camelCase( name ) ];
		}
	} else {
		ret = thisCache;
	}

	return ret;
}

function internalRemoveData( elem, name, pvt ) {
	if ( !jQuery.acceptData( elem ) ) {
		return;
	}

	var i, l, thisCache,
		isNode = elem.nodeType,

		// See jQuery.data for more information
		cache = isNode ? jQuery.cache : elem,
		id = isNode ? elem[ jQuery.expando ] : jQuery.expando;

	// If there is already no cache entry for this object, there is no
	// purpose in continuing
	if ( !cache[ id ] ) {
		return;
	}

	if ( name ) {

		thisCache = pvt ? cache[ id ] : cache[ id ].data;

		if ( thisCache ) {

			// Support array or space separated string names for data keys
			if ( !jQuery.isArray( name ) ) {

				// try the string as a key before any manipulation
				if ( name in thisCache ) {
					name = [ name ];
				} else {

					// split the camel cased version by spaces unless a key with the spaces exists
					name = jQuery.camelCase( name );
					if ( name in thisCache ) {
						name = [ name ];
					} else {
						name = name.split(" ");
					}
				}
			} else {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = name.concat( jQuery.map( name, jQuery.camelCase ) );
			}

			for ( i = 0, l = name.length; i < l; i++ ) {
				delete thisCache[ name[i] ];
			}

			// If there is no data left in the cache, we want to continue
			// and let the cache object itself get destroyed
			if ( !( pvt ? isEmptyDataObject : jQuery.isEmptyObject )( thisCache ) ) {
				return;
			}
		}
	}

	// See jQuery.data for more information
	if ( !pvt ) {
		delete cache[ id ].data;

		// Don't destroy the parent cache unless the internal data object
		// had been the only thing left in it
		if ( !isEmptyDataObject( cache[ id ] ) ) {
			return;
		}
	}

	// Destroy the cache
	if ( isNode ) {
		jQuery.cleanData( [ elem ], true );

	// Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)
	} else if ( jQuery.support.deleteExpando || cache != cache.window ) {
		delete cache[ id ];

	// When all else fails, null
	} else {
		cache[ id ] = null;
	}
}

jQuery.extend({
	cache: {},

	// Unique for each copy of jQuery on the page
	// Non-digits removed to match rinlinejQuery
	expando: "jQuery" + ( core_version + Math.random() ).replace( /\D/g, "" ),

	// The following elements throw uncatchable exceptions if you
	// attempt to add expando properties to them.
	noData: {
		"embed": true,
		// Ban all objects except for Flash (which handle expandos)
		"object": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
		"applet": true
	},

	hasData: function( elem ) {
		elem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];
		return !!elem && !isEmptyDataObject( elem );
	},

	data: function( elem, name, data ) {
		return internalData( elem, name, data );
	},

	removeData: function( elem, name ) {
		return internalRemoveData( elem, name );
	},

	// For internal use only.
	_data: function( elem, name, data ) {
		return internalData( elem, name, data, true );
	},

	_removeData: function( elem, name ) {
		return internalRemoveData( elem, name, true );
	},

	// A method for determining if a DOM node can handle the data expando
	acceptData: function( elem ) {
		// Do not set data on non-element because it will not be cleared (#8335).
		if ( elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9 ) {
			return false;
		}

		var noData = elem.nodeName && jQuery.noData[ elem.nodeName.toLowerCase() ];

		// nodes accept data unless otherwise specified; rejection can be conditional
		return !noData || noData !== true && elem.getAttribute("classid") === noData;
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var attrs, name,
			elem = this[0],
			i = 0,
			data = null;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = jQuery.data( elem );

				if ( elem.nodeType === 1 && !jQuery._data( elem, "parsedAttrs" ) ) {
					attrs = elem.attributes;
					for ( ; i < attrs.length; i++ ) {
						name = attrs[i].name;

						if ( !name.indexOf( "data-" ) ) {
							name = jQuery.camelCase( name.slice(5) );

							dataAttr( elem, name, data[ name ] );
						}
					}
					jQuery._data( elem, "parsedAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				jQuery.data( this, key );
			});
		}

		return jQuery.access( this, function( value ) {

			if ( value === undefined ) {
				// Try to fetch any internally stored data first
				return elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : null;
			}

			this.each(function() {
				jQuery.data( this, key, value );
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			jQuery.removeData( this, key );
		});
	}
});

function dataAttr( elem, key, data ) {
	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {

		var name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();

		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
						data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			jQuery.data( elem, key, data );

		} else {
			data = undefined;
		}
	}

	return data;
}

// checks a cache object for emptiness
function isEmptyDataObject( obj ) {
	var name;
	for ( name in obj ) {

		// if the public data object is empty, the private is still empty
		if ( name === "data" && jQuery.isEmptyObject( obj[name] ) ) {
			continue;
		}
		if ( name !== "toJSON" ) {
			return false;
		}
	}

	return true;
}
jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = jQuery._data( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray(data) ) {
					queue = jQuery._data( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		hooks.cur = fn;
		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// not intended for public consumption - generates a queueHooks object, or returns the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return jQuery._data( elem, key ) || jQuery._data( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				jQuery._removeData( elem, type + "queue" );
				jQuery._removeData( elem, key );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	// Based off of the plugin by Clint Helfers, with permission.
	// http://blindsignals.com/index.php/2009/07/jquery-delay/
	delay: function( time, type ) {
		time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
		type = type || "fx";

		return this.queue( type, function( next, hooks ) {
			var timeout = setTimeout( next, time );
			hooks.stop = function() {
				clearTimeout( timeout );
			};
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while( i-- ) {
			tmp = jQuery._data( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var nodeHook, boolHook,
	rclass = /[\t\r\n]/g,
	rreturn = /\r/g,
	rfocusable = /^(?:input|select|textarea|button|object)$/i,
	rclickable = /^(?:a|area)$/i,
	rboolean = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,
	ruseDefault = /^(?:checked|selected)$/i,
	getSetAttribute = jQuery.support.getSetAttribute,
	getSetInput = jQuery.support.input;

jQuery.fn.extend({
	attr: function( name, value ) {
		return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	},

	prop: function( name, value ) {
		return jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		name = jQuery.propFix[ name ] || name;
		return this.each(function() {
			// try/catch handles cases where IE balks (such as removing a property on window)
			try {
				this[ name ] = undefined;
				delete this[ name ];
			} catch( e ) {}
		});
	},

	addClass: function( value ) {
		var classes, elem, cur, clazz, j,
			i = 0,
			len = this.length,
			proceed = typeof value === "string" && value;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( core_rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}
					elem.className = jQuery.trim( cur );

				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j,
			i = 0,
			len = this.length,
			proceed = arguments.length === 0 || typeof value === "string" && value;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( core_rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}
					elem.className = value ? jQuery.trim( cur ) : "";
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isBool = typeof stateVal === "boolean";

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					state = stateVal,
					classNames = value.match( core_rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// check each className given, space separated list
					state = isBool ? state : !self.hasClass( className );
					self[ state ? "addClass" : "removeClass" ]( className );
				}

			// Toggle whole class name
			} else if ( type === core_strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					jQuery._data( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed "false",
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : jQuery._data( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	},

	val: function( value ) {
		var ret, hooks, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// handle most common string cases
					ret.replace(rreturn, "") :
					// handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val,
				self = jQuery(this);

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, self.val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";
			} else if ( typeof val === "number" ) {
				val += "";
			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map(val, function ( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				// attributes.value is undefined in Blackberry 4.7 but
				// uses .value. See #6932
				var val = elem.attributes.value;
				return !val || val.specified ? elem.value : elem.text;
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// oldIE doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( jQuery.support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var values = jQuery.makeArray( value );

				jQuery(elem).find("option").each(function() {
					this.selected = jQuery.inArray( jQuery(this).val(), values ) >= 0;
				});

				if ( !values.length ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	},

	attr: function( elem, name, value ) {
		var hooks, notxml, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === core_strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( notxml ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] || ( rboolean.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && notxml && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && notxml && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {

			// In IE9+, Flash objects don't have .getAttribute (#12945)
			// Support: IE9+
			if ( typeof elem.getAttribute !== core_strundefined ) {
				ret =  elem.getAttribute( name );
			}

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( core_rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( rboolean.test( name ) ) {
					// Set corresponding property to false for boolean attributes
					// Also clear defaultChecked/defaultSelected (if appropriate) for IE<8
					if ( !getSetAttribute && ruseDefault.test( name ) ) {
						elem[ jQuery.camelCase( "default-" + name ) ] =
							elem[ propName ] = false;
					} else {
						elem[ propName ] = false;
					}

				// See #9699 for explanation of this approach (setting first, then removal)
				} else {
					jQuery.attr( elem, name, "" );
				}

				elem.removeAttribute( getSetAttribute ? name : propName );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !jQuery.support.radioValue && value === "radio" && jQuery.nodeName(elem, "input") ) {
					// Setting the type on a radio button after the value resets the value in IE6-9
					// Reset value to default in case type is set after value during creation
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	propFix: {
		tabindex: "tabIndex",
		readonly: "readOnly",
		"for": "htmlFor",
		"class": "className",
		maxlength: "maxLength",
		cellspacing: "cellSpacing",
		cellpadding: "cellPadding",
		rowspan: "rowSpan",
		colspan: "colSpan",
		usemap: "useMap",
		frameborder: "frameBorder",
		contenteditable: "contentEditable"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				return ( elem[ name ] = value );
			}

		} else {
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
				return ret;

			} else {
				return elem[ name ];
			}
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
				// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				var attributeNode = elem.getAttributeNode("tabindex");

				return attributeNode && attributeNode.specified ?
					parseInt( attributeNode.value, 10 ) :
					rfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?
						0 :
						undefined;
			}
		}
	}
});

// Hook for boolean attributes
boolHook = {
	get: function( elem, name ) {
		var
			// Use .prop to determine if this attribute is understood as boolean
			prop = jQuery.prop( elem, name ),

			// Fetch it accordingly
			attr = typeof prop === "boolean" && elem.getAttribute( name ),
			detail = typeof prop === "boolean" ?

				getSetInput && getSetAttribute ?
					attr != null :
					// oldIE fabricates an empty string for missing boolean attributes
					// and conflates checked/selected into attroperties
					ruseDefault.test( name ) ?
						elem[ jQuery.camelCase( "default-" + name ) ] :
						!!attr :

				// fetch an attribute node for properties not recognized as boolean
				elem.getAttributeNode( name );

		return detail && detail.value !== false ?
			name.toLowerCase() :
			undefined;
	},
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
			// IE<8 needs the *property* name
			elem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );

		// Use defaultChecked and defaultSelected for oldIE
		} else {
			elem[ jQuery.camelCase( "default-" + name ) ] = elem[ name ] = true;
		}

		return name;
	}
};

// fix oldIE value attroperty
if ( !getSetInput || !getSetAttribute ) {
	jQuery.attrHooks.value = {
		get: function( elem, name ) {
			var ret = elem.getAttributeNode( name );
			return jQuery.nodeName( elem, "input" ) ?

				// Ignore the value *property* by using defaultValue
				elem.defaultValue :

				ret && ret.specified ? ret.value : undefined;
		},
		set: function( elem, value, name ) {
			if ( jQuery.nodeName( elem, "input" ) ) {
				// Does not return so that setAttribute is also used
				elem.defaultValue = value;
			} else {
				// Use nodeHook if defined (#1954); otherwise setAttribute is fine
				return nodeHook && nodeHook.set( elem, value, name );
			}
		}
	};
}

// IE6/7 do not support getting/setting some attributes with get/setAttribute
if ( !getSetAttribute ) {

	// Use this for any attribute in IE6/7
	// This fixes almost every IE6/7 issue
	nodeHook = jQuery.valHooks.button = {
		get: function( elem, name ) {
			var ret = elem.getAttributeNode( name );
			return ret && ( name === "id" || name === "name" || name === "coords" ? ret.value !== "" : ret.specified ) ?
				ret.value :
				undefined;
		},
		set: function( elem, value, name ) {
			// Set the existing or create a new attribute node
			var ret = elem.getAttributeNode( name );
			if ( !ret ) {
				elem.setAttributeNode(
					(ret = elem.ownerDocument.createAttribute( name ))
				);
			}

			ret.value = value += "";

			// Break association with cloned elements by also using setAttribute (#9646)
			return name === "value" || value === elem.getAttribute( name ) ?
				value :
				undefined;
		}
	};

	// Set contenteditable to false on removals(#10429)
	// Setting to empty string throws an error as an invalid value
	jQuery.attrHooks.contenteditable = {
		get: nodeHook.get,
		set: function( elem, value, name ) {
			nodeHook.set( elem, value === "" ? false : value, name );
		}
	};

	// Set width and height to auto instead of 0 on empty string( Bug #8150 )
	// This is for removals
	jQuery.each([ "width", "height" ], function( i, name ) {
		jQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {
			set: function( elem, value ) {
				if ( value === "" ) {
					elem.setAttribute( name, "auto" );
					return value;
				}
			}
		});
	});
}


// Some attributes require a special call on IE
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !jQuery.support.hrefNormalized ) {
	jQuery.each([ "href", "src", "width", "height" ], function( i, name ) {
		jQuery.attrHooks[ name ] = jQuery.extend( jQuery.attrHooks[ name ], {
			get: function( elem ) {
				var ret = elem.getAttribute( name, 2 );
				return ret == null ? undefined : ret;
			}
		});
	});

	// href/src property should get the full normalized URL (#10299/#12915)
	jQuery.each([ "href", "src" ], function( i, name ) {
		jQuery.propHooks[ name ] = {
			get: function( elem ) {
				return elem.getAttribute( name, 4 );
			}
		};
	});
}

if ( !jQuery.support.style ) {
	jQuery.attrHooks.style = {
		get: function( elem ) {
			// Return undefined in the case of empty string
			// Note: IE uppercases css property names, but if we were to .toLowerCase()
			// .cssText, that would destroy case senstitivity in URL's, like in "background"
			return elem.style.cssText || undefined;
		},
		set: function( elem, value ) {
			return ( elem.style.cssText = value + "" );
		}
	};
}

// Safari mis-reports the default selected property of an option
// Accessing the parent's selectedIndex property fixes it
if ( !jQuery.support.optSelected ) {
	jQuery.propHooks.selected = jQuery.extend( jQuery.propHooks.selected, {
		get: function( elem ) {
			var parent = elem.parentNode;

			if ( parent ) {
				parent.selectedIndex;

				// Make sure that it also works with optgroups, see #5701
				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
			return null;
		}
	});
}

// IE6/7 call enctype encoding
if ( !jQuery.support.enctype ) {
	jQuery.propFix.enctype = "encoding";
}

// Radios and checkboxes getter/setter
if ( !jQuery.support.checkOn ) {
	jQuery.each([ "radio", "checkbox" ], function() {
		jQuery.valHooks[ this ] = {
			get: function( elem ) {
				// Handle the case where in Webkit "" is returned instead of "on" if a value isn't specified
				return elem.getAttribute("value") === null ? "on" : elem.value;
			}
		};
	});
}
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = jQuery.extend( jQuery.valHooks[ this ], {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	});
});
var rformElems = /^(?:input|select|textarea)$/i,
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {
		var tmp, events, t, handleObjIn,
			special, eventHandle, handleObj,
			handlers, type, namespaces, origType,
			elemData = jQuery._data( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?
					jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :
					undefined;
			};
			// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
			eventHandle.elem = elem;
		}

		// Handle multiple events separated by a space
		// jQuery(...).bind("mouseover mouseout", fn);
		types = ( types || "" ).match( core_rnotwhite ) || [""];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener/attachEvent if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					// Bind the global event handler to the element
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );

					} else if ( elem.attachEvent ) {
						elem.attachEvent( "on" + type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

		// Nullify elem to prevent memory leaks in IE
		elem = null;
	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {
		var j, handleObj, tmp,
			origCount, t, events,
			special, handlers, type,
			namespaces, origType,
			elemData = jQuery.hasData( elem ) && jQuery._data( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( core_rnotwhite ) || [""];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;

			// removeData also checks for emptiness and clears the expando if empty
			// so use it instead of delete
			jQuery._removeData( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {
		var handle, ontype, cur,
			bubbleType, special, tmp, i,
			eventPath = [ elem || document ],
			type = core_hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = core_hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		event.isTrigger = true;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( jQuery._data( cur, "events" ) || {} )[ event.type ] && jQuery._data( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {
				event.preventDefault();
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( elem.ownerDocument, data ) === false) &&
				!(type === "click" && jQuery.nodeName( elem, "a" )) && jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Can't use an .isFunction() check here because IE6/7 fails that test.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					try {
						elem[ type ]();
					} catch ( e ) {
						// IE<9 dies on focus/blur to hidden element (#1486,#12518)
						// only reproducible on winXP IE8 native, not IE9 in IE8 mode
					}
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, ret, handleObj, matched, j,
			handlerQueue = [],
			args = core_slice.call( arguments ),
			handlers = ( jQuery._data( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or
				// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var sel, handleObj, matches, i,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur != this; cur = cur.parentNode || this ) {

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && (cur.disabled !== true || event.type !== "click") ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: IE<9
		// Fix target property (#1925)
		if ( !event.target ) {
			event.target = originalEvent.srcElement || document;
		}

		// Support: Chrome 23+, Safari?
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		// Support: IE<9
		// For mouse/key events, metaKey==false if it's undefined (#3368, #11328)
		event.metaKey = !!event.metaKey;

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var body, eventDoc, doc,
				button = original.button,
				fromElement = original.fromElement;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add relatedTarget, if necessary
			if ( !event.relatedTarget && fromElement ) {
				event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( jQuery.nodeName( this, "input" ) && this.type === "checkbox" && this.click ) {
					this.click();
					return false;
				}
			}
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== document.activeElement && this.focus ) {
					try {
						this.focus();
						return false;
					} catch ( e ) {
						// Support: IE<9
						// If we error on focus to hidden element (#1486, #12518),
						// let .trigger() run the handlers
					}
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === document.activeElement && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Even when returnValue equals to undefined Firefox will still show alert
				if ( event.result !== undefined ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{ type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = document.removeEventListener ?
	function( elem, type, handle ) {
		if ( elem.removeEventListener ) {
			elem.removeEventListener( type, handle, false );
		}
	} :
	function( elem, type, handle ) {
		var name = "on" + type;

		if ( elem.detachEvent ) {

			// #8545, #7054, preventing memory leaks for custom events in IE6-8
			// detachEvent needed property on element, by name of that event, to properly expose it to GC
			if ( typeof elem[ name ] === core_strundefined ) {
				elem[ name ] = null;
			}

			elem.detachEvent( name, handle );
		}
	};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = ( src.defaultPrevented || src.returnValue === false ||
			src.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;
		if ( !e ) {
			return;
		}

		// If preventDefault exists, run it on the original event
		if ( e.preventDefault ) {
			e.preventDefault();

		// Support: IE
		// Otherwise set the returnValue property of the original event to false
		} else {
			e.returnValue = false;
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;
		if ( !e ) {
			return;
		}
		// If stopPropagation exists, run it on the original event
		if ( e.stopPropagation ) {
			e.stopPropagation();
		}

		// Support: IE
		// Set the cancelBubble property of the original event to true
		e.cancelBubble = true;
	},
	stopImmediatePropagation: function() {
		this.isImmediatePropagationStopped = returnTrue;
		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// IE submit delegation
if ( !jQuery.support.submitBubbles ) {

	jQuery.event.special.submit = {
		setup: function() {
			// Only need this for delegated form submit events
			if ( jQuery.nodeName( this, "form" ) ) {
				return false;
			}

			// Lazy-add a submit handler when a descendant form may potentially be submitted
			jQuery.event.add( this, "click._submit keypress._submit", function( e ) {
				// Node name check avoids a VML-related crash in IE (#9807)
				var elem = e.target,
					form = jQuery.nodeName( elem, "input" ) || jQuery.nodeName( elem, "button" ) ? elem.form : undefined;
				if ( form && !jQuery._data( form, "submitBubbles" ) ) {
					jQuery.event.add( form, "submit._submit", function( event ) {
						event._submit_bubble = true;
					});
					jQuery._data( form, "submitBubbles", true );
				}
			});
			// return undefined since we don't need an event listener
		},

		postDispatch: function( event ) {
			// If form was submitted by the user, bubble the event up the tree
			if ( event._submit_bubble ) {
				delete event._submit_bubble;
				if ( this.parentNode && !event.isTrigger ) {
					jQuery.event.simulate( "submit", this.parentNode, event, true );
				}
			}
		},

		teardown: function() {
			// Only need this for delegated form submit events
			if ( jQuery.nodeName( this, "form" ) ) {
				return false;
			}

			// Remove delegated handlers; cleanData eventually reaps submit handlers attached above
			jQuery.event.remove( this, "._submit" );
		}
	};
}

// IE change delegation and checkbox/radio fix
if ( !jQuery.support.changeBubbles ) {

	jQuery.event.special.change = {

		setup: function() {

			if ( rformElems.test( this.nodeName ) ) {
				// IE doesn't fire change on a check/radio until blur; trigger it on click
				// after a propertychange. Eat the blur-change in special.change.handle.
				// This still fires onchange a second time for check/radio after blur.
				if ( this.type === "checkbox" || this.type === "radio" ) {
					jQuery.event.add( this, "propertychange._change", function( event ) {
						if ( event.originalEvent.propertyName === "checked" ) {
							this._just_changed = true;
						}
					});
					jQuery.event.add( this, "click._change", function( event ) {
						if ( this._just_changed && !event.isTrigger ) {
							this._just_changed = false;
						}
						// Allow triggered, simulated change events (#11500)
						jQuery.event.simulate( "change", this, event, true );
					});
				}
				return false;
			}
			// Delegated event; lazy-add a change handler on descendant inputs
			jQuery.event.add( this, "beforeactivate._change", function( e ) {
				var elem = e.target;

				if ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, "changeBubbles" ) ) {
					jQuery.event.add( elem, "change._change", function( event ) {
						if ( this.parentNode && !event.isSimulated && !event.isTrigger ) {
							jQuery.event.simulate( "change", this.parentNode, event, true );
						}
					});
					jQuery._data( elem, "changeBubbles", true );
				}
			});
		},

		handle: function( event ) {
			var elem = event.target;

			// Swallow native change events from checkbox/radio, we already triggered them above
			if ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox") ) {
				return event.handleObj.handler.apply( this, arguments );
			}
		},

		teardown: function() {
			jQuery.event.remove( this, "._change" );

			return !rformElems.test( this.nodeName );
		}
	};
}

// Create "bubbling" focus and blur events
if ( !jQuery.support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler while someone wants focusin/focusout
		var attaches = 0,
			handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				if ( attaches++ === 0 ) {
					document.addEventListener( orig, handler, true );
				}
			},
			teardown: function() {
				if ( --attaches === 0 ) {
					document.removeEventListener( orig, handler, true );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var type, origFn;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});
/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
(function( window, undefined ) {

var i,
	cachedruns,
	Expr,
	getText,
	isXML,
	compile,
	hasDuplicate,
	outermostContext,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsXML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,
	sortOrder,

	// Instance-specific data
	expando = "sizzle" + -(new Date()),
	preferredDoc = window.document,
	support = {},
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),

	// General-purpose constants
	strundefined = typeof undefined,
	MAX_NEGATIVE = 1 << 31,

	// Array methods
	arr = [],
	pop = arr.pop,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf if we can't use a native one
	indexOf = arr.indexOf || function( elem ) {
		var i = 0,
			len = this.length;
		for ( ; i < len; i++ ) {
			if ( this[i] === elem ) {
				return i;
			}
		}
		return -1;
	},


	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors
	operators = "([*^$|!~]?=)",
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")" + whitespace +
		"*(?:" + operators + whitespace + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + identifier + ")|)|)" + whitespace + "*\\]",

	// Prefer arguments quoted,
	//   then not containing pseudos/brackets,
	//   then attribute selectors/non-parenthetical expressions,
	//   then anything else
	// These preferences are here to reduce the number of selectors
	//   needing tokenize in the PSEUDO preFilter
	pseudos = ":(" + characterEncoding + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + attributes.replace( 3, 8 ) + ")*)|.*)\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([\\x20\\t\\r\\n\\f>+~])" + whitespace + "*" ),
	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"NAME": new RegExp( "^\\[name=['\"]?(" + characterEncoding + ")['\"]?\\]" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rsibling = /[\x20\t\r\n\f]*[+~]/,

	rnative = /^[^{]+\{\s*\[native code/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rescape = /'|\\/g,
	rattributeQuotes = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = /\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,
	funescape = function( _, escaped ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		return high !== high ?
			escaped :
			// BMP codepoint
			high < 0 ?
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	};

// Use a stripped-down slice if we can't use a native one
try {
	slice.call( preferredDoc.documentElement.childNodes, 0 )[0].nodeType;
} catch ( e ) {
	slice = function( i ) {
		var elem,
			results = [];
		while ( (elem = this[i++]) ) {
			results.push( elem );
		}
		return results;
	};
}

/**
 * For feature detection
 * @param {Function} fn The function to test for native support
 */
function isNative( fn ) {
	return rnative.test( fn + "" );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var cache,
		keys = [];

	return (cache = function( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key += " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key ] = value);
	});
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return fn( div );
	} catch (e) {
		return false;
	} finally {
		// release memory in IE
		div = null;
	}
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];

	if ( !selector || typeof selector !== "string" ) {
		return results;
	}

	if ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {
		return [];
	}

	if ( !documentIsXML && !seed ) {

		// Shortcuts
		if ( (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document #6963
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, slice.call(context.getElementsByTagName( selector ), 0) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getByClassName && context.getElementsByClassName ) {
				push.apply( results, slice.call(context.getElementsByClassName( m ), 0) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && !rbuggyQSA.test(selector) ) {
			old = true;
			nid = expando;
			newContext = context;
			newSelector = nodeType === 9 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && context.parentNode || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results, slice.call( newContext.querySelectorAll(
						newSelector
					), 0 ) );
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Detect xml
 * @param {Element|Object} elem An element or a document
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;

	// Support tests
	documentIsXML = isXML( doc );

	// Check if getElementsByTagName("*") returns only elements
	support.tagNameNoComments = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Check if attributes should be retrieved by attribute nodes
	support.attributes = assert(function( div ) {
		div.innerHTML = "<select></select>";
		var type = typeof div.lastChild.getAttribute("multiple");
		// IE8 returns a string for some attributes even when not present
		return type !== "boolean" && type !== "string";
	});

	// Check if getElementsByClassName can be trusted
	support.getByClassName = assert(function( div ) {
		// Opera can't find a second classname (in 9.6)
		div.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>";
		if ( !div.getElementsByClassName || !div.getElementsByClassName("e").length ) {
			return false;
		}

		// Safari 3.2 caches class attributes and doesn't catch changes
		div.lastChild.className = "e";
		return div.getElementsByClassName("e").length === 2;
	});

	// Check if getElementById returns elements by name
	// Check if getElementsByName privileges form controls or returns elements by ID
	support.getByName = assert(function( div ) {
		// Inject content
		div.id = expando + 0;
		div.innerHTML = "<a name='" + expando + "'></a><div name='" + expando + "'></div>";
		docElem.insertBefore( div, docElem.firstChild );

		// Test
		var pass = doc.getElementsByName &&
			// buggy browsers will return fewer than the correct 2
			doc.getElementsByName( expando ).length === 2 +
			// buggy browsers will return more than the correct 0
			doc.getElementsByName( expando + 0 ).length;
		support.getIdNotName = !doc.getElementById( expando );

		// Cleanup
		docElem.removeChild( div );

		return pass;
	});

	// IE6/7 return modified attributes
	Expr.attrHandle = assert(function( div ) {
		div.innerHTML = "<a href='#'></a>";
		return div.firstChild && typeof div.firstChild.getAttribute !== strundefined &&
			div.firstChild.getAttribute("href") === "#";
	}) ?
		{} :
		{
			"href": function( elem ) {
				return elem.getAttribute( "href", 2 );
			},
			"type": function( elem ) {
				return elem.getAttribute("type");
			}
		};

	// ID find and filter
	if ( support.getIdNotName ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== strundefined && !documentIsXML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [m] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== strundefined && !documentIsXML ) {
				var m = context.getElementById( id );

				return m ?
					m.id === id || typeof m.getAttributeNode !== strundefined && m.getAttributeNode("id").value === id ?
						[m] :
						undefined :
					[];
			}
		};
		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.tagNameNoComments ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== strundefined ) {
				return context.getElementsByTagName( tag );
			}
		} :
		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Name
	Expr.find["NAME"] = support.getByName && function( tag, context ) {
		if ( typeof context.getElementsByName !== strundefined ) {
			return context.getElementsByName( name );
		}
	};

	// Class
	Expr.find["CLASS"] = support.getByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== strundefined && !documentIsXML ) {
			return context.getElementsByClassName( className );
		}
	};

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21),
	// no need to also add to buggyMatches since matches checks buggyQSA
	// A support test would require too much code (would include document ready)
	rbuggyQSA = [ ":focus" ];

	if ( (support.qsa = isNative(doc.querySelectorAll)) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explictly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			div.innerHTML = "<select><option selected=''></option></select>";

			// IE8 - Some boolean attributes are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)" );
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}
		});

		assert(function( div ) {

			// Opera 10-12/IE8 - ^= $= *= and empty values
			// Should not select anything
			div.innerHTML = "<input type='hidden' i=''/>";
			if ( div.querySelectorAll("[i^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:\"\"|'')" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = isNative( (matches = docElem.matchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.webkitMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = new RegExp( rbuggyMatches.join("|") );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = isNative(docElem.contains) || docElem.compareDocumentPosition ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	// Document order sorting
	sortOrder = docElem.compareDocumentPosition ?
	function( a, b ) {
		var compare;

		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		if ( (compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b )) ) {
			if ( compare & 1 || a.parentNode && a.parentNode.nodeType === 11 ) {
				if ( a === doc || contains( preferredDoc, a ) ) {
					return -1;
				}
				if ( b === doc || contains( preferredDoc, b ) ) {
					return 1;
				}
				return 0;
			}
			return compare & 4 ? -1 : 1;
		}

		return a.compareDocumentPosition ? -1 : 1;
	} :
	function( a, b ) {
		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;

		// Parentless nodes are either documents or disconnected
		} else if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	// Always assume the presence of duplicates if sort doesn't
	// pass them to our comparison function (as in Google Chrome).
	hasDuplicate = false;
	[0, 0].sort( sortOrder );
	support.detectDuplicates = hasDuplicate;

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	// rbuggyQSA always contains :focus, so no need for an existence check
	if ( support.matchesSelector && !documentIsXML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && !rbuggyQSA.test(expr) ) {
		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch(e) {}
	}

	return Sizzle( expr, document, null, [elem] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	var val;

	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	if ( !documentIsXML ) {
		name = name.toLowerCase();
	}
	if ( (val = Expr.attrHandle[ name ]) ) {
		return val( elem );
	}
	if ( documentIsXML || support.attributes ) {
		return elem.getAttribute( name );
	}
	return ( (val = elem.getAttributeNode( name )) || elem.getAttribute( name ) ) && elem[ name ] === true ?
		name :
		val && val.specified ? val.value : null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

// Document sorting and removing duplicates
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		i = 1,
		j = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		for ( ; (elem = results[i]); i++ ) {
			if ( elem === results[ i - 1 ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	return results;
};

function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && ( ~b.sourceIndex || MAX_NEGATIVE ) - ( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

// Returns a function to use in pseudos for input types
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

// Returns a function to use in pseudos for buttons
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

// Returns a function to use in pseudos for positionals
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		for ( ; (node = elem[i]); i++ ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (see #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[5] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[4] ) {
				match[2] = match[4];

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeName ) {
			if ( nodeName === "*" ) {
				return function() { return true; };
			}

			nodeName = nodeName.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
			};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( elem.className || (typeof elem.getAttribute !== strundefined && elem.getAttribute("class")) || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf.call( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifider
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsXML ?
						elem.getAttribute("xml:lang") || elem.getAttribute("lang") :
						elem.lang) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),
			//   not comment, processing instructions, or others
			// Thanks to Diego Perini for the nodeName shortcut
			//   Greater than "@" means alpha characters (specifically not starting with "#" or "?")
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeName > "@" || elem.nodeType === 3 || elem.nodeType === 4 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)
			// use getAttribute instead to test this case
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === elem.type );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

function tokenize( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( tokens = [] );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push( {
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			} );
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push( {
					value: matched,
					type: type,
					matches: match
				} );
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
}

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var data, cache, outerCache,
				dirkey = dirruns + " " + doneName;

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {
							if ( (data = cache[1]) === true || data === cachedruns ) {
								return data === true;
							}
						} else {
							cache = outerCache[ dir ] = [ dirkey ];
							cache[1] = matcher( elem, context, xml ) || cachedruns;
							if ( cache[1] === true ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf.call( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			return ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector( tokens.slice( 0, i - 1 ) ).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	// A counter to specify which element is currently being matched
	var matcherCachedRuns = 0,
		bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, expandContext ) {
			var elem, j, matcher,
				setMatched = [],
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				outermost = expandContext != null,
				contextBackup = outermostContext,
				// We must always have either seed elements or context
				elems = seed || byElement && Expr.find["TAG"]( "*", expandContext && context.parentNode || context ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);

			if ( outermost ) {
				outermostContext = context !== document && context;
				cachedruns = matcherCachedRuns;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			for ( ; (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
						cachedruns = ++matcherCachedRuns;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !group ) {
			group = tokenize( selector );
		}
		i = group.length;
		while ( i-- ) {
			cached = matcherFromTokens( group[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );
	}
	return cached;
};

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function select( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		match = tokenize( selector );

	if ( !seed ) {
		// Try to minimize operations if there is only one group
		if ( match.length === 1 ) {

			// Take a shortcut and set the context if the root selector is an ID
			tokens = match[0] = match[0].slice( 0 );
			if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
					context.nodeType === 9 && !documentIsXML &&
					Expr.relative[ tokens[1].type ] ) {

				context = Expr.find["ID"]( token.matches[0].replace( runescape, funescape ), context )[0];
				if ( !context ) {
					return results;
				}

				selector = selector.slice( tokens.shift().value.length );
			}

			// Fetch a seed set for right-to-left matching
			i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
			while ( i-- ) {
				token = tokens[i];

				// Abort if we hit a combinator
				if ( Expr.relative[ (type = token.type) ] ) {
					break;
				}
				if ( (find = Expr.find[ type ]) ) {
					// Search, expanding context for leading sibling combinators
					if ( (seed = find(
						token.matches[0].replace( runescape, funescape ),
						rsibling.test( tokens[0].type ) && context.parentNode || context
					)) ) {

						// If seed is empty or no tokens remain, we can return early
						tokens.splice( i, 1 );
						selector = seed.length && toSelector( tokens );
						if ( !selector ) {
							push.apply( results, slice.call( seed, 0 ) );
							return results;
						}

						break;
					}
				}
			}
		}
	}

	// Compile and execute a filtering function
	// Provide `match` to avoid retokenization if we modified the selector above
	compile( selector, match )(
		seed,
		context,
		documentIsXML,
		results,
		rsibling.test( selector )
	);
	return results;
}

// Deprecated
Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Easy API for creating new setFilters
function setFilters() {}
Expr.filters = setFilters.prototype = Expr.pseudos;
Expr.setFilters = new setFilters();

// Initialize with the default document
setDocument();

// Override sizzle attribute retrieval
Sizzle.attr = jQuery.attr;
jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;


})( window );
var runtil = /Until$/,
	rparentsprev = /^(?:parents|prev(?:Until|All))/,
	isSimple = /^.[^:#\[\.,]*$/,
	rneedsContext = jQuery.expr.match.needsContext,
	// methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend({
	find: function( selector ) {
		var i, ret, self,
			len = this.length;

		if ( typeof selector !== "string" ) {
			self = this;
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		ret = [];
		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, this[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = ( this.selector ? this.selector + " " : "" ) + selector;
		return ret;
	},

	has: function( target ) {
		var i,
			targets = jQuery( target, this ),
			len = targets.length;

		return this.filter(function() {
			for ( i = 0; i < len; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	not: function( selector ) {
		return this.pushStack( winnow(this, selector, false) );
	},

	filter: function( selector ) {
		return this.pushStack( winnow(this, selector, true) );
	},

	is: function( selector ) {
		return !!selector && (
			typeof selector === "string" ?
				// If this is a positional/relative selector, check membership in the returned set
				// so $("p:first").is("p:last") won't return true for a doc with two "p".
				rneedsContext.test( selector ) ?
					jQuery( selector, this.context ).index( this[0] ) >= 0 :
					jQuery.filter( selector, this ).length > 0 :
				this.filter( selector ).length > 0 );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			ret = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			cur = this[i];

			while ( cur && cur.ownerDocument && cur !== context && cur.nodeType !== 11 ) {
				if ( pos ? pos.index(cur) > -1 : jQuery.find.matchesSelector(cur, selectors) ) {
					ret.push( cur );
					break;
				}
				cur = cur.parentNode;
			}
		}

		return this.pushStack( ret.length > 1 ? jQuery.unique( ret ) : ret );
	},

	// Determine the position of an element within
	// the matched set of elements
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[0] && this[0].parentNode ) ? this.first().prevAll().length : -1;
		}

		// index in selector
		if ( typeof elem === "string" ) {
			return jQuery.inArray( this[0], jQuery( elem ) );
		}

		// Locate the position of the desired element
		return jQuery.inArray(
			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[0] : elem, this );
	},

	add: function( selector, context ) {
		var set = typeof selector === "string" ?
				jQuery( selector, context ) :
				jQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),
			all = jQuery.merge( this.get(), set );

		return this.pushStack( jQuery.unique(all) );
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

jQuery.fn.andSelf = jQuery.fn.addBack;

function sibling( cur, dir ) {
	do {
		cur = cur[ dir ];
	} while ( cur && cur.nodeType !== 1 );

	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return jQuery.nodeName( elem, "iframe" ) ?
			elem.contentDocument || elem.contentWindow.document :
			jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var ret = jQuery.map( this, fn, until );

		if ( !runtil.test( name ) ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			ret = jQuery.filter( selector, ret );
		}

		ret = this.length > 1 && !guaranteedUnique[ name ] ? jQuery.unique( ret ) : ret;

		if ( this.length > 1 && rparentsprev.test( name ) ) {
			ret = ret.reverse();
		}

		return this.pushStack( ret );
	};
});

jQuery.extend({
	filter: function( expr, elems, not ) {
		if ( not ) {
			expr = ":not(" + expr + ")";
		}

		return elems.length === 1 ?
			jQuery.find.matchesSelector(elems[0], expr) ? [ elems[0] ] : [] :
			jQuery.find.matches(expr, elems);
	},

	dir: function( elem, dir, until ) {
		var matched = [],
			cur = elem[ dir ];

		while ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {
			if ( cur.nodeType === 1 ) {
				matched.push( cur );
			}
			cur = cur[dir];
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var r = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				r.push( n );
			}
		}

		return r;
	}
});

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, keep ) {

	// Can't pass null or undefined to indexOf in Firefox 4
	// Set to 0 to skip string check
	qualifier = qualifier || 0;

	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep(elements, function( elem, i ) {
			var retVal = !!qualifier.call( elem, i, elem );
			return retVal === keep;
		});

	} else if ( qualifier.nodeType ) {
		return jQuery.grep(elements, function( elem ) {
			return ( elem === qualifier ) === keep;
		});

	} else if ( typeof qualifier === "string" ) {
		var filtered = jQuery.grep(elements, function( elem ) {
			return elem.nodeType === 1;
		});

		if ( isSimple.test( qualifier ) ) {
			return jQuery.filter(qualifier, filtered, !keep);
		} else {
			qualifier = jQuery.filter( qualifier, filtered );
		}
	}

	return jQuery.grep(elements, function( elem ) {
		return ( jQuery.inArray( elem, qualifier ) >= 0 ) === keep;
	});
}
function createSafeFragment( document ) {
	var list = nodeNames.split( "|" ),
		safeFrag = document.createDocumentFragment();

	if ( safeFrag.createElement ) {
		while ( list.length ) {
			safeFrag.createElement(
				list.pop()
			);
		}
	}
	return safeFrag;
}

var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" +
		"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
	rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g,
	rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"),
	rleadingWhitespace = /^\s+/,
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rtbody = /<tbody/i,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	manipulation_rcheckableType = /^(?:checkbox|radio)$/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {
		option: [ 1, "<select multiple='multiple'>", "</select>" ],
		legend: [ 1, "<fieldset>", "</fieldset>" ],
		area: [ 1, "<map>", "</map>" ],
		param: [ 1, "<object>", "</object>" ],
		thead: [ 1, "<table>", "</table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		// IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
		// unless wrapped in a div with non-breaking characters in front of it.
		_default: jQuery.support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>"  ]
	},
	safeFragment = createSafeFragment( document ),
	fragmentDiv = safeFragment.appendChild( document.createElement("div") );

wrapMap.optgroup = wrapMap.option;
wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

jQuery.fn.extend({
	text: function( value ) {
		return jQuery.access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );
		}, null, value, arguments.length );
	},

	wrapAll: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function(i) {
				jQuery(this).wrapAll( html.call(this, i) );
			});
		}

		if ( this[0] ) {
			// The elements to wrap the target around
			var wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);

			if ( this[0].parentNode ) {
				wrap.insertBefore( this[0] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstChild && elem.firstChild.nodeType === 1 ) {
					elem = elem.firstChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function(i) {
				jQuery(this).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function(i) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	},

	append: function() {
		return this.domManip(arguments, true, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				this.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip(arguments, true, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				this.insertBefore( elem, this.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, false, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, false, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	// keepData is for internal use only--do not document
	remove: function( selector, keepData ) {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( !selector || jQuery.filter( selector, [ elem ] ).length > 0 ) {
				if ( !keepData && elem.nodeType === 1 ) {
					jQuery.cleanData( getAll( elem ) );
				}

				if ( elem.parentNode ) {
					if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
						setGlobalEval( getAll( elem, "script" ) );
					}
					elem.parentNode.removeChild( elem );
				}
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			// Remove element nodes and prevent memory leaks
			if ( elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem, false ) );
			}

			// Remove any remaining nodes
			while ( elem.firstChild ) {
				elem.removeChild( elem.firstChild );
			}

			// If this is a select, ensure that it displays empty (#12336)
			// Support: IE<9
			if ( elem.options && jQuery.nodeName( elem, "select" ) ) {
				elem.options.length = 0;
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function () {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return jQuery.access( this, function( value ) {
			var elem = this[0] || {},
				i = 0,
				l = this.length;

			if ( value === undefined ) {
				return elem.nodeType === 1 ?
					elem.innerHTML.replace( rinlinejQuery, "" ) :
					undefined;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				( jQuery.support.htmlSerialize || !rnoshimcache.test( value )  ) &&
				( jQuery.support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&
				!wrapMap[ ( rtagName.exec( value ) || ["", ""] )[1].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for (; i < l; i++ ) {
						// Remove element nodes and prevent memory leaks
						elem = this[i] || {};
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch(e) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function( value ) {
		var isFunc = jQuery.isFunction( value );

		// Make sure that the elements are removed from the DOM before they are inserted
		// this can help fix replacing a parent with child elements
		if ( !isFunc && typeof value !== "string" ) {
			value = jQuery( value ).not( this ).detach();
		}

		return this.domManip( [ value ], true, function( elem ) {
			var next = this.nextSibling,
				parent = this.parentNode;

			if ( parent ) {
				jQuery( this ).remove();
				parent.insertBefore( elem, next );
			}
		});
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, table, callback ) {

		// Flatten any nested arrays
		args = core_concat.apply( [], args );

		var first, node, hasScripts,
			scripts, doc, fragment,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[0],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction || !( l <= 1 || typeof value !== "string" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[0] = value.call( this, index, table ? self.html() : undefined );
				}
				self.domManip( args, table, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				table = table && jQuery.nodeName( first, "tr" );
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call(
						table && jQuery.nodeName( this[i], "table" ) ?
							findOrAppend( this[i], "tbody" ) :
							this[i],
						node,
						i
					);
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!jQuery._data( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Hope ajax is available...
								jQuery.ajax({
									url: node.src,
									type: "GET",
									dataType: "script",
									async: false,
									global: false,
									"throws": true
								});
							} else {
								jQuery.globalEval( ( node.text || node.textContent || node.innerHTML || "" ).replace( rcleanScript, "" ) );
							}
						}
					}
				}

				// Fix #11809: Avoid leaking memory
				fragment = first = null;
			}
		}

		return this;
	}
});

function findOrAppend( elem, tag ) {
	return elem.getElementsByTagName( tag )[0] || elem.appendChild( elem.ownerDocument.createElement( tag ) );
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	var attr = elem.getAttributeNode("type");
	elem.type = ( attr && attr.specified ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );
	if ( match ) {
		elem.type = match[1];
	} else {
		elem.removeAttribute("type");
	}
	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var elem,
		i = 0;
	for ( ; (elem = elems[i]) != null; i++ ) {
		jQuery._data( elem, "globalEval", !refElements || jQuery._data( refElements[i], "globalEval" ) );
	}
}

function cloneCopyEvent( src, dest ) {

	if ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {
		return;
	}

	var type, i, l,
		oldData = jQuery._data( src ),
		curData = jQuery._data( dest, oldData ),
		events = oldData.events;

	if ( events ) {
		delete curData.handle;
		curData.events = {};

		for ( type in events ) {
			for ( i = 0, l = events[ type ].length; i < l; i++ ) {
				jQuery.event.add( dest, type, events[ type ][ i ] );
			}
		}
	}

	// make the cloned public data object a copy from the original
	if ( curData.data ) {
		curData.data = jQuery.extend( {}, curData.data );
	}
}

function fixCloneNodeIssues( src, dest ) {
	var nodeName, e, data;

	// We do not need to do anything for non-Elements
	if ( dest.nodeType !== 1 ) {
		return;
	}

	nodeName = dest.nodeName.toLowerCase();

	// IE6-8 copies events bound via attachEvent when using cloneNode.
	if ( !jQuery.support.noCloneEvent && dest[ jQuery.expando ] ) {
		data = jQuery._data( dest );

		for ( e in data.events ) {
			jQuery.removeEvent( dest, e, data.handle );
		}

		// Event data gets referenced instead of copied if the expando gets copied too
		dest.removeAttribute( jQuery.expando );
	}

	// IE blanks contents when cloning scripts, and tries to evaluate newly-set text
	if ( nodeName === "script" && dest.text !== src.text ) {
		disableScript( dest ).text = src.text;
		restoreScript( dest );

	// IE6-10 improperly clones children of object elements using classid.
	// IE10 throws NoModificationAllowedError if parent is null, #12132.
	} else if ( nodeName === "object" ) {
		if ( dest.parentNode ) {
			dest.outerHTML = src.outerHTML;
		}

		// This path appears unavoidable for IE9. When cloning an object
		// element in IE9, the outerHTML strategy above is not sufficient.
		// If the src has innerHTML and the destination does not,
		// copy the src.innerHTML into the dest.innerHTML. #10324
		if ( jQuery.support.html5Clone && ( src.innerHTML && !jQuery.trim(dest.innerHTML) ) ) {
			dest.innerHTML = src.innerHTML;
		}

	} else if ( nodeName === "input" && manipulation_rcheckableType.test( src.type ) ) {
		// IE6-8 fails to persist the checked state of a cloned checkbox
		// or radio button. Worse, IE6-7 fail to give the cloned element
		// a checked appearance if the defaultChecked value isn't also set

		dest.defaultChecked = dest.checked = src.checked;

		// IE6-7 get confused and end up setting the value of a cloned
		// checkbox/radio button to an empty string instead of "on"
		if ( dest.value !== src.value ) {
			dest.value = src.value;
		}

	// IE6-8 fails to return the selected option to the default selected
	// state when cloning options
	} else if ( nodeName === "option" ) {
		dest.defaultSelected = dest.selected = src.defaultSelected;

	// IE6-8 fails to set the defaultValue to the correct value when
	// cloning other types of input fields
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			i = 0,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone(true);
			jQuery( insert[i] )[ original ]( elems );

			// Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()
			core_push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});

function getAll( context, tag ) {
	var elems, elem,
		i = 0,
		found = typeof context.getElementsByTagName !== core_strundefined ? context.getElementsByTagName( tag || "*" ) :
			typeof context.querySelectorAll !== core_strundefined ? context.querySelectorAll( tag || "*" ) :
			undefined;

	if ( !found ) {
		for ( found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++ ) {
			if ( !tag || jQuery.nodeName( elem, tag ) ) {
				found.push( elem );
			} else {
				jQuery.merge( found, getAll( elem, tag ) );
			}
		}
	}

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], found ) :
		found;
}

// Used in buildFragment, fixes the defaultChecked property
function fixDefaultChecked( elem ) {
	if ( manipulation_rcheckableType.test( elem.type ) ) {
		elem.defaultChecked = elem.checked;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var destElements, node, clone, i, srcElements,
			inPage = jQuery.contains( elem.ownerDocument, elem );

		if ( jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( "<" + elem.nodeName + ">" ) ) {
			clone = elem.cloneNode( true );

		// IE<=8 does not properly clone detached, unknown element nodes
		} else {
			fragmentDiv.innerHTML = elem.outerHTML;
			fragmentDiv.removeChild( clone = fragmentDiv.firstChild );
		}

		if ( (!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&
				(elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			// Fix all IE cloning issues
			for ( i = 0; (node = srcElements[i]) != null; ++i ) {
				// Ensure that the destination node is not null; Fixes #9587
				if ( destElements[i] ) {
					fixCloneNodeIssues( node, destElements[i] );
				}
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0; (node = srcElements[i]) != null; i++ ) {
					cloneCopyEvent( node, destElements[i] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		destElements = srcElements = node = null;

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var j, elem, contains,
			tmp, tag, tbody, wrap,
			l = elems.length,

			// Ensure a safe fragment
			safe = createSafeFragment( context ),

			nodes = [],
			i = 0;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || safe.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || ["", ""] )[1].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;

					tmp.innerHTML = wrap[1] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[2];

					// Descend through wrappers to the right content
					j = wrap[0];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Manually add leading whitespace removed by IE
					if ( !jQuery.support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {
						nodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[0] ) );
					}

					// Remove IE's autoinserted <tbody> from table fragments
					if ( !jQuery.support.tbody ) {

						// String was a <table>, *may* have spurious <tbody>
						elem = tag === "table" && !rtbody.test( elem ) ?
							tmp.firstChild :

							// String was a bare <thead> or <tfoot>
							wrap[1] === "<table>" && !rtbody.test( elem ) ?
								tmp :
								0;

						j = elem && elem.childNodes.length;
						while ( j-- ) {
							if ( jQuery.nodeName( (tbody = elem.childNodes[j]), "tbody" ) && !tbody.childNodes.length ) {
								elem.removeChild( tbody );
							}
						}
					}

					jQuery.merge( nodes, tmp.childNodes );

					// Fix #12392 for WebKit and IE > 9
					tmp.textContent = "";

					// Fix #12392 for oldIE
					while ( tmp.firstChild ) {
						tmp.removeChild( tmp.firstChild );
					}

					// Remember the top-level container for proper cleanup
					tmp = safe.lastChild;
				}
			}
		}

		// Fix #11356: Clear elements from fragment
		if ( tmp ) {
			safe.removeChild( tmp );
		}

		// Reset defaultChecked for any radios and checkboxes
		// about to be appended to the DOM in IE 6/7 (#8060)
		if ( !jQuery.support.appendChecked ) {
			jQuery.grep( getAll( nodes, "input" ), fixDefaultChecked );
		}

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( safe.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		tmp = null;

		return safe;
	},

	cleanData: function( elems, /* internal */ acceptData ) {
		var elem, type, id, data,
			i = 0,
			internalKey = jQuery.expando,
			cache = jQuery.cache,
			deleteExpando = jQuery.support.deleteExpando,
			special = jQuery.event.special;

		for ( ; (elem = elems[i]) != null; i++ ) {

			if ( acceptData || jQuery.acceptData( elem ) ) {

				id = elem[ internalKey ];
				data = id && cache[ id ];

				if ( data ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Remove cache only if it was not already removed by jQuery.event.remove
					if ( cache[ id ] ) {

						delete cache[ id ];

						// IE does not allow us to delete expando properties from nodes,
						// nor does it have a removeAttribute function on Document nodes;
						// we must handle all of these cases
						if ( deleteExpando ) {
							delete elem[ internalKey ];

						} else if ( typeof elem.removeAttribute !== core_strundefined ) {
							elem.removeAttribute( internalKey );

						} else {
							elem[ internalKey ] = null;
						}

						core_deletedIds.push( id );
					}
				}
			}
		}
	}
});
var iframe, getStyles, curCSS,
	ralpha = /alpha\([^)]*\)/i,
	ropacity = /opacity\s*=\s*([^)]*)/,
	rposition = /^(top|right|bottom|left)$/,
	// swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rmargin = /^margin/,
	rnumsplit = new RegExp( "^(" + core_pnum + ")(.*)$", "i" ),
	rnumnonpx = new RegExp( "^(" + core_pnum + ")(?!px)[a-z%]+$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + core_pnum + ")", "i" ),
	elemdisplay = { BODY: "block" },

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: 0,
		fontWeight: 400
	},

	cssExpand = [ "Top", "Right", "Bottom", "Left" ],
	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// check for vendor prefixed names
	var capName = name.charAt(0).toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function isHidden( elem, el ) {
	// isHidden might be called from jQuery#filter function;
	// in that case, element will be second argument
	elem = el || elem;
	return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = jQuery._data( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = jQuery._data( elem, "olddisplay", css_defaultDisplay(elem.nodeName) );
			}
		} else {

			if ( !values[ index ] ) {
				hidden = isHidden( elem );

				if ( display && display !== "none" || !hidden ) {
					jQuery._data( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
				}
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.fn.extend({
	css: function( name, value ) {
		return jQuery.access( this, function( elem, name, value ) {
			var len, styles,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		var bool = typeof state === "boolean";

		return this.each(function() {
			if ( bool ? state : isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});

jQuery.extend({
	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {
					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Exclude the following css properties to add px
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		// normalize float css property
		"float": jQuery.support.cssFloat ? "cssFloat" : "styleFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {
		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// gets hook for the prefixed version
		// followed by the unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// convert relative number strings (+= or -=) to relative numbers. #7345
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that NaN and null values aren't set. See: #7116
			if ( value == null || type === "number" && isNaN( value ) ) {
				return;
			}

			// If a number was passed in, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
			// but it would mean to define eight (for every problematic property) identical functions
			if ( !jQuery.support.clearCloneStyle && value === "" && name.indexOf("background") === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {

				// Wrapped to prevent IE from throwing errors when 'invalid' values are provided
				// Fixes bug #5509
				try {
					style[ name ] = value;
				} catch(e) {}
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var num, val, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// gets hook for the prefixed version
		// followed by the unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		//convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Return, converting to number if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	},

	// A method for quickly swapping in/out CSS properties to get correct calculations
	swap: function( elem, options, callback, args ) {
		var ret, name,
			old = {};

		// Remember the old values, and insert the new ones
		for ( name in options ) {
			old[ name ] = elem.style[ name ];
			elem.style[ name ] = options[ name ];
		}

		ret = callback.apply( elem, args || [] );

		// Revert the old values
		for ( name in options ) {
			elem.style[ name ] = old[ name ];
		}

		return ret;
	}
});

// NOTE: we've included the "window" in window.getComputedStyle
// because jsdom on node.js will break without it.
if ( window.getComputedStyle ) {
	getStyles = function( elem ) {
		return window.getComputedStyle( elem, null );
	};

	curCSS = function( elem, name, _computed ) {
		var width, minWidth, maxWidth,
			computed = _computed || getStyles( elem ),

			// getPropertyValue is only needed for .css('filter') in IE9, see #12537
			ret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,
			style = elem.style;

		if ( computed ) {

			if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
				ret = jQuery.style( elem, name );
			}

			// A tribute to the "awesome hack by Dean Edwards"
			// Chrome < 17 and Safari 5.0 uses "computed value" instead of "used value" for margin-right
			// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
			// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
			if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

				// Remember the original values
				width = style.width;
				minWidth = style.minWidth;
				maxWidth = style.maxWidth;

				// Put in the new values to get a computed value out
				style.minWidth = style.maxWidth = style.width = ret;
				ret = computed.width;

				// Revert the changed values
				style.width = width;
				style.minWidth = minWidth;
				style.maxWidth = maxWidth;
			}
		}

		return ret;
	};
} else if ( document.documentElement.currentStyle ) {
	getStyles = function( elem ) {
		return elem.currentStyle;
	};

	curCSS = function( elem, name, _computed ) {
		var left, rs, rsLeft,
			computed = _computed || getStyles( elem ),
			ret = computed ? computed[ name ] : undefined,
			style = elem.style;

		// Avoid setting ret to empty string here
		// so we don't default to auto
		if ( ret == null && style && style[ name ] ) {
			ret = style[ name ];
		}

		// From the awesome hack by Dean Edwards
		// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291

		// If we're not dealing with a regular pixel number
		// but a number that has a weird ending, we need to convert it to pixels
		// but not position css attributes, as those are proportional to the parent element instead
		// and we can't measure the parent instead because it might trigger a "stacking dolls" problem
		if ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {

			// Remember the original values
			left = style.left;
			rs = elem.runtimeStyle;
			rsLeft = rs && rs.left;

			// Put in the new values to get a computed value out
			if ( rsLeft ) {
				rs.left = elem.currentStyle.left;
			}
			style.left = name === "fontSize" ? "1em" : ret;
			ret = style.pixelLeft + "px";

			// Revert the changed values
			style.left = left;
			if ( rsLeft ) {
				rs.left = rsLeft;
			}
		}

		return ret === "" ? "auto" : ret;
	};
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// at this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// at this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// at this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// we need the check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

// Try to determine the default display value of an element
function css_defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {
			// Use the already-created iframe if possible
			iframe = ( iframe ||
				jQuery("<iframe frameborder='0' width='0' height='0'/>")
				.css( "cssText", "display:block !important" )
			).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;
			doc.write("<!doctype html><html><body>");
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}

// Called ONLY from within css_defaultDisplay
function actualDisplay( name, doc ) {
	var elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),
		display = jQuery.css( elem[0], "display" );
	elem.remove();
	return display;
}

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {
				// certain elements can have dimension info if we invisibly show them
				// however, it must have a current display style that would benefit from this
				return elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, "display" ) ) ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

if ( !jQuery.support.opacity ) {
	jQuery.cssHooks.opacity = {
		get: function( elem, computed ) {
			// IE uses filters for opacity
			return ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "" ) ?
				( 0.01 * parseFloat( RegExp.$1 ) ) + "" :
				computed ? "1" : "";
		},

		set: function( elem, value ) {
			var style = elem.style,
				currentStyle = elem.currentStyle,
				opacity = jQuery.isNumeric( value ) ? "alpha(opacity=" + value * 100 + ")" : "",
				filter = currentStyle && currentStyle.filter || style.filter || "";

			// IE has trouble with opacity if it does not have layout
			// Force it by setting the zoom level
			style.zoom = 1;

			// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
			// if value === "", then remove inline opacity #12685
			if ( ( value >= 1 || value === "" ) &&
					jQuery.trim( filter.replace( ralpha, "" ) ) === "" &&
					style.removeAttribute ) {

				// Setting style.filter to null, "" & " " still leave "filter:" in the cssText
				// if "filter:" is present at all, clearType is disabled, we want to avoid this
				// style.removeAttribute is IE Only, but so apparently is this code path...
				style.removeAttribute( "filter" );

				// if there is no filter style applied in a css rule or unset inline opacity, we are done
				if ( value === "" || currentStyle && !currentStyle.filter ) {
					return;
				}
			}

			// otherwise, set new filter values
			style.filter = ralpha.test( filter ) ?
				filter.replace( ralpha, opacity ) :
				filter + " " + opacity;
		}
	};
}

// These hooks cannot be added until DOM ready because the support test
// for it is not run until after DOM ready
jQuery(function() {
	if ( !jQuery.support.reliableMarginRight ) {
		jQuery.cssHooks.marginRight = {
			get: function( elem, computed ) {
				if ( computed ) {
					// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
					// Work around by temporarily setting element display to inline-block
					return jQuery.swap( elem, { "display": "inline-block" },
						curCSS, [ elem, "marginRight" ] );
				}
			}
		};
	}

	// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
	// getComputedStyle returns percent when specified for top/left/bottom/right
	// rather than make the css module depend on the offset module, we just check for it here
	if ( !jQuery.support.pixelPosition && jQuery.fn.position ) {
		jQuery.each( [ "top", "left" ], function( i, prop ) {
			jQuery.cssHooks[ prop ] = {
				get: function( elem, computed ) {
					if ( computed ) {
						computed = curCSS( elem, prop );
						// if curCSS returns percentage, fallback to offset
						return rnumnonpx.test( computed ) ?
							jQuery( elem ).position()[ prop ] + "px" :
							computed;
					}
				}
			};
		});
	}

});

if ( jQuery.expr && jQuery.expr.filters ) {
	jQuery.expr.filters.hidden = function( elem ) {
		// Support: Opera <= 12.12
		// Opera reports offsetWidths and offsetHeights less than zero on some elements
		return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 ||
			(!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css( elem, "display" )) === "none");
	};

	jQuery.expr.filters.visible = function( elem ) {
		return !jQuery.expr.filters.hidden( elem );
	};
}

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});
var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function(){
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function(){
			var type = this.type;
			// Use .is(":disabled") so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !manipulation_rcheckableType.test( type ) );
		})
		.map(function( i, elem ){
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ){
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});

//Serialize an array of form elements or a set of
//key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.hover = function( fnOver, fnOut ) {
	return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
};
var
	// Document location
	ajaxLocParts,
	ajaxLocation,
	ajax_nonce = jQuery.now(),

	ajax_rquery = /\?/,
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, // IE leaves an \r character at EOL
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,

	// Keep a copy of the old load method
	_load = jQuery.fn.load,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat("*");

// #8138, IE may throw an exception when accessing
// a field from window.location if document.domain has been set
try {
	ajaxLocation = location.href;
} catch( e ) {
	// Use the href attribute of an A element
	// since IE will modify it given document.location
	ajaxLocation = document.createElement( "a" );
	ajaxLocation.href = "";
	ajaxLocation = ajaxLocation.href;
}

// Segment location into parts
ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var deep, key,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, response, type,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = url.slice( off, url.length );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};

// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ){
	jQuery.fn[ type ] = function( fn ){
		return this.on( type, fn );
	};
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": window.String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var // Cross-domain detection vars
			parts,
			// Loop variable
			i,
			// URL without anti-cache param
			cacheURL,
			// Response headers as string
			responseHeadersString,
			// timeout handle
			timeoutTimer,

			// To know if global events are to be dispatched
			fireGlobals,

			transport,
			// Response headers
			responseHeaders,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" ).replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( core_rnotwhite ) || [""];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? 80 : 443 ) ) !=
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? 80 : 443 ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		fireGlobals = s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + ajax_nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ajax_nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// If successful, handle type chaining
			if ( status >= 200 && status < 300 || status === 304 ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 ) {
					isSuccess = true;
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					isSuccess = true;
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					isSuccess = ajaxConvert( s, response );
					statusText = isSuccess.state;
					success = isSuccess.data;
					error = isSuccess.error;
					isSuccess = !error;
				}
			} else {
				// We extract error from statusText
				// then normalize statusText and status for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	}
});

/* Handles responses to an ajax request:
 * - sets all responseXXX fields accordingly
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {
	var firstDataType, ct, finalDataType, type,
		contents = s.contents,
		dataTypes = s.dataTypes,
		responseFields = s.responseFields;

	// Fill responseXXX fields
	for ( type in responseFields ) {
		if ( type in responses ) {
			jqXHR[ responseFields[type] ] = responses[ type ];
		}
	}

	// Remove auto dataType and get content-type in the process
	while( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

// Chain conversions given the request and the original response
function ajaxConvert( s, response ) {
	var conv2, current, conv, tmp,
		converters = {},
		i = 0,
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice(),
		prev = dataTypes[ 0 ];

	// Apply the dataFilter if provided
	if ( s.dataFilter ) {
		response = s.dataFilter( response, s.dataType );
	}

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	// Convert to each sequential dataType, tolerating list modification
	for ( ; (current = dataTypes[++i]); ) {

		// There's only work to do if current dataType is non-auto
		if ( current !== "*" ) {

			// Convert response if prev dataType is non-auto and differs from current
			if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split(" ");
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.splice( i--, 0, current );
								}

								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s["throws"] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}

			// Update prev for next iteration
			prev = current;
		}
	}

	return { state: "success", data: response };
}
// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and global
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
		s.global = false;
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function(s) {

	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {

		var script,
			head = document.head || jQuery("head")[0] || document.documentElement;

		return {

			send: function( _, callback ) {

				script = document.createElement("script");

				script.async = true;

				if ( s.scriptCharset ) {
					script.charset = s.scriptCharset;
				}

				script.src = s.url;

				// Attach handlers for all browsers
				script.onload = script.onreadystatechange = function( _, isAbort ) {

					if ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {

						// Handle memory leak in IE
						script.onload = script.onreadystatechange = null;

						// Remove the script
						if ( script.parentNode ) {
							script.parentNode.removeChild( script );
						}

						// Dereference the script
						script = null;

						// Callback if not abort
						if ( !isAbort ) {
							callback( 200, "success" );
						}
					}
				};

				// Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
				// Use native DOM manipulation to avoid our domManip AJAX trickery
				head.insertBefore( script, head.firstChild );
			},

			abort: function() {
				if ( script ) {
					script.onload( undefined, true );
				}
			}
		};
	}
});
var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( ajax_nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( ajax_rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});
var xhrCallbacks, xhrSupported,
	xhrId = 0,
	// #5280: Internet Explorer will keep connections alive if we don't abort on unload
	xhrOnUnloadAbort = window.ActiveXObject && function() {
		// Abort all pending requests
		var key;
		for ( key in xhrCallbacks ) {
			xhrCallbacks[ key ]( undefined, true );
		}
	};

// Functions to create xhrs
function createStandardXHR() {
	try {
		return new window.XMLHttpRequest();
	} catch( e ) {}
}

function createActiveXHR() {
	try {
		return new window.ActiveXObject("Microsoft.XMLHTTP");
	} catch( e ) {}
}

// Create the request object
// (This is still attached to ajaxSettings for backward compatibility)
jQuery.ajaxSettings.xhr = window.ActiveXObject ?
	/* Microsoft failed to properly
	 * implement the XMLHttpRequest in IE7 (can't request local files),
	 * so we use the ActiveXObject when it is available
	 * Additionally XMLHttpRequest can be disabled in IE7/IE8 so
	 * we need a fallback.
	 */
	function() {
		return !this.isLocal && createStandardXHR() || createActiveXHR();
	} :
	// For all other browsers, use the standard XMLHttpRequest object
	createStandardXHR;

// Determine support properties
xhrSupported = jQuery.ajaxSettings.xhr();
jQuery.support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
xhrSupported = jQuery.support.ajax = !!xhrSupported;

// Create transport if the browser can provide an xhr
if ( xhrSupported ) {

	jQuery.ajaxTransport(function( s ) {
		// Cross domain only allowed if supported through XMLHttpRequest
		if ( !s.crossDomain || jQuery.support.cors ) {

			var callback;

			return {
				send: function( headers, complete ) {

					// Get a new xhr
					var handle, i,
						xhr = s.xhr();

					// Open the socket
					// Passing null username, generates a login popup on Opera (#2865)
					if ( s.username ) {
						xhr.open( s.type, s.url, s.async, s.username, s.password );
					} else {
						xhr.open( s.type, s.url, s.async );
					}

					// Apply custom fields if provided
					if ( s.xhrFields ) {
						for ( i in s.xhrFields ) {
							xhr[ i ] = s.xhrFields[ i ];
						}
					}

					// Override mime type if needed
					if ( s.mimeType && xhr.overrideMimeType ) {
						xhr.overrideMimeType( s.mimeType );
					}

					// X-Requested-With header
					// For cross-domain requests, seeing as conditions for a preflight are
					// akin to a jigsaw puzzle, we simply never set it to be sure.
					// (it can always be set on a per-request basis or even using ajaxSetup)
					// For same-domain requests, won't change header if already provided.
					if ( !s.crossDomain && !headers["X-Requested-With"] ) {
						headers["X-Requested-With"] = "XMLHttpRequest";
					}

					// Need an extra try/catch for cross domain requests in Firefox 3
					try {
						for ( i in headers ) {
							xhr.setRequestHeader( i, headers[ i ] );
						}
					} catch( err ) {}

					// Do send the request
					// This may raise an exception which is actually
					// handled in jQuery.ajax (so no try/catch here)
					xhr.send( ( s.hasContent && s.data ) || null );

					// Listener
					callback = function( _, isAbort ) {
						var status, responseHeaders, statusText, responses;

						// Firefox throws exceptions when accessing properties
						// of an xhr when a network error occurred
						// http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)
						try {

							// Was never called and is aborted or complete
							if ( callback && ( isAbort || xhr.readyState === 4 ) ) {

								// Only called once
								callback = undefined;

								// Do not keep as active anymore
								if ( handle ) {
									xhr.onreadystatechange = jQuery.noop;
									if ( xhrOnUnloadAbort ) {
										delete xhrCallbacks[ handle ];
									}
								}

								// If it's an abort
								if ( isAbort ) {
									// Abort it manually if needed
									if ( xhr.readyState !== 4 ) {
										xhr.abort();
									}
								} else {
									responses = {};
									status = xhr.status;
									responseHeaders = xhr.getAllResponseHeaders();

									// When requesting binary data, IE6-9 will throw an exception
									// on any attempt to access responseText (#11426)
									if ( typeof xhr.responseText === "string" ) {
										responses.text = xhr.responseText;
									}

									// Firefox throws an exception when accessing
									// statusText for faulty cross-domain requests
									try {
										statusText = xhr.statusText;
									} catch( e ) {
										// We normalize with Webkit giving an empty statusText
										statusText = "";
									}

									// Filter status for non standard behaviors

									// If the request is local and we have data: assume a success
									// (success with no data won't get notified, that's the best we
									// can do given current implementations)
									if ( !status && s.isLocal && !s.crossDomain ) {
										status = responses.text ? 200 : 404;
									// IE - #1450: sometimes returns 1223 when it should be 204
									} else if ( status === 1223 ) {
										status = 204;
									}
								}
							}
						} catch( firefoxAccessException ) {
							if ( !isAbort ) {
								complete( -1, firefoxAccessException );
							}
						}

						// Call complete if needed
						if ( responses ) {
							complete( status, statusText, responses, responseHeaders );
						}
					};

					if ( !s.async ) {
						// if we're in sync mode we fire the callback
						callback();
					} else if ( xhr.readyState === 4 ) {
						// (IE6 & IE7) if it's in cache and has been
						// retrieved directly we need to fire the callback
						setTimeout( callback );
					} else {
						handle = ++xhrId;
						if ( xhrOnUnloadAbort ) {
							// Create the active xhrs callbacks list if needed
							// and attach the unload handler
							if ( !xhrCallbacks ) {
								xhrCallbacks = {};
								jQuery( window ).unload( xhrOnUnloadAbort );
							}
							// Add to list of active xhrs callbacks
							xhrCallbacks[ handle ] = callback;
						}
						xhr.onreadystatechange = callback;
					}
				},

				abort: function() {
					if ( callback ) {
						callback( undefined, true );
					}
				}
			};
		}
	});
}
var fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + core_pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [function( prop, value ) {
			var end, unit,
				tween = this.createTween( prop, value ),
				parts = rfxnum.exec( value ),
				target = tween.cur(),
				start = +target || 0,
				scale = 1,
				maxIterations = 20;

			if ( parts ) {
				end = +parts[2];
				unit = parts[3] || ( jQuery.cssNumber[ prop ] ? "" : "px" );

				// We need to compute starting value
				if ( unit !== "px" && start ) {
					// Iteratively approximate from a nonzero starting point
					// Prefer the current property, because this process will be trivial if it uses the same units
					// Fallback to end or a simple constant
					start = jQuery.css( tween.elem, prop, true ) || end || 1;

					do {
						// If previous iteration zeroed out, double until we get *something*
						// Use a string for doubling factor so we don't accidentally see scale as unchanged below
						scale = scale || ".5";

						// Adjust and apply
						start = start / scale;
						jQuery.style( tween.elem, prop, start + unit );

					// Update scale, tolerating zero or NaN from tween.cur()
					// And breaking the loop if scale is unchanged or perfect, or if we've just had enough
					} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
				}

				tween.unit = unit;
				tween.start = start;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[1] ? start + ( parts[1] + 1 ) * end : end;
			}
			return tween;
		}]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

function createTweens( animation, props ) {
	jQuery.each( props, function( prop, value ) {
		var collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
			index = 0,
			length = collection.length;
		for ( ; index < length; index++ ) {
			if ( collection[ index ].call( animation, prop, value ) ) {

				// we're done with this property
				return;
			}
		}
	});
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// if we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// resolve when we played the last frame
				// otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	createTweens( animation, props );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

function propFilter( props, specialEasing ) {
	var value, name, index, easing, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// not quite $.extend, this wont overwrite keys already present.
			// also - reusing 'index' from above because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

function defaultPrefilter( elem, props, opts ) {
	/*jshint validthis:true */
	var prop, index, length,
		value, dataShow, toggle,
		tween, hooks, oldfire,
		anim = this,
		style = elem.style,
		orig = {},
		handled = [],
		hidden = elem.nodeType && isHidden( elem );

	// handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// doing this makes sure that the complete handler will be called
			// before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE does not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		if ( jQuery.css( elem, "display" ) === "inline" &&
				jQuery.css( elem, "float" ) === "none" ) {

			// inline-level elements accept inline-block;
			// block-level elements need to be inline with layout
			if ( !jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay( elem.nodeName ) === "inline" ) {
				style.display = "inline-block";

			} else {
				style.zoom = 1;
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		if ( !jQuery.support.shrinkWrapBlocks ) {
			anim.always(function() {
				style.overflow = opts.overflow[ 0 ];
				style.overflowX = opts.overflow[ 1 ];
				style.overflowY = opts.overflow[ 2 ];
			});
		}
	}


	// show/hide pass
	for ( index in props ) {
		value = props[ index ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ index ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {
				continue;
			}
			handled.push( index );
		}
	}

	length = handled.length;
	if ( length ) {
		dataShow = jQuery._data( elem, "fxshow" ) || jQuery._data( elem, "fxshow", {} );
		if ( "hidden" in dataShow ) {
			hidden = dataShow.hidden;
		}

		// store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;
			jQuery._removeData( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( index = 0 ; index < length ; index++ ) {
			prop = handled[ index ];
			tween = anim.createTween( prop, hidden ? dataShow[ prop ] : 0 );
			orig[ prop ] = dataShow[ prop ] || jQuery.style( elem, prop );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}
	}
}

function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails
			// so, simple values such as "10px" are parsed to Float.
			// complex values such as "rotate(1rad)" are returned as is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// use step hook for back compat - use cssHook if its there - use .style if its
			// available and use plain properties where available
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Remove in 2.0 - this supports IE8's panic based approach
// to setting things on disconnected nodes

Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );
				doAnimation.finish = function() {
					anim.stop( true );
				};
				// Empty animations, or finishing resolves immediately
				if ( empty || jQuery._data( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = jQuery._data( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// start the next in the queue if the last step wasn't forced
			// timers currently will call their complete callbacks, which will dequeue
			// but only if they were gotoEnd
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = jQuery._data( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// enable finishing flag on private data
			data.finish = true;

			// empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.cur && hooks.cur.finish ) {
				hooks.cur.finish.call( this );
			}

			// look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// turn off finishing flag
			delete data.finish;
		});
	}
});

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		attrs = { height: type },
		i = 0;

	// if we include width, step value is 1 to do all cssExpand values,
	// if we don't include width, step value is 2 to skip over Left and Right
	includeWidth = includeWidth? 1 : 0;
	for( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p*Math.PI ) / 2;
	}
};

jQuery.timers = [];
jQuery.fx = Tween.prototype.init;
jQuery.fx.tick = function() {
	var timer,
		timers = jQuery.timers,
		i = 0;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	if ( timer() && jQuery.timers.push( timer ) ) {
		jQuery.fx.start();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};

// Back Compat <1.8 extension point
jQuery.fx.step = {};

if ( jQuery.expr && jQuery.expr.filters ) {
	jQuery.expr.filters.animated = function( elem ) {
		return jQuery.grep(jQuery.timers, function( fn ) {
			return elem === fn.elem;
		}).length;
	};
}
jQuery.fn.offset = function( options ) {
	if ( arguments.length ) {
		return options === undefined ?
			this :
			this.each(function( i ) {
				jQuery.offset.setOffset( this, options, i );
			});
	}

	var docElem, win,
		box = { top: 0, left: 0 },
		elem = this[ 0 ],
		doc = elem && elem.ownerDocument;

	if ( !doc ) {
		return;
	}

	docElem = doc.documentElement;

	// Make sure it's not a disconnected DOM node
	if ( !jQuery.contains( docElem, elem ) ) {
		return box;
	}

	// If we don't have gBCR, just use 0,0 rather than error
	// BlackBerry 5, iOS 3 (original iPhone)
	if ( typeof elem.getBoundingClientRect !== core_strundefined ) {
		box = elem.getBoundingClientRect();
	}
	win = getWindow( doc );
	return {
		top: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),
		left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )
	};
};

jQuery.offset = {

	setOffset: function( elem, options, i ) {
		var position = jQuery.css( elem, "position" );

		// set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		var curElem = jQuery( elem ),
			curOffset = curElem.offset(),
			curCSSTop = jQuery.css( elem, "top" ),
			curCSSLeft = jQuery.css( elem, "left" ),
			calculatePosition = ( position === "absolute" || position === "fixed" ) && jQuery.inArray("auto", [curCSSTop, curCSSLeft]) > -1,
			props = {}, curPosition = {}, curTop, curLeft;

		// need to be able to calculate position if either top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;
		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );
		} else {
			curElem.css( props );
		}
	}
};


jQuery.fn.extend({

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			parentOffset = { top: 0, left: 0 },
			elem = this[ 0 ];

		// fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// we assume that getBoundingClientRect is available when computed position is fixed
			offset = elem.getBoundingClientRect();
		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top  += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		// note: when an element has margin: auto the offsetLeft and marginLeft
		// are the same in Safari causing offset.left to incorrectly be 0
		return {
			top:  offset.top  - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true)
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || document.documentElement;
			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position") === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}
			return offsetParent || document.documentElement;
		});
	}
});


// Create scrollLeft and scrollTop methods
jQuery.each( {scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function( method, prop ) {
	var top = /Y/.test( prop );

	jQuery.fn[ method ] = function( val ) {
		return jQuery.access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? (prop in win) ? win[ prop ] :
					win.document.documentElement[ method ] :
					elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : jQuery( win ).scrollLeft(),
					top ? val : jQuery( win ).scrollTop()
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

function getWindow( elem ) {
	return jQuery.isWindow( elem ) ?
		elem :
		elem.nodeType === 9 ?
			elem.defaultView || elem.parentWindow :
			false;
}
// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return jQuery.access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
					// unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});
// Limit scope pollution from any deprecated API
// (function() {

// })();
// Expose jQuery to the global object
window.jQuery = window.$ = jQuery;

// Expose jQuery as an AMD module, but only for AMD loaders that
// understand the issues with loading multiple versions of jQuery
// in a page that all might call define(). The loader will indicate
// they have special allowances for multiple jQuery versions by
// specifying define.amd.jQuery = true. Register as a named module,
// since jQuery can be concatenated with other files that may use define,
// but not use a proper concatenation script that understands anonymous
// AMD modules. A named AMD is safest and most robust way to register.
// Lowercase jquery is used because AMD module names are derived from
// file names, and jQuery is normally delivered in a lowercase file name.
// Do this after creating the global so that if an AMD module wants to call
// noConflict to hide this version of jQuery, it will work.
if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
	define( "jquery", [], function () { return jQuery; } );
}

})( window );

/*! ngstorage 0.3.4 | Copyright (c) 2015 Gias Kay Lee | MIT License */!function(a,b){"use strict";return"function"==typeof define&&define.amd?void define("ngStorage",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){"use strict";function b(b){return["$rootScope","$window","$log","$timeout",function(c,d,e,f){function g(a){var b=d[a];if(b&&"localStorage"===a){var c="__"+Math.round(1e7*Math.random());try{localStorage.setItem(c,c),localStorage.removeItem(c)}catch(e){b=!1}}return b}var h,i,j=g(b)||(e.warn("This browser does not support Web Storage!"),{setItem:function(){},getItem:function(){}}),k={$default:function(b){for(var c in b)a.isDefined(k[c])||(k[c]=b[c]);return k},$reset:function(a){for(var b in k)"$"===b[0]||delete k[b];return k.$default(a)}};try{j=d[b],j.length}catch(l){e.warn("This browser does not support Web Storage!"),j={}}for(var m,n=0,o=j.length;o>n;n++)(m=j.key(n))&&"ngStorage-"===m.slice(0,10)&&(k[m.slice(10)]=a.fromJson(j.getItem(m)));return h=a.copy(k),c.$watch(function(){var b;i||(i=f(function(){if(i=null,!a.equals(k,h)){b=a.copy(h),a.forEach(k,function(c,d){a.isDefined(c)&&"$"!==d[0]&&j.setItem("ngStorage-"+d,a.toJson(c)),delete b[d]});for(var c in b)j.removeItem("ngStorage-"+c);h=a.copy(k)}},100,!1))}),"localStorage"===b&&d.addEventListener&&d.addEventListener("storage",function(b){"ngStorage-"===b.key.slice(0,10)&&(b.newValue?k[b.key.slice(10)]=a.fromJson(b.newValue):delete k[b.key.slice(10)],h=a.copy(k),c.$apply())}),k}]}a.module("ngStorage",[]).factory("$localStorage",b("localStorage")).factory("$sessionStorage",b("sessionStorage"))});
/*
 * ngDialog - easy modals and popup windows
 * http://github.com/likeastore/ngDialog
 * (c) 2013-2015 MIT License, https://likeastore.com
 */

(function (root, factory) {
    if (typeof module !== 'undefined' && module.exports) {
        // CommonJS
        if (typeof angular === 'undefined') {
            module.exports = factory(require('angular'));
        } else {
            module.exports = factory(angular);
        }
    } else if (typeof define === 'function' && define.amd) {
        // AMD
        define('ngdialog',['angular'], factory);
    } else {
        // Global Variables
        factory(root.angular);
    }
}(this, function (angular) {
    'use strict';

    var m = angular.module('ngDialog', []);

    var $el = angular.element;
    var isDef = angular.isDefined;
    var style = (document.body || document.documentElement).style;
    var animationEndSupport = isDef(style.animation) || isDef(style.WebkitAnimation) || isDef(style.MozAnimation) || isDef(style.MsAnimation) || isDef(style.OAnimation);
    var animationEndEvent = 'animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend';
    var focusableElementSelector = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]';
    var disabledAnimationClass = 'ngdialog-disabled-animation';
    var forceElementsReload = { html: false, body: false };
    var scopes = {};
    var openIdStack = [];
    var keydownIsBound = false;

    m.provider('ngDialog', function () {
        var defaults = this.defaults = {
            className: 'ngdialog-theme-default',
            disableAnimation: false,
            plain: false,
            showClose: true,
            closeByDocument: true,
            closeByEscape: true,
            closeByNavigation: false,
            appendTo: false,
            preCloseCallback: false,
            overlay: true,
            cache: true,
            trapFocus: true,
            preserveFocus: true,
            ariaAuto: true,
            ariaRole: null,
            ariaLabelledById: null,
            ariaLabelledBySelector: null,
            ariaDescribedById: null,
            ariaDescribedBySelector: null
        };

        this.setForceHtmlReload = function (_useIt) {
            forceElementsReload.html = _useIt || false;
        };

        this.setForceBodyReload = function (_useIt) {
            forceElementsReload.body = _useIt || false;
        };

        this.setDefaults = function (newDefaults) {
            angular.extend(defaults, newDefaults);
        };

        var globalID = 0, dialogsCount = 0, closeByDocumentHandler, defers = {};

        this.$get = ['$document', '$templateCache', '$compile', '$q', '$http', '$rootScope', '$timeout', '$window', '$controller', '$injector',
            function ($document, $templateCache, $compile, $q, $http, $rootScope, $timeout, $window, $controller, $injector) {
                var $elements = [];

                angular.forEach(
                    ['html', 'body'],
                    function(elementName) {
                        $elements[elementName] = $document.find(elementName);
                        if (forceElementsReload[elementName]) {
                            var eventName = privateMethods.getRouterLocationEventName();
                            $rootScope.$on(eventName, function () {
                                $elements[elementName] = $document.find(elementName);
                            });
                        }
                    }
                );

                var privateMethods = {
                    onDocumentKeydown: function (event) {
                        if (event.keyCode === 27) {
                            publicMethods.close('$escape');
                        }
                    },

                    activate: function($dialog) {
                        var options = $dialog.data('$ngDialogOptions');

                        if (options.trapFocus) {
                            $dialog.on('keydown', privateMethods.onTrapFocusKeydown);

                            // Catch rogue changes (eg. after unfocusing everything by clicking a non-focusable element)
                            $elements.body.on('keydown', privateMethods.onTrapFocusKeydown);
                        }
                    },

                    deactivate: function ($dialog) {
                        $dialog.off('keydown', privateMethods.onTrapFocusKeydown);
                        $elements.body.off('keydown', privateMethods.onTrapFocusKeydown);
                    },

                    deactivateAll: function () {
                        angular.forEach(function(el) {
                            var $dialog = angular.element(el);
                            privateMethods.deactivate($dialog);
                        });
                    },

                    setBodyPadding: function (width) {
                        var originalBodyPadding = parseInt(($elements.body.css('padding-right') || 0), 10);
                        $elements.body.css('padding-right', (originalBodyPadding + width) + 'px');
                        $elements.body.data('ng-dialog-original-padding', originalBodyPadding);
                    },

                    resetBodyPadding: function () {
                        var originalBodyPadding = $elements.body.data('ng-dialog-original-padding');
                        if (originalBodyPadding) {
                            $elements.body.css('padding-right', originalBodyPadding + 'px');
                        } else {
                            $elements.body.css('padding-right', '');
                        }
                    },

                    performCloseDialog: function ($dialog, value) {
                        var options = $dialog.data('$ngDialogOptions');
                        var id = $dialog.attr('id');
                        var scope = scopes[id];

                        if (!scope) {
                            // Already closed
                            return;
                        }

                        if (typeof $window.Hammer !== 'undefined') {
                            var hammerTime = scope.hammerTime;
                            hammerTime.off('tap', closeByDocumentHandler);
                            hammerTime.destroy && hammerTime.destroy();
                            delete scope.hammerTime;
                        } else {
                            $dialog.unbind('click');
                        }

                        if (dialogsCount === 1) {
                            $elements.body.unbind('keydown');
                        }

                        if (!$dialog.hasClass('ngdialog-closing')){
                            dialogsCount -= 1;
                        }

                        var previousFocus = $dialog.data('$ngDialogPreviousFocus');
                        if (previousFocus) {
                            previousFocus.focus();
                        }

                        $rootScope.$broadcast('ngDialog.closing', $dialog, value);
                        dialogsCount = dialogsCount < 0 ? 0 : dialogsCount;
                        if (animationEndSupport && !options.disableAnimation) {
                            scope.$destroy();
                            $dialog.unbind(animationEndEvent).bind(animationEndEvent, function () {
                                privateMethods.closeDialogElement($dialog, value);
                            }).addClass('ngdialog-closing');
                        } else {
                            scope.$destroy();
                            privateMethods.closeDialogElement($dialog, value);
                        }
                        if (defers[id]) {
                            defers[id].resolve({
                                id: id,
                                value: value,
                                $dialog: $dialog,
                                remainingDialogs: dialogsCount
                            });
                            delete defers[id];
                        }
                        if (scopes[id]) {
                            delete scopes[id];
                        }
                        openIdStack.splice(openIdStack.indexOf(id), 1);
                        if (!openIdStack.length) {
                            $elements.body.unbind('keydown', privateMethods.onDocumentKeydown);
                            keydownIsBound = false;
                        }
                    },

                    closeDialogElement: function($dialog, value) {
                        $dialog.remove();
                        if (dialogsCount === 0) {
                            $elements.html.removeClass('ngdialog-open');
                            $elements.body.removeClass('ngdialog-open');
                            privateMethods.resetBodyPadding();
                        }
                        $rootScope.$broadcast('ngDialog.closed', $dialog, value);
                    },

                    closeDialog: function ($dialog, value) {
                        var preCloseCallback = $dialog.data('$ngDialogPreCloseCallback');

                        if (preCloseCallback && angular.isFunction(preCloseCallback)) {

                            var preCloseCallbackResult = preCloseCallback.call($dialog, value);

                            if (angular.isObject(preCloseCallbackResult)) {
                                if (preCloseCallbackResult.closePromise) {
                                    preCloseCallbackResult.closePromise.then(function () {
                                        privateMethods.performCloseDialog($dialog, value);
                                    });
                                } else {
                                    preCloseCallbackResult.then(function () {
                                        privateMethods.performCloseDialog($dialog, value);
                                    }, function () {
                                        return;
                                    });
                                }
                            } else if (preCloseCallbackResult !== false) {
                                privateMethods.performCloseDialog($dialog, value);
                            }
                        } else {
                            privateMethods.performCloseDialog($dialog, value);
                        }
                    },

                    onTrapFocusKeydown: function(ev) {
                        var el = angular.element(ev.currentTarget);
                        var $dialog;

                        if (el.hasClass('ngdialog')) {
                            $dialog = el;
                        } else {
                            $dialog = privateMethods.getActiveDialog();

                            if ($dialog === null) {
                                return;
                            }
                        }

                        var isTab = (ev.keyCode === 9);
                        var backward = (ev.shiftKey === true);

                        if (isTab) {
                            privateMethods.handleTab($dialog, ev, backward);
                        }
                    },

                    handleTab: function($dialog, ev, backward) {
                        var focusableElements = privateMethods.getFocusableElements($dialog);

                        if (focusableElements.length === 0) {
                            if (document.activeElement) {
                                document.activeElement.blur();
                            }
                            return;
                        }

                        var currentFocus = document.activeElement;
                        var focusIndex = Array.prototype.indexOf.call(focusableElements, currentFocus);

                        var isFocusIndexUnknown = (focusIndex === -1);
                        var isFirstElementFocused = (focusIndex === 0);
                        var isLastElementFocused = (focusIndex === focusableElements.length - 1);

                        var cancelEvent = false;

                        if (backward) {
                            if (isFocusIndexUnknown || isFirstElementFocused) {
                                focusableElements[focusableElements.length - 1].focus();
                                cancelEvent = true;
                            }
                        } else {
                            if (isFocusIndexUnknown || isLastElementFocused) {
                                focusableElements[0].focus();
                                cancelEvent = true;
                            }
                        }

                        if (cancelEvent) {
                            ev.preventDefault();
                            ev.stopPropagation();
                        }
                    },

                    autoFocus: function($dialog) {
                        var dialogEl = $dialog[0];

                        // Browser's (Chrome 40, Forefix 37, IE 11) don't appear to honor autofocus on the dialog, but we should
                        var autoFocusEl = dialogEl.querySelector('*[autofocus]');
                        if (autoFocusEl !== null) {
                            autoFocusEl.focus();

                            if (document.activeElement === autoFocusEl) {
                                return;
                            }

                            // Autofocus element might was display: none, so let's continue
                        }

                        var focusableElements = privateMethods.getFocusableElements($dialog);

                        if (focusableElements.length > 0) {
                            focusableElements[0].focus();
                            return;
                        }

                        // We need to focus something for the screen readers to notice the dialog
                        var contentElements = privateMethods.filterVisibleElements(dialogEl.querySelectorAll('h1,h2,h3,h4,h5,h6,p,span'));

                        if (contentElements.length > 0) {
                            var contentElement = contentElements[0];
                            $el(contentElement).attr('tabindex', '-1').css('outline', '0');
                            contentElement.focus();
                        }
                    },

                    getFocusableElements: function ($dialog) {
                        var dialogEl = $dialog[0];

                        var rawElements = dialogEl.querySelectorAll(focusableElementSelector);

                        return privateMethods.filterVisibleElements(rawElements);
                    },

                    filterVisibleElements: function (els) {
                        var visibleFocusableElements = [];

                        for (var i = 0; i < els.length; i++) {
                            var el = els[i];

                            if (el.offsetWidth > 0 || el.offsetHeight > 0) {
                                visibleFocusableElements.push(el);
                            }
                        }

                        return visibleFocusableElements;
                    },

                    getActiveDialog: function () {
                        var dialogs = document.querySelectorAll('.ngdialog');

                        if (dialogs.length === 0) {
                            return null;
                        }

                        // TODO: This might be incorrect if there are a mix of open dialogs with different 'appendTo' values
                        return $el(dialogs[dialogs.length - 1]);
                    },

                    applyAriaAttributes: function ($dialog, options) {
                        if (options.ariaAuto) {
                            if (!options.ariaRole) {
                                var detectedRole = (privateMethods.getFocusableElements($dialog).length > 0) ?
                                    'dialog' :
                                    'alertdialog';

                                options.ariaRole = detectedRole;
                            }

                            if (!options.ariaLabelledBySelector) {
                                options.ariaLabelledBySelector = 'h1,h2,h3,h4,h5,h6';
                            }

                            if (!options.ariaDescribedBySelector) {
                                options.ariaDescribedBySelector = 'article,section,p';
                            }
                        }

                        if (options.ariaRole) {
                            $dialog.attr('role', options.ariaRole);
                        }

                        privateMethods.applyAriaAttribute(
                            $dialog, 'aria-labelledby', options.ariaLabelledById, options.ariaLabelledBySelector);

                        privateMethods.applyAriaAttribute(
                            $dialog, 'aria-describedby', options.ariaDescribedById, options.ariaDescribedBySelector);
                    },

                    applyAriaAttribute: function($dialog, attr, id, selector) {
                        if (id) {
                            $dialog.attr(attr, id);
                        }

                        if (selector) {
                            var dialogId = $dialog.attr('id');

                            var firstMatch = $dialog[0].querySelector(selector);

                            if (!firstMatch) {
                                return;
                            }

                            var generatedId = dialogId + '-' + attr;

                            $el(firstMatch).attr('id', generatedId);

                            $dialog.attr(attr, generatedId);

                            return generatedId;
                        }
                    },

                    detectUIRouter: function() {
                        //Detect if ui-router module is installed if not return false
                        try {
                            angular.module("ui.router");
                            return true;
                        } catch(err) {
                            return false;
                        }
                    },

                    getRouterLocationEventName: function() {
                        if(privateMethods.detectUIRouter()) {
                            return '$stateChangeSuccess';
                        }
                        return '$locationChangeSuccess';
                    }
                };

                var publicMethods = {

                    /*
                     * @param {Object} options:
                     * - template {String} - id of ng-template, url for partial, plain string (if enabled)
                     * - plain {Boolean} - enable plain string templates, default false
                     * - scope {Object}
                     * - controller {String}
                     * - controllerAs {String}
                     * - className {String} - dialog theme class
                     * - disableAnimation {Boolean} - set to true to disable animation
                     * - showClose {Boolean} - show close button, default true
                     * - closeByEscape {Boolean} - default true
                     * - closeByDocument {Boolean} - default true
                     * - preCloseCallback {String|Function} - user supplied function name/function called before closing dialog (if set)
                     *
                     * @return {Object} dialog
                     */
                    open: function (opts) {
                        var options = angular.copy(defaults);
                        var localID = ++globalID;
                        var dialogID = 'ngdialog' + localID;
                        openIdStack.push(dialogID);

                        opts = opts || {};
                        angular.extend(options, opts);

                        var defer;
                        defers[dialogID] = defer = $q.defer();

                        var scope;
                        scopes[dialogID] = scope = angular.isObject(options.scope) ? options.scope.$new() : $rootScope.$new();

                        var $dialog, $dialogParent;

                        var resolve = angular.extend({}, options.resolve);

                        angular.forEach(resolve, function (value, key) {
                            resolve[key] = angular.isString(value) ? $injector.get(value) : $injector.invoke(value, null, null, key);
                        });

                        $q.all({
                            template: loadTemplate(options.template || options.templateUrl),
                            locals: $q.all(resolve)
                        }).then(function (setup) {
                            var template = setup.template,
                                locals = setup.locals;

                            if (options.showClose) {
                                template += '<div class="ngdialog-close"></div>';
                            }

                            $dialog = $el('<div id="ngdialog' + localID + '" class="ngdialog"></div>');
                            $dialog.html((options.overlay ?
                                '<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">' + template + '</div>' :
                                '<div class="ngdialog-content" role="document">' + template + '</div>'));

                            $dialog.data('$ngDialogOptions', options);

                            scope.ngDialogId = dialogID;

                            if (options.data && angular.isString(options.data)) {
                                var firstLetter = options.data.replace(/^\s*/, '')[0];
                                scope.ngDialogData = (firstLetter === '{' || firstLetter === '[') ? angular.fromJson(options.data) : options.data;
                                scope.ngDialogData.ngDialogId = dialogID;
                            } else if (options.data && angular.isObject(options.data)) {
                                scope.ngDialogData = options.data;
                                scope.ngDialogData.ngDialogId = dialogID;
                            }

                            if (options.controller && (angular.isString(options.controller) || angular.isArray(options.controller) || angular.isFunction(options.controller))) {

                                var label;

                                if (options.controllerAs && angular.isString(options.controllerAs)) {
                                    label = options.controllerAs;
                                }

                                var controllerInstance = $controller(options.controller, angular.extend(
                                    locals,
                                    {
                                        $scope: scope,
                                        $element: $dialog
                                    }),
                                    null,
                                    label
                                );
                                $dialog.data('$ngDialogControllerController', controllerInstance);
                            }

                            if (options.className) {
                                $dialog.addClass(options.className);
                            }

                            if (options.disableAnimation) {
                                $dialog.addClass(disabledAnimationClass);
                            }

                            if (options.appendTo && angular.isString(options.appendTo)) {
                                $dialogParent = angular.element(document.querySelector(options.appendTo));
                            } else {
                                $dialogParent = $elements.body;
                            }

                            privateMethods.applyAriaAttributes($dialog, options);

                            if (options.preCloseCallback) {
                                var preCloseCallback;

                                if (angular.isFunction(options.preCloseCallback)) {
                                    preCloseCallback = options.preCloseCallback;
                                } else if (angular.isString(options.preCloseCallback)) {
                                    if (scope) {
                                        if (angular.isFunction(scope[options.preCloseCallback])) {
                                            preCloseCallback = scope[options.preCloseCallback];
                                        } else if (scope.$parent && angular.isFunction(scope.$parent[options.preCloseCallback])) {
                                            preCloseCallback = scope.$parent[options.preCloseCallback];
                                        } else if ($rootScope && angular.isFunction($rootScope[options.preCloseCallback])) {
                                            preCloseCallback = $rootScope[options.preCloseCallback];
                                        }
                                    }
                                }

                                if (preCloseCallback) {
                                    $dialog.data('$ngDialogPreCloseCallback', preCloseCallback);
                                }
                            }

                            scope.closeThisDialog = function (value) {
                                privateMethods.closeDialog($dialog, value);
                            };

                            $timeout(function () {
                                var $activeDialogs = document.querySelectorAll('.ngdialog');
                                privateMethods.deactivateAll($activeDialogs);

                                $compile($dialog)(scope);
                                var widthDiffs = $window.innerWidth - $elements.body.prop('clientWidth');
                                $elements.html.addClass('ngdialog-open');
                                $elements.body.addClass('ngdialog-open');
                                var scrollBarWidth = widthDiffs - ($window.innerWidth - $elements.body.prop('clientWidth'));
                                if (scrollBarWidth > 0) {
                                    privateMethods.setBodyPadding(scrollBarWidth);
                                }
                                $dialogParent.append($dialog);

                                privateMethods.activate($dialog);

                                if (options.trapFocus) {
                                    privateMethods.autoFocus($dialog);
                                }

                                if (options.name) {
                                    $rootScope.$broadcast('ngDialog.opened', {dialog: $dialog, name: options.name});
                                } else {
                                    $rootScope.$broadcast('ngDialog.opened', $dialog);
                                }
                            });

                            if (!keydownIsBound) {
                                $elements.body.bind('keydown', privateMethods.onDocumentKeydown);
                                keydownIsBound = true;
                            }

                            if (options.closeByNavigation) {
                                var eventName = privateMethods.getRouterLocationEventName();
                                $rootScope.$on(eventName, function () {
                                    privateMethods.closeDialog($dialog);
                                });
                            }

                            if (options.preserveFocus) {
                                $dialog.data('$ngDialogPreviousFocus', document.activeElement);
                            }

                            closeByDocumentHandler = function (event) {
                                var isOverlay = options.closeByDocument ? $el(event.target).hasClass('ngdialog-overlay') : false;
                                var isCloseBtn = $el(event.target).hasClass('ngdialog-close');

                                if (isOverlay || isCloseBtn) {
                                    publicMethods.close($dialog.attr('id'), isCloseBtn ? '$closeButton' : '$document');
                                }
                            };

                            if (typeof $window.Hammer !== 'undefined') {
                                var hammerTime = scope.hammerTime = $window.Hammer($dialog[0]);
                                hammerTime.on('tap', closeByDocumentHandler);
                            } else {
                                $dialog.bind('click', closeByDocumentHandler);
                            }

                            dialogsCount += 1;

                            return publicMethods;
                        });

                        return {
                            id: dialogID,
                            closePromise: defer.promise,
                            close: function (value) {
                                privateMethods.closeDialog($dialog, value);
                            }
                        };

                        function loadTemplateUrl (tmpl, config) {
                            $rootScope.$broadcast('ngDialog.templateLoading', tmpl);
                            return $http.get(tmpl, (config || {})).then(function(res) {
                                $rootScope.$broadcast('ngDialog.templateLoaded', tmpl);
                                return res.data || '';
                            });
                        }

                        function loadTemplate (tmpl) {
                            if (!tmpl) {
                                return 'Empty template';
                            }

                            if (angular.isString(tmpl) && options.plain) {
                                return tmpl;
                            }

                            if (typeof options.cache === 'boolean' && !options.cache) {
                                return loadTemplateUrl(tmpl, {cache: false});
                            }

                            return loadTemplateUrl(tmpl, {cache: $templateCache});
                        }
                    },

                    /*
                     * @param {Object} options:
                     * - template {String} - id of ng-template, url for partial, plain string (if enabled)
                     * - plain {Boolean} - enable plain string templates, default false
                     * - name {String}
                     * - scope {Object}
                     * - controller {String}
                     * - controllerAs {String}
                     * - className {String} - dialog theme class
                     * - showClose {Boolean} - show close button, default true
                     * - closeByEscape {Boolean} - default false
                     * - closeByDocument {Boolean} - default false
                     * - preCloseCallback {String|Function} - user supplied function name/function called before closing dialog (if set); not called on confirm
                     *
                     * @return {Object} dialog
                     */
                    openConfirm: function (opts) {
                        var defer = $q.defer();

                        var options = {
                            closeByEscape: false,
                            closeByDocument: false
                        };
                        angular.extend(options, opts);

                        options.scope = angular.isObject(options.scope) ? options.scope.$new() : $rootScope.$new();
                        options.scope.confirm = function (value) {
                            defer.resolve(value);
                            var $dialog = $el(document.getElementById(openResult.id));
                            privateMethods.performCloseDialog($dialog, value);
                        };

                        var openResult = publicMethods.open(options);
                        openResult.closePromise.then(function (data) {
                            if (data) {
                                return defer.reject(data.value);
                            }
                            return defer.reject();
                        });

                        return defer.promise;
                    },

                    isOpen: function(id) {
                        var $dialog = $el(document.getElementById(id));
                        return $dialog.length > 0;
                    },

                    /*
                     * @param {String} id
                     * @return {Object} dialog
                     */
                    close: function (id, value) {
                        var $dialog = $el(document.getElementById(id));

                        if ($dialog.length) {
                            privateMethods.closeDialog($dialog, value);
                        } else {
                            if (id === '$escape') {
                                var topDialogId = openIdStack[openIdStack.length - 1];
                                $dialog = $el(document.getElementById(topDialogId));
                                if ($dialog.data('$ngDialogOptions').closeByEscape) {
                                    privateMethods.closeDialog($dialog, value);
                                }
                            } else {
                                publicMethods.closeAll(value);
                            }
                        }

                        return publicMethods;
                    },

                    closeAll: function (value) {
                        var $all = document.querySelectorAll('.ngdialog');

                        // Reverse order to ensure focus restoration works as expected
                        for (var i = $all.length - 1; i >= 0; i--) {
                            var dialog = $all[i];
                            privateMethods.closeDialog($el(dialog), value);
                        }
                    },

                    getOpenDialogs: function() {
                        return openIdStack;
                    },

                    getDefaults: function () {
                        return defaults;
                    }
                };

                return publicMethods;
            }];
    });

    m.directive('ngDialog', ['ngDialog', function (ngDialog) {
        return {
            restrict: 'A',
            scope: {
                ngDialogScope: '='
            },
            link: function (scope, elem, attrs) {
                elem.on('click', function (e) {
                    e.preventDefault();

                    var ngDialogScope = angular.isDefined(scope.ngDialogScope) ? scope.ngDialogScope : 'noScope';
                    angular.isDefined(attrs.ngDialogClosePrevious) && ngDialog.close(attrs.ngDialogClosePrevious);

                    var defaults = ngDialog.getDefaults();

                    ngDialog.open({
                        template: attrs.ngDialog,
                        className: attrs.ngDialogClass || defaults.className,
                        controller: attrs.ngDialogController,
                        controllerAs: attrs.ngDialogControllerAs,
                        bindToController: attrs.ngDialogBindToController,
                        scope: ngDialogScope,
                        data: attrs.ngDialogData,
                        showClose: attrs.ngDialogShowClose === 'false' ? false : (attrs.ngDialogShowClose === 'true' ? true : defaults.showClose),
                        closeByDocument: attrs.ngDialogCloseByDocument === 'false' ? false : (attrs.ngDialogCloseByDocument === 'true' ? true : defaults.closeByDocument),
                        closeByEscape: attrs.ngDialogCloseByEscape === 'false' ? false : (attrs.ngDialogCloseByEscape === 'true' ? true : defaults.closeByEscape),
                        overlay: attrs.ngDialogOverlay === 'false' ? false : (attrs.ngDialogOverlay === 'true' ? true : defaults.overlay),
                        preCloseCallback: attrs.ngDialogPreCloseCallback || defaults.preCloseCallback
                    });
                });
            }
        };
    

    }]);
    return m;
}));
/**
 * @name ng-scrollbar
 * @author angrytoro
 * @since 9/12/2014
 * @version 0.1
 * @beta 0.2
 * @see https://github.com/angrytoro/ngscrollbar
 * @copyright 2014 angrytoro
 * @license MIT: You are free to use and modify this code, on the condition that this copyright notice remains.
 *
 * @description The angular directive ng-scrollbar imitate the true browser scrollbar.
 * It's applied to the element which set height or width attribute and the overflow is auto, but exclude body element.
 * It's not necessary to imitate scrollbar for body element, if you use the AngularJS.
 * suggests: don't use the directive, if you don't have to. The scrollbar which is inbuilt in browser is more highly-efficient.
 *AngularJS is not fit for IE which version is less then 9, so the directive is not fit the IE(8,7,6,5).
 *
 *
 * @example
 * 1.
 * <div style="height:300px;overflow:auto;" ng-scrollbar>
 *     <li ng-repeat="item in items">item</li>
 * </div>
 * 2.
 * <div style="height:300px;overflow:auto;" ng-scrollbar scrollbar-x="false" scrollbar-y="true" scrollbar-config="{show:true, autoResize: true, dragSpeed: 1.2}">
 *     <li ng-repeat="item in items">item</li>
 * </div>
 * 3.
 * <div ng-scrollbar>
 *     <div style="height:400px;width:3000px"></div>
 * </div>
 *
 * @conf spec
 * scrollbar-x the value is true or false, to configure the x scrollbar create or no create, the default value is true. but the directive can decide whether it need be created if user not set the attribute.
 *
 * scrollbar-y the value is true or false, to configure the y scrollbar create or no create, the default value is true. but the directive can decide whether it need be created if user not set the attribute.
 *
 * scrollbar-config
 * default config is
 *
 * {
 *      dragSpeed: 1, //default browser delta value is 120 or -120
        autoResize: false, // if need auto resize, default false
        show: false, // if need show when mouse not enter the container element which need scrollbar, default false.
        scrollbar: {
            width: 6, //scrollbar width
            hoverWidth: 8, //scrollbar width when the mouse hover on it
            color: 'rgba(0,0,0,.6)' //scrollbar background color
        },
        scrollbarContainer: {
            width: 12, //scrollbarContainer width
            color: 'rgba(0,0,0,.1)' // scrollbarContainer background
        }
 * }
 *
 */

angular.module('widget.scrollbar', [])
.directive('ngScrollbar', [
    function() {
        return {
            restrict: 'AE',
            transclude: true,
            scope: {
                scrollbarConfig: '=scrollbarConfig',
                scrollbarX: '@', // the value is true or false, to configure the x scrollbar create or no create.
                scrollbarY: '@' // the value is true or false, to configure the y scrollbar create or no create.
            },
            template: '<div style="position:relative;width:100%;height:100%;">\
                            <div class="ngscroll-content-container" style="display:inline-block;margin-top:0;margin-left:0" ng-transclude>\
                            </div>\
                            <ng-scrollbar-x ng-if="scrollbarX || scrollbarX === undefined"></ng-scrollbar-x>\
                            <ng-scrollbar-y ng-if="scrollbarY || scrollbarY === undefined"></ng-scrollbar-y>\
                       </div>',
            controller: 'scrollbarController',
            compile: function(element) {
                element.css('overflow', 'hidden');
                return function(scope, element, attrs, ctrl) {
                    ctrl.init(element, scope.scrollbarConfig);

                };
            }
        };
    }
])
.controller('scrollbarController', [function() {

    var defaultConfig = {
        dragSpeed: 1, //default browser delta value is 120 or -120
        autoResize: false, // if need auto resize, default false
        show: false, // if need show when mouse not enter the container element which need scrollbar, default false.
        scrollbar: {
            width: 6, //scrollbar width
            hoverWidth: 8, //scrollbar width when the mouse hover on it
            color: 'rgba(0,0,0,.6)' //scrollbar background color
        },
        scrollbarContainer: {
            width: 12, //scrollbarContainer width
            color: 'rgba(0,0,0,.1)' // scrollbarContainer background
        }
    };
    var containerElement, // the element which need the directive of ngscrollbar
        contentElement, // the element which transclude the true content
        config, // config
        scrollbarMargin, // the variable is used to descide the scrollbar element top or left to its parent element scrollbarContainer
        scrollbarHoverMargin; // the variable is used to descide the scrollbar element top or left to its parent element scrollbarContainer when the mouse hover on the scrollbar

    /**
     * it must be called before the controller is used.
     * @param  {jqlite object} element         it's necessary variable
     * @param  {object} scrollbarConfig        the config which is defined by user
     * @return
     */
    this.init = function(element, scrollbarConfig) {
        containerElement = element;
        config = angular.copy(angular.extend(defaultConfig, scrollbarConfig || {}));
        contentElement = angular.element(element[0].querySelector('.ngscroll-content-container'));
        scrollbarMargin = (config.scrollbarContainer.width - config.scrollbar.width) / 2;
        scrollbarHoverMargin = (config.scrollbarContainer.width - config.scrollbar.hoverWidth) / 2;
    };

    angular.extend(this, {
        /**
         * Wrap window in an angular jqLite object.
         */
        winEl: angular.element(window),
        /**
         * get the element which need the directive of ngscrollbar
         * @return {jqlite object}
         */
        getContainerElement: function() {
            return containerElement;
        },
        /**
         * the element which transclude the true content
         * @return {jqlite object}
         */
        getContentElement: function() {
            return contentElement;
        },
        /**
         * get the config
         * @return {object}
         */
        getConfig: function() {
            return config;
        },
        /**
         * get the scrollbarMargin
         * @return {number}
         */
        getScrollbarMargin: function() {
            return scrollbarMargin;
        },
        /**
         * get the scrollbarHoverMargin
         * @return {number}
         */
        getScrollbarHoverMargin: function() {
            return scrollbarHoverMargin;
        }
    });
}])
.directive('ngScrollbarY', ['$timeout', function($timeout){
    return {
        restrict: 'AE',
        require: '^ngScrollbar',
        replace: true,
        template: '<div class="ngscrollbar-container-y" ng-style="styles.scrollbarContainer"><div class="ngscrollbar-y" ng-style="styles.scrollbar"></div></div>',
        compile: function() {
            return function(scope, element, attrs, ctrl) {

                var config = ctrl.getConfig(),
                    docEl = angular.element(document),
                    containerElement = ctrl.getContainerElement(),
                    contentElement = ctrl.getContentElement(),
                    scrollbar = angular.element(element[0].querySelector('.ngscrollbar-y')),
                    scrollbarMargin = ctrl.getScrollbarMargin(),
                    scrollbarHoverMargin = ctrl.getScrollbarHoverMargin();

                scope.styles = {
                    scrollbarContainer: {
                        position: 'absolute',
                        width: config.scrollbarContainer.width + 'px',
                        height: '100%',
                        top: 0,
                        right: 0,
                        transition: 'background .3s ease-in-out',
                        'border-radius': config.scrollbarContainer.width / 2 + 'px'
                    },
                    scrollbar: {
                        position: 'absolute',
                        width: config.scrollbar.width + 'px',
                        right: scrollbarMargin + 'px',
                        cursor: 'default',
                        opacity: 0,
                        transition: 'opacity .3s ease-in-out, border-radius .1s linear, width .1s linear, right .1s linear',
                        background: config.scrollbar.color,
                        'border-radius': config.scrollbar.width / 2 + 'px'
                    }
                };

                var getContentHeight = function() {
                    return contentElement[0].offsetHeight;
                };

                var getContainerHeight = function() {
                    return containerElement[0].offsetHeight;
                };

                var getScrollbarHeight = function() {
                    var height = Math.pow(getContainerHeight(), 2) / getContentHeight() - scrollbarMargin*2;
                    return height;
                };

                var isOverflow = function() {
                    return getContentHeight() > getContainerHeight();
                };

                var hideScrollbar = function() {
                    scrollbar.css('opacity', 0);
                };

                var showScrollbar = function() {
                    scrollbar.css('opacity', 1);
                };

                var reset = function() {
                    var oldMarginTop = parseInt(contentElement.css('margin-top'), 10);
                    contentElement.css('margin-top', '0px'); // this is for the element which has the attribute of max-height
                    if (isOverflow()) {
                        element.css('display', 'block');
                        scrollbar.css('height', getScrollbarHeight() + 'px');
                        scrollTo(oldMarginTop);
                        if (config.show) {
                            showScrollbar();
                        }
                    } else {
                        element.css('display', 'none');
                    }
                };

                var scrollTo = function(top) {
                    top = Math.min(0, Math.max(top, getContainerHeight() - getContentHeight()));
                    contentElement.css('margin-top', top + 'px');
                    scrollbar.css('top', -top/getContentHeight()*getContainerHeight() + scrollbarMargin + 'px');
                };

                var scroll = function(distance) {
                    var newTop = parseInt(contentElement.css('margin-top'), 10) + distance;
                    scrollTo(newTop);
                };

                containerElement.on('mousewheel', function(event) {
                    if (!isOverflow()) {
                        return;
                    }
                    event.preventDefault();
                    if (event.originalEvent !== undefined) {
                        event = event.originalEvent;
                    }
                    scroll(event.wheelDeltaY || event.wheelDelta);
                });

                if(window.navigator.userAgent.toLowerCase().indexOf('firefox') >= 0) {
                    containerElement.on('wheel', function(event) {
                        if (!isOverflow()) {
                            return;
                        }
                        event.preventDefault();
                        if (event.originalEvent !== undefined) {
                            event = event.originalEvent;
                        }
                        scroll(-event.deltaY * 40);// the ff delta value is 3 or -3 when scroll and the chrome or ie is -120 or 120, so it must multiply by 40
                    });
                }

                element.on('mouseenter', function() {
                    element.css('background', config.scrollbarContainer.color);
                    scrollbar.css('width', config.scrollbar.hoverWidth + 'px');
                    scrollbar.css('right', scrollbarHoverMargin + 'px');
                    scrollbar.css('border-radius', config.scrollbar.hoverWidth / 2 + 'px');
                });

                element.on('mouseleave', function() {
                    element.css('background', 'none');
                    scrollbar.css('width', config.scrollbar.width + 'px');
                    scrollbar.css('right', scrollbarMargin + 'px');
                    scrollbar.css('border-radius', config.scrollbar.width / 2 + 'px');
                });

                var scrollbarMousedown = false,
                    axisY,
                    mouseInElement = false;

                if (!config.show) {
                    containerElement.on('mouseenter', function() {
                        mouseInElement = true;
                        showScrollbar();
                    });
                    containerElement.on('mouseleave', function() {
                        mouseInElement = false;
                        if (scrollbarMousedown) {
                            return;
                        }
                        hideScrollbar();
                    });
                }

                scrollbar.on('mousedown', function(event) {
                    event.preventDefault();
                    axisY = event.screenY;
                    scrollbarMousedown = true;
                    docEl.one('mouseup', function() {
                        scrollbarMousedown = false;
                        if (!config.show && !mouseInElement) {
                            hideScrollbar();
                        }
                        // docEl.off('mouseup', arguments.callee);
                    });
                });
                docEl.on('mousemove', function(event) {
                    if(scrollbarMousedown) {
                        event.preventDefault();
                        scroll(-(event.screenY - axisY) * config.dragSpeed * getContentHeight() / getContainerHeight());
                        axisY = event.screenY;
                    }
                });

                $timeout(function() {
                    reset();
                    if (!!document.createStyleSheet) { //if the browser is ie browser
                        contentElement.on('DOMNodeInserted', reset);
                        contentElement.on('DOMNodeRemoved', reset);
                    } else {
                        var observer = new MutationObserver(function(mutations){
                            if (mutations.length) {
                                reset();
                            }
                        });
                        observer.observe(contentElement[0], {childList:true, subtree: true});
                    }
                }, 5);

                // Redraw the scrollbar when window size changes.
                if (config.autoResize) {
                  // Closure to guard against leaking variables.
                  (function () {
                    var redrawTimer;

                    ctrl.winEl.on('resize', function (e) {
                      if (redrawTimer) {
                        clearTimeout(redrawTimer);
                      }
                      redrawTimer = setTimeout(function () {
                        redrawTimer = null;
                        reset();
                      }, 50);
                    });
                  })();
                }
            };
        }
    };
}])
.directive('ngScrollbarX', ['$timeout', function($timeout) {
    return {
        restrict: 'AE',
        replace: true,
        require: '^ngScrollbar',
        template: '<div class="ngscrollbar-container-x" ng-style="styles.scrollbarContainer"><div class="ngscrollbar-x" ng-style="styles.scrollbar"></div></div>',
        compile: function() {
            return function(scope, element, attrs, ctrl) {

                var config = ctrl.getConfig(),
                    docEl = angular.element(document),
                    containerElement = ctrl.getContainerElement(),
                    containerDom = containerElement[0],
                    contentElement = ctrl.getContentElement(), //the container of content
                    scrollbar = angular.element(element[0].querySelector('.ngscrollbar-x')),
                    scrollbarMargin = ctrl.getScrollbarMargin(),
                    scrollbarHoverMargin = ctrl.getScrollbarHoverMargin();

                scope.styles = {
                    scrollbarContainer: {
                        position: 'absolute',
                        width: '100%',
                        transition: 'background .3s ease-in-out',
                        'border-radius': config.scrollbarContainer.width / 2 + 'px'
                    },
                    scrollbar: {
                        position: 'absolute',
                        cursor: 'default',
                        opacity: 0,
                        transition: 'opacity .3s ease-in-out, border-radius .1s linear, width .1s linear, right .1s linear',
                        background: config.scrollbar.color,
                        'border-radius': config.scrollbar.width / 2 + 'px'
                    }
                };

                element.css('height', config.scrollbarContainer.width + 'px'); // set the scrollbarContainer height;
                element.css('bottom', 0); // set scrollbarContainer top
                element.css('left', 0); //set scrollbarContainer left
                scrollbar.css('top', scrollbarMargin + 'px'); //set scrollbar top
                scrollbar.css('height', config.scrollbar.width + 'px');

                var getContentWidth = function() {
                    return contentElement[0].offsetWidth;
                };

                var getContainerWidth = function() {
                    return containerDom.offsetWidth;
                };

                var getScrollbarWidth = function() {
                    return Math.pow(getContainerWidth(), 2) / getContentWidth() - scrollbarMargin * 2;
                };

                var showScrollbar = function() {
                    scrollbar.css('opacity', 1);
                };

                var hideScrollbar = function() {
                    scrollbar.css('opacity', 0);
                };

                var isOverflow = function() {
                    return getContentWidth() > getContainerWidth();
                };

                var reset = function() {
                    var oldMarginLeft = parseInt(contentElement.css('margin-left'), 10);
                    contentElement.css('margin-left', '0px');
                    if (isOverflow()) {
                        element.css('display', 'block');
                        scrollbar.css('width', getScrollbarWidth() + 'px');
                        scrollTo(oldMarginLeft);
                        if (config.show) {
                            showScrollbar();
                        }
                    } else {
                        element.css('display', 'none');
                    }
                };

                var scrollTo = function(left) {
                    left = Math.min(0, Math.max(left, getContainerWidth() - getContentWidth()));
                    contentElement.css('margin-left', left + 'px');
                    scrollbar.css('left', -left/getContentWidth()*getContainerWidth() + scrollbarMargin + 'px');
                };

                var scroll = function(distance) {
                    var left = parseInt(contentElement.css('margin-left'), 10) + distance;
                    scrollTo(left);
                };

                element.on('mouseenter', function() {
                    element.css('background', config.scrollbarContainer.color);
                    scrollbar.css('height', config.scrollbar.hoverWidth + 'px');
                    scrollbar.css('top', scrollbarHoverMargin + 'px');
                    scrollbar.css('border-radius', config.scrollbar.hoverWidth / 2 + 'px');
                });

                element.on('mouseleave', function() {
                    element.css('background', 'none');
                    scrollbar.css('height', config.scrollbar.width + 'px');
                    scrollbar.css('top', scrollbarMargin + 'px');
                    scrollbar.css('border-radius', config.scrollbar.width / 2 + 'px');
                });

                var scrollbarMousedown = false,
                    axisX,
                    mouseInElement = false;

                if (!config.show) {
                    containerElement.on('mouseenter', function() {
                        mouseInElement = true;
                        showScrollbar();
                    });
                    containerElement.on('mouseleave', function() {
                        mouseInElement = false;
                        if (scrollbarMousedown) {
                            return;
                        }
                        hideScrollbar();
                    });
                }

                scrollbar.on('mousedown', function(event) {
                    event.preventDefault();
                    scrollbarMousedown = true;
                    axisX = event.screenX;
                    docEl.one('mouseup', function() {
                        scrollbarMousedown = false;
                        if (!config.show && !mouseInElement) {
                            hideScrollbar();
                        }
                        // docEl.off('mouseup', arguments.callee);
                    });
                });
                docEl.on('mousemove', function(event) {
                    if(scrollbarMousedown) {
                        event.preventDefault();
                        scroll(-(event.screenX - axisX) * config.dragSpeed * getContentWidth() / getContainerWidth());
                        axisX = event.screenX;
                    }
                });

                $timeout(function() {
                    reset();
                    if (!!document.createStyleSheet) { //if the browser is ie browser
                        contentElement.on('DOMNodeInserted', reset);
                        contentElement.on('DOMNodeRemoved', reset);
                    } else {
                        var observer = new MutationObserver(function(mutations){
                            if (mutations.length) {
                                reset();
                            }
                        });
                        observer.observe(contentElement[0], {childList:true, subtree: true});
                    }
                }, 5);

                // Redraw the scrollbar when window size changes.
                if (config.autoResize) {
                  // Closure to guard against leaking variables.
                  (function () {
                    var redrawTimer;

                    ctrl.winEl.on('resize', function (e) {
                      if (redrawTimer) {
                        clearTimeout(redrawTimer);
                      }
                      redrawTimer = setTimeout(function () {
                        redrawTimer = null;
                        reset();
                      }, 50);
                    });
                  })();
                }
            };
        }
    };
}]);
define("ngscrollbar", ["angular"], function(){});

/* 
* @Author: anchen
* @Date:   2016-01-10 23:33:42
* @Last Modified by:   anchen
* @Last Modified time: 2016-01-12 20:07:44
*/



define('webappControllers',['angular'], function (angular) {
    'use strict';
    return angular.module('webappControllers', []);
 });


/* 
* @Author: lee
* @Date:   2016-01-10 23:29:04
* @Last Modified by:   anchen
* @Last Modified time: 2016-01-12 21:49:52
*/


define('conttrollers/controllerHome',['webappControllers', 'jquery', 'ngdialog'], function (controllers, $, ngdialog) {
    'use strict';
    controllers.controller('pageHomeCtrl', function ($scope, $rootScope, $location, $filter, $state) {
        //控制器的具体js
        $rootScope.title = "汇元金服";
        $scope.home = 'main.home';
        $scope.active = 0;
        $rootScope.$on('$stateChangeSuccess', function (event, toState, toParams, fromState, fromParams) {
            link()
        })
        $scope.goAccount = function () {
            if ($filter('isRegister')().register) {
                $state.go('main.myaccountHome')
            } else {
                $rootScope.noviceDialogShow = true
            }
        }
        link()
        function link() {
            if ($location.$$path.match(/\/main\/home/)) {
                $scope.active = 1;
            } else if ($location.$$path.match(/\/main\/bankBillList/)) {
                $scope.active = 2;
            } else if ($location.$$path.match(/\/main\/more/)) {
                $scope.active = 3;
            } else if ($location.$$path.match(/\/main\/myaccountHome/)) {
                $scope.active = 4;
            }
        }

    })
    controllers.controller('controllerHome', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', '$localStorage', '$location', '$timeout', function ($scope, $rootScope, resourceService, $filter, $state, $localStorage, $location, $timeout) {
        // 未登录状态点击账户中心展示弹窗
        $rootScope.noviceClose = function () {
            $rootScope.noviceDialogShow = false
        }
        $rootScope.signUp = function () {
            $state.go('zhuce')
            $rootScope.noviceDialogShow = false
        }
        $rootScope.signIn = function () {
            $state.go('dl')
            $rootScope.noviceDialogShow = false
        }
        //控制器的具体js
        //$scope.pageHome=true;
        $filter('isPath')('main.home');
        $scope.loginBox = true;
        $scope.showLogin = false;
        $scope.videoplay = false;
        $scope.active = 2;
        $scope.isLogin = $filter('isRegister')().register;
        if ($scope.isLogin) {
            $scope.user = $filter('isRegister')().user.member;
            $scope.realInfo = $scope.user.realVerify == '1' ? $scope.user.realName : $scope.user.mobilephone;
        }
        $scope.newHandShow = false;
        $scope.toLogin = function () {
            $state.go('dl');
        };
        $scope.toWay = function () {
            $state.go('whymeApp');
        };
        $scope.activefn = function (i) {
            $scope.active = i;
        }
        if (localStorage.userid) {
            $scope.phone = localStorage.phone;
            $scope.loginBox = false;
            $scope.showLogin = true;
        }
        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $scope.tomyaccount = function () {
            $state.go('myaccountHome');
        }
        $scope.goyuebiao = function () {
            $state.go("cpDetail", { pid: $scope.index.activity.pid, wap: true });
            /*if($scope.index.realverify){
                $state.go('yuebiao',{prid:$scope.index.prid,name:$scope.index.name,toState:$state.current.name});
            }else{
                $scope.isRealverify=true;
            }*/
        };
        // 公告
        resourceService.queryPost($scope, $filter('getUrl')('网站公告'), { proId: 14, limit: 3 }, { name: '公告列表' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
            switch (eObj.name) {
                case 'index':
                    $scope.index = data.map;
                    $scope.banner = data.map.banner;
                    if ($scope.index.newHand) {
                        $localStorage.newHand = $scope.index.newHand;
                    }
                    $scope.newHandShow = !(data.map.isInvested || data.map.newHandInvested);
                    $scope._homeList = []
                    if (data.map.newHand) {
                        $scope._homeList.push(data.map.newHand)
                    }
                    if (data.map.preferredInvest) {
                        $scope._homeList.push(data.map.preferredInvest)
                    }
                    $scope.homeList = $scope._homeList
                    var shuangdaneveryday = "'" + new Date().getFullYear() + new Date().getMonth() + new Date().getDate() + "'";
                    if ($scope.index.activityImgUrl) {
                        if (shuangdaneveryday == $localStorage.shuangdaneveryday) {
                            $scope.shuangdanBox = false;
                        }
                        else {
                            $scope.shuangdanBox = true;
                            $localStorage.shuangdaneveryday = shuangdaneveryday;
                        }
                    }
                    else {
                        $scope.shuangdanBox = false;
                    }
                    break;
                case '公告列表':
                    if (data.success) {
                        $scope.gglist = data.map.page.rows.slice(0, 3);
                    }
                    break;
                case 'weekendPopup':
                    var redbag = 0;
                    if (data.map.totalAmount >= 100000) {
                        redbag = 998;
                    } else if (data.map.totalAmount >= 50000) {
                        redbag = 448;
                    } else if (data.map.totalAmount >= 30000) {
                        redbag = 288;
                    } else if (data.map.totalAmount >= 10000) {
                        redbag = 88;
                    }
                    if (redbag > 0) {
                        $scope.dialogObj = {
                            className: 'august-hongbao',
                            href: 'main.bankBillList',
                            redbag: redbag
                        }
                        $scope.showActivityDialog = true;
                    } else {
                        $localStorage.showActivityRedbagDialog = true;
                        if ($localStorage.showActivityDialog == undefined || !sameDay) {
                            $scope.dialogObj = {
                                className: 'august',
                                href: 'extend.hongyaAugust'
                            }
                            $scope.showActivityDialog = true;
                        }
                    }
                    break;
            };
        });
        var obj = {};
        if ($scope.user) { obj.uid = $scope.user.uid; }

        resourceService.queryPost($scope, $filter('getUrl')('shouYe'), obj, { name: 'index' });
        $scope.closeshuangdan = function () {
            $scope.shuangdanBox = false;
            $("body,html").css({ "overflow": "auto", "height": "auto" });
        };
        $scope.playvideo = function () {
            $("body,html").css({ "overflow": "hidden", "height": "100%" });
            $scope.videoplay = true;
        }
        $scope.closevideo = function () {
            $("body,html").css({ "overflow": "auto", "height": "auto" });
            $scope.videoplay = false;
        }

        var prev = new Date($localStorage.showActivityDialog);
        var curr = new Date();
        var sameDay = prev.getDate() == curr.getDate() && prev.getMonth() == curr.getMonth();
        $scope.dialogObj = undefined;
        if (curr >= new Date(2017, 10 - 1, 31, 0, 0, 0) && curr < new Date(2017, 11 - 1, 11, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'zm-back',
                href: 'zmBackCash'
            }
        }
        else if (curr >= new Date(Date.UTC(2017, 9 - 1, 6, -8, 0, 0)) && curr < new Date(Date.UTC(2017, 9 - 1, 13, -8, 0, 0))) {
            $scope.dialogObj = {
                className: 'fan-a',
                href: 'hongyaFanA'
            }
        } else if (curr >= new Date(2017, 8 - 1, 28, 0, 0, 0) && curr < new Date(2017, 9 - 1, 1, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'qixi',
                href: 'hongyaqixi'
            }
        } else if (curr >= new Date(2017, 8 - 1, 26, 0, 0, 0) && curr < new Date(2017, 8 - 1, 28, 0, 0, 0)) {
            if ($scope.isLogin && $localStorage.showActivityRedbagDialog == undefined) {
                resourceService.queryPost($scope, $filter('getUrl')('getMyInvestStatistics'), obj, { name: 'weekendPopup' });
            } else {
                $scope.dialogObj = {
                    className: 'august',
                    href: 'hongyaAugust'
                }
            }
        } else if (curr >= new Date(2017, 8 - 1, 21, 0, 0, 0) && curr < new Date(2017, 8 - 1, 26, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'august',
                href: 'hongyaAugust'
            }
        } else if (curr >= new Date(2017, 8 - 1, 7, 0, 0, 0) && curr < new Date(2017, 8 - 1, 21, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'hongbaoyu',
                href: 'hongyahongbaoyu'
            }
        } else if (curr >= new Date(2017, 7 - 1, 28, 0, 0, 0) && curr < new Date(2017, 8 - 1, 22, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'runyue',
                href: 'hongyarunyue'
            }
        }

        $scope.showActivityDialog = (!$localStorage.showActivityDialog || !sameDay);

        $scope.closeActivityDialog = function () {
            $localStorage.showActivityDialog = new Date();
            $scope.showActivityDialog = false;
            if ($scope.dialogObj.className == 'august-hongbao') {
                $localStorage.showActivityRedbagDialog = true;
            }
        }

    }])
        .directive("repeatFinish", function () {
            return {
                link: function (scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('homescrollText', function () {
            var temp = '<span repeat-finish="finish()" ng-repeat="item in gglist" ui-sref="GGXQ({artiId:item.artiId,wap:true,from:' + "'home'" + '})">{{item.title}}</span>'
            return {
                template: temp,
                scope: true,
                transclude: true,
                link: function ($scope, element, attrs) {
                    var a = 1;
                    $scope.finish = function () {
                        if (a == 1) {
                            a++;
                            var height;
                            $('.notice-box').find('span').each(function (i) {
                                height = parseFloat($(this).css('height'));
                                $(this).css({
                                    top: (i * height) + 'px'
                                })
                                var that = this;
                                setInterval(function () {
                                    var top = parseFloat($(that).css('top'));
                                    $(that).animate({
                                        top: (top - height) + 'px'
                                    }, 500, function () {
                                        var top = parseFloat($(that).css('top'));
                                        if (top <= (height * (-1))) {
                                            $(that).css({ top: ($scope.gglist.length - 1) * height + 'px' });
                                        }
                                        if (top == 0) {
                                            $(that).css({ zIndex: 1 });
                                        }
                                        else {
                                            $(that).css({ zIndex: 0 });
                                        }
                                    })
                                }, 2500)
                            })
                        }
                    }
                }
            }
        });
});
/* 
* @Author: lee
* @Date:   2016-01-10 23:29:04
* @Last Modified by:   anchen
* @Last Modified time: 2016-01-12 21:49:52
*/



define('conttrollers/controllerSign',[
    'webappControllers'
    , 'ngdialog'
]
    , function (controllers, ngdialog) {
        controllers.controller('controllerSign1'
            , ['$scope', '$rootScope'
                , 'resourceService'
                , '$filter'
                , '$state'
                , 'md5'
                , '$localStorage'
                , '$stateParams'
                , '$location'
                , function ($scope, $rootScope, resourceService, $filter, $state, md5, $localStorage, $stateParams, $location) {
                    if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
                        $localStorage.webFormPath = $location.$$search;
                    };
                    $rootScope.title = '用户登录';
                    $scope.protocol = $filter('protocolFilter')()
                    $scope.userLogin = {};
                    $scope.showCode = false;
                    $scope.height = {
                        height: window.innerHeight + 'px'
                    }
                    $scope.sbmit = function (tegForm) {
                        resourceService.queryPost($scope, $filter('getUrl')('login'), $scope.userLogin, { name: 'login', tegForm: tegForm });
                    }
                    if ($filter('isRegister')().user && $filter('isRegister')().user.member && $filter('isRegister')().user.member.uid) {
                        // if ($stateParams.returnurl) {
                        //     $state.go($stateParams.returnurl, { wap: true });
                        // } else {
                        //     $state.go("main.myaccountHome");
                        // }
                        if ($state.params.returnurl) {
                            if ($state.params.returnurl.indexOf('?') != -1) {
                                var router = $state.params.returnurl.split('?')[0];
                                var params = $state.params.returnurl.split('?')[1];
                                var obj = {};
                                var array = params.split("&");
                                if (array.length > 1) {
                                    for (var i = 0; i < array.length; i++) {
                                        obj[array[i].split("=")[0]] = array[i].split("=")[1];
                                    }
                                } else {
                                    obj[array[0].split("=")[0]] = array[0].split("=")[1];
                                }
                                obj.wap = true;
                                $state.go(router, obj);
                            } else {
                                $state.go($state.params.returnurl, { wap: true });
                            }
                        } else {
                            $state.go("main.myaccountHome");
                        }
                    }
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                        switch (type.name) {
                            case 'login':
                                if (data.success) {
                                    $localStorage.user = data.map;
                                    $localStorage.hongbaoeveryday = 1;
                                    // if ($localStorage.specialLogin == true) {
                                    //     // $rootScope.$emit('loginSuccess',true);
                                    //     $state.go('special',{wap:true});
                                    // } else {
                                    if ($state.params.returnurl) {
                                        if ($state.params.returnurl.indexOf('?') != -1) {
                                            var router = $state.params.returnurl.split('?')[0];
                                            var params = $state.params.returnurl.split('?')[1];
                                            var obj = {};
                                            var array = params.split("&");
                                            if (array.length > 1) {
                                                for (var i = 0; i < array.length; i++) {
                                                    obj[array[i].split("=")[0]] = array[i].split("=")[1];
                                                }
                                            } else {
                                                obj[array[0].split("=")[0]] = array[0].split("=")[1];
                                            }
                                            obj.wap = true;
                                            $state.go(router, obj);
                                        } else {
                                            $state.go($state.params.returnurl, { wap: true });
                                        }
                                    } else {
                                        $state.go("main.myaccountHome");
                                    }
                                    // }
                                } else {
                                    $filter('登录错误信息')(data.errorCode, $scope, 'y')

                                    $scope.userLogin.mobilephone = null;
                                    $scope.userLogin.passWord = null;
                                }
                                break;
                        };
                    });
                    $scope.toback = function () {
                        $filter('跳回上一页')();
                    };
                }
            ])

        // 关于我们
        controllers.controller('GYWMCtrl', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state', '$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state, $stateParams) {
            $rootScope.title = $scope.title = '关于汇元';
            $scope.wap = $stateParams.wap;
            $filter('isPath')('GYWM');
            $scope.toback = function () {
                // $filter('跳回上一页')(2);
                $state.go('main.more')
            };
            $scope.goto = function (url) {
                switch (url) {
                    case '公司介绍':
                        if ($scope.wap == 'true') {
                            $state.go('GSJS', { wap: true });
                        }
                        else {
                            $state.go('GSJS');
                        }
                        break;
                    case '股东介绍':
                        if ($scope.wap == 'true') {
                            $state.go('GDJS', { wap: true });
                        }
                        else {
                            $state.go('GDJS');
                        }
                        break;
                    case '管理团队':
                        if ($scope.wap == 'true') {
                            $state.go('GLTD', { wap: true });
                        }
                        else {
                            $state.go('GLTD');
                        }
                        break;
                    case '公司资质':
                        if ($scope.wap == 'true') {
                            $state.go('GSZZ', { wap: true });
                        }
                        else {
                            $state.go('GSZZ');
                        }
                        break;
                    case '一亿验资':
                        if ($scope.wap == 'true') {
                            $state.go('YYYZ', { wap: true });
                        }
                        else {
                            $state.go('YYYZ');
                        }
                        break;
                    case '网站公告':
                        if ($scope.wap == 'true') {
                            $state.go('WZGG', { wap: true });
                        }
                        else {
                            $state.go('WZGG');
                        }
                        break;
                };
            }
        }])
        // 公司介绍
        controllers.controller('GSJSCtrl', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state', '$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state, $stateParams) {
            $rootScope.title = $scope.title = '公司介绍';
            $scope.wap = $stateParams.wap;
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
        }])
        // 股东介绍
        controllers.controller('GDJSCtrl', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state', '$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state, $stateParams) {
            $rootScope.title = $scope.title = '股东介绍';
            $scope.wap = $stateParams.wap;
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
        }])
        // 管理团队
        controllers.controller('GLTDCtrl', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state', '$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state, $stateParams) {
            $rootScope.title = $scope.title = '管理团队';
            $scope.wap = $stateParams.wap;
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
        }])
        // 公司资质
        controllers.controller('GSZZCtrl', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state', '$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state, $stateParams) {
            $rootScope.title = $scope.title = '公司资质';
            $scope.wap = $stateParams.wap;
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
        }])
        // 一亿验资
        controllers.controller('YYYZCtrl', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state', '$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state, $stateParams) {
            $rootScope.title = $scope.title = '一亿验资';
            $scope.wap = $stateParams.wap;
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
        }])

        // 股权结构
        controllers.controller('GQJGCtrl', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state', '$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state, $stateParams) {
            $scope.wap = $stateParams.wap;
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
        }])

        controllers.controller('WZGGCtrl', function ($scope, resourceService, $filter, $state, $rootScope, $stateParams) {
            $scope.wap = $stateParams.wap;
            $rootScope.title = $scope.title = '网站公告';
            $filter('isPath')('WZGG');
            $scope.toback = function () {
                $filter('跳回上一页')(2);
            };
            var isLoad = true;
            var pageOn = 1;
            $scope.ggList = [];
            $scope.loadMore = function (item) {
                if (item.id == $scope.ggList[$scope.ggList.length - 1].id) {
                    if (isLoad) {
                        if (pageOn != $scope.page.pageOn) {
                            var obj = {
                                pageOn: pageOn,
                                pageSize: 10,
                                proId: 14
                            };
                            resourceService.queryPost($scope, $filter('getUrl')('网站公告'), obj, { name: '公告列表' });
                            isLoad = false;
                        }
                    };
                };
            };
            var objs = {};
            objs.proId = 14;
            resourceService.queryPost($scope, $filter('getUrl')('网站公告'), objs, { name: '公告列表' });
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
                switch (eObj.name) {
                    case '公告列表':
                        $scope.page = data.map.page;
                        if (pageOn == $scope.page.pageOn) {
                            isLoad = true;
                        }
                        if (data.map.page.pageOn <= data.map.page.totalPage) {
                            pageOn = $scope.page.pageOn + 1;
                            for (var i = 0; i < data.map.page.rows.length; i++) {
                                $scope.ggList.push(data.map.page.rows[i]);
                            }
                        } else {
                            isLoad = false;
                        }
                        break;
                };
            });
            $scope.goto = function (id) {
                if ($scope.wap == 'true') {
                    $state.go('GGXQ', { wap: true, artiId: id });
                }
                else {
                    $state.go('GGXQ', { artiId: id });
                }
            }
        })
        controllers.controller('GGXQCtrl', function ($scope, resourceService, $filter, $stateParams, $state, $rootScope) {
            if ($stateParams.wap) {
                $scope.wap = $stateParams.wap;
            }
            $scope.from = $stateParams.from;
            if ($stateParams.from == 'kfr') {
                $rootScope.title = $scope.title = '活动详情';
            }
            else {
                $rootScope.title = $scope.title = '网站公告';
            }
            $('body').scrollTop(0);
            var obj = {};
            if ($stateParams.from == 'kfr') {
                obj.openDayId = $stateParams.artiId;
                resourceService.queryPost($scope, $filter('getUrl')('getOpenDayArticleDetail'), obj, { name: '活动详情' });
            }
            else {
                obj.artiId = $stateParams.artiId;
                resourceService.queryPost($scope, $filter('getUrl')('公告详情'), obj, { name: '公告详情' });
            }
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
                switch (eObj.name) {
                    case '公告详情':
                        $scope.ggxq = data.map.sysArticle;
                        break;
                    case '活动详情':
                        $scope.ggxq = data.map.sysArticle;
                        break;
                };
            });
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
            // $scope.goBack = function () {
            //     if ($stateParams.from == 'home') {
            //         $state.go('main.home');
            //     }
            //     else {
            //         $state.go('WZGG', { wap: true });
            //     }
            // }
        })
    });
/*SHR256 加密*/
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined
 * in FIPS 180-2
 * Version 2.2 Copyright Angel Marin, Paul Johnston 2000 - 2009.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 * Also http://anmar.eu.org/projects/jssha2/
 */
  
/*
 * Configurable variables. You may need to tweak these to be compatible with
 * the server-side, but the defaults work in most cases.
 */
var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase    */
var b64pad = ""; /* base-64 pad character. "=" for strict RFC compliance  */
  
/*
 * These are the functions you'll usually want to call
 * They take string arguments and return either hex or base-64 encoded strings
 */
function hex_sha256(s)  { return rstr2hex(rstr_sha256(str2rstr_utf8(s))); }
function b64_sha256(s)  { return rstr2b64(rstr_sha256(str2rstr_utf8(s))); }
function any_sha256(s, e) { return rstr2any(rstr_sha256(str2rstr_utf8(s)), e); }
function hex_hmac_sha256(k, d)
 { return rstr2hex(rstr_hmac_sha256(str2rstr_utf8(k), str2rstr_utf8(d))); }
function b64_hmac_sha256(k, d)
 { return rstr2b64(rstr_hmac_sha256(str2rstr_utf8(k), str2rstr_utf8(d))); }
function any_hmac_sha256(k, d, e)
 { return rstr2any(rstr_hmac_sha256(str2rstr_utf8(k), str2rstr_utf8(d)), e); }
  
/*
 * Perform a simple self-test to see if the VM is working
 */
function sha256_vm_test()
{
 return hex_sha256("abc").toLowerCase() ==
      "ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad";
}
  
/*
 * Calculate the sha256 of a raw string
 */
function rstr_sha256(s)
{
 return binb2rstr(binb_sha256(rstr2binb(s), s.length * 8));
}
  
/*
 * Calculate the HMAC-sha256 of a key and some data (raw strings)
 */
function rstr_hmac_sha256(key, data)
{
 var bkey = rstr2binb(key);
 if(bkey.length > 16) bkey = binb_sha256(bkey, key.length * 8);
  
 var ipad = Array(16), opad = Array(16);
 for(var i = 0; i < 16; i++)
 {
  ipad[i] = bkey[i] ^ 0x36363636;
  opad[i] = bkey[i] ^ 0x5C5C5C5C;
 }
  
 var hash = binb_sha256(ipad.concat(rstr2binb(data)), 512 + data.length * 8);
 return binb2rstr(binb_sha256(opad.concat(hash), 512 + 256));
}
  
/*
 * Convert a raw string to a hex string
 */
function rstr2hex(input)
{
 try { hexcase } catch(e) { hexcase=0; }
 var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
 var output = "";
 var x;
 for(var i = 0; i < input.length; i++)
 {
  x = input.charCodeAt(i);
  output += hex_tab.charAt((x >>> 4) & 0x0F)
      + hex_tab.charAt( x    & 0x0F);
 }
 return output;
}
  
/*
 * Convert a raw string to a base-64 string
 */
function rstr2b64(input)
{
 try { b64pad } catch(e) { b64pad=''; }
 var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
 var output = "";
 var len = input.length;
 for(var i = 0; i < len; i += 3)
 {
  var triplet = (input.charCodeAt(i) << 16)
        | (i + 1 < len ? input.charCodeAt(i+1) << 8 : 0)
        | (i + 2 < len ? input.charCodeAt(i+2)   : 0);
  for(var j = 0; j < 4; j++)
  {
   if(i * 8 + j * 6 > input.length * 8) output += b64pad;
   else output += tab.charAt((triplet >>> 6*(3-j)) & 0x3F);
  }
 }
 return output;
}
  
/*
 * Convert a raw string to an arbitrary string encoding
 */
function rstr2any(input, encoding)
{
 var divisor = encoding.length;
 var remainders = Array();
 var i, q, x, quotient;
  
 /* Convert to an array of 16-bit big-endian values, forming the dividend */
 var dividend = Array(Math.ceil(input.length / 2));
 for(i = 0; i < dividend.length; i++)
 {
  dividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);
 }
  
 /*
  * Repeatedly perform a long division. The binary array forms the dividend,
  * the length of the encoding is the divisor. Once computed, the quotient
  * forms the dividend for the next step. We stop when the dividend is zero.
  * All remainders are stored for later use.
  */
 while(dividend.length > 0)
 {
  quotient = Array();
  x = 0;
  for(i = 0; i < dividend.length; i++)
  {
   x = (x << 16) + dividend[i];
   q = Math.floor(x / divisor);
   x -= q * divisor;
   if(quotient.length > 0 || q > 0)
    quotient[quotient.length] = q;
  }
  remainders[remainders.length] = x;
  dividend = quotient;
 }
  
 /* Convert the remainders to the output string */
 var output = "";
 for(i = remainders.length - 1; i >= 0; i--)
  output += encoding.charAt(remainders[i]);
  
 /* Append leading zero equivalents */
 var full_length = Math.ceil(input.length * 8 /
                  (Math.log(encoding.length) / Math.log(2)))
 for(i = output.length; i < full_length; i++)
  output = encoding[0] + output;
  
 return output;
}
  
/*
 * Encode a string as utf-8.
 * For efficiency, this assumes the input is valid utf-16.
 */
function str2rstr_utf8(input)
{
 var output = "";
 var i = -1;
 var x, y;
  
 while(++i < input.length)
 {
  /* Decode utf-16 surrogate pairs */
  x = input.charCodeAt(i);
  y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;
  if(0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF)
  {
   x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);
   i++;
  }
  
  /* Encode output as utf-8 */
  if(x <= 0x7F)
   output += String.fromCharCode(x);
  else if(x <= 0x7FF)
   output += String.fromCharCode(0xC0 | ((x >>> 6 ) & 0x1F),
                  0x80 | ( x     & 0x3F));
  else if(x <= 0xFFFF)
   output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),
                  0x80 | ((x >>> 6 ) & 0x3F),
                  0x80 | ( x     & 0x3F));
  else if(x <= 0x1FFFFF)
   output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),
                  0x80 | ((x >>> 12) & 0x3F),
                  0x80 | ((x >>> 6 ) & 0x3F),
                  0x80 | ( x     & 0x3F));
 }
 return output;
}
  
/*
 * Encode a string as utf-16
 */
function str2rstr_utf16le(input)
{
 var output = "";
 for(var i = 0; i < input.length; i++)
  output += String.fromCharCode( input.charCodeAt(i)    & 0xFF,
                 (input.charCodeAt(i) >>> 8) & 0xFF);
 return output;
}
  
function str2rstr_utf16be(input)
{
 var output = "";
 for(var i = 0; i < input.length; i++)
  output += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,
                  input.charCodeAt(i)    & 0xFF);
 return output;
}
  
/*
 * Convert a raw string to an array of big-endian words
 * Characters >255 have their high-byte silently ignored.
 */
function rstr2binb(input)
{
 var output = Array(input.length >> 2);
 for(var i = 0; i < output.length; i++)
  output[i] = 0;
 for(var i = 0; i < input.length * 8; i += 8)
  output[i>>5] |= (input.charCodeAt(i / 8) & 0xFF) << (24 - i % 32);
 return output;
}
  
/*
 * Convert an array of big-endian words to a string
 */
function binb2rstr(input)
{
 var output = "";
 for(var i = 0; i < input.length * 32; i += 8)
  output += String.fromCharCode((input[i>>5] >>> (24 - i % 32)) & 0xFF);
 return output;
}
  
/*
 * Main sha256 function, with its support functions
 */
function sha256_S (X, n) {return ( X >>> n ) | (X << (32 - n));}
function sha256_R (X, n) {return ( X >>> n );}
function sha256_Ch(x, y, z) {return ((x & y) ^ ((~x) & z));}
function sha256_Maj(x, y, z) {return ((x & y) ^ (x & z) ^ (y & z));}
function sha256_Sigma0256(x) {return (sha256_S(x, 2) ^ sha256_S(x, 13) ^ sha256_S(x, 22));}
function sha256_Sigma1256(x) {return (sha256_S(x, 6) ^ sha256_S(x, 11) ^ sha256_S(x, 25));}
function sha256_Gamma0256(x) {return (sha256_S(x, 7) ^ sha256_S(x, 18) ^ sha256_R(x, 3));}
function sha256_Gamma1256(x) {return (sha256_S(x, 17) ^ sha256_S(x, 19) ^ sha256_R(x, 10));}
function sha256_Sigma0512(x) {return (sha256_S(x, 28) ^ sha256_S(x, 34) ^ sha256_S(x, 39));}
function sha256_Sigma1512(x) {return (sha256_S(x, 14) ^ sha256_S(x, 18) ^ sha256_S(x, 41));}
function sha256_Gamma0512(x) {return (sha256_S(x, 1) ^ sha256_S(x, 8) ^ sha256_R(x, 7));}
function sha256_Gamma1512(x) {return (sha256_S(x, 19) ^ sha256_S(x, 61) ^ sha256_R(x, 6));}
  
var sha256_K = new Array
(
 1116352408, 1899447441, -1245643825, -373957723, 961987163, 1508970993,
 -1841331548, -1424204075, -670586216, 310598401, 607225278, 1426881987,
 1925078388, -2132889090, -1680079193, -1046744716, -459576895, -272742522,
 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986,
 -1740746414, -1473132947, -1341970488, -1084653625, -958395405, -710438585,
 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291,
 1695183700, 1986661051, -2117940946, -1838011259, -1564481375, -1474664885,
 -1035236496, -949202525, -778901479, -694614492, -200395387, 275423344,
 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218,
 1537002063, 1747873779, 1955562222, 2024104815, -2067236844, -1933114872,
 -1866530822, -1538233109, -1090935817, -965641998
);
  
function binb_sha256(m, l)
{
 var HASH = new Array(1779033703, -1150833019, 1013904242, -1521486534,
            1359893119, -1694144372, 528734635, 1541459225);
 var W = new Array(64);
 var a, b, c, d, e, f, g, h;
 var i, j, T1, T2;
  
 /* append padding */
 m[l >> 5] |= 0x80 << (24 - l % 32);
 m[((l + 64 >> 9) << 4) + 15] = l;
  
 for(i = 0; i < m.length; i += 16)
 {
  a = HASH[0];
  b = HASH[1];
  c = HASH[2];
  d = HASH[3];
  e = HASH[4];
  f = HASH[5];
  g = HASH[6];
  h = HASH[7];
  
  for(j = 0; j < 64; j++)
  {
   if (j < 16) W[j] = m[j + i];
   else W[j] = safe_add(safe_add(safe_add(sha256_Gamma1256(W[j - 2]), W[j - 7]),
                      sha256_Gamma0256(W[j - 15])), W[j - 16]);
  
   T1 = safe_add(safe_add(safe_add(safe_add(h, sha256_Sigma1256(e)), sha256_Ch(e, f, g)),
                             sha256_K[j]), W[j]);
   T2 = safe_add(sha256_Sigma0256(a), sha256_Maj(a, b, c));
   h = g;
   g = f;
   f = e;
   e = safe_add(d, T1);
   d = c;
   c = b;
   b = a;
   a = safe_add(T1, T2);
  }
  
  HASH[0] = safe_add(a, HASH[0]);
  HASH[1] = safe_add(b, HASH[1]);
  HASH[2] = safe_add(c, HASH[2]);
  HASH[3] = safe_add(d, HASH[3]);
  HASH[4] = safe_add(e, HASH[4]);
  HASH[5] = safe_add(f, HASH[5]);
  HASH[6] = safe_add(g, HASH[6]);
  HASH[7] = safe_add(h, HASH[7]);
 }
 return HASH;
}
  
function safe_add (x, y)
{
 var lsw = (x & 0xFFFF) + (y & 0xFFFF);
 var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
 return (msw << 16) | (lsw & 0xFFFF);
}
/*SHR256 加密结束*/;
define("SHR256", function(){});

/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/controllerRegister',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('controllerRegister', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
        // signWeChatService();
        $scope.protocol = $filter('protocolFilter')()
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $scope.height = {
            height: window.innerHeight + 'px'
        }
        $rootScope.title = '新用户注册';
        // $rootScope.maskError=true;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                } else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                } else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                } else if (tegForm.passWord.$invalid) {
                    if (tegForm.passWord.$error.pattern) {
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if ($scope.isImgCode == true) {
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic: true
                        }, { name: '获取验证码', tegForm: tegForm });

                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else {
//                  $scope.login.picCode = '';
                    $scope.isImgCode = true;
//                  changeIMG();
                    if(tegForm.picCode.$valid == false){
                    	$rootScope.errorText = '请重新输入图形码';
                    	$rootScope.maskError = true;
                    }
                    
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success == true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode = false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if (data.errorCode == '1006') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        if ($stateParams.toWhere) {
                            $state.go($stateParams.toWhere, { wap: true });
                        }
                        else {
                            $state.go('tyjRegSuccess');
                        }
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($scope.webFormPath.recommCode) {
            linkstr = '&recommCode=' + $scope.webFormPath.recommCode;
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '汇元金服，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '汇元金服，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '汇元金服，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '汇元金服，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '汇元金服，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }

    ])
    /*-------------------------------实名认证-------------------------------------------------------*/
    controllers.controller('controllerRealName', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog) {
        $scope.toPassword = function () {
            resourceService.queryPost($scope, $filter('getUrl')('setrealname'), {
                'realName': $scope.username,
                'idCards': $scope.userID,
                'uid': localStorage.userid
            }, '实名认证');
        }



        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {


            if (type == '实名认证') {
                if (data.result == "0") {
                    if (data.nologin == "nologin") {

                        $filter('errorMsgDialog')('none', ngDialog, '用户未登录');
                    } else if (data.nologin == "error") {

                        $filter('errorMsgDialog')('none', ngDialog, '实名失败');

                    } else if (data.nologin == "alreadyVerify") {
                        $filter('errorMsgDialog')('none', ngDialog, '身份证已实名过，不能重复实名');

                    }

                } else if (data.result == "1") {
                    $filter('errorMsgDialog')('none', ngDialog, '认证成功');
                    $state.go('password');
                }

            }
        });

    }])
    controllers.controller('controllerSetPassword', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog) {

        $scope.toHome = function () {
            resourceService.queryPost($scope, $filter('getUrl')('setpassword'), {
                'mobilephone': localStorage.phone,

                'uid': localStorage.userid

            }, '设置交易密码');
            //                      
            //                      $state.go('home');

        }




        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {

            if (type == '设置交易密码') {
                if (data.result == "0") {
                    $filter('errorMsgDialog')('none', ngDialog, '失败');
                } else if (data.result == "error01") {
                    $filter('errorMsgDialog')('none', ngDialog, '手机号码为空');

                } else if (data.result == "error02") {
                    $filter('errorMsgDialog')('none', ngDialog, '登录用户不存在');

                } else if (data.result == "1") {
                    $filter('errorMsgDialog')('none', ngDialog, '成功');
                    $state.go('home');
                }
            }
        });
    }])
    // --------------------------------------------------------------//
})
;
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */



define('conttrollers/controllerH5Register',[
        'webappControllers'
        , 'jquery'
        , 'ngdialog'
        ,'SHR256'
    ]
    , function (controllers, jq, ngdialog,SHR256,weixin) {
        controllers.controller('controllerH5Register'
            , ['$scope', '$rootScope'
                , 'resourceService'
                , '$filter'
                , '$state','ngDialog','$location','md5','$localStorage'
                , function ($scope, $rootScope, resourceService, $filter, $state,ngDialog,$location,md5,$localStorage) {  
                    $rootScope.title='啄米理财-注册';
                    if($location.$$url == '/triplegift'){
                        $scope.isText=false;
                    }else{
                        $scope.isText=true;
                    }

                    //电信渠道功能
                    $scope.showRules = false;
                    $scope.focusMobilePhone = function() {
                        $('.mobilephone').focus();
                    };

                    // $rootScope.maskError=true;
                    $scope.picUrl='../login/validateCode.do?version='+$rootScope.version+'&channel='+$rootScope.channel;
                    $scope.login={} ;
                    $scope.webFormPath = $location.$$search;
                    function getUrlParam(name) {
                                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                                if (r != null) return unescape(r[2]); return null; //返回参数值
                            }
                    var recommCode = getUrlParam('recommCode');
                    var toFrom = getUrlParam('toFrom');
                    var isMmtoken = getUrlParam('mmtoken');

                    $scope.isShow = getUrlParam('allowDL') == 'false' ? false : true;

                    $scope.webFormPath.recommCode = recommCode;
                    $scope.webFormPath.toFrom = toFrom;

                    if($scope.webFormPath.toFrom != undefined){
                        $scope.login.toFrom = $scope.webFormPath.toFrom;
                    }
                    if($scope.webFormPath.recommCode!=undefined){
                        $scope.login.recommPhone = $scope.webFormPath.recommCode;
                    }
                    $scope.passwordText=false;
                    $scope.isSubMin=false;
                    $scope.nowTimer="获取验证码";
                    var changePicEvent;
                    var targetFrom;

                    var changeIMG = function (event) {//换图片验证码
                        if(event != undefined){
                            event.currentTarget.src += '&'+ new Date().getTime();
                        }else{
                            if($('.img-box img')[0]!= undefined){
                                $('.img-box img')[0].src += '&'+ new Date().getTime();  
                            };
                        };
                    };
                    var isSub=true;
                    $scope.zuce=function(tegForm){
                        $scope.login.checkbox = true;
                        if($scope.login.recommPhone === undefined){
                            delete $scope.login.recommPhone;
                        };
                        if($scope.login.toFrom === undefined){
                            delete $scope.login.toFrom;
                        };
                        if(tegForm.$valid){
                            // $scope.login.passWord = hex_sha256(md5.createHash($scope.login.passWord || ''));
                            if(isSub){
                                resourceService.queryPost($scope, $filter('getUrl')('zuce'),$scope.login, {name:'注册',tegForm:tegForm}); 
                                isSub=false;
                            }
                        }else{
                            $rootScope.errorText= '正确密码格式为6-18位字母数字混合';
                            $rootScope.maskError= true;
                        }
                    }

                    $scope.isClickOpen = function(){
                        $scope.isOpen=true;
                    };
                    $scope.showPassword=function (passwordTextBool) {
                        if(passwordTextBool){
                            $scope.passwordText=false;
                            $scope.passwordText=true;
                        }
                    }
                    $scope.isSubMin=true;
                    $scope.getyzm=function(tegForm){
                        targetFrom=tegForm;

                        if(tegForm.mobilephone.$valid==false){
                            // $scope.isSubMin =false;
                        }else{
                            // $scope.isSubMin = true;
                            if($scope.isSubMin){
                                resourceService.queryPost($scope,$filter('getUrl')('getyzm'),{
                                    mobilephone: $scope.login.mobilephone
                                },{name:'获取验证码',tegForm:tegForm});
                                $filter('60秒倒计时')($scope,60);
                            }
                            // $scope.isSubMin =true;
                        };
                    };
                   /*焦点进入与离开*/
                    $scope.blurID = function(code,tegForm) {
                        if(!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                            resourceService.queryPost($scope,$filter('getUrl')('getPhone'),{
                                mobilephone:$scope.login.mobilephone
                            },{name:'注册验证手机号',tegForm:tegForm});
                        };
                    };
                        
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                        switch(type.name){
                            case '获取验证码': 
                                if(data.success){
                                    $rootScope.errorText= '验证码发送成功';
                                    $rootScope.maskError= true;
                                }else{
                                    $scope.stop();
                                    $filter('手机短信验证错误')(type.tegForm,data.errorCode);
                                }
                            break;
                            case '注册验证手机号': 
                                if(data.success){
                                    if (data.map.exists) {//已有用户名
                                        $rootScope.errorText= '此手机已注册';
                                        $rootScope.maskError= true;
                                    }else{
                                        // type.tegForm.mobilephone.$error.serverError = data.map.exists;
                                    };
                                }
                            break;
                            case '注册':
                                isSub=true;
                                if(data.success){
                                    // /*脉脉*/
                                    // if(isMmtoken != null && isMmtoken != ''){
                                    //     jq.ajax({
                                    //           type:"get",
                                    //           url:"https://maimai.cn/hb_pingback?mmtoken="+isMmtoken,
                                    //           dataType:"jsonp",
                                    //           callback:"need_callback",
                                    //           success:function(json){
                                    //             $(".user").html("用户信息："+json.username+","+json.age+","+json.gender);
                                    //           },
                                    //           error:function(){
                                    //         }
                                    //     });
                                    // };
                                    //-------------------脉脉结束------------------ 
                                    $localStorage.user = data.map;
                                    // $state.go('main.home');
                                    
                                    $state.go('myCoupon');
                                }else{
                                    $filter('serverZuceError')(type.tegForm,data.errorCode);
                                    $scope.login.passWord ='';
                                };
                            break;
                        };
                    });
                }
            ])
            

    });
/* 
* @Author: xyc
* @Date:   2016-01-18 23:29:04
*/

define('conttrollers/myaccountCtrl',['jweixin', 'webappControllers', 'jquery', 'ngdialog'], function (wx, controllers, $, ngdialog) {
    'use strict';
    // controllers.controller('controller1',function($scope){
    //     //控制器的具体js
    //     console.log('crtl1-ok')
    // })
    controllers.controller('accountHomeCtrl', ['$scope', 'resourceService', '$filter', '$state', '$rootScope', '$localStorage', 'ngDialog', 'isWeixin', '$timeout', 'signWeChatService', function ($scope, resourceService, $filter, $state, $rootScope, $localStorage, ngDialog, isWeixin, $timeout, signWeChatService) {
        // signWeChatService();
        $rootScope.title = "我的账户";
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;
        $scope.date = new Date().getTime();
        $scope.showAsset = true;
        if ($scope.userOBJ.register) {
            resourceService.queryPost($scope, $filter('getUrl')('myacc'), {
                uid: $scope.userOBJ.user.member.uid
            }, '我的账户');
        } else {
            $state.go('dl');
            return;
        };
        // ngDialog.closeAll();
        $scope.hongbaoShow = false;
        $scope.hongbaoShow2 = false;
        $scope.openredpackets = function () {
            $scope.hongbaoShow2 = false;
            $scope.hongbaoShow = true;
            $("body,html").css({ "overflow": "hidden", "height": "100%" });
        };
        $scope.closeredpackets = function () {
            $scope.hongbaoShow = false;
            $("body,html").css({ "overflow": "auto", "height": "auto" });
        };
        $scope.openredpackets2 = function () {
            if ($scope.youxiaohb == true) {
                $scope.hongbaoShow = false;
                $scope.hongbaoShow2 = true;
                $("body,html").css({ "overflow": "hidden", "height": "100%" });
            } else {
                $scope.hongbaoShow = false;
                $scope.hongbaoShow2 = false;
                $state.go('getCash');
                //$scope.hongbaoShow2=false;
                //$("body,html").css({"overflow":"auto","height":"auto"});
            }

        };
        $scope.closeredpackets2 = function () {
            $scope.hongbaoShow = false;
            $scope.hongbaoShow2 = false;
            $("body,html").css({ "overflow": "auto", "height": "auto" });
        };
        $scope.closepackets2 = function () {
            $state.go('getCash');
            $scope.hongbaoShow = false;
            $scope.hongbaoShow2 = false;
            $("body,html").css({ "overflow": "auto", "height": "auto" });
        }
        $scope.out = function (argument) {
            switch (argument) {
                case 'out':
                    $filter('清空缓存')();
                    $state.go('main.home');
                    break;
            };
        }
        //页面展示数据
        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
            uid: $scope.userOBJ.user.member.uid,
            status: 0
        }, '全部红包')
        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
            uid: $scope.userOBJ.user.member.uid,
            flag: 0
        }, '我的体验金');
        // resourceService.queryPost($scope, $filter('getUrl')('myInvitation'), {
        //     uid: $scope.userOBJ.user.member.uid
        // }, '我的邀请');
        // resourceService.queryPost($scope, $filter('getUrl')('我的投资'), {
        //     uid: $scope.userOBJ.user.member.uid,
        //     status: 1,
        //     pageOn: 1,
        //     pageSize: 5
        // }, '持有中');
        // resourceService.queryPost($scope, $filter('getUrl')('我的投资'), {
        //     uid: $scope.userOBJ.user.member.uid,
        //     status: 3,
        //     pageOn: 1,
        //     pageSize: 5
        // }, '已还款');
        $filter('isPath')('main.myaccountHome');
        $scope.shareUrl = 'http://m.zhuomilicai.com/zhuomireg?recommCode=' + $scope.user.mobilephone;
        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '我的账户':
                    if (data.success) {
                        data.map.isPayment = false;
                        $scope.accunt = data.map;
                        resourceService.queryPost($scope, $filter('getUrl')('getPromoteRedelivery'), {
                            uid: $scope.userOBJ.user.member.uid
                        }, '有效红包');
                        if (data.map.isPayment == true) {
                            $scope.hongbaoicon = 1;
                            $scope.iconhongbao = true;
                            if ($localStorage.hongbaoeveryday) {
                                $scope.hongbaoShow = true;
                                delete $localStorage.hongbaoeveryday;
                            }
                        } else {
                            $scope.iconhongbao = false;
                            $scope.hongbaoicon = 2;
                            $scope.hongbaoShow = false;
                        }
                        $localStorage.user.member.balance = data.map.balance;
                        $localStorage.user.member.free = data.map.free;
                        $localStorage.user.realName = data.map.realName;
                        $localStorage.user.member.realVerify = data.map.realVerify;
                        $localStorage.user.member.sex = data.map.sex;
                        $localStorage.user.member.unReadMsg = data.map.unReadMsg;
                        $localStorage.user.member.winterest = data.map.winterest;
                        $localStorage.user.member.wprincipal = data.map.wprincipal;
                        $scope.unclaimed = data.map.unclaimed;
                        $scope.rfid = data.map.afid;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    $('.yaoqing').fadeOut(200);
                    break;
                case '有效红包':
                    if (data.success == true) {
                        $scope.youxiaohb = true;
                        $scope.hongbaoData = data.map;
                        $scope.iconhongbao = true;
                        if ($scope.hongbaoShow == false && $localStorage.hongbaoeveryday) {
                            $scope.hongbaoShow = true;
                            delete $localStorage.hongbaoeveryday;
                        }
                    } else {
                        $scope.youxiaohb = false;
                        if ($scope.iconhongbao == false) {
                            $scope.iconhongbao = false;
                        }
                    }
                    break;
                case '红包投资详情':
                    if (data.success) {
                        $scope.hongbaoShow = false;
                        $scope.hongbaoShow2 = false;
                        if (data.map.pid != -1) {
                            $state.go('investment', { pid: data.map.pid, cpid: $scope.activefid, uid: $scope.userOBJ.user.member.uid });
                        } else {
                            $state.go('main.bankBillList');
                        }
                    }
                    break;
                case '全部红包':
                    if (data.success) {
                        $scope.allHongBaoLength = data.map.list.filter(function (item) {
                            // 体验金过滤  
                            return item.type !== 3
                        }).length
                    }
                    break;
                case '我的体验金':
                    if (data.success) {
                        var tyjFilter = data.map.list.filter(function (item) {
                            return item.status === 0
                        })
                        var sum = 0
                        tyjFilter.forEach(function (item) {
                            sum += item.amount
                        })
                        $scope.allTYJ = sum
                    }
                    break;
                case '我的邀请':
                    if (data.success) {
                        $scope.invite = {
                            total: data.map.total,
                            investors: data.map.investors
                        }
                    }
                    break;
                case '持有中':
                    if (data.success) {
                        $scope.getInvestNumber = data.map.page.total
                    }
                    break;
                case '已还款':
                    if (data.success) {
                        $scope.gotInvestNumber = data.map.page.total
                    }
                    break;
            };
        });
        $scope.onClick = function (argument) {
            switch (argument) {
                case 'yes':
                    $filter('清空缓存')();
                    $state.go('dl');
                    $scope.hongbaoShow = false;
                    $scope.hongbaoShow2 = false;
                    break;
            };
        };
        $scope.gotoInvest = function (item) {
            $scope.hongbaoShow2 = false;
            $("body,html").css({ "overflow": "auto", "height": "auto" });
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), {
                uid: $scope.userOBJ.user.member.uid,
                fid: item.id
            }, '红包投资详情');
            $scope.activefid = item.id;
        };
        $scope.lingqu = function () {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $localStorage.user.member.uid, afid: $scope.rfid }, '领取奖励');
        };
        $scope.lijiyaoqing = function () {
            if (isWeixin()) {
                $('.activity-firend-boxweixin').fadeIn(200);
            } else {
                $('.activity-firend-boxh5').fadeIn(200);
            }
        };
        $scope.copyShare = function () {
            var e = document.getElementById("shareurl");//对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function () {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function (e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function () {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        $scope.closehongbao = function () {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        var linkstr = "";
        if ($scope.user && $scope.user.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.mobilephone;
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        });
    }
    ]);
})
;

define('conttrollers/indexCtrl',[
    'webappControllers', 'jquery', 'ngdialog'
], function(controllers, $, ngdialog) {
    controllers.controller('indexCtrl', ['$scope', 'resourceService','$http', '$filter', '$state', function($scope, resourceService,$http, $filter, $state) {
        $filter('isPath')('main.home');
        resourceService.queryPost($scope, $filter('getUrl')('index'),{code:4}, '加载首页数据');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type) {
                case '加载首页数据':
                    $scope.product=data.product;
                    break;
            }
        });
    }])
});
/*
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */
/*
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */
define('conttrollers/controllerNewhand',[
    'jweixin'
    , 'webappControllers'
    , 'jquery'
    , 'ngdialog'
    // , 'linearIndicator'
]
    , function (wx, controllers, $, ngdialog) {
        /*新手详情*/
        controllers.controller('controllerNewhand'
            , ['$scope', '$rootScope'
                , 'resourceService'
                , '$filter'
                , '$state'
                , '$stateParams'
                , '$localStorage'
                , function ($scope, $rootScope, resourceService, $filter, $state, $stateParams, $localStorage) {
                    $scope.wap = $stateParams.wap;
                    $scope.app = $stateParams.app;
                    if ($stateParams.pid) {
                        $scope.pid = $stateParams.pid;
                    }
                    function getUrlParam(name) {
                        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                        var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                        if (r != null) return unescape(r[2]); return null; //返回参数值
                    }
                    $filter('isPath')('newhand');
                    $('body').scrollTop(0);
                    $scope.toback = function () {
                        if (getUrlParam('from') == 'coupon') {
                            $state.go('myCoupon');
                        } else {
                            $filter('跳回上一页')(2);
                        }
                    };
                    $scope.gologin = function () {
                        $state.go('dl', { returnurl: 'newhand?pid=' + $scope.cp.id + "&wap=true" });
                    };
                    $rootScope.title = "新手体验";
                    var user = $filter('isRegister')();
                    $scope.mainbox = true;
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
                        switch (eObj.name) {
                            case 'newH':
                                $localStorage.cp = data.map;

                                $scope.cpObj = data.map;
                                $scope.cp = data.map.info;
                                if ($scope.cp.endDate != undefined) {
                                    var date3 = $scope.cp.endDate - Date.parse(new Date());
                                    var day = Math.floor(date3 / (24 * 3600 * 1000));
                                    var hh = Math.floor(date3 / (3600 * 1000));
                                    if (day > 0) {
                                        $scope.nowTimer = day + '天';
                                    } else
                                        if (day == 0 && hh > 1) {
                                            $scope.nowTimer = hh + '小时';
                                        } else
                                            if (day == 0 && hh < 1) {
                                                $scope.nowTimer = '1小时内'
                                            } else
                                                if (hh < 0) {
                                                    if ($scope.cp.status == 5) {
                                                        $scope.nowTimer = '无限制';
                                                    } else {
                                                        $scope.nowTimer = '已结束';
                                                    }
                                                }
                                } else {
                                    $scope.nowTimer = '已结束';
                                };
                                break;
                            case 'cpPicAndInvest':
                                $scope.cp = data.map.info;
                                break;
                        };
                    });

                    var obj = {};
                    obj.pid = $stateParams.pid;
                    if (user.register) {
                        obj.uid = user.user.member.uid;
                    }
                    resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), obj, { name: 'newH' });
                    
                    var browser = {
			            versions: function () {
			                var u = navigator.userAgent,
			                    app = navigator.appVersion;
			                return { //移动终端浏览器版本信息
			                    trident: u.indexOf('Trident') > -1, //IE内核
			                    presto: u.indexOf('Presto') > -1, //opera内核
			                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
			                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
			                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
			                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
			                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
			                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
			                    iPad: u.indexOf('iPad') > -1, //是否iPad
			                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
			                };
			            }(),
			            language: (navigator.browserLanguage || navigator.language).toLowerCase()
			        }
                    function isWeiXin() {
			            var ua = window.navigator.userAgent.toLowerCase();
			            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
			                return true;
			            } else {
			                return false;
			            }
			        }
                }
            ])

        /*产品详情*/
        controllers.controller('controllerCpDrtail'
            , ['$scope', '$rootScope'
                , 'resourceService'
                , '$filter'
                , '$state'
                , '$stateParams'
                , '$location'
                , '$localStorage'
                , function ($scope, $rootScope, resourceService, $filter, $state, $stateParams, $location, $localStorage) {
                    delete $localStorage.coupon;
                    $filter('isPath')('cpDetail');
                    $scope.protocol = $filter('protocolFilter')()
                    $scope.toback = function () {
                        if (getUrlParam('from') == 'coupon') {
                            $state.go('myCoupon');
                        }
                        else if (getUrlParam('from') == 'hongyarunyue') {
                            $state.go('hongyarunyue', { wap: true });
                        }
                        else if (getUrlParam('from') == 'hongyahongbaoyu') {
                            $state.go('hongyahongbaoyu', { wap: true });
                        }
                        else if (getUrlParam('from') == 'hongyaqixi') {
                            $state.go('hongyaqixi', { wap: true });
                        }
                        else if (getUrlParam('from') == 'hongyaFanA') {
                            $state.go('hongyaFanA', { wap: true });
                        }
                        else {
                            $filter('跳回上一页')(2);
                        }
                    };
                    function getUrlParam(name) {
                        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                        var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                        if (r != null) return unescape(r[2]); return null; //返回参数值
                    }
                    $scope.yuebiao = {};
                    $rootScope.title = "企融计划";
                    $scope.mainbox = true;
                    var user = $filter('isRegister')();
                    $scope.user = user;
                    $scope.active = 0;
                    $scope.isShowRule = false;
                    $scope.showBigImg = false;
                    var $win = $(window);
                    $("html,body").animate({ scrollTop: $("body").offset().top });
                    $win.on('load resize scroll', function () {
                        // $('.check-img-wrap').height($('body').height());
                        $('.check-img-wrap').height($win.height()).width($win.width());
                        $('.check-img-wrap img').css('max-height', $win.height()).css('max-width', $win.width());
                    });
                    $scope.showImg = function (event) {
                        $scope.bigImgSrc = $(event.currentTarget).attr('src');
                        $scope.showBigImg = true;
                    };
                    $scope.slideToggle = function (e) {
                        $(e.currentTarget).parent().siblings("p").stop().slideToggle(200);
                        if ($(e.currentTarget).hasClass('slideDown')) {
                            $(e.currentTarget).removeClass('slideDown')
                        } else { $(e.currentTarget).addClass('slideDown') }
                    };
                    $scope.closeRealverify = function () {
                        $scope.isRealverify = false;
                    };
                    $scope.gologin = function () {
                        $state.go('dl', { returnurl: 'cpDetail?pid=' + $scope.cp.id});
                    };
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
                        switch (eObj.name) {
                            case 'cpDetail':
                                data.map.specialRate = parseFloat(data.map.specialRate);
                                console.log(data.map.specialRate);
                                $localStorage.cp = data.map;
                                $scope.yuebiao.name = data.map.name;
                                $scope.yuebiao.isReservation = data.map.isReservation;
                                $scope.yuebiao.prid = data.map.prid;
                                $scope.yuebiao.realverify = data.map.realverify;
                                $scope.linkURL = data.map.linkURL;
                                $scope.appTitle = data.map.appTitle;
                                $scope.cp = data.map.info;
                                $scope.nowTime=data.map.nowTime
                                $rootScope.title = $scope.cp.fullName;
                                $scope.isInvested = data.map.isInvested;
                                $scope.newHandInvested = data.map.newHandInvested;
                                // 双蛋活动添加
                                $scope.doubleEggrule = data.map.doubleEggrule;
                                $scope.specialRate = parseFloat(data.map.specialRate);
                                $scope.isOldUser = data.map.isOldUser;
                                if ($scope.specialRate > 0) {
                                    $scope.isshuangdan = true;
                                }
                                else {
                                    $scope.isshuangdan = false;
                                }

                                if ($scope.cp.atid) { $rootScope.title = "投资送iPhone7"; }
                                $rootScope.cpInfo = data.map.repair;
                                $scope.extendInfos = data.map.extendInfos;
                                $scope.info = data.map.info;
                                if ($scope.cp.establish != undefined) {
                                    var date3 = $scope.cp.establish - Date.parse(new Date());
                                    var day = Math.floor(date3 / (24 * 3600 * 1000));
                                    var hh = Math.floor(date3 / (3600 * 1000));
                                    if (day > 0) {
                                        $scope.nowTimer = day + '天';
                                        // $scope.isFinish = true;
                                    } else
                                        if (day == 0 && hh > 1) {
                                            $scope.nowTimer = hh + '小时';
                                            // $scope.isFinish = true;
                                            $scope.isBuTimer = true;
                                        } else
                                            if (day == 0 && hh < 1) {
                                                $scope.nowTimer = '1小时内'
                                                // $scope.isFinish = true;
                                            } else
                                                if (hh < 0) {
                                                    if ($scope.cp.type == 1) {
                                                        $scope.nowTimer = '无限制';
                                                    } else {
                                                        $scope.nowTimer = '已结束';
                                                    }
                                                    $scope.isFinish = true;
                                                }
                                } else {
                                    $scope.nowTimer = '已结束';
                                    $scope.isFinish = true;
                                };

                                /*补标弹窗显示*/
                                if ($stateParams.isShowRule == undefined) {
                                    if ($scope.cpInfo != undefined && $scope.cp.isRepair == 1 && $scope.cp.surplusAmount > 0) {
                                        $rootScope.isShowRule = true;
                                    }
                                } else {
                                    $scope.isShowRule = false;
                                }
                                if ($stateParams.pid) {
                                    resourceService.queryPost($scope, $filter('getUrl')('cpPicAndInvest'), {
                                        pid: $stateParams.pid,
                                        type: $scope.cp.type
                                    }, { name: 'cpPicAndInvest' });
                                }
                                break;
                            case 'cpPicAndInvest':
                                $scope.picList = data.map.picList;
                                $scope.investList = data.map.investList;
                                break;
                            case '是否认证':
                                $scope.map = data.map;
                                break;
                            case '砸蛋':
                                if (data.success) {
                                    $scope.eggs.context.siblings('.chuizi').addClass('za');
                                    setTimeout(function () {
                                        $('.zjd').show();
                                        $('.zjd-box1').show();
                                        localStorage.sharezjd = false;
                                        $scope.$apply(function () {
                                            $scope.eggs.obj.isEgg = 2;
                                            $scope.eggs.obj.maxActivityCoupon = data.map.newActivityCoupon.raisedRates;
                                            $scope.iszadan = true;
                                            $scope.eggs.context.siblings('.chuizi').removeClass('za');
                                        })

                                    }, 1000);
                                    $scope.eggs.oldActivityCoupon = data.map.newActivityCoupon;
                                }
                                break;
                            case '第二次砸蛋':
                                if (data.success) {
                                    $scope.eggs.context.siblings('.chuizi').addClass('za');
                                    $scope.eggs.oldActivityCoupon = data.map.oldActivityCoupon;
                                    $scope.eggs.newActivityCoupon = data.map.newActivityCoupon;
                                    $scope.eggs.obj.maxActivityCoupon = data.map.newActivityCoupon.raisedRates;
                                    setTimeout(function () {
                                        $('.zjd-box4').show().siblings().hide();
                                        $scope.iszadan = true;
                                        $scope.eggs.context.siblings('.chuizi').removeClass('za');
                                    }, 1000);
                                }
                                break;
                        };
                    });

                    $scope.panel1 = {
                        isAction: 1
                    }
                    $scope.panel2 = {
                        isAction: 1
                    }
                    $scope.panel3 = {
                        isAction: 1
                    }
                    $scope.panel4 = {
                        isAction: 1
                    }
                    $scope.onClick = function (name) {
                        switch (name) {
                            case 'closeRule':
                                $scope.isShowRule = false;
                                break;
                        };
                    };
                    $scope.setAction = function (item) {
                        if (item.isAction == 1) {
                            item.isAction = 0;
                        } else {
                            item.isAction = 1;
                        }
                    };

                    $scope.goyuebiao = function () {
                        if ($scope.yuebiao.realverify) {
                            $state.go('yuebiao', { prid: $scope.yuebiao.prid, name: $scope.yuebiao.name, toState: $state.current.name, pid: $stateParams.pid });
                        } else {
                            $scope.isRealverify = true;
                        }
                    };
                    if ($stateParams.pid != null) {
                        var obj = {};
                        obj.pid = $stateParams.pid;
                        if (user.register) {
                            obj.uid = user.user.member.uid;
                            resourceService.queryPost($scope, $filter('getUrl')('我的信息'), {
                                uid: user.user.member.uid
                            }, { name: '是否认证' });
                        }
                        resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), obj, { name: 'cpDetail' });
                    } else {
                        $filter('跳回上一页')(1);
                    };
                    var uid;
                    if (user.user.member) { uid = user.user.member.uid; }
                    $scope.iszadan = true;
                    $scope.eggs = {};
                    $scope.zaEgg = function (e, item) {
                        e.stopPropagation();
                        $scope.eggs.id = item.id;
                        $scope.eggs.context = $(e.currentTarget);
                        if (item.isEgg == 1 && $scope.iszadan) {
                            $scope.iszadan = false;
                            $scope.eggs.obj = item;
                            resourceService.queryPost($scope, $filter('getUrl')('zadan'), { uid: uid, id: item.id }, { name: '砸蛋' });
                        }
                    };
                    $scope.share = function (e) {
                        $('.zjd-box2').show();
                        //setTimeout(function(){$('.zjd-box3').show().siblings().hide();localStorage.sharezjd=false;}, 5000);
                        //$('.zjd-box3').show().siblings().hide();
                    };
                    $scope.zajindan = function (e) {
                        $scope.eggs.context = $(e.currentTarget);
                        if ($scope.iszadan) {
                            resourceService.queryPost($scope, $filter('getUrl')('zadan'), { uid: uid, id: $scope.eggs.id }, { name: '第二次砸蛋' });
                        }
                    };
                    $scope.closethis = function (e) {
                        $(e.currentTarget).hide();
                    }
                    $scope.cancelza = function (e) {
                        e.stopPropagation();
                    };
                    $scope.closeEgg = function () {
                        $('.zjd').hide();
                        $('.zjd').children().hide();
                    };
                    $scope.clickTab = function (n) {
                        $scope.active = n;
                    };
                    var userphone = "";
                    if ($filter('isRegister')().user.member) { userphone = '&recommCode=' + $filter('isRegister')().user.member.mobilephone; }
                    localStorage.sharezjd = false;
                    wx.ready(function () {
                        wx.onMenuShareTimeline({
                            link: 'http://m.zhuomilicai.com/newcomer?wap=true&toFrom=zjdfxfx' + userphone, // 分享链接
                            imgUrl: 'http://m.zhuomilicai.com/images/activity/zjd/shareico.png', // 分享图标
                            success: function () {
                                alert('分享成功！');
                                if (localStorage.sharezjd) { $('.zjd-box3').show().siblings().hide(); localStorage.sharezjd = false; }
                            },
                            cancel: function () {
                                alert('您取消了分享！');
                            }
                        });
                        wx.onMenuShareAppMessage({
                            desc: '撸起袖子加油赚，想财富自由先来领第一桶金！', // 分享描述
                            link: 'http://m.zhuomilicai.com/newcomer?wap=true&toFrom=zjdfxfx' + userphone, // 分享链接
                            imgUrl: 'http://m.zhuomilicai.com/images/activity/zjd/shareico.png', // 分享图标
                            success: function () {
                                alert('分享成功！');
                                if (localStorage.sharezjd) { $('.zjd-box3').show().siblings().hide(); localStorage.sharezjd = false; }
                            },
                            cancel: function () {
                                alert('您取消了分享！');
                            }
                        });
                        wx.onMenuShareQQ({
                            desc: '撸起袖子加油赚，想财富自由先来领第一桶金！', // 分享描述
                            link: 'http://m.zhuomilicai.com/newcomer?wap=true&toFrom=zjdfxfx' + userphone, // 分享链接
                            imgUrl: 'http://m.zhuomilicai.com/images/activity/zjd/shareico.png', // 分享图标
                            success: function () {
                                alert('分享成功！');
                                if (localStorage.sharezjd) { $('.zjd-box3').show().siblings().hide(); localStorage.sharezjd = false; }
                            },
                            cancel: function () {
                                alert('您取消了分享！');
                            }
                        });
                        wx.onMenuShareWeibo({
                            desc: '撸起袖子加油赚，想财富自由先来领第一桶金！', // 分享描述
                            link: 'http://m.zhuomilicai.com/newcomer?wap=true&toFrom=zjdfxfx' + userphone, // 分享链接
                            imgUrl: 'http://m.zhuomilicai.com/images/activity/zjd/shareico.png', // 分享图标
                            success: function () {
                                alert('分享成功！');
                                if (localStorage.sharezjd) { $('.zjd-box3').show().siblings().hide(); localStorage.sharezjd = false; }
                            },
                            cancel: function () {
                                alert('您取消了分享！');
                            }
                        });
                        wx.onMenuShareQZone({
                            desc: '撸起袖子加油赚，想财富自由先来领第一桶金！', // 分享描述
                            link: 'http://m.zhuomilicai.com/newcomer?wap=true&toFrom=zjdfxfx' + userphone, // 分享链接
                            imgUrl: 'http://m.zhuomilicai.com/images/activity/zjd/shareico.png', // 分享图标
                            success: function () {
                                alert('分享成功！');
                                if (localStorage.sharezjd) { $('.zjd-box3').show().siblings().hide(); localStorage.sharezjd = false; }
                            },
                            cancel: function () {
                                alert('您取消了分享！');
                            }
                        });
                    })

                }
            ])
        .directive('newhand', function () {
                return {
                    restrict : 'EA',
                    replace : true,
                    transclude : true,
                    scope : {},
                    templateUrl:'template/newhand/newhandDetail.html',
                }
            });

    });
/*
 * jquery-asPieProgress
 * https://github.com/amazingSurge/jquery-asPieProgress
 *
 * Copyright (c) 2015 amazingSurge
 * Licensed under the GPL license.
 */
 
(function(factory) {
    "use strict";
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module depending on jQuery.
        define('asPieProgress',['jquery'], factory);
    } else {
        // No AMD. Register plugin with global jQuery object.
        factory(jQuery);
    }
}(function($) {
    "use strict";

    if (!Date.now) {
        Date.now = function() {
            return new Date().getTime();
        };
    }

    function getTime() {
        if (typeof window.performance !== 'undefined' && window.performance.now) {
            return window.performance.now();
        } else {
            return Date.now();
        }
    }

    var vendors = ['webkit', 'moz'];
    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {
        var vp = vendors[i];
        window.requestAnimationFrame = window[vp + 'RequestAnimationFrame'];
        window.cancelAnimationFrame = (window[vp + 'CancelAnimationFrame'] || window[vp + 'CancelRequestAnimationFrame']);
    }
    if (/iP(ad|hone|od).*OS (6|7)/.test(window.navigator.userAgent) // iOS6 is buggy
        || !window.requestAnimationFrame || !window.cancelAnimationFrame) {
        var lastTime = 0;
        window.requestAnimationFrame = function(callback) {
            var now = getTime();
            var nextTime = Math.max(lastTime + 16, now);
            return setTimeout(function() {
                    callback(lastTime = nextTime);
                },
                nextTime - now);
        };
        window.cancelAnimationFrame = clearTimeout;
    }
    var SvgElement = function(tag, attrs) {
        var elem = document.createElementNS("http://www.w3.org/2000/svg", tag);

        $.each(attrs, function(name, value) {
            elem.setAttribute(name, value);
        });

        return elem;
    }
    var svgSupported = "createElementNS" in document && new SvgElement("svg", {}).createSVGRect;

    function isPercentage(n) {
        return typeof n === 'string' && n.indexOf('%') != -1;
    }

    var pluginName = 'asPieProgress';

    var Plugin = $[pluginName] = function(element, options) {
        this.element = element;
        this.$element = $(element);

        this.options = $.extend({}, Plugin.defaults, options, this.$element.data());
        this.namespace = this.options.namespace;

        this.classes = this.options.classes;
        this.easing = Plugin.easing[this.options.easing] || Plugin.easing.ease;
        this.$element.addClass(this.classes.element);

        this.min = this.$element.attr('aria-valuemin');
        this.max = this.$element.attr('aria-valuemax');
        this.min = this.min ? parseInt(this.min, 10) : this.options.min;
        this.max = this.max ? parseInt(this.max, 10) : this.options.max;
        this.first = this.$element.attr('aria-valuenow');
        this.first = this.first ? parseInt(this.first, 10) : (this.options.first ? this.options.first : this.min);
        this.now = this.first;
        this.goal = this.options.goal;

        this._frameId = null;

        this.initialized = false;

        this._trigger('init');
        this.init();
    };

    Plugin.defaults = {
        namespace: 'asPieProgress',
        classes: {
            svg: 'pie_progress__svg',
            element: 'pie_progress',
            number: 'pie_progress__number',
            content: 'pie_progress__content'
        },
        min: 0,
        max: 100,
        goal: 100,
        size: 160,
        speed: 15, // speed of 1/100
        barcolor: '#ef1e25',
        barsize: '4',
        trackcolor: '#f2f2f2',
        fillcolor: 'none',
        easing: 'ease',
        numberCallback: function(n) {
            var percentage = Math.round(this.getPercentage(n));
            return percentage + '%';
        },
        contentCallback: null
    };

    var easingBezier = function(mX1, mY1, mX2, mY2) {
        function A(aA1, aA2) {
            return 1.0 - 3.0 * aA2 + 3.0 * aA1;
        }

        function B(aA1, aA2) {
            return 3.0 * aA2 - 6.0 * aA1;
        }

        function C(aA1) {
            return 3.0 * aA1;
        }

        // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.
        function CalcBezier(aT, aA1, aA2) {
            return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;
        }

        // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.
        function GetSlope(aT, aA1, aA2) {
            return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);
        }

        function GetTForX(aX) {
            // Newton raphson iteration
            var aGuessT = aX;
            for (var i = 0; i < 4; ++i) {
                var currentSlope = GetSlope(aGuessT, mX1, mX2);
                if (currentSlope === 0.0) return aGuessT;
                var currentX = CalcBezier(aGuessT, mX1, mX2) - aX;
                aGuessT -= currentX / currentSlope;
            }
            return aGuessT;
        }

        if (mX1 === mY1 && mX2 === mY2) {
            return {
                css: 'linear',
                fn: function(aX) {
                    return aX;
                }
            };
        } else {
            return {
                css: 'cubic-bezier(' + mX1 + ',' + mY1 + ',' + mX2 + ',' + mY2 + ')',
                fn: function(aX) {
                    return CalcBezier(GetTForX(aX), mY1, mY2);
                }
            }
        }
    };

    $.extend(Plugin.easing = {}, {
        "ease": easingBezier(0.25, 0.1, 0.25, 1.0),
        "linear": easingBezier(0.00, 0.0, 1.00, 1.0),
        "ease-in": easingBezier(0.42, 0.0, 1.00, 1.0),
        "ease-out": easingBezier(0.00, 0.0, 0.58, 1.0),
        "ease-in-out": easingBezier(0.42, 0.0, 0.58, 1.0)
    });

    Plugin.prototype = {
        constructor: Plugin,
        init: function() {
            this.$number = this.$element.find('.' + this.classes.number);
            this.$content = this.$element.find('.' + this.classes.content);

            this.size = this.options.size;
            this.width = this.size;
            this.height = this.size;

            this.prepare();

            this.initialized = true;
            this._trigger('ready');
        },
        prepare: function() {
            if (!svgSupported) {
                return;
            }

            this.svg = new SvgElement("svg", {
                "version": "1.1",
                "preserveAspectRatio": "xMinYMin meet",
                "viewBox": "0 0 " + this.width + " " + this.height
            });

            this.buildTrack();
            this.buildBar();

            $('<div class="' + this.classes.svg + '"></div>').append(this.svg).appendTo(this.$element);
        },
        buildTrack: function() {
            var width = this.size,
                height = this.size,
                cx = width / 2,
                cy = height / 2;

            var barsize = this.options.barsize;

            var ellipse = new SvgElement("ellipse", {
                rx: cx - barsize / 2,
                ry: cy - barsize / 2,
                cx: cx,
                cy: cy,
                stroke: this.options.trackcolor,
                fill: this.options.fillcolor,
                'stroke-width': barsize
            });

            this.svg.appendChild(ellipse);
        },
        buildBar: function() {
            if (!svgSupported) {
                return;
            }

            var path = new SvgElement("path", {
                fill: 'none',
                'stroke-width': this.options.barsize,
                stroke: this.options.barcolor
            });
            this.bar = path;
            this.svg.appendChild(path);

            this._drawBar(this.first);
            this._updateBar();
        },
        _drawBar: function(n) {
            if (!svgSupported) {
                return;
            }

            this.bar_goal = n;
            var width = this.size,
                height = this.size,
                cx = width / 2,
                cy = height / 2,
                start_angle = 0;

            var barsize = this.options.barsize;

            var r = Math.min(cx, cy) - barsize / 2;
            this.r = r;
            var percentage = this.getPercentage(n);

            if (percentage === 100) {
                percentage -= 0.0001;
            }
            var end_angle = start_angle + percentage * Math.PI * 2 / 100;

            var x1 = cx + r * Math.sin(start_angle),
                y1 = cy - r * Math.cos(start_angle),
                x2 = cx + r * Math.sin(end_angle),
                y2 = cy - r * Math.cos(end_angle);

            // This is a flag for angles larger than than a half circle
            // It is required by the SVG arc drawing component
            var big = 0;
            if (end_angle - start_angle > Math.PI) big = 1;

            // This string holds the path details
            var d = "M" + x1 + "," + y1 + // Start at (x1,y1)
                " A" + r + "," + r + // Draw an arc of radius r
                " 0 " + big + " 1 " + // Arc details...
                x2 + "," + y2;

            this.bar.setAttribute("d", d);
        },
        _updateBar: function() {
            if (!svgSupported) {
                return;
            }
            var percenage = this.getPercentage(this.now);

            var length = this.bar.getTotalLength();
            var offset = length * (1 - percenage / this.getPercentage(this.bar_goal));

            this.bar.style.strokeDasharray = length + " " + length;
            this.bar.style.strokeDashoffset = offset;
        },
        _trigger: function(eventType) {
            var method_arguments = Array.prototype.slice.call(arguments, 1),
                data = [this].concat(method_arguments);

            // event
            this.$element.trigger(pluginName + '::' + eventType, data);

            // callback
            eventType = eventType.replace(/\b\w+\b/g, function(word) {
                return word.substring(0, 1).toUpperCase() + word.substring(1);
            });
            var onFunction = 'on' + eventType;
            if (typeof this.options[onFunction] === 'function') {
                this.options[onFunction].apply(this, method_arguments);
            }
        },
        // Return the percentage based on the current step
        getPercentage: function(n) {
            return 100 * (n - this.min) / (this.max - this.min);
        },
        go: function(goal) {
            var self = this;
            this._clear();

            if (isPercentage(goal)) {
                goal = parseInt(goal.replace('%', ''), 10);
                goal = Math.round(this.min + (goal / 100) * (this.max - this.min));
            }
            if (typeof goal === 'undefined') {
                goal = this.goal;
            }

            if (goal > this.max) {
                goal = this.max;
            } else if (goal < this.min) {
                goal = this.min;
            }

            if (this.bar_goal < goal) {
                this._drawBar(goal);
            }

            var start = self.now;
            var startTime = getTime();
            var endTime = startTime + Math.abs(start - goal) * 100 * self.options.speed / (self.max - self.min);

            var animation = function(time) {
                var next;

                if (time > endTime) {
                    next = goal;
                } else {
                    var distance = (time - startTime) / self.options.speed;
                    next = Math.round(self.easing.fn(distance / 100) * (self.max - self.min));

                    if (goal > start) {
                        next = start + next;
                        if (next > goal) {
                            next = goal;
                        }
                    } else {
                        next = start - next;
                        if (next < goal) {
                            next = goal;
                        }
                    }
                }

                self._update(next);
                if (next === goal) {
                    window.cancelAnimationFrame(self._frameId);
                    self._frameId = null;

                    if (self.now === self.goal) {
                        self._trigger('finish');
                    }
                } else {
                    self._frameId = window.requestAnimationFrame(animation);
                }
            };

            self._frameId = window.requestAnimationFrame(animation);
        },
        _update: function(n) {
            this.now = n;

            this._updateBar();

            this.$element.attr('aria-valuenow', this.now);
            if (this.$number.length > 0 && typeof this.options.numberCallback === 'function') {
                this.$number.html(this.options.numberCallback.call(this, [this.now]));
            }
            if (this.$content.length > 0 && typeof this.options.contentCallback === 'function') {
                this.$content.html(this.options.contentCallback.call(this, [this.now]));
            }

            this._trigger('update', n);
        },
        _clear: function() {
            if (this._frameId) {
                window.cancelAnimationFrame(this._frameId);
                this._frameId = null;
            }
        },
        get: function() {
            return this.now;
        },
        start: function() {
            this._clear();
            this._trigger('start');
            this.go(this.goal);
        },
        reset: function() {
            this._clear();
            this._drawBar(this.first);
            this._update(this.first);
            this._trigger('reset');
        },
        stop: function() {
            this._clear();
            this._trigger('stop');
        },
        finish: function() {
            this._clear();
            this._update(this.goal);
            this._trigger('finish');
        },
        destory: function() {
            this.$element.data(pluginName, null);
            this._trigger('destory');
        }
    };

    $.fn[pluginName] = function(options) {
        if (typeof options === 'string') {
            var method = options;
            var method_arguments = Array.prototype.slice.call(arguments, 1);

            if (/^\_/.test(method)) {
                return false;
            } else if ((/^(get)$/.test(method))) {
                var api = this.first().data(pluginName);
                if (api && typeof api[method] === 'function') {
                    return api[method].apply(api, method_arguments);
                }
            } else {
                return this.each(function() {
                    var api = $.data(this, pluginName);
                    if (api && typeof api[method] === 'function') {
                        api[method].apply(api, method_arguments);
                    }
                });
            }
        } else {
            return this.each(function() {
                if (!$.data(this, pluginName)) {
                    $.data(this, pluginName, new Plugin(this, options));
                }
            });
        }
    };
}));

/*! lucky-card 1.0.0 https://github.com/Franslee/lucky-card 2016-03-17 */
!function(a,b,c){"use strict";function d(a,b){this.cover=null,this.ctx=null,this.scratchDiv=null,this.cardDiv=null,this.cHeight=0,this.cWidth=0,this.supportTouch=!1,this.events=[],this.startEventHandler=null,this.moveEventHandler=null,this.endEventHandler=null,this.opt={coverColor:"#C5C5C5",coverImg:"",ratio:.8,callback:null},this.init(a,b)}function e(a,b,c){var d=a.getImageData(0,0,300,100),e=[];f(d.data,function(a,b){var c=d.data[b+3];0===c&&e.push(c)}),e.length/d.data.length>c&&b&&"function"==typeof b&&b()}function f(a,b){return Array.prototype.forEach.call(a,function(a,c){b(a,c)})}function g(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}function h(a){this.moveEventHandler=i.bind(this),this.cover.addEventListener(this.events[1],this.moveEventHandler,!1),this.endEventHandler=j.bind(this),b.addEventListener(this.events[2],this.endEventHandler,!1),a.preventDefault()}function i(a){var c=this.supportTouch?a.touches[0]:a,d=this.cover.getBoundingClientRect(),e=b.documentElement.scrollTop||b.body.scrollTop,f=b.documentElement.scrollLeft||b.body.scrollLeft,g=c.pageX-d.left-f,h=c.pageY-d.top-e;this.ctx.beginPath(),this.ctx.fillStyle="#FFFFFF",this.ctx.globalCompositeOperation="destination-out",this.ctx.arc(g,h,10,0,2*Math.PI),this.ctx.fill(),a.preventDefault()}function j(a){this.opt.callback&&"function"==typeof this.opt.callback&&e(this.ctx,this.opt.callback,this.opt.ratio),this.cover.removeEventListener(this.events[1],this.moveEventHandler,!1),b.removeEventListener(this.events[2],this.endEventHandler,!1),a.preventDefault()}d.prototype.createCanvas=function(){if(this.cover=b.createElement("canvas"),this.cover.id="cover",this.cover.height=this.cHeight,this.cover.width=this.cWidth,this.ctx=this.cover.getContext("2d"),this.opt.coverImg){var a=this,c=new Image;c.src=this.opt.coverImg,c.onload=function(){a.ctx.drawImage(c,0,0,a.cover.width,a.cover.height)}}else this.ctx.fillStyle=this.opt.coverColor,this.ctx.fillRect(0,0,this.cover.width,this.cover.height);this.scratchDiv.appendChild(this.cover)},d.prototype.eventDetect=function(){"ontouchstart"in a&&(this.supportTouch=!0),this.events=this.supportTouch?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],this.addEvent()},d.prototype.addEvent=function(){this.startEventHandler=h.bind(this),this.cover.addEventListener(this.events[0],this.startEventHandler,!1)},d.prototype.clearCover=function(){this.ctx.clearRect(0,0,this.cover.width,this.cover.height)},d.prototype.init=function(a,c){if(!g())return void alert("对不起，当前浏览器不支持Canvas，无法使用本控件！");var d=this;f(arguments,function(a){if("object"==typeof a)for(var b in a)"callback"===b&&"function"==typeof a[b]?d.opt.callback=a[b].bind(d):b in d.opt&&(d.opt[b]=a[b]);else"function"==typeof a&&(d.opt.callback=a.bind(d))}),this.scratchDiv=b.getElementById("scratch"),this.cardDiv=b.getElementById("card"),this.scratchDiv&&this.cardDiv&&(this.cHeight=this.cardDiv.clientHeight,this.cWidth=this.cardDiv.clientWidth,this.createCanvas(),this.eventDetect())},d["case"]=function(a,b){return new d(a,b)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define('gagaka',[],function(){return d}):"undefined"!=typeof module&&module.exports?(module.exports=d["case"],module.exports.LuckyCard=d):a.LuckyCard=d}(window,document);

/*
    radialIndicator.js v 1.0.0
    Author: Sudhanshu Yadav
    Copyright (c) 2015 Sudhanshu Yadav - ignitersworld.com , released under the MIT license.
    Demo on: ignitersworld.com/lab/radialIndicator.html
*/

;(function ($, window, document) {
    "use strict";
    //circumfence and quart value to start bar from top
    var circ = Math.PI * 2,
        quart = Math.PI / 2;

    //function to convert hex to rgb

    function hexToRgb(hex) {
        // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
        var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, function (m, r, g, b) {
            return r + r + g + g + b + b;
        });

        var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : null;
    }

    function getPropVal(curShift, perShift, bottomRange, topRange) {
        return Math.round(bottomRange + ((topRange - bottomRange) * curShift / perShift));
    }


    //function to get current color in case of 
    function getCurrentColor(curPer, bottomVal, topVal, bottomColor, topColor) {
        var rgbAryTop = topColor.indexOf('#') != -1 ? hexToRgb(topColor) : topColor.match(/\d+/g),
            rgbAryBottom = bottomColor.indexOf('#') != -1 ? hexToRgb(bottomColor) : bottomColor.match(/\d+/g),
            perShift = topVal - bottomVal,
            curShift = curPer - bottomVal;

        if (!rgbAryTop || !rgbAryBottom) return null;

        return 'rgb(' + getPropVal(curShift, perShift, rgbAryBottom[0], rgbAryTop[0]) + ',' + getPropVal(curShift, perShift, rgbAryBottom[1], rgbAryTop[1]) + ',' + getPropVal(curShift, perShift, rgbAryBottom[2], rgbAryTop[2]) + ')';
    }

    //to merge object
    function merge() {
        var arg = arguments,
            target = arg[0];
        for (var i = 1, ln = arg.length; i < ln; i++) {
            var obj = arg[i];
            for (var k in obj) {
                if (obj.hasOwnProperty(k)) {
                    target[k] = obj[k];
                }
            }
        }
        return target;
    }

    //function to apply formatting on number depending on parameter
    function formatter(pattern) {
        return function (num) {
            if(!pattern) return num.toString();
            num = num || 0
            var numRev = num.toString().split('').reverse(),
                output = pattern.split("").reverse(),
                i = 0,
                lastHashReplaced = 0;

            //changes hash with numbers
            for (var ln = output.length; i < ln; i++) {
                if (!numRev.length) break;
                if (output[i] == "#") {
                    lastHashReplaced = i;
                    output[i] = numRev.shift();
                }
            }

            //add overflowing numbers before prefix
            output.splice(lastHashReplaced+1, output.lastIndexOf('#') - lastHashReplaced, numRev.reverse().join(""));

            return output.reverse().join('');
        }
    }


    //circle bar class
    function Indicator(container, indOption) {
        indOption = indOption || {};
        indOption = merge({}, radialIndicator.defaults, indOption);

        this.indOption = indOption;

        //create a queryselector if a selector string is passed in container
        if (typeof container == "string")
            container = document.querySelector(container);

        //get the first element if container is a node list
        if (container.length)
            container = container[0];

        this.container = container;

        //create a canvas element
        var canElm = document.createElement("canvas");
        container.appendChild(canElm);

        this.canElm = canElm; // dom object where drawing will happen

        this.ctx = canElm.getContext('2d'); //get 2d canvas context

        //add intial value 
        this.current_value = indOption.initValue || indOption.minValue || 0;

    }


    Indicator.prototype = {
        constructor: radialIndicator,
        init: function () {
            var indOption = this.indOption,
                canElm = this.canElm,
                ctx = this.ctx,
                dim = (indOption.radius + indOption.barWidth) * 2, //elm width and height
                center = dim / 2; //center point in both x and y axis


            //create a formatter function
            this.formatter = typeof indOption.format == "function" ? indOption.format : formatter(indOption.format);

            //maximum text length;
            this.maxLength = indOption.percentage ? 4 : this.formatter(indOption.maxValue).length;

            canElm.width = dim;
            canElm.height = dim;

            //draw a grey circle
            ctx.strokeStyle = indOption.barBgColor; //background circle color
            ctx.lineWidth = indOption.barWidth;
            ctx.beginPath();
            ctx.arc(center, center, indOption.radius, 0, 2 * Math.PI);
            ctx.stroke();

            //store the image data after grey circle draw
            this.imgData = ctx.getImageData(0, 0, dim, dim);

            //put the initial value if defined
            this.value(this.current_value);

            return this;
        },
        //update the value of indicator without animation
        value: function (val) {
            //return the val if val is not provided
            if (val === undefined || isNaN(val)) {
                return this.current_value;
            }

            val = parseInt(val);
            
            var ctx = this.ctx,
                indOption = this.indOption,
                curColor = indOption.barColor,
                dim = (indOption.radius + indOption.barWidth) * 2,
                minVal = indOption.minValue,
                maxVal = indOption.maxValue,
                center = dim / 2;

            //limit the val in range of 0 to 100
            val = val < minVal ? minVal : val > maxVal ? maxVal : val;

            var perVal = Math.round(((val - minVal) * 100 / (maxVal - minVal)) * 100) / 100, //percentage value tp two decimal precision
                dispVal = indOption.percentage ? perVal + '%' : this.formatter(val); //formatted value

            //save val on object
            this.current_value = val;


            //draw the bg circle
            ctx.putImageData(this.imgData, 0, 0);

            //get current color if color range is set
            if (typeof curColor == "object") {
                var range = Object.keys(curColor);

                for (var i = 1, ln = range.length; i < ln; i++) {
                    var bottomVal = range[i - 1],
                        topVal = range[i],
                        bottomColor = curColor[bottomVal],
                        topColor = curColor[topVal],
                        newColor = val == bottomVal ? bottomColor : val == topVal ? topColor : val > bottomVal && val < topVal ? indOption.interpolate ? getCurrentColor(val, bottomVal, topVal, bottomColor, topColor) : topColor : false;

                    if (newColor != false) {
                        curColor = newColor;
                        break;
                    }
                }
            }

            //draw th circle value
            ctx.strokeStyle = curColor;

            //add linecap if value setted on options
            if (indOption.roundCorner) ctx.lineCap = "round";

            ctx.beginPath();
            ctx.arc(center, center, indOption.radius, -(quart), ((circ) * perVal / 100) - quart, false);
            ctx.stroke();

            //add percentage text
            if (indOption.displayNumber) {
                var cFont = ctx.font.split(' '),
                    weight = indOption.fontWeight,
                    fontSize = indOption.fontSize || (dim / (this.maxLength - (Math.floor(this.maxLength*1.4/4)-1)));

                cFont = indOption.fontFamily || cFont[cFont.length - 1];


                ctx.fillStyle = indOption.fontColor || curColor;
                ctx.font = weight +" "+ fontSize + "px " + cFont;
                ctx.textAlign = "center";
                ctx.textBaseline = 'middle';
                ctx.fillText(dispVal, center, center);
            }

            return this;
        },
        //animate progressbar to the value
        animate: function (val) {

            var indOption = this.indOption,
                counter = this.current_value || indOption.minValue,
                self = this,
                incBy = Math.ceil((indOption.maxValue - indOption.minValue) / (indOption.frameNum || (indOption.percentage ? 100 : 500))), //increment by .2% on every tick and 1% if showing as percentage
                back = val < counter;

            //clear interval function if already started
            if (this.intvFunc) clearInterval(this.intvFunc); 

            this.intvFunc = setInterval(function () {

                if ((!back && counter >= val) || (back && counter <= val)) {
                    if (self.current_value == counter) {
                        clearInterval(self.intvFunc);
                        return;
                    } else {
                        counter = val;
                    }
                }

                self.value(counter); //dispaly the value

                if (counter != val) {
                    counter = counter + (back ? -incBy : incBy)
                }; //increment or decrement till counter does not reach  to value
            }, indOption.frameTime);

            return this;
        },
        //method to update options
        option: function (key, val) {
            if (val === undefined) return this.option[key];

            if (['radius', 'barWidth', 'barBgColor', 'format', 'maxValue', 'percentage'].indexOf(key) != -1) {
                this.indOption[key] = val;
                this.init().value(this.current_value);
            }
            this.indOption[key] = val;
        }

    };

    /** Initializer function **/
    function radialIndicator(container, options) {
        var progObj = new Indicator(container, options);
        progObj.init();
        return progObj;
    }

    //radial indicator defaults
    radialIndicator.defaults = {
        radius: 50, //inner radius of indicator
        barWidth: 5, //bar width
        barBgColor: '#eeeeee', //unfilled bar color
        barColor: '#99CC33', //filled bar color , can be a range also having different colors on different value like {0 : "#ccc", 50 : '#333', 100: '#000'}
        format: null, //format indicator numbers, can be a # formator ex (##,###.##) or a function
        frameTime: 10, //miliseconds to move from one frame to another
        frameNum: null, //Defines numbers of frame in indicator, defaults to 100 when showing percentage and 500 for other values
        fontColor: null, //font color
        fontFamily: null, //defines font family
        fontWeight: 'bold', //defines font weight
        fontSize : null, //define the font size of indicator number
        interpolate: true, //interpolate color between ranges
        percentage: false, //show percentage of value
        displayNumber: true, //display indicator number
        roundCorner: false, //have round corner in filled bar
        minValue: 0, //minimum value
        maxValue: 100, //maximum value
        initValue: 0 //define initial value of indicator
    };
    
    window.radialIndicator = radialIndicator;

    //add as a jquery plugin
    if ($) {
        $.fn.radialIndicator = function (options) {
            return this.each(function () {
                var newPCObj = radialIndicator(this, options);
                $.data(this, 'radialIndicator', newPCObj);
            });
        };
    }

}(window.jQuery, window, document, void 0));
define("radialIndicator", function(){});

/*
    linearIndicator.js v 1.0.0
    Author: Sudhanshu Yadav
    Copyright (c) 2015 Sudhanshu Yadav - ignitersworld.com , released under the MIT license.
    Demo on: ignitersworld.com/lab/linearIndicator.html
*/

;(function ($, window, document) {
    "use strict";
    //circumfence and quart value to start bar from top
    var circ = Math.PI * 2,
        quart = Math.PI / 2;

    //function to convert hex to rgb

    function hexToRgb(hex) {
        // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
        var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, function (m, r, g, b) {
            return r + r + g + g + b + b;
        });

        var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : null;
    }

    function getPropVal(curShift, perShift, bottomRange, topRange) {
        return Math.round(bottomRange + ((topRange - bottomRange) * curShift / perShift));
    }


    //function to get current color in case of 
    function getCurrentColor(curPer, bottomVal, topVal, bottomColor, topColor) {
        var rgbAryTop = topColor.indexOf('#') != -1 ? hexToRgb(topColor) : topColor.match(/\d+/g),
            rgbAryBottom = bottomColor.indexOf('#') != -1 ? hexToRgb(bottomColor) : bottomColor.match(/\d+/g),
            perShift = topVal - bottomVal,
            curShift = curPer - bottomVal;

        if (!rgbAryTop || !rgbAryBottom) return null;

        return 'rgb(' + getPropVal(curShift, perShift, rgbAryBottom[0], rgbAryTop[0]) + ',' + getPropVal(curShift, perShift, rgbAryBottom[1], rgbAryTop[1]) + ',' + getPropVal(curShift, perShift, rgbAryBottom[2], rgbAryTop[2]) + ')';
    }

    //to merge object
    function merge() {
        var arg = arguments,
            target = arg[0];
        for (var i = 1, ln = arg.length; i < ln; i++) {
            var obj = arg[i];
            for (var k in obj) {
                if (obj.hasOwnProperty(k)) {
                    target[k] = obj[k];
                }
            }
        }
        return target;
    }

    //function to apply formatting on number depending on parameter
    function formatter(pattern) {
        return function (num) {
            if(!pattern) return num.toString();
            num = num || 0
            var numRev = num.toString().split('').reverse(),
                output = pattern.split("").reverse(),
                i = 0,
                lastHashReplaced = 0;

            //changes hash with numbers
            for (var ln = output.length; i < ln; i++) {
                if (!numRev.length) break;
                if (output[i] == "#") {
                    lastHashReplaced = i;
                    output[i] = numRev.shift();
                }
            }

            //add overflowing numbers before prefix
            output.splice(lastHashReplaced+1, output.lastIndexOf('#') - lastHashReplaced, numRev.reverse().join(""));

            return output.reverse().join('');
        }
    }


    //circle bar class
    function Indicator(container, indOption) {
        indOption = indOption || {};
        indOption = merge({}, linearIndicator.defaults, indOption);

        this.indOption = indOption;

        //create a queryselector if a selector string is passed in container
        if (typeof container == "string")
            container = document.querySelector(container);

        //get the first element if container is a node list
        if (container.length)
            container = container[0];

        this.container = container;

        //create a canvas element
        var canElm = document.createElement("canvas");
        container.appendChild(canElm);

        this.canElm = canElm; // dom object where drawing will happen

        this.ctx = canElm.getContext('2d'); //get 2d canvas context

        //add intial value 
        this.current_value = indOption.initValue || indOption.minValue || 0;

    }


    Indicator.prototype = {
        constructor: linearIndicator,
        init: function () {
            var indOption = this.indOption,
                canElm = this.canElm,
                ctx = this.ctx;


            var dpr = window.devicePixelRatio || 1;
            var bsr = ctx.webkitBackingStorePixelRatio || 
                      ctx.mozBackingStorePixelRatio || 
                      ctx.msBackingStorePixelRatio || 
                      ctx.oBackingStorePixelRatio || 
                      ctx.backingStorePixelRatio || 1; 
            // canvas的实际渲染倍率 
            var ratio = dpr / bsr;


            indOption.ratio = ratio;
            indOption.barWidth = indOption.barWidth * ratio;
            indOption.fontSize = indOption.fontSize * ratio;
            indOption.width = indOption.width * ratio;

            var dim = (indOption.radius + indOption.barWidth) * 2, //elm width and height
                center = dim / 2, //center point in both x and y axis
                width = indOption.width - indOption.barWidth * 12,
                dx = indOption.barWidth * 6,
                dy = indOption.barWidth * 2 +　indOption.fontSize * 1.5;

            //create a formatter function
            this.formatter = typeof indOption.format == "function" ? indOption.format : formatter(indOption.format);

            //maximum text length;
            this.maxLength = indOption.percentage ? 4 : this.formatter(indOption.maxValue).length;

            canElm.width = indOption.width;
            canElm.height = indOption.barWidth * 4 + indOption.fontSize * 1.5;

            canElm.style.width = canElm.width / indOption.ratio + 'px';
            canElm.style.height = canElm.height / indOption.ratio + 'px';

            //draw a grey circle
            ctx.translate(dx, dy);
            ctx.strokeStyle = indOption.barBgColor; //background circle color
            ctx.lineWidth = indOption.barWidth;
            ctx.beginPath();
            // ctx.arc(center, center, indOption.radius, 0, 2 * Math.PI);
            ctx.moveTo(0, 0);
            ctx.lineTo(width, 0);
            ctx.stroke();
            ctx.translate(-dx,-dy);


            //store the image data after grey circle draw
            this.imgData = ctx.getImageData(0, 0, canElm.width, canElm.height);

            //put the initial value if defined
            this.value(this.current_value);
            return this;
        },
        //update the value of indicator without animation
        value: function (val) {
            //return the val if val is not provided
            if (val === undefined || isNaN(val)) {
                return this.current_value;
            }

            val = parseInt(val);
            
            var ctx = this.ctx,
                indOption = this.indOption,
                curColor = indOption.barColor,
                dim = (indOption.radius + indOption.barWidth) * 2,
                minVal = indOption.minValue,
                maxVal = indOption.maxValue,
                center = dim / 2,
                width = indOption.width - indOption.barWidth * 12,
                dx = indOption.barWidth * 6,
                dy = indOption.barWidth * 2 +　indOption.fontSize * 1.5;

            //limit the val in range of 0 to 100
            val = val < minVal ? minVal : val > maxVal ? maxVal : val;

            var perVal = Math.round(((val - minVal) * 100 / (maxVal - minVal)) * 100) / 100, //percentage value tp two decimal precision
                dispVal = indOption.percentage ? perVal + '%' : this.formatter(val); //formatted value

            //save val on object
            this.current_value = val;


            //draw the bg circle
            ctx.putImageData(this.imgData, 0, 0);

            //get current color if color range is set
            if (typeof curColor == "object") {
                var range = Object.keys(curColor);

                for (var i = 1, ln = range.length; i < ln; i++) {
                    var bottomVal = range[i - 1],
                        topVal = range[i],
                        bottomColor = curColor[bottomVal],
                        topColor = curColor[topVal],
                        newColor = val == bottomVal ? bottomColor : val == topVal ? topColor : val > bottomVal && val < topVal ? indOption.interpolate ? getCurrentColor(val, bottomVal, topVal, bottomColor, topColor) : topColor : false;

                    if (newColor != false) {
                        curColor = newColor;
                        break;
                    }
                }
            }

            ctx.translate(dx,dy);

            var linearStyle = ctx.createLinearGradient(0, 0, ((width) * perVal / 100), 0);
            linearStyle.addColorStop(0, indOption.startColor);
            linearStyle.addColorStop(1, indOption.endColor);

            //draw th circle value
            ctx.strokeStyle = linearStyle;

            //add linecap if value setted on options
            if (indOption.roundCorner) ctx.lineCap = "round";

            ctx.beginPath();
            // ctx.arc(center, center, indOption.radius, -(quart), ((circ) * perVal / 100) - quart, false);
            ctx.moveTo(0, 0);
            ctx.lineTo(((width) * perVal / 100), 0);
            ctx.stroke();


            ctx.fillStyle = indOption.endColor;
            ctx.beginPath();
            ctx.arc(((width) * perVal / 100), 0, indOption.barWidth * 1.5, 0, Math.PI*2 ,true);
            ctx.closePath();
            ctx.fill();



            //add percentage text
            if (indOption.displayNumber) {
                var cFont = ctx.font.split(' '),
                    weight = indOption.fontWeight,
                    fontSize = indOption.fontSize || (dim / (this.maxLength - (Math.floor(this.maxLength*1.4/4)-1)));

                cFont = indOption.fontFamily || cFont[cFont.length - 1];


                ctx.fillStyle = indOption.fontColor || indOption.endColor;
                ctx.font = weight +" "+ fontSize + "px " + cFont;
                ctx.textAlign = "center";
                ctx.textBaseline = 'top';
                ctx.fillText(dispVal, ((width) * perVal / 100), -dy);
            }
            ctx.translate(-dx,-dy);

            return this;
        },
        //animate progressbar to the value
        animate: function (val) {

            var indOption = this.indOption,
                counter = this.current_value || indOption.minValue,
                self = this,
                incBy = Math.ceil((indOption.maxValue - indOption.minValue) / (indOption.frameNum || (indOption.percentage ? 100 : 500))), //increment by .2% on every tick and 1% if showing as percentage
                back = val < counter;

            //clear interval function if already started
            if (this.intvFunc) clearInterval(this.intvFunc); 

            this.intvFunc = setInterval(function () {
                if ((!back && counter >= val) || (back && counter <= val)) {
                    if (self.current_value == parseInt(counter)) {
                        clearInterval(self.intvFunc);
                        return;
                    } else {
                        counter = val;
                    }
                }

                self.value(counter); //dispaly the value

                if (counter != val) {
                    counter = counter + (back ? -incBy : incBy)
                }; //increment or decrement till counter does not reach  to value
            }, indOption.frameTime);

            return this;
        },
        //method to update options
        option: function (key, val) {
            if (val === undefined) return this.option[key];

            if (['radius', 'barWidth', 'barBgColor', 'format', 'maxValue', 'percentage'].indexOf(key) != -1) {
                this.indOption[key] = val;
                this.init().value(this.current_value);
            }
            this.indOption[key] = val;
        }

    };

    /** Initializer function **/
    function linearIndicator(container, options) {
        var progObj = new Indicator(container, options);
        progObj.init();
        return progObj;
    }

    //radial indicator defaults
    linearIndicator.defaults = {
        width: 160,
        startColor: '#CCCCCC',
        endColor: '#CCCCCC',
        radius: 50, //inner radius of indicator
        barWidth: 3, //bar width
        barBgColor: '#eeeeee', //unfilled bar color
        barColor: '#99CC33', //filled bar color , can be a range also having different colors on different value like {0 : "#ccc", 50 : '#333', 100: '#000'}
        format: null, //format indicator numbers, can be a # formator ex (##,###.##) or a function
        frameTime: 10, //miliseconds to move from one frame to another
        frameNum: null, //Defines numbers of frame in indicator, defaults to 100 when showing percentage and 500 for other values
        fontColor: null, //font color
        fontFamily: null, //defines font family
        fontWeight: 'bold', //defines font weight
        fontSize : 12, //define the font size of indicator number
        interpolate: true, //interpolate color between ranges
        percentage: false, //show percentage of value
        displayNumber: true, //display indicator number
        roundCorner: false, //have round corner in filled bar
        minValue: 0, //minimum value
        maxValue: 100, //maximum value
        initValue: 0 //define initial value of indicator
    };
    
    window.linearIndicator = linearIndicator;

    //add as a jquery plugin
    if ($) {
        $.fn.linearIndicator = function (options) {
            return this.each(function () {
                var newPCObj = linearIndicator(this, options);
                $.data(this, 'linearIndicator', newPCObj);
            });
        };
    }

}(window.jQuery, window, document, void 0));
define("linearIndicator", function(){});

define('conttrollers/controllerCpList',['jweixin', 'webappControllers', 'ngdialog', 'asPieProgress', 'gagaka', 'radialIndicator', 'linearIndicator'], function (wx, controllers, ngdialog, k, LuckyCard) {
    controllers.controller('controllerCpList', function ($scope, $rootScope, resourceService, $filter, $state, $localStorage, $anchorScroll, isWeixin, $timeout) {
        $rootScope.title = "我要投资";
        $scope.title = '理财'
        delete $localStorage.coupon;
        $filter('isPath')('main.bankBillList');
        $scope.isLogin = $filter('isRegister')().register;
        if ($scope.isLogin) {
            $scope.user = $filter('isRegister')().user.member;
            $scope.realInfo = $scope.user.realVerify == '1' ? $scope.user.realName : $scope.user.mobilephone;
        }
        resourceService.queryPost($scope, $filter('getUrl')('cplist'), { status: 5, pageSize: 30 }, { name: '产品列表' });
        resourceService.queryPost($scope, $filter('getUrl')('raisedAndRepayedNum'), {}, { name: 'raisedAndRepayedNum' });
        var obj = {};
        if ($scope.user) { obj.uid = $scope.user.uid; }
        resourceService.queryPost($scope, $filter('getUrl')('shouYe'), obj, { name: 'index' });

        // $scope.loadMore = function (item) {
        //     if (item.id == $scope.cpList[$scope.cpList.length - 1].id) {
        //         if (isLoad) {
        //             if (pageOn != $scope.page.pageOn) {
        //                 var obj = {
        //                     pageOn: pageOn,
        //                     pageSize: 10
        //                 };
        //                 obj.status = 5;
        //                 resourceService.queryPost($scope, $filter('getUrl')('cplist'), obj, { name: '产品列表' });
        //                 isLoad = false;
        //             }
        //         };
        //     };
        // };
        // var objuser = {};
        // if ($scope.user) { objuser.uid = $scope.user.uid; }
        // resourceService.queryPost($scope, $filter('getUrl')('shouYe'), objuser, { name: 'index' });
        // $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
        //     switch (eObj.name) {
        //         case 'index':
        //             $scope.newHand = data.map.newHand;
        //             $scope.newHandInvested = data.map.newHandInvested;
        //             break;
        //     };
        // });

        // 投即送添加判断是投即送标还是其他
        // $scope.todetail = function (cp) {
        //     if (!cp.prizeId) {
        //         $state.go('cpDetail', { pid: cp.id });
        //     }
        //     else {
        //         $state.go('tjsdetail', { pid: cp.id, wap: true });
        //     }
        // }

        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
            switch (eObj.name) {
                case '产品列表':
                    $scope.cp = data.map;
                    $scope.activityProduct = data.map.activityProduct;
                    $scope.cpList = data.map.page.rows;
                    if (data.map.jhsFlag == true) {
                        $scope.jhsList = data.map.pageJHS.rows;
                    }
                    // $scope.page = data.map.page;
                    // if (pageOn == $scope.page.pageOn) {
                    //     isLoad = true;
                    // }
                    // if (data.map.page.pageOn <= data.map.page.totalPage) {
                    //     pageOn = $scope.page.pageOn + 1;
                    //     for (var i = 0; i < data.map.page.rows.length; i++) {
                    //         $scope.cpList.push(data.map.page.rows[i]);
                    //     }
                    // } else {
                    //     isLoad = false;
                    // }
                    break;
                case '砸蛋':
                    if (data.success) {
                        $scope.eggs.context.siblings('.chuizi').addClass('za');
                        setTimeout(function () {
                            $('.zjd').show();
                            $('.zjd-box1').show();
                            localStorage.sharezjd = true;
                            $scope.$apply(function () {
                                $scope.eggs.obj.isEgg = 2;
                                $scope.eggs.obj.maxActivityCoupon = data.map.newActivityCoupon.raisedRates;
                                $scope.iszadan = true;
                                $scope.eggs.context.siblings('.chuizi').removeClass('za');
                            })

                        }, 1000);
                        $scope.eggs.oldActivityCoupon = data.map.newActivityCoupon;
                    }
                    break;
                case '第二次砸蛋':
                    if (data.success) {
                        $scope.eggs.context.siblings('.chuizi').addClass('za');
                        $scope.eggs.oldActivityCoupon = data.map.oldActivityCoupon;
                        $scope.eggs.newActivityCoupon = data.map.newActivityCoupon;
                        setTimeout(function () {
                            $('.zjd-box4').show().siblings().hide();
                            $scope.iszadan = true;
                            $scope.eggs.context.siblings('.chuizi').removeClass('za');
                        }, 1000);
                    }
                    break;
                case 'goinvestment':
                    if (data.success) {
                        $localStorage.cp = data.map;
                        $state.go('investment');
                    }
                    break;
                case 'index':
                    $scope.index = data.map;
                    $scope.newHandShow = !(data.map.isInvested || data.map.newHandInvested);
                    $scope.newHandList = data.map.newHandList
                    $scope.haveNewHandList = data.map.newHandList.length > 0 ? true : false
                    break;
                case 'raisedAndRepayedNum':
                    if (data.success) {
                        $scope.raisedNum = data.map.raisedNum;
                        $scope.repayedNum = data.map.repayedNum;
                    }
                    break;
                case 'weekendPopup':
                    var redbag = 0;
                    if (data.map.totalAmount >= 100000) {
                        redbag = 998;
                    } else if (data.map.totalAmount >= 50000) {
                        redbag = 448;
                    } else if (data.map.totalAmount >= 30000) {
                        redbag = 288;
                    } else if (data.map.totalAmount >= 10000) {
                        redbag = 88;
                    }
                    if (redbag > 0) {
                        $scope.dialogObj = {
                            className: 'august-hongbao',
                            href: 'main.bankBillList',
                            redbag: redbag
                        }
                        $scope.showActivityDialog = true;
                    } else {
                        $localStorage.showActivityRedbagDialog = true;
                        if ($localStorage.showActivityDialog == undefined || !sameDay) {
                            $scope.dialogObj = {
                                className: 'august',
                                href: 'extend.hongyaAugust'
                            }
                            $scope.showActivityDialog = true;
                        }
                    }
                    break;
            };
        });
        $scope.radius = $('.rem-rule').width();
        // old
        $scope.showList = function (type) {
            if ($scope.type != type) {
                $scope.type = type;
                $scope.cpList = [];
                objs.type = $scope.type;
                resourceService.queryPost($scope, $filter('getUrl')('cplist'), objs, { name: '产品列表' });
            }
        }
        $scope.zaEgg = function (e, item) {
            e.stopPropagation();
            $scope.eggs.id = item.id;
            $scope.eggs.context = $(e.currentTarget);
            if (item.isEgg == 1 && $scope.iszadan) {
                $scope.iszadan = false;
                $scope.eggs.obj = item;
                resourceService.queryPost($scope, $filter('getUrl')('zadan'), { uid: uid, id: item.id }, { name: '砸蛋' });
            } else if (item.isEgg != 1) {
                $state.go('cpDetail', { pid: item.id });
            }
        };
        $scope.share = function (e) {
            if (isWeixin()) {
                $('.zjd-box2').show();
            } else {
                $('.zjd-boxpc').show().siblings().hide();
                $scope.width = $('.zjd-boxpc').find('.erweima').children().width() - 20;
                $('.zjd-boxpc').find('canvas').css({ left: 10, bottom: 10 });
                $scope.finishsaoma = true;
                $timeout(function () { $scope.finishsaoma = false; }, 5000);
            }
        };
        $scope.finishshare = function () {
            $('.zjd-box3').show().siblings().hide(); localStorage.sharezjd = false;
        }
        $scope.zajindan = function (e) {
            $scope.eggs.context = $(e.currentTarget);
            if ($scope.iszadan) {
                resourceService.queryPost($scope, $filter('getUrl')('zadan'), { uid: uid, id: $scope.eggs.id }, { name: '第二次砸蛋' });
            }
        };
        $scope.closethis = function (e) {
            $(e.currentTarget).hide();
        }
        $scope.goinvestment = function () {
            var obj = {};
            obj.pid = $scope.eggs.id;
            resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), obj, { name: 'goinvestment' });
        }
        $scope.cancelza = function (e) {
            e.stopPropagation();
        };
        $scope.closeEgg = function () {
            $('.zjd').hide();
            $('.zjd').children().hide();
        };


        var prev = new Date($localStorage.showActivityDialog);
        var curr = new Date();
        var sameDay = prev.getDate() == curr.getDate() && prev.getMonth() == curr.getMonth();
        $scope.dialogObj = undefined;

        if (curr >= new Date(Date.UTC(2017, 9 - 1, 6, -8, 0, 0)) && curr < new Date(Date.UTC(2017, 9 - 1, 13, -8, 0, 0))) {
            $scope.dialogObj = {
                className: 'fan-a',
                href: 'hongyaFanA'
            }
        } else if (curr >= new Date(2017, 8 - 1, 28, 0, 0, 0) && curr < new Date(2017, 9 - 1, 1, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'qixi',
                href: 'hongyaqixi'
            }
        } else if (curr >= new Date(2017, 8 - 1, 26, 0, 0, 0) && curr < new Date(2017, 8 - 1, 28, 0, 0, 0)) {
            if ($scope.isLogin && $localStorage.showActivityRedbagDialog == undefined) {
                resourceService.queryPost($scope, $filter('getUrl')('getMyInvestStatistics'), obj, { name: 'weekendPopup' });
            } else {
                $scope.dialogObj = {
                    className: 'august',
                    href: 'hongyaAugust'
                }
            }
        } else if (curr >= new Date(2017, 8 - 1, 21, 0, 0, 0) && curr < new Date(2017, 8 - 1, 26, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'august',
                href: 'hongyaAugust'
            }
        } else if (curr >= new Date(2017, 8 - 1, 7, 0, 0, 0) && curr < new Date(2017, 8 - 1, 21, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'hongbaoyu',
                href: 'hongyahongbaoyu'
            }
        } else if (curr >= new Date(2017, 7 - 1, 28, 0, 0, 0) && curr < new Date(2017, 8 - 1, 22, 0, 0, 0)) {
            $scope.dialogObj = {
                className: 'runyue',
                href: 'hongyarunyue'
            }
        }

        $scope.showActivityDialog = (!$localStorage.showActivityDialog || !sameDay);

        $scope.closeActivityDialog = function () {
            $localStorage.showActivityDialog = new Date();
            $scope.showActivityDialog = false;
            if ($scope.dialogObj.className == 'august-hongbao') {
                $localStorage.showActivityRedbagDialog = true;
            }
        }

    })
        .directive('progressCircle', function () {
            return {
                restrict: 'A',
                scope: true,
                link: function ($scope, element, attrs) {
                    var config = {
                        radius: ($scope.radius - 8) / 2,
                        barWidth: 4,
                        barBgColor: '#EBEBEB',
                        percentage: false,
                        displayNumber: false,
                        roundCorner: false,
                        initValue: 0,
                        interpolate: true,
                        barColor: '#FF9593',
                        frameTime: (1000 / attrs.progress)
                    }
                    if (attrs.progress >= 100) {
                        config.initValue = 100;
                        config.barColor = '#D6D6D6';
                    }
                    else if (attrs.progress <= 0) {
                        config.roundCorner = false;
                    }
                    var radialObj = $(element).radialIndicator(config).data('radialIndicator');
                    radialObj.animate(attrs.progress);
                }
            }
        })
        .directive('newHandProgressLine', function () {
            return {
                restrict: 'A',
                scope: true,
                link: function ($scope, element, attrs) {
                    var width = $(element).width();

                    if (attrs.color == 'blue') {
                        var startColor = '#ffffff'; //新手
                        var endColor = '#ffffff';
                    } else {
                        var startColor = '#ffffff';
                        var endColor = '#ffffff';
                    }
                    var config = {
                        width: width,
                        radius: ($scope.radius - 8) / 2,
                        barWidth: 1,
                        startColor: startColor,
                        endColor: endColor,
                        barBgColor: '#ffffff',
                        percentage: true,
                        displayNumber: true,
                        fontSize: 10,
//                      fontWeight: 'lighter',
                        roundCorner: false,
                        initValue: 0,
                        interpolate: true,
                        textAlign:'left',
                        barColor: '#ffffff',
                        frameTime: (1000 / attrs.progress)
                    }
                    if (attrs.progress >= 100) {
                        config.initValue = 100;
                        config.barColor = '#fff800';
                        config.startColor = '#fff800';
                        config.endColor = '#fff800';
                    }
                    else if (attrs.progress <= 0) {
                        config.roundCorner = false;
                    }
                    var radialObj = $(element).linearIndicator(config).data('linearIndicator');
                    radialObj.animate(attrs.progress);
                }
            }
        })
        .directive('progressLine', function () {
            return {
                restrict: 'A',
                scope: true,
                link: function ($scope, element, attrs) {
                    var width = $(element).width();

                    if (attrs.color == 'blue') {
                        var startColor = '#dab340'; //新手
                        var endColor = '#fc764d';
                    } else {
                        var startColor = '#dab340';
                        var endColor = '#fc764d';
                    }
                    var config = {
                        width: width,
                        radius: ($scope.radius - 8) / 2,
                        barWidth: 1,
                        startColor: startColor,
                        endColor: endColor,
                        barBgColor: '#b2b2b2',
                        percentage: true,
                        displayNumber: true,
                        fontSize: 10,
                        fontWeight: 'lighter',
                        roundCorner: false,
                        initValue: 0,
                        interpolate: true,
                        barColor: '#b2b2b2',
                        textAlign:'left',
                        frameTime: (1000 / attrs.progress)
                    }
                    if (attrs.progress >= 100) {
                        config.initValue = 100;
                        config.barColor = '#b2b2b2';
                        config.startColor = '#dab340';
                        config.endColor = '#fc764d';
                    }
                    else if (attrs.progress <= 0) {
                        config.roundCorner = false;
                    }
                    var radialObj = $(element).linearIndicator(config).data('linearIndicator');
                    radialObj.animate(attrs.progress);
                }
            }
        });

    /*刮刮卡*/
    controllers.controller('testGGKCtrl'
        , ['$scope', '$rootScope'
            , 'resourceService'
            , '$filter'
            , '$state'
            , '$localStorage'
            , '$anchorScroll'
            , function ($scope, $rootScope, resourceService, $filter, $state, $localStorage, $anchorScroll) {
                $rootScope.title = "guaguaka";
                LuckyCard.case({
                    ratio: .1,
                    // coverImg:'images/activity/act-rule.png'
                    coverImg: 'images/ggk/gg.png'
                }, function () {
                    // alert('至于你信不信，我反正不信！');
                    this.clearCover();
                });

                resourceService.queryPost($scope, $filter('getUrl')('cplist'), {}, { name: '产品列表' });
                $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
                    switch (eObj.name) {
                        case '产品列表':
                            $scope.jl = "$1000家园";
                            break;
                    };
                });
            }
        ])
})

;
/* 
* @Author: xyc
* @Date:   2016-01-18 23:29:04
*/


define('conttrollers/shiMingRenZhengConttroller',[
    'webappControllers'
    ,'jquery'
    ,'ngdialog'
    ]
    ,function(controllers,$,ngdialog){

    controllers.controller('SMRZcontroller'
        ,['$scope'
        ,'resourceService'
        ,'$filter'
		,'$http'
        ,'$state'
        ,'$rootScope'
        ,'$localStorage'
        ,'ngDialog'
        ,'$stateParams'
        ,function($scope,resourceService,$filter,$http,$state,$rootScope,$localStorage,ngDialog,$stateParams){
            $scope.submitBool=true;
            $rootScope.title="实名认证";
            $scope.nowTimer="发送验证码";
            var user = $filter('isRegister')().user;
            $scope.smrFrom ={};
            $scope.banklist =[];        
            $scope.isSubMin=true;

            $scope.showCityList = false;
            $scope.cityList = [];
            $scope.showBankName = false;

            resourceService.queryPost($scope, $filter('getUrl')('银行限额列表'), {}, 'bankList');
            

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '信息认证': 
                        if(data.success){
                                $rootScope.errorText= '验证码发送成功';
                                $filter('实名短信错误信息')('ok',$scope,'y');
                                $filter('60秒倒计时')($scope,60);
                                setTimeout(function() {
                                    ngDialog.closeAll();
                                }, 1000);
                        }else{
                            $filter('实名短信错误信息')(data.errorCode,$scope,'y');
                        }
                    break;
                    case '实名认证': 
                        if(data.success){
                            $filter('isRegister')(data.map);
                            // $state.go('main.myaccountHome');
                            // _hmt.push(['_trackPageview', 'www.hongyajinrong.com/maidian/smrz']);
                            // if(data.tyj){
                            ngDialog.open({
                                template: '<p class="error-msg">认证成功！</p>',
                                showClose: false,
                                closeByDocument: true,
                                plain: true
                            });
                            setTimeout(function() {
                                ngDialog.closeAll();
                                $filter('跳回上一页')();
                            }, 2000);
                            // $scope.tyj = true;
                            // $scope.isCps = data.map.isCps;
                            // }
                            // else{
                            //     if($stateParams.from=='changcheng2'){
                            //         $state.go('recharge',{from:'changcheng2'});
                            //     }
                            //     else{
                            //         $state.go('main.myaccountHome');
                            //     }
                            // }
                            
                        }else{
                            $filter('实名认证错误信息')(data.errorCode,$scope,'y');
                        }
                    break;
                    case 'bankList':
                        if(data.success){
                            $scope.banklist = data.map.bankQuotaList;
                            $scope.smrFrom.bank= "请选择";
                        }
                    break;
                    case 'selectCity':
                        $scope.sysCityList = data.map.cityList;
                        $scope.showCityList = true;
                        $scope.smrFrom.cityId = null;
                    break;


                };
            });
            $scope.toWhere = function(state){
                $('body,html').css({ width:'auto', height: 'auto', overflow: 'initial' });
                $state.go(state);
            }
            $scope.close = function(){
                $scope.tyj = false;
                $('body,html').css({ width:'auto', height: 'auto', overflow: 'initial' });
                if($stateParams.from=='changcheng2'){
                    $state.go('recharge',{from:'changcheng2'});
                }
                else{
                    $state.go('main.myaccountHome');
                }
            }

            $scope.toback=function () {
                $filter('跳回上一页')();
            };
            $scope.onClick=function () {
                ngDialog.closeAll();
            };
            
            $scope.toSub=function (name) {
                switch(name){
                    case '信息认证': 
                        if($scope.isSubMin){
                            resourceService.queryPost($scope, $filter('getUrl')(name), {
                                uid:user.member.uid,
                                mobilePhone:$scope.smrFrom.phone,
                                bankNum:$filter('limitTo')($scope.smrFrom.bankNum1,-4),
                                type:1,
                                token:user.token
                            }, name);
                        };
                    break; 
                    case '实名认证': 
                        $scope.smrFrom.uid=user.member.uid;
                        $scope.smrFrom.channel=3;
                        $scope.smrFrom.token= user.token;
                        $scope.smrFrom.bankNum = $scope.smrFrom.bankNum1;
                        $scope.smrFrom.cityId = $scope.smrFrom.cityId;
                        $scope.smrFrom.branchName = $scope.smrFrom.bankName;
                        if($scope.submitBool){
                            resourceService.queryPost($scope, $filter('getUrl')(name), $scope.smrFrom, name);
                        };
                    break;
                };
            }

            $scope.selectCity = function(n) {
                resourceService.queryPost($scope, $filter('getUrl')('selectCity'),{pinyin: $scope.smrFrom.bankCity},'selectCity');
            };

            $scope.clickCity = function (id,name){
                $scope.smrFrom.cityId = id;
                $scope.smrFrom.bankCity = name;
                $scope.showCityList = false;
            };

            $scope.handleBankChange = function (){
                // 中行， 建行， 广发 必填
                if($scope.smrFrom.bank == 29 || $scope.smrFrom.bank == 23 || $scope.smrFrom.bank == 34){
                    $scope.showBankName = true;
                } else {
                    $scope.showBankName = false;
                }

            };

        }
    ]);
})
;

/* 
* @Author: xyc
* @Date:   2016-01-18 23:29:04
*/

define('conttrollers/moreCtrl',[
    'webappControllers'
]
    , function (controllers) {
        controllers.controller('moreController'
            , ['$scope'
                , '$filter'
                , '$state'
                , function ($scope, $filter, $state) {
                    $filter('isPath')('main.more');
                    var isPageHide = false;
                    window.addEventListener('pageshow', function () {
                        if (isPageHide) {
                            window.location.reload();
                        }
                    });
                    window.addEventListener('pagehide', function () {
                        isPageHide = true;
                    });
                    $scope.out = function (argument) {
                        switch (argument) {
                            case 'out':
                                $filter('清空缓存')();
                                $state.go('main.home');
                                break;
                        };
                    }
                }
            ]);
        controllers.controller('YJFKController'
            , ['$scope'
                , '$filter'
                , '$state'
                , 'resourceService'
                , function ($scope, $filter, $state, resourceService) {
                    $scope.userOBJ = $filter('isRegister')();

                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {

                        switch (type) {
                            case '意见反馈':
                                if (data.success) {
                                    $filter('意见反馈信息')('ok', $scope, 'y');
                                } else {
                                    $filter('意见反馈信息')(data.errorCode, $scope, 'y');
                                }
                                break;
                        };
                    });
                    $scope.toSub = function () {
                        if (!$scope.userOBJ.register) {
                            $state.go('dl');
                        } else {
                            resourceService.queryPost($scope, $filter('getUrl')('意见反馈'), {
                                uid: $scope.userOBJ.user.member.uid,
                                contactInformation: $scope.userOBJ.user.member.mobilephone,
                                content: $scope.content
                            }, '意见反馈');
                        }
                    }
                }
            ]);
    });
define('conttrollers/getCashCtrl',[
    'webappControllers'
]
    , function (controllers) {
        controllers.controller('getcashCtrl'
            , ['$scope'
                , '$filter'
                , '$state'
                , '$rootScope'
                , 'resourceService'
                , 'ngDialog'
                , function ($scope, $filter, $state, $rootScope, resourceService, ngDialog) {
                    $rootScope.title = "我要提现";
                    $scope.userOBJ = $filter('isRegister')();
                    $scope.isSubmit = false;
                    $scope.height = {
                        height: window.innerHeight + 'px'
                    }
                    $scope.onClick = function () {
                        ngDialog.closeAll();
                    };
                    resourceService.queryPost($scope, $filter('getUrl')('提现'), {
                        uid: $scope.userOBJ.user.member.uid,
                        token: $scope.userOBJ.user.token
                    }, '提现');

                    resourceService.queryPost($scope, $filter('getUrl')('我的信息'), {
                        uid: $scope.userOBJ.user.member.uid
                    }, '我的信息');

                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                        switch (type) {
                            case '我的信息':
                                if (data.success) {
                                    $scope.user = data.map;
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y');
                                }
                                break;
                            case '提现':
                                if (data.success) {
                                    $scope.cash = data.map;
                                    if (data.map.isChargeFlag) {
                                        $scope.cash.cost = 2;
                                    } else {
                                        $scope.cash.cost = 0;
                                    }
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y')
                                }
                                break;
                            case '提现申请':
                                if (data.success) {
                                    ngDialog.open({
                                        template: '<p class="success-msg">您已成功提现' + $filter('currency')(data.map.amount, '') + '元</p>',
                                        showClose: false,
                                        closeByDocument: false,
                                        plain: true
                                    });
                                    setTimeout(function () {
                                        ngDialog.closeAll();
                                        $state.go('main.myaccountHome');
                                    }, 2000);
                                } else {
                                    if (data.errorCode == '2001') {
                                        $filter('投资交易密码错误信息')($scope);
                                    }
                                    else if (data.errorCode == '1006') {
                                        ngDialog.open({
                                            template: '<p class="error-msg">处理中</p>',
                                            showClose: false,
                                            closeByDocument: false,
                                            plain: true
                                        });
                                        setTimeout(function () {
                                            ngDialog.closeAll();
                                            $state.go('main.myaccountHome');
                                        }, 2000);
                                    }
                                    else {
                                        $filter('提现申请错误信息')(data.errorCode, $scope, 'y');
                                    }
                                    $scope.isSubmit = false;
                                }
                                break;
                        };
                    });

                    $scope.getAllFlag = false;
                    var $circlebtn = $('.circlebtn'),
                        $circlei = $('i', $circlebtn),
                        circleLeft = $circlebtn.width() - $circlei.width();
                    $scope.setAll = function () {
                        if ($scope.getAllFlag == false) {
                            $scope.cash.amount = $scope.cash.funds;
                            $circlebtn.css({ 'background': '#ed3334', 'border-color': '#ed3334' });
                            $circlei.css({ 'border-color': '#ed3334' });
                            $circlei.animate({ left: circleLeft }, 300, function () {
                                $scope.getAllFlag = true;
                                $circlei.css({ left: 'auto', right: '-1px' });
                            });
                        } else if ($scope.getAllFlag == true) {
                            $scope.cash.amount = '';
                            $circlebtn.css({ 'background': '#d2d2d2', 'border-color': '#d2d2d2' });
                            $circlei.css({ 'border-color': '#d2d2d2', 'left': circleLeft, 'right': 'auto' });
                            $circlei.animate({ left: '-1px' }, 300, function () {
                                $scope.getAllFlag = false;
                                $circlei.css({ left: '-1px', right: 'auto' });
                            });
                        }
                    };

                    // onblur将金额保留两位小数
                    $scope.setAmount = function (event) {
                        if ($scope.cashForm.cash.$error.pattern) {
                            $filter('提现错误信息')('pattern', $scope);
                        } else if ($scope.cashForm.cash.$error.maxlimit) {
                            $filter('提现错误信息')('maxlimit', $scope);
                        } else if ($scope.cashForm.cash.$error.morethan3) {
                            $filter('提现错误信息')('morethan3', $scope);
                        } else if ($scope.cashForm.cash.$error.morethan) {
                            $filter('提现错误信息')('morethan', $scope);
                        } else if ($scope.cashForm.cash.$error.withdrawlimit) {
                            $filter('提现错误信息')('withdrawlimit', $scope);
                        } else if ($scope.cashForm.cash.$error.required) {
                            $filter('提现错误信息')('required', $scope);
                        }
                        $scope.cash.amount = $filter('isNumber2')($scope.cash.amount, undefined, 1);
                    };
                    // 提交表单
                    $scope.submitForm = function (valid) {
                        if (!valid || $scope.isSubmit) {
                            return;
                        }
                        $scope.isSubmit = true;
                        resourceService.queryPost($scope, $filter('getUrl')('提现申请'), {
                            amount: $scope.cash.amount,
                            tpw: $scope.cash.tradepwd,
                            isChargeFlag: $scope.cash.isChargeFlag,
                            uid: $scope.userOBJ.user.member.uid,
                            token: $scope.userOBJ.user.token
                        }, '提现申请');
                    };
                    $scope.toback = function () {
                        $filter('跳回上一页')();
                    };

                }
            ]);
    });
/* Rainbow v1.2 rainbowco.de | included languages: generic, javascript, html */
window.Rainbow=function(){function A(a){var b=a.getAttribute("data-language")||a.parentNode.getAttribute("data-language");if(!b){var c=/\blang(?:uage)?-(\w+)/;(a=a.className.match(c)||a.parentNode.className.match(c))&&(b=a[1])}return b}function B(a,b){for(var c in f[d]){c=parseInt(c,10);if(a==c&&b==f[d][c]?0:a<=c&&b>=f[d][c])delete f[d][c],delete j[d][c];if(a>=c&&a<f[d][c]||b>c&&b<f[d][c])return!0}return!1}function q(a,b){return'<span class="'+a.replace(/\./g," ")+(l?" "+l:"")+'">'+b+"</span>"}function r(a,
b,c,i){if("undefined"===typeof a||null===a)i();else{var e=a.exec(c);if(e){++s;!b.name&&"string"==typeof b.matches[0]&&(b.name=b.matches[0],delete b.matches[0]);var k=e[0],g=e.index,t=e[0].length+g,h=function(){function e(){r(a,b,c,i)}s%100>0?e():setTimeout(e,0)};if(B(g,t))h();else{var m=u(b.matches),l=function(a,c,i){if(a>=c.length)i(k);else{var d=e[c[a]];if(d){var g=b.matches[c[a]],f=g.language,h=g.name&&g.matches?g.matches:g,j=function(b,d,g){var f;f=0;var h;for(h=1;h<c[a];++h)e[h]&&(f=f+e[h].length);
d=g?q(g,d):d;k=k.substr(0,f)+k.substr(f).replace(b,d);l(++a,c,i)};f?n(d,f,function(a){j(d,a)}):typeof g==="string"?j(d,d,g):v(d,h.length?h:[h],function(a){j(d,a,g.matches?g.name:0)})}else l(++a,c,i)}};l(0,m,function(a){b.name&&(a=q(b.name,a));if(!j[d]){j[d]={};f[d]={}}j[d][g]={replace:e[0],"with":a};f[d][g]=t;h()})}}else i()}}function u(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort(function(a,c){return c-a})}function v(a,b,c){function i(b,k){k<b.length?r(b[k].pattern,b[k],
a,function(){i(b,++k)}):C(a,function(a){delete j[d];delete f[d];--d;c(a)})}++d;i(b,0)}function C(a,b){function c(a,b,i,f){if(i<b.length){++w;var h=b[i],l=j[d][h],a=a.substr(0,h)+a.substr(h).replace(l.replace,l["with"]),h=function(){c(a,b,++i,f)};0<w%250?h():setTimeout(h,0)}else f(a)}var i=u(j[d]);c(a,i,0,b)}function n(a,b,c){var d=m[b]||[],e=m[x]||[],b=y[b]?d:d.concat(e);v(a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&(?![\w\#]+;)/g,"&amp;"),b,c)}function o(a,b,c){if(b<a.length){var d=a[b],
e=A(d);return!(-1<(" "+d.className+" ").indexOf(" rainbow "))&&e?(e=e.toLowerCase(),d.className+=d.className?" rainbow":"rainbow",n(d.innerHTML,e,function(k){d.innerHTML=k;j={};f={};p&&p(d,e);setTimeout(function(){o(a,++b,c)},0)})):o(a,++b,c)}c&&c()}function z(a,b){var a=a&&"function"==typeof a.getElementsByTagName?a:document,c=a.getElementsByTagName("pre"),d=a.getElementsByTagName("code"),e,f=[],g=[];for(e=0;e<c.length;++e)c[e].getElementsByTagName("code").length?c[e].innerHTML=c[e].innerHTML.replace(/^\s+/,
"").replace(/\s+$/,""):f.push(c[e]);for(e=0;e<d.length;++e)g.push(d[e]);o(g.concat(f),0,b)}var j={},f={},m={},y={},d=0,x=0,s=0,w=0,l,p;return{extend:function(a,b,c){1==arguments.length&&(b=a,a=x);y[a]=c;m[a]=b.concat(m[a]||[])},b:function(a){p=a},a:function(a){l=a},color:function(a,b,c){if("string"==typeof a)return n(a,b,c);if("function"==typeof a)return z(0,a);z(a,b)}}}();document.addEventListener&&document.addEventListener("DOMContentLoaded",Rainbow.color,!1);Rainbow.onHighlight=Rainbow.b;
Rainbow.addClass=Rainbow.a;Rainbow.extend([{matches:{1:[{name:"keyword.operator",pattern:/\=|\+/g},{name:"keyword.dot",pattern:/\./g}],2:{name:"string",matches:{name:"constant.character.escape",pattern:/\\('|"){1}/g}}},pattern:/(\(|\s|\[|\=|:|\+|\.)(('|")([^\\\1]|\\.)*?(\3))/gm},{name:"comment",pattern:/\/\*[\s\S]*?\*\/|(\/\/|\#)[\s\S]*?$/gm},{name:"constant.numeric",pattern:/\b(\d+(\.\d+)?(e(\+|\-)?\d+)?(f|d)?|0x[\da-f]+)\b/gi},{matches:{1:"keyword"},pattern:/\b(and|array|as|b(ool(ean)?|reak)|c(ase|atch|har|lass|on(st|tinue))|d(ef|elete|o(uble)?)|e(cho|lse(if)?|xit|xtends|xcept)|f(inally|loat|or(each)?|unction)|global|if|import|int(eger)?|long|new|object|or|pr(int|ivate|otected)|public|return|self|st(ring|ruct|atic)|switch|th(en|is|row)|try|(un)?signed|var|void|while)(?=\(|\b)/gi},
{name:"constant.language",pattern:/true|false|null/g},{name:"keyword.operator",pattern:/\+|\!|\-|&(gt|lt|amp);|\||\*|\=/g},{matches:{1:"function.call"},pattern:/(\w+?)(?=\()/g},{matches:{1:"storage.function",2:"entity.name.function"},pattern:/(function)\s(.*?)(?=\()/g}]);Rainbow.extend("javascript",[{name:"selector",pattern:/(\s|^)\$(?=\.|\()/g},{name:"support",pattern:/\b(window|document)\b/g},{matches:{1:"support.property"},pattern:/\.(length|node(Name|Value))\b/g},{matches:{1:"support.function"},pattern:/(setTimeout|setInterval)(?=\()/g},{matches:{1:"support.method"},pattern:/\.(getAttribute|push|getElementById|getElementsByClassName|log|setTimeout|setInterval)(?=\()/g},{name:"string.regexp",matches:{1:"string.regexp.open",2:{name:"constant.regexp.escape",pattern:/\\(.){1}/g},
3:"string.regexp.close",4:"string.regexp.modifier"},pattern:/(\/)(?!\*)(.+)(\/)([igm]{0,3})/g},{matches:{1:"storage",3:"entity.function"},pattern:/(var)?(\s|^)(\S*)(?=\s?=\s?function\()/g},{matches:{1:"keyword",2:"entity.function"},pattern:/(new)\s+(.*)(?=\()/g},{name:"entity.function",pattern:/(\w+)(?=:\s{0,}function)/g}]);Rainbow.extend("html",[{name:"source.php.embedded",matches:{2:{language:"php"}},pattern:/&lt;\?=?(?!xml)(php)?([\s\S]*?)(\?&gt;)/gm},{name:"source.css.embedded",matches:{1:{matches:{1:"support.tag.style",2:[{name:"entity.tag.style",pattern:/^style/g},{name:"string",pattern:/('|")(.*?)(\1)/g},{name:"entity.tag.style.attribute",pattern:/(\w+)/g}],3:"support.tag.style"},pattern:/(&lt;\/?)(style.*?)(&gt;)/g},2:{language:"css"},3:"support.tag.style",4:"entity.tag.style",5:"support.tag.style"},pattern:/(&lt;style.*?&gt;)([\s\S]*?)(&lt;\/)(style)(&gt;)/gm},
{name:"source.js.embedded",matches:{1:{matches:{1:"support.tag.script",2:[{name:"entity.tag.script",pattern:/^script/g},{name:"string",pattern:/('|")(.*?)(\1)/g},{name:"entity.tag.script.attribute",pattern:/(\w+)/g}],3:"support.tag.script"},pattern:/(&lt;\/?)(script.*?)(&gt;)/g},2:{language:"javascript"},3:"support.tag.script",4:"entity.tag.script",5:"support.tag.script"},pattern:/(&lt;script(?! src).*?&gt;)([\s\S]*?)(&lt;\/)(script)(&gt;)/gm},{name:"comment.html",pattern:/&lt;\!--[\S\s]*?--&gt;/g},
{matches:{1:"support.tag.open",2:"support.tag.close"},pattern:/(&lt;)|(\/?\??&gt;)/g},{name:"support.tag",matches:{1:"support.tag",2:"support.tag.special",3:"support.tag-name"},pattern:/(&lt;\??)(\/|\!?)(\w+)/g},{matches:{1:"support.attribute"},pattern:/([a-z-]+)(?=\=)/gi},{matches:{1:"support.operator",2:"string.quote",3:"string.value",4:"string.quote"},pattern:/(=)('|")(.*?)(\2)/g},{matches:{1:"support.operator",2:"support.value"},pattern:/(=)([a-zA-Z\-0-9]*)\b/g},{matches:{1:"support.attribute"},
pattern:/\s(\w+)(?=\s|&gt;)(?![\s\S]*&lt;)/g}],!0);

define("rainbow", function(){});

/*我的明细 lee*/
define('conttrollers/minxiController',[
        'webappControllers'
        , 'ngdialog'
        , 'asPieProgress'
        , 'rainbow'
    ]
    , function (controllers, ngdialog) {
        controllers.controller('minxiController'
            , ['$scope', '$rootScope'
                , 'resourceService'
                , '$filter'
                , '$state'
                , '$localStorage'
                , '$anchorScroll'
                , function ($scope, $rootScope, resourceService, $filter, $state,$localStorage,$anchorScroll) {
                    $rootScope.title="我的明细";
                    $scope.userOBJ = $filter('isRegister')();
                    var user=$scope.userOBJ.user.member;
                    var isLoad=true;
                    var pageOn=1;
                    $scope.cpList = [];

                    $scope.loadMore = function(item) {
                            if(item.id == $scope.cpList[$scope.cpList.length - 1].id){
                                if(isLoad){
                                    if(pageOn != $scope.page.pageOn){
                                        resourceService.queryPost($scope, $filter('getUrl')('我的明细'), {
                                        pageOn: pageOn,
                                        uid:user.uid,
                                        tradeType:0,
                                        pageSize: 10
                                    }, {name:'我的明细'});
                                        isLoad=false;
                                    }
                                };
                            };
                      };
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,eObj) {
                        switch(eObj.name){
                            case '我的明细':
                                $scope.page = data.map.page;
                                if(pageOn==$scope.page.pageOn){
                                    isLoad=true;
                                }
                                if(data.map.page.pageOn <= data.map.page.totalPage){
                                    pageOn = $scope.page.pageOn + 1;
                                    for (var i = 0; i < data.map.page.rows.length; i++) {
                                        $scope.cpList.push(data.map.page.rows[i]);
                                    }
                                }else{
                                    isLoad=false;
                                }
                            break;
                        };
                    });
                    $scope.toback=function () {
                        $filter('跳回上一页')();
                    };
                    resourceService.queryPost($scope, $filter('getUrl')('我的明细'), {
                    	uid:user.uid,
                    	pageOn:1,
                    	pageSize:10,
                    	tradeType:0,
                    }, {name:'我的明细'});
            }
        ])
    })

;
/* 
* @Author: xyc
* @Date:   2016-01-18 23:29:04
*/


define('conttrollers/investmentCtrl',[
    'webappControllers'
    , 'jquery'
    , 'ngdialog'
]
    , function (controllers, $, ngdialog) {

        controllers.controller('investmentController'
            , ['$scope'
                , 'resourceService'
                , '$filter'
                , '$state'
                , '$rootScope'
                , '$localStorage'
                , '$stateParams'
                , function ($scope, resourceService, $filter, $state, $rootScope, $localStorage, $stateParams) {
                    $scope.submitBool = true;
                    $rootScope.title = '产品投资';
                    $filter('isPath')('investment');
                    $scope.protocol = $filter('protocolFilter')()
                    var user = $filter('isRegister')().user;
                    $scope.smrFrom = {};
                    $scope.cpCoupon = {};
                    $scope.cpCoupon.type = 0;
                    if ($stateParams.pid) {
                        resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), {
                            'pid': $stateParams.pid,
                            'uid': $filter('isRegister')().user.member.uid,
                        }, '产品详情');
                    } else {
                        $scope.cp = $localStorage.cp;
                    }
                    $scope.playSound = true;
                    $scope.userTypes = {};
                    $scope.userTypes.passWord = '';
                    $scope.showMask = false;
                    $scope.cpCoupon.id = '';
                    $scope.delCoupon = function () {
                        $scope.cpCoupon = { type: 0, id: null };
                    };
                    $scope.changeSelect = function () {
                        if ($scope.select == false) {
                            $scope.amount = 10000;
                        }
                        else if ($scope.amount >= 10000) {
                            $scope.amount = '';
                        }
                        $scope.select = !$scope.select;
                    }
                    $scope.onChange = function () {
                        $rootScope.amt = $scope.amount * 1;
                        tyjCheck()
                        hongbaoFilter()
                    };
                    $scope.agreeclick = function () {
                        $scope.playSound = !$scope.playSound;
                    }
                    $scope.add = function () {
                        if ($scope.amount === '') {
                            $scope.amount = 100
                            return
                        }
                        if ($scope.amount >= $scope.cp.info.surplusAmount) return
                        $scope.amount = parseInt($scope.amount) + 100
                        tyjCheck()
                        hongbaoFilter()
                    }
                    $scope.minus = function () {
                        if ($scope.amount <= $scope.cp.info.leastaAmount) return
                        $scope.amount = parseInt($scope.amount) - 100
                        tyjCheck()
                        hongbaoFilter()
                    }
                    // 体验金选择状态
                    function tyjCheck() {
                        $scope.select = $scope.amount >= 10000 ? true : false
                    }
                    // 红包可用状态
                    function hongbaoFilter() {
                        if ($localStorage.coupons && $localStorage.coupons.length > 0) {
                            $localStorage.coupons.forEach(function (item) {
                                if ($scope.amount >= item.enableAmount) {
                                    item.canuse = true
                                } else {
                                    item.canuse = false
                                }
                            })
                            var currentCoupon = $localStorage.coupons.filter(function (item) {
                                return item.id == $stateParams.cpid
                            })
                            if (currentCoupon.length > 0 && !currentCoupon[0].canuse) {
                                $scope.cpCoupon = { type: 0, id: null };
                            }
                            $localStorage.coupons.sort(function (a, b) {
                                return b.canuse - a.canuse
                            })
                        }
                    }
                    // 体验金点击事件
                    $scope.tyjSelect = function () {
                        if ($scope.amount < 10000) {
                            $scope.amount = 10000;
                        }
                        tyjCheck()
                        hongbaoFilter()
                    }
                    //体验金判断
                    resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                        uid: user.member.uid,
                        flag: 0
                    }, '我的体验金');
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                        switch (type) {
                            case '用户状态':
                                if (data.success) {
                                    $scope.userTypes = data.map;
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y')
                                }
                                break;
                            case '产品详情':
                                if (data.success) {
                                    data.map.specialRate = parseFloat(data.map.specialRate);
                                    $localStorage.cp = $scope.cp = data.map;
                                    if ($scope.cp.info.type == 1) { $scope.playSound = true; }
                                    if ($filter('isRegister')().user.member != undefined) {
                                        resourceService.queryPost($scope, $filter('getUrl')('判断用户状态'), {
                                            'uid': $filter('isRegister')().user.member.uid
                                        }, '用户状态');
                                        resourceService.queryPost($scope, $filter('getUrl')('产品可用全部优惠券'), {
                                            'uid': $filter('isRegister')().user.member.uid,
                                            'pid': $scope.cp.info.id,
                                            // 'amount': $scope.cp.info.surplusAmount,
                                        }, '产品可用优惠券');
                                        resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), {
                                            'uid': $filter('isRegister')().user.member.uid,
                                            'pid': $scope.cp.info.id
                                        }, '账户余额');
                                    } else {
                                        resourceService.queryPost($scope, $filter('getUrl')('判断用户状态'), {
                                        }, '用户状态');
                                        if ($scope.cp) {
                                            resourceService.queryPost($scope, $filter('getUrl')('产品可用全部优惠券'), {
                                                'pid': $scope.cp.info.id
                                            }, '产品可用优惠券');
                                        };
                                    };
                                }
                                break;
                            case '账户余额':
                                $scope.balance = data.map.balance;
                                $scope.repair = data.map.repair;
                                if ($stateParams.amt != null) {
                                    $scope.amount = $stateParams.amt * 1;
                                } else if (!$stateParams.pid) {
                                    $scope.amount = data.map.info.leastaAmount
                                }
                                $scope.$watch('amount', function () {
                                    tyjCheck()
                                    hongbaoFilter()
                                })
                                window.setTimeout(function () {
                                    hongbaoFilter()
                                }, 0)
                                // 返现红包
                                if ($scope.repair != undefined && $scope.cp.info.surplusAmount == $scope.amount) {
                                    if ($scope.repair.type == 2) {/*补标收益为加息*/
                                        $scope.FXJiaXi = true;
                                    } else if ($scope.repair.type == 1) {/*补标收益为返现*/
                                        $scope.FXFanXian = true;
                                    }
                                } else {
                                    $scope.noFXshouyi = true;
                                }
                                if ($scope.cp.info.establish != undefined) {
                                    var date3 = $scope.cp.info.establish - Date.parse(new Date());
                                    var day = Math.floor(date3 / (24 * 3600 * 1000));
                                    var hh = Math.floor(date3 / (3600 * 1000));
                                    if (day > 0) {
                                        $scope.nowTimer = day + '天';
                                        // $scope.isFinish = true;
                                    } else
                                        if (day == 0 && hh > 1) {
                                            $scope.nowTimer = hh + '小时';
                                            // $scope.isFinish = true;
                                            $scope.isBuTimer = true;
                                        } else
                                            if (day == 0 && hh < 1) {
                                                $scope.nowTimer = '1小时内'
                                                // $scope.isFinish = true;
                                            } else
                                                if (hh < 0) {
                                                    if ($scope.cp.info.type == 1) {
                                                        $scope.nowTimer = '无限制';
                                                    } else {
                                                        $scope.nowTimer = '已结束';
                                                    }
                                                    $scope.isFinish = true;
                                                }
                                } else {
                                    $scope.nowTimer = '已结束';
                                    $scope.isFinish = true;
                                };
                                if ($scope.repair != undefined && $scope.cp.info.surplusAmount == $scope.amount) {
                                    if ($scope.repair.type == 2) {
                                        $scope.FBJiaXi = true;
                                    } else if ($scope.repair.type == 1) {
                                        $scope.FBFanXian = true;
                                    }
                                } else {
                                    $scope.noFBshouyi = true;
                                }
                                if ($scope.repair != undefined && $scope.cp.info.surplusAmount == $scope.amount) {
                                    if ($scope.repair.type == 2) {
                                        $scope.JXQJiaXi = true;
                                    } else if ($scope.repair.type == 1) {
                                        $scope.JXQFanXian = true;
                                    }
                                } else {
                                    $scope.noJXshouyi = true;
                                }
                                // type==0
                                if ($scope.repair != undefined) {
                                    if ($scope.repair.type == 2) {
                                        $scope.noHBJiaXi = true;
                                    } else if ($scope.repair.type == 1) {
                                        $scope.noHBFanXian = true;
                                    }
                                } else {
                                    $scope.noHBshouyi = true;
                                }
                                break;
                            case '产品可用优惠券':
                                var couponAmount = {};
                                couponAmount.amount = 0;
                                if (data.success) {
                                    $localStorage.coupons = $scope.cop = data.map.list;
                                    if ($stateParams.cpid != undefined && $scope.cop.length > 0) {
                                        for (var i = 0; i < $scope.cop.length; i++) {
                                            if ($scope.cop[i].id == $stateParams.cpid) {
                                                $scope.cpCoupon = $scope.cop[i];
                                            }
                                        };
                                    }
                                    else if ($localStorage.fromJY != undefined && $scope.cop.length > 0) {//设置密码回来后回填
                                        for (var i = 0; i < $scope.cop.length; i++) {
                                            if ($scope.cop[i].id == $localStorage.fromJY.cpid) {
                                                $scope.cpCoupon = $scope.cop[i];
                                            }
                                        };
                                        $scope.amount = $localStorage.fromJY.amount;
                                        $scope.cp.info.id = $localStorage.fromJY.cpInfoId;
                                        tyjCheck()
                                        delete $localStorage.fromJY;
                                    }
                                    else {
                                        $scope.cpCoupon.type = 0;
                                    }
                                    if (!$stateParams.pid) {
                                        for (var j = 0; j < $scope.cop.length; j++) {
                                            if ($scope.cop[j].pid && !$localStorage.coupon) {
                                                $scope.cpCoupon = $scope.cop[j];
                                            }
                                        }
                                    }
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y')
                                }
                                break;
                            case '购买产品':
                                if (data.success) {
                                    $scope.successData = $scope.cp;
                                    $scope.successData.shouyi = $rootScope.shouyi;
                                    $scope.successData.investAmount = $scope.amount;
                                    $scope.successData.coupon = $scope.cpCoupon ? $scope.cpCoupon : 0;
                                    $scope.successData.isDoubleEgg = data.map.isDoubleEgg;
                                    $scope.successData.investTime = data.map.investTime;
                                    $scope.successData.isRepeats = data.map.isRepeats;
                                    $scope.successData.luckCodeCount = data.map.luckCodeCount;
                                    $scope.successData.luckCodes = data.map.luckCodes;
                                    $scope.successData.raisedRates = $scope.cpCoupon.raisedRates;
                                    $scope.successData.multiple = $scope.cpCoupon.multiple;
                                    $scope.successData.activityURL = data.map.activityURL;
                                    $scope.successData.jumpURL = data.map.jumpURL;
                                    $localStorage.successData = $scope.successData;
                                    $state.go('investSuccess');
                                } else {
                                    if (data.errorCode == '2001') {
                                        $filter('投资交易密码错误信息')($scope);
                                    } else {
                                        $filter('投资错误信息')(data.errorCode, $scope, 'y');
                                    }
                                }
                                break;
                            case '我的体验金':
                                if (data.success) {
                                    $scope.tyjFlag = data.map.list.filter(function (item) {
                                        return item.status === 0 && item.source === 100
                                    }).length > 0 ? true : false
                                }
                                break
                        };
                    });
                    $scope.tobuy = function () {
                        if ($scope.amount != '' && $scope.amount != undefined && $('#myPwd').val() != '') {
                            if ($scope.cpCoupon.enableAmount > $scope.amount) {
                                alert("投资金额小于使用红包的最小限额！");
                                return;
                            }
                            if (showCouponDailog($scope.amount)) {
                                $filter('invest-coupon-dialog')($scope);
                            } else {
                                $scope.topay();
                            }
                        } else {
                            if ($scope.amount == '' || $scope.amount == undefined) {
                                $filter('投资错误信息')('noInp', $scope, 'y');
                            } else if ($('#myPwd').val() == '') {
                                $filter('投资错误信息')('noPwd', $scope, 'y');
                            }
                        }
                    };
                    $scope.topay = function () {
                        resourceService.queryPost($scope, $filter('getUrl')('购买产品'), {
                            'pid': $scope.cp.info.id,
                            'tpwd': $scope.userTypes.passWord,
                            'amount': $scope.amount,
                            'uid': $filter('isRegister')().user.member.uid,
                            'fid': $scope.cpCoupon.id
                        }, '购买产品');
                    }
                    function showCouponDailog(amount) {
                        if ($scope.cpCoupon.id) {
                            return false;
                        }
                        var result = false;
                        var index = 0;
                        while (!result && index < $scope.cop.length) {
                            result = (amount >= $scope.cop[index].enableAmount) && ($scope.cop[index].maxAmount == null || amount <= $scope.cop[index].maxAmount);
                            index++;
                        }
                        return result;
                    }
                    if ($localStorage.cp && !$stateParams.pid) {
                        if ($filter('isRegister')().user.member != undefined) {
                            resourceService.queryPost($scope, $filter('getUrl')('判断用户状态'), {
                                'uid': $filter('isRegister')().user.member.uid
                            }, '用户状态');
                            resourceService.queryPost($scope, $filter('getUrl')('产品可用全部优惠券'), {
                                'uid': $filter('isRegister')().user.member.uid,
                                'pid': $scope.cp.info.id,
                                // 'amount': $scope.cp.info.surplusAmount,
                            }, '产品可用优惠券');
                            resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), {
                                'uid': $filter('isRegister')().user.member.uid,
                                'pid': $scope.cp.info.id
                            }, '账户余额');
                        } else {
                            resourceService.queryPost($scope, $filter('getUrl')('判断用户状态'), {
                            }, '用户状态');
                            if ($scope.cp) {
                                resourceService.queryPost($scope, $filter('getUrl')('产品可用全部优惠券'), {
                                    'pid': $scope.cp.info.id
                                }, '产品可用优惠券');
                            };
                        };
                    }
                    $scope.onClick = function (name) {
                        switch (name) {
                            case '去设置交易密码':
                                $localStorage.fromJY = {};
                                $localStorage.fromJY.amount = $scope.amount;
                                $localStorage.fromJY.cpid = $scope.cpCoupon.id;
                                $localStorage.fromJY.cpInfoId = $scope.cp.info.id;

                                $state.go('resetTradePwd', { firstset: true });
                                break;
                        };
                    };
                    $scope.toback = function () {
                        // $filter('跳回上一页')(2);
                        if ($localStorage.coupon) {
                            delete $localStorage.coupon
                            $filter('跳回上一页')(3)
                        } else {
                            $filter('跳回上一页')(2)
                        }
                    };
                }
            ]);
    })
;
/* 
* @Author: xyc
* @Date:   2016-12-12 17:52:04
*/


define('conttrollers/hbopenCtrl',[
    'webappControllers'
    ,'jquery'
    ,'ngdialog'
    ]
    ,function(controllers,$,ngdialog){

    controllers.controller('hbopenCtrl'
        ,['$scope'
        ,'resourceService'
        ,'$filter'
        ,'$state'
        ,'$rootScope'
        ,'$localStorage'
        ,function($scope,resourceService,$filter,$state,$rootScope,$localStorage){
            $rootScope.title='';
            $scope.toback=function () {
                $filter('跳回上一页')();
            };
            $scope.userOBJ = $filter('isRegister')();
            
            resourceService.queryPost($scope, $filter('getUrl')('拆红包'), {
                uid:$scope.userOBJ.user.member.uid
            }, '拆红包');
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '拆红包': 
                        if(data.success){
                            $scope.redPackets = data.map.redPacketList;
                            $scope.redMsg = data.map.redMsg;
                        }else{
                            $state.go('main.myaccountHome');
                        }
                    break;
                    case '红包投资详情':
                        if(data.success){
                            if(data.map.pid!=-1){
                                $state.go('investment',{pid:data.map.pid,cpid:$scope.activefid,uid:$scope.userOBJ.user.member.uid});
                            }else{
                                $state.go('main.bankBillList');
                            }
                        }
                    break;
                };
            });
            $scope.gotoInvest=function(item){
                resourceService.queryPost($scope, $filter('getUrl')('getUse'), {
                    uid:$scope.userOBJ.user.member.uid,
                    fid:item.id
                }, '红包投资详情');
                $scope.activefid=item.id;
            };
        }
    ])
    .directive("repeatFinish", function () {
        return {
            link: function(scope,element,attr){
                if(scope.$last == true){
                    scope.$eval(attr.repeatFinish);
                }
            }
        }
    })
    .directive('scrollText',function(){
        var temp='<li repeat-finish="finish()" ng-repeat="message in redMsg">'+
                    '<p>{{message.mobilePhone}}<span>已变现</span></p>'+
                    '<p>刚刚领取了{{message.amount}}元 现金红包<span>{{message.addtime|date:"yyyy.MM.dd"}}</span></p>'+
                '</li>'
        return{
            restrict : 'A',
            template:temp,           
            scope: true,
            link: function($scope,element,attrs){
                $scope.finish=function(){
                    $(element).find('li').each(function(i){
                        var height = parseFloat($(this).css('height'));
                        $(this).css({
                            top:i*height+'px'
                        })
                        var that = this;
                        setInterval(function(){
                            var top = parseFloat($(that).css('top'))
                            if(top<(height*(-1))){
                                $(that).css({top:($scope.redMsg.length-1)*height+'px'})
                            }
                            var top = parseFloat($(that).css('top'))
                            $(that).css({
                                top: (top-0.5)+'px'
                            })
                        },20)
                    })
                }
            }
        }
    });
})
;
/* 
* @Author: xyc
* @Date:   2016-01-18 23:29:04
*/


define('conttrollers/payPWFromController',[
    'webappControllers'
    ,'jquery'
    ,'ngdialog'
    ]
    ,function(controllers,$,ngdialog){

    controllers.controller('payPWFromController'
        ,['$scope'
        ,'resourceService'
        ,'$filter'
        ,'$state'
        ,'$rootScope'
        ,'$localStorage'
        ,function($scope,resourceService,$filter,$state,$rootScope,$localStorage){
            $rootScope.title='交易密码设置';
            $scope.user = $filter('isRegister')().user.member;
            $scope.smrFrom ={};
            $scope.pw={};
            $scope.pw.uid=$scope.user.uid;
            $scope.nowTimer='发送短信验证码';
            $scope.isSubMin=true;
            
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '短信验证码': 
                        if(data.success){
                            // $filter('服务器信息')(data.errorCode,$scope,'y');
                            // $scope.msg.text='短信已成功发送';
                            $filter('60秒倒计时')($scope,60);
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        }
                    break;
                    case '完成': 
                        if(data.success){
                            $filter('跳回上一页')();
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y')
                        }
                    break;
                };
            });
            $scope.onClick=function (name) {
                 switch(name){
                    case '发送短信验证码': 
                        resourceService.queryPost($scope,$filter('getUrl')('短信验证'),{
                            uid:$scope.user.uid,
                            type:1
                        },'短信验证码');
                    break;
                    case '完成': 
                        resourceService.queryPost($scope,$filter('getUrl')('完成设置交易密码提交'),$scope.pw,'完成');
                    break;
                };
            };
            $scope.toback=function () {
                        $filter('跳回上一页')();
                    };
        }
    ]);
})
;
/* 
* @Author: xyc
* @Date:   2016-01-18 23:29:04
*/


define('conttrollers/couponCtrl',[
    'webappControllers'
    , 'jquery'
    , 'ngdialog'
]
    , function (controllers, $, ngdialog) {

        controllers.controller('couponController'
            , ['$scope'
                , 'resourceService'
                , '$filter'
                , '$state'
                , '$rootScope'
                , '$localStorage'
                , '$location'
                , '$stateParams'
                , function ($scope, resourceService, $filter, $state, $rootScope, $localStorage
                    , $location, $stateParams) {
                    if ($localStorage.pathUrl.length > 0) {
                        $localStorage.pathUrl.splice($localStorage.pathUrl.length - 1, 1)
                    }
                    if (!$stateParams.cpid) {
                        delete $localStorage.coupon
                    }
                    $scope.toback = function () {
                        if ($localStorage.coupon) {
                            $state.go('investment', { cpid: $localStorage.coupon.id, amt: $stateParams.amt });
                        } else {
                            $state.go('investment', { amt: $stateParams.amt });
                        }
                    };
                    $scope.notUse = function () {
                        delete $localStorage.coupon;
                        $state.go('investment', { amt: $stateParams.amt });
                    }
                    $scope.myId = $location.$$search.cpid;
                    $scope.coupons = $localStorage.coupons;
                    $scope.amt = $stateParams.amt;
                    $scope.onClick = function (item) {
                        if (!item.canuse) return false
                        if ((item.enableAmount <= $scope.amt && (item.maxAmount == null || item.maxAmount >= $scope.amt)) || $scope.amt == null) {
                            $localStorage.coupon = item;
                            $state.go('investment', { cpid: item.id, amt: $stateParams.amt });
                        } else {
                            delete $localStorage.coupon;
                            $state.go('investment', { amt: $stateParams.amt });
                        }
                    };
                }
            ]);
    })
;
/* 
* @Author: xyc
* @Date:   2016-01-18 23:29:04
*/


define('conttrollers/myCouponCtrl',[
    'webappControllers'
    , 'jquery'
    , 'ngdialog'
]
    , function (controllers, $, ngdialog) {

        controllers.controller('myCouponCtrl'
            , ['$scope'
                , 'resourceService'
                , '$filter'
                , '$state'
                , '$rootScope'
                , '$localStorage'
                , '$location'
                , '$stateParams'
                , function ($scope, resourceService, $filter, $state, $rootScope, $localStorage, $location, $stateParams) {
                    if ($location.$$path.match(/myUselessCoupon/g)) {
                        $rootScope.title = '失效的优惠券';
                    } else {
                        $rootScope.title = '优惠券';
                    }

                    $scope.userOBJ = $filter('isRegister')();
                    $filter('isPath')('myCoupon');
                    if (!$scope.userOBJ.register) {
                        $state.go("dl");
                        return;
                    }
                    $scope.active = $stateParams.active || 0;
                    $scope.showDownload = true;
                    // console.log($scope.userOBJ);
                    if ($scope.userOBJ.user.member.toFrom == '16yy' || '18yy' == $scope.userOBJ.user.member.toFrom) {
                        $rootScope.isShowMaskError = true;
                        $rootScope.errorText = '投资新手标不参加此活动';

                    } else if ($scope.userOBJ.user.member.toFrom == '19yy') {
                        switch ($localStorage.maskType) {
                            case '1':
                                $rootScope.isShowMaskError = true;
                                $rootScope.errorText = '投资新手标不参加此活动';
                                break;
                            case '3':
                                $rootScope.isShowMaskError = true;
                                $rootScope.errorText = '投资新手标不参加此活动';
                                break;
                        };
                    }


                    if ($location.$$path.match(/myUselessCoupon/g)) {
                        $scope.active = 3;
                        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                            uid: $scope.userOBJ.user.member.uid,
                            status: 1
                        }, '我的红包')
                        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                            uid: $scope.userOBJ.user.member.uid,
                            status: 1
                        }, '已使用')
                        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                            uid: $scope.userOBJ.user.member.uid,
                            status: 2
                        }, '已过期')

                    } else {
                        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                            uid: $scope.userOBJ.user.member.uid,
                            flag: $scope.active + 2,
                            status: 0
                        }, '我的红包');
                        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                            uid: $scope.userOBJ.user.member.uid,
                            status: 0
                        }, '全部红包')
                    }
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                        switch (type) {
                            case '我的红包':
                                if (data.success) {
                                    $scope.coupons = data.map.list;
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y')
                                }
                                break;
                            case '已使用':
                                if (data.success) {
                                    $scope.hadUseLength = data.map.list.filter(function (item) {
                                        return item.type != 3
                                    }).length
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y')
                                }
                                break;
                            case '已过期':
                                if (data.success) {
                                    $scope.passLength = data.map.list.filter(function (item) {
                                        return item.type != 3
                                    }).length
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y')
                                }
                                break;
                            case '全部红包':
                                if (data.success) {
                                    $scope.backCashLength = data.map.list.filter(function (item) {
                                        return item.type === 1
                                    }).length
                                    $scope.addIncomeLength = data.map.list.filter(function (item) {
                                        return item.type === 2
                                    }).length
                                    $scope.doubleLength = data.map.list.filter(function (item) {
                                        return item.type === 4
                                    }).length
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y')
                                }
                                break;
                        };
                    });
                    $scope.onClick = function (num) {
                        $scope.active = num;
                        $scope.coupons = [];
                        if ($scope.active < 3) {
                            resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                                uid: $scope.userOBJ.user.member.uid,
                                flag: $scope.active + 2,
                                status: 0
                            }, '我的红包');
                        } else if ($scope.active >= 3) {
                            resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                                uid: $scope.userOBJ.user.member.uid,
                                status: $scope.active - 2
                            }, '我的红包');
                        }
                    };
                    $scope.toback = function () {
                        $filter('跳回上一页')(2);
                    };
                    var browser = {
                        versions: function () {
                            var u = navigator.userAgent,
                                app = navigator.appVersion;
                            return { //移动终端浏览器版本信息
                                trident: u.indexOf('Trident') > -1, //IE内核
                                presto: u.indexOf('Presto') > -1, //opera内核
                                webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                                gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                                mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                                ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                                android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                                iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                                iPad: u.indexOf('iPad') > -1, //是否iPad
                                webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                            };
                        }(),
                        language: (navigator.browserLanguage || navigator.language).toLowerCase()
                    }
                    function isWeiXin() {
                        var ua = window.navigator.userAgent.toLowerCase();
                        if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                            return true;
                        } else {
                            return false;
                        }
                    }
                    $scope.downloadapp = function () {
                        if (isWeiXin()) {
                            if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                                // $('.share-ios').fadeIn(200);
                                window.location.href = "http://m.zhuomilicai.com";
                            } else {
                                // $('.share-android').fadeIn(200);
                                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                            }
                        } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                            window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
                        } else if (browser.versions.android) {
                            window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                        } else {
                            window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
                        }
                    };
                    $scope.closethis = function () {
                        $('.share-ios,.share-android').fadeOut(200);
                    };
                }
            ]);
    })
;

/* 
* @Author: lee
* @Date:   2016-05-24 
*/


define('conttrollers/rechargeCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('rechargeController'
        ,['$scope'
        ,'$filter'
        ,'$state'
        ,'$interval'
        ,'$rootScope'
        ,'resourceService'
        ,'ngDialog'
        ,'$stateParams'
        ,'$localStorage'
        ,function($scope,$filter,$state,$interval,$rootScope,resourceService,ngDialog,$stateParams,$localStorage){
            $rootScope.title="充值";
            $scope.userOBJ=$filter('isRegister')();
            $scope.code = {};
            $scope.code.getCodeText = '获取验证码';
            $scope.recharge = {};
            $scope.fuyouObj = {};
            $scope.height = {
                height: window.innerHeight + 'px'
            }
            ngDialog.closeAll();
            if($stateParams.from=='home' && $localStorage.cp){
                delete $localStorage.cp;
            }
            $scope.changcheng2 = false;
            if($stateParams.from == 'changcheng2'){
                $scope.changcheng2 = true;
            }
            resourceService.queryPost($scope, $filter('getUrl')('充值'), {
                    uid:$scope.userOBJ.user.member.uid,
                    token:$scope.userOBJ.user.token
            }, {name:'充值'});

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type.name){
                    case '充值': 
                        if(data.success){
                            $scope.recharge = data.map;
                            if(data.map.sysArticleList.length>0){
                                $scope.message = data.map.sysArticleList[0].summaryContents;
                            }
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        }
                    break;
                    case '创建订单': 
                        if(data.success){
                            $scope.recharge.payNum = data.map.payNum;
                            $filter('充值弹窗')($scope);
                        }else{
                            $filter('提现申请错误信息')(data.errorCode);
                        }
                    break;
                    case '充值验证码':
                        if (data.success) {
                            if (type.isvoice) {
                                $scope.isGetVoice = true;
                            } else {
                                $scope.isGetVoice = false;
                            }

                            // item.times = 59;
                            if (!type.isvoice || (type.isvoice && !type.item.isGetCode)) {
                                if (!type.isvoice) {
                                    type.item.isGetCode = true;
                                }
                                type.item.timer = $interval(function(){
                                    if (type.item.times == 0) {
                                        $interval.cancel(type.item.timer);
                                        type.item.getCodeText = '获取验证码';
                                        $scope.isGetVoice = false;
                                        type.item.isGetCode = false;
                                        type.item.times = 59;
                                        $('.getcode').removeClass('getcode-disabled');
                                        return;
                                    }
                                    type.item.getCodeText = type.item.times + 's重新获取';
                                    type.item.times --;
                                }, 1000);
                            }
                        } else {
                            $('.getcode').removeClass('getcode-disabled');
                            $filter('充值验证码error信息')(data.errorCode);
                        }
                    break;
                    case '认证充值': 
                        if(data.success){
                            $scope.successAmount = data.map.amount;
                            if (data.map.src != undefined) {
                                ngDialog.closeAll();
                                $scope.giftFlag = true;
                            } else {
                                $scope.giftFlag = false;
                                $filter('充值成功')($scope);
                            }
                        }
                        else{
                            if (data.errorCode == '1004') {
                                $filter('充值成功')($scope,'ing');
                            } else {
                                $scope.isSubmitDialog = false;
                                // if (data.errorCode == '1003') {
                                //     ngDialog.open({
                                //         template: '<p class="error-msg">验证码错误</p>',
                                //         showClose: false,
                                //         closeByDocument: true,
                                //         plain: true
                                //     });
                                // } else {
                                    $filter('认证充值错误信息')(data.errorCode);
                                // }
                            }
                        }
                    break;
                    case 'goRecharge':
                        $scope.fuyouObj = data.map;
                        document.getElementById('fuyouForm').action = data.map.submit_url;
                        setTimeout(function(){
                            document.getElementById('fuyouForm').submit();
                        }, 400)

                    break;
                };
            });
            $scope.closeGift = function() {
                $state.go('main.myaccountHome');
                $scope.giftFlag = false;
            }

            $scope.fuyouSubmit = function() {
                console.log('lll')
            }

            // onblur将金额保留两位小数
            $scope.setAmount = function(event) {
                if ($scope.rechargeForm.recharge.$error.pattern) {
                    $filter('充值错误信息')('pattern',$scope);
                } else if ($scope.rechargeForm.recharge.$error.more3) {
                    $filter('充值错误信息')('more3',$scope);
                } else if ($scope.rechargeForm.recharge.$error.rechargelimit) {
                    $filter('充值错误信息')('rechargelimit',$scope);
                } else if ($scope.rechargeForm.recharge.$error.required) {
                    $filter('充值错误信息')('required',$scope);
                }
                // $scope.recharge.amount = $filter('isNumber2')($scope.recharge.amount,undefined,1);
            };

            // 提交表单
            $scope.submitForm = function(valid) {
                if (!valid || $scope.isSubmit) {
                    return;
                }
                $scope.isSubmit = true;
                // resourceService.queryPost($scope, $filter('getUrl')('创建订单'),{
                //     amount: $scope.recharge.amount,
                //     uid:$scope.userOBJ.user.member.uid
                // },{name:'创建订单'});
                resourceService.queryPost($scope, $filter('getUrl')('goRecharge'),{
                    amount: $scope.recharge.amount,
                    uid:$scope.userOBJ.user.member.uid,
                    channel:3,
                    source:'h5',
                },{name:'goRecharge'});
            };

            $scope.submitDialogForm = function(valid) {
                if (!valid || $scope.isSubmitDialog) {
                    return;
                }
                $scope.isSubmitDialog = true;
                resourceService.queryPost($scope, $filter('getUrl')('认证充值'),{
                    payNum: $scope.recharge.payNum,
                    smsCode: $scope.recharge.phonecode,
                    uid:$scope.userOBJ.user.member.uid
                },{name:'认证充值'});
            };
            $scope.code.times = 59;
            $scope.getPhoneCode = function(entrance, event, item, isvoice) {
                var type = 1;
                
                if (!$filter('isRegister')().register) {
                    return;
                }
                var $this = $(event.currentTarget);
                if ($this.hasClass('getcode-disabled')) {
                    return;
                }
                $this.addClass('getcode-disabled');

                resourceService.queryPost($scope, $filter('getUrl')('充值验证码'),{
                    type: type,
                    payNum: $scope.recharge.payNum,
                    uid:$scope.userOBJ.user.member.uid
                },{name:'充值验证码',isvoice:isvoice,item:item});
            };
            $scope.toback=function () {
                        $filter('跳回上一页')();
                    };
        }
    ]);
});
define('conttrollers/myassetsCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('myAssetsCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,function($scope,$rootScope,$filter,$state,resourceService){
            $rootScope.title="我的资产";
            $scope.userOBJ=$filter('isRegister')();

            resourceService.queryPost($scope, $filter('getUrl')('我的资产'), {
                    uid:$scope.userOBJ.user.member.uid
            }, '我的资产');

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '我的资产': 
                        if(data.success){
                            $scope.user = data.map.funds;
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        };
                    break;
                }
            });
            $scope.toback=function () {
                $filter('跳回上一页')();
            };
        }
    ]);
});
define('conttrollers/myInvestCtrl',[
    'webappControllers'
    , 'asPieProgress'
    , 'rainbow'
]
    , function (controllers) {
        controllers.controller('myInvestCtrl'
            , ['$scope'
                , '$rootScope'
                , '$filter'
                , '$state'
                , 'resourceService'
                , '$localStorage'
                , '$stateParams'
                , function ($scope, $rootScope, $filter, $state, resourceService, $localStorage, $stateParams) {
                    $rootScope.title = "我的投资";
                    $scope.userOBJ = $filter('isRegister')();
                    $filter('isPath')('myInvest');
                    $scope.showMode = $stateParams.tab ? $stateParams.tab : 1;
                    $scope.one = {
                        request: false,
                        status: 4,
                        beforePage: 2,
                        pageOn: 1,
                        pro: [],
                        isLoad: true
                    };
                    var oneArr = [];
                    $scope.two = {
                        request: false,
                        status: 3,
                        beforePage: 2,
                        pageOn: 1,
                        pro: [],
                        isLoad: true
                    };
                    $scope.three = {
                        request: false,
                        status: 0,
                        beforePage: 2,
                        pageOn: 1,
                        pro: [],
                        isLoad: true
                    };
                    $scope.linkDetail = function (item) {
                        $state.go('myInvestDetail', {
                            info: JSON.stringify(item)
                        })
                    }
                    $scope.getData = function (item, proItem) {
                        $scope.member = {
                            uid: $scope.userOBJ.user.member.uid,
                            status: item.status,
                            pageOn: item.pageOn,
                            pageSize: 5
                        };
                        if (item.request == false) {
                            resourceService.queryPost($scope, $filter('getUrl')('我的投资'), $scope.member, { name: '我的投资', item: item });
                            item.request = true;
                        } else {
                            if (item.isLoad) {
                                if (proItem.id == item.pro[item.pro.length - 1].id) {
                                    if (item.beforePage != item.pageOn) {
                                        $scope.member.pageOn = item.beforePage;
                                        resourceService.queryPost($scope, $filter('getUrl')('我的投资'), $scope.member, { name: '我的投资', item: item });
                                        item.isLoad = false;
                                    }
                                }
                            }
                        }
                    };
                    if ($stateParams.tab == 1) {
                        $scope.getData($scope.one);
                    } else if ($stateParams.tab == 2) {
                        $scope.getData($scope.two);
                    } else {
                        $scope.getData($scope.one);
                    }
                    $scope.toback = function () {
                        $filter('跳回上一页')(2);
                    };
                    $scope.goCashed = function (item) {
                        $state.go("mycashed", { cashedId: item.id });
                    }
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                        switch (type.name) {
                            case '我的投资':
                                if (data.success) {
                                    type.item.user = data.map;
                                    $scope.userInfo = data.map;
                                    type.item.pageOn = data.map.page.pageOn;
                                    if (type.item.beforePage == type.item.pageOn) {
                                        type.item.isLoad = true;
                                    }
                                    if (data.map.page.pageOn <= data.map.page.totalPage) {
                                        type.item.beforePage = data.map.page.pageOn + 1;
                                        for (var i = 0; i < data.map.page.rows.length; i++) {
                                            type.item.pro.push(data.map.page.rows[i]);
                                        }
                                    } else {
                                        type.item.isLoad = false;
                                    }
                                } else {
                                    $filter('服务器信息')(data.errorCode, $scope, 'y');
                                }
                                break;
                        }
                    });

                    $scope.upDownClick = function (event) {
                        var $this = $(event.currentTarget),
                            $thisCon = $this.parents('.con');
                        if ($thisCon.hasClass('active')) {
                            $thisCon.removeClass('active');
                        } else {
                            $thisCon.addClass('active');
                        }
                    };

                    $scope.changeMode = function (type) {
                        var $triggerAct = $('.trigger-wrap .active');
                        switch (type) {
                            case 1:
                                $scope.showMode = 1;
                                if ($scope.one.request == false) {
                                    $scope.getData($scope.one);
                                }
                                break;
                            case 2:
                                $scope.showMode = 2;
                                if ($scope.two.request == false) {
                                    $scope.getData($scope.two);
                                }
                                break;
                            case 3:
                                $scope.showMode = 3;
                                if ($scope.three.request == false) {
                                    $scope.getData($scope.three);
                                }
                                break;
                        }
                    };

                }
            ]);
    });
define('conttrollers/myInvestDetailCtrl',[
    'webappControllers'
    , 'asPieProgress'
    , 'rainbow'
], function (controllers) {
    controllers.controller('myInvestDetailCtrl'
        , ['$scope'
            , '$rootScope'
            , '$filter'
            , '$state'
            , 'resourceService'
            , '$localStorage'
            , '$stateParams'
            , function ($scope, $rootScope, $filter, $state, resourceService, $localStorage, $stateParams) {
                $filter('isPath')('myInvestDetail')
                $scope.protocol = $filter('protocolFilter')()
                $scope.title = '投资详情'
                $scope.info = $localStorage.investDetail = JSON.parse($stateParams.info) || $localStorage.investDetail
                $scope.toback = function () {
                    $filter('跳回上一页')(2)
                }
                $scope.goCashed = function () {
                    $state.go("mycashed", { cashedId: $scope.info.id })
                }
                $scope.goProductionDetail = function () {
                    $state.go("cpDetail", { pid: $scope.info.pid })
                }
            }
        ])
});
define('conttrollers/myInvitationCtrl',['jweixin', 'webappControllers'], function (wx, controllers) {
    controllers.controller('myInvitationCtrl', function ($scope, $rootScope, $filter, $state, resourceService, isWeixin, signWeChatService) {
        // signWeChatService();
        $('body').scrollTop(0);
        $rootScope.title = "我的邀请";
        $scope.userOBJ = $filter('isRegister')();
        if ($scope.userOBJ.register) {
            resourceService.queryPost($scope, $filter('getUrl')('我的邀请'), { uid: $scope.userOBJ.user.member.uid }, '我的邀请');
        } else {
            $state.go('dl');
            return;
        };
        $scope.protocol = $filter('protocolFilter')()
        $scope.invitePerson = '';
        if ($scope.userOBJ.user.member.realName) {
            var name = $scope.userOBJ.user.member.realName;
            $scope.invitePerson = $filter('mosaic')(name)
        } else {
            var mobile = $scope.userOBJ.user.member.mobilephone;
            $scope.invitePerson = $filter('mosaic')(mobile)
        }


        // 分享相关
        $scope.share = function () {
            if (isWeixin()) {
                $('.activity-firend-boxweixin').fadeIn(150);
            } else {
                $('.fixed-box').fadeIn(200);
            }
        };
        $scope.closeshareweixin = function () {
            $('.activity-firend-boxweixin').fadeOut(150);
        };
        $scope.closeshare = function () {
            $('.fixed-box').fadeOut(200);
        };
        $scope.default = function (event) {
            event.stopPropagation();
        };
        // 领取奖金
        $scope.lingqu = function () {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.userOBJ.user.member.uid, afid: $scope.data.threePresentAfid }, '领取奖励');
        };
        $scope.closehongbao = function () {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '我的邀请':
                    if (data.success) {
                        $scope.data = data.map;
                        $scope.firstInvestList = data.map.firstInvestList;
                        $scope.repeatInvestList = data.map.repeatInvestList;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
                case '领取奖励':
                    if (data.success) {
                        $scope.hongbaoAmount = data.map.amount;
                        $('.activity-firend-hongbao').fadeIn(200);
                        resourceService.queryPost($scope, $filter('getUrl')('我的邀请'), { uid: $scope.userOBJ.user.member.uid, }, '我的邀请');
                    }
                    break;
            };
        });
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        var linkstr = "";
        if ($scope.userOBJ.user && $scope.userOBJ.user.member.mobilephone) {
            linkstr = 'recommCode=' + $scope.userOBJ.user.member.mobilephone + '&';
        }
        if ($scope.invitePerson) {
            linkstr += 'invitePerson=' + $scope.invitePerson;
        }
        // 三重礼邀请
        $filter('微信邀请分享-邀请')(linkstr)
    });
}) ;
define('conttrollers/myInfoCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('myInfoCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,function($scope,$rootScope,$filter,$state,resourceService){
            $rootScope.title="我的信息";
            $scope.userOBJ=$filter('isRegister')();

            $filter('isPath')('myInfo');

            resourceService.queryPost($scope, $filter('getUrl')('我的信息'), {
                uid:$scope.userOBJ.user.member.uid
            }, '我的信息');

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '我的信息': 
                        if(data.success){
                            $scope.user = data.map;
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        }
                    break;
                };
            });

            $scope.toback=function () {
                $filter('跳回上一页')(2);
            };

            $scope.out=function (argument) {
                switch(argument){
                    case 'out': 
                        $filter('清空缓存')();
                        $state.go('main.home');
                    break;
                };
            };
            
        }
    ]);
});
define('conttrollers/myBankCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('myBankCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,function($scope,$rootScope,$filter,$state,resourceService){
            $rootScope.title="我的银行卡";
            $scope.userOBJ=$filter('isRegister')();

            resourceService.queryPost($scope, $filter('getUrl')('我的银行卡'), {
                uid:$scope.userOBJ.user.member.uid
            }, '我的银行卡');

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '我的银行卡': 
                        if(data.success){
                            $scope.user = data.map;
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        }
                    break;
                };
            });

            $scope.toback=function () {
                $filter('跳回上一页')();
            };
            
        }
    ]);
});
define('conttrollers/myMessageCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('myMessageCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,function($scope,$rootScope,$filter,$state,resourceService){

            $rootScope.title="我的消息";
            $scope.userOBJ=$filter('isRegister')();
            $scope.showMode = 1;

            $scope.trade = {
                request: false,
                type: 3,
                beforePage: 2,
                pageOn: 1,
                pro: [],
                isLoad: true
            };
            $scope.act = {
                request: false,
                type: 2,
                beforePage: 2,
                pageOn: 1,
                pro: [],
                isLoad: true
            };
            $scope.system = {
                request: false,
                type: 1,
                beforePage: 2,
                pageOn: 1,
                pro: [],
                isLoad: true
            };

            $scope.getData = function(item,proItem) {
                $scope.member = {
                    uid: $scope.userOBJ.user.member.uid,
                    type: item.type,
                    pageOn: item.pageOn,
                    pageSize: 5
                };
                if (item.request == false) {
                    resourceService.queryPost($scope, $filter('getUrl')('我的消息'),$scope.member,{name:'我的消息',item:item});
                    item.request = true;
                } else {
                    if (item.isLoad) {
                        if (proItem.id == item.pro[item.pro.length - 1].id) {
                            if (item.beforePage != item.pageOn) {
                                $scope.member.pageOn = item.beforePage;
                                resourceService.queryPost($scope, $filter('getUrl')('我的消息'),$scope.member,{name:'我的消息',item:item});
                                item.isLoad = false;        
                            }
                        }
                    }
                }
            };

            $scope.getData($scope.trade);

            $scope.toback=function () {
                $filter('跳回上一页')();
            };

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type.name){
                    case '我的消息': 
                        if(data.success){
                            $scope.user = data.map;
                            type.item.pageOn = data.map.page.pageOn;
                            if (type.item.beforePage == type.item.pageOn) {
                                type.item.isLoad = true;
                            }
                            if (data.map.page.pageOn <= data.map.page.totalPage) {
                                type.item.beforePage = data.map.page.pageOn + 1;
                                for (var i = 0; i < data.map.page.rows.length; i++) {
                                    type.item.pro.push(data.map.page.rows[i]);
                                }
                            } else {
                                type.item.isLoad = false;
                            }
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        }
                    break;
                }
            });

            $scope.changeMode = function(type) {
                var $triggerAct = $('.trigger-wrap .active');
                switch(type) {
                    case 1: 
                        $scope.showMode = 1;
                        if ($scope.trade.request == false) {
                            $scope.getData($scope.trade);
                        }
                    break;
                    case 2: 
                        $scope.showMode = 2;
                        if ($scope.act.request == false) {
                            $scope.getData($scope.act);
                        }
                    break;
                    case 3: 
                        $scope.showMode = 3;
                        if ($scope.system.request == false) {
                            $scope.getData($scope.system);
                        }
                    break;
                }
            };
            
        }
    ]);
});
/*站内信*/

define('conttrollers/znMessageCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('znMessageCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,function($scope,$rootScope,$filter,$state,resourceService){

            $rootScope.title="我的消息";
            $scope.userOBJ=$filter('isRegister')();
            $scope.showMode = 1;

            $scope.trade = {
                request: false,
                type: 3,
                beforePage: 2,
                pageOn: 1,
                pro: [],
                isLoad: true
            };
            $scope.act = {
                request: false,
                type: 2,
                beforePage: 2,
                pageOn: 1,
                pro: [],
                isLoad: true
            };
            $scope.system = {
                request: false,
                type: 1,
                beforePage: 2,
                pageOn: 1,
                pro: [],
                isLoad: true
            };

            $scope.getData = function(item,proItem) {
                // console.log(item);
                $scope.member = {
                    uid: $scope.userOBJ.user.member.uid,
                    type: item.type,
                    pageOn: item.pageOn,
                    pageSize: 5
                };
                if (item.request == false) {
                    resourceService.queryPost($scope, $filter('getUrl')('站内信'),$scope.member,{name:'站内信',item:item});
                    item.request = true;
                } else {
                    if (item.isLoad) {
                        if (proItem.id == item.pro[item.pro.length - 1].id) {
                            if (item.beforePage != item.pageOn) {
                                $scope.member.pageOn = item.beforePage;
                                resourceService.queryPost($scope, $filter('getUrl')('站内信'),$scope.member,{name:'站内信',item:item});
                                item.isLoad = false;        
                            }
                        }
                    }
                }
            };

            $scope.onClick = function(num) {
                resourceService.queryPost($scope, $filter('getUrl')('站内信'),$scope.member,{name:'站内信'});
            };

            $scope.getData($scope.trade);

            $scope.toback=function () {
                $filter('跳回上一页')();
            };

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type.name){
                    case '站内信': 
                        if(data.success){
                            $scope.user = data.map;
                            type.item.pageOn = data.map.page.pageOn;
                            if (type.item.beforePage == type.item.pageOn) {
                                type.item.isLoad = true;
                            }
                            if (data.map.page.pageOn <= data.map.page.totalPage) {
                                type.item.beforePage = data.map.page.pageOn + 1;
                                for (var i = 0; i < data.map.page.rows.length; i++) {
                                    type.item.pro.push(data.map.page.rows[i]);
                                }
                            } else {
                                type.item.isLoad = false;
                            }
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        }
                    break;
                }
            });

            $scope.changeMode = function(type) {
                var $triggerAct = $('.trigger-wrap .active');
                switch(type) {
                    case 1: 
                        $scope.showMode = 1;
                        if ($scope.trade.request == false) {
                            $scope.getData($scope.trade);
                        }
                    break;
                    case 2: 
                        $scope.showMode = 2;
                        if ($scope.act.request == false) {
                            $scope.getData($scope.act);
                        }
                    break;
                    case 3: 
                        $scope.showMode = 3;
                        if ($scope.system.request == false) {
                            $scope.getData($scope.system);
                        }
                    break;
                }
            };
        }
    ]);
});
define('conttrollers/tradepwdCtrl',[
    'webappControllers'
]
    , function (controllers) {
        controllers.controller('tradepwdCtrl'
            , ['$scope'
                , '$rootScope'
                , '$filter'
                , '$state'
                , 'resourceService'
                , '$interval'
                , '$stateParams'
                , function ($scope, $rootScope, $filter, $state, resourceService, $interval, $stateParams) {

                    $scope.userOBJ = $filter('isRegister')();
                    $scope.isGetCode = false;
                    $scope.times = 59;
                    $scope.isSubmit = false;
                    $scope.showCode = false;

                    if ($stateParams.firstset == 'true') {
                        $rootScope.title = "设置交易密码";
                        $scope.firstset = true;
                    } else if ($stateParams.firstset == 'false') {
                        $rootScope.title = "重置交易密码";
                        $scope.firstset = false;
                    }

                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                        switch (type) {
                            case '交易密码重置短信验证码':
                                if (data.success) {
                                    $scope.isGetCode = true;
                                    $scope.timer = $interval(function () {
                                        if ($scope.times == 1) {
                                            $interval.cancel($scope.timer);
                                            $scope.isGetCode = false;
                                            $scope.times = 59;
                                            return;
                                        }
                                        $scope.times--;
                                    }, 1000);
                                } else {
                                    $filter('重置交易密码短信验证码错误信息')(data.errorCode);
                                }
                                break;
                            case '设置交易密码':
                                if (data.success) {
                                    $filter('重置交易密码成功')($rootScope.title + '成功', $scope);
                                } else {
                                    $filter('重置交易密码错误信息')(data.errorCode, $scope)
                                }
                                break;
                        };
                    });

                    $scope.getCode = function () {
                        if ($scope.isGetCode) {
                            return;
                        }
                        resourceService.queryPost($scope, $filter('getUrl')('交易密码重置短信验证码'), {
                            uid: $scope.userOBJ.user.member.uid,
                            type: 1
                        }, '交易密码重置短信验证码');
                        // $scope.isGetCode = true;
                    };

                    $scope.setInput = function (name) {
                        switch (name) {
                            case 'code':
                                if ($scope.tpwdSetForm.code.$error.required) {
                                    $filter('修改交易密码错误信息')('codeRequired', $scope);
                                }
                                break;
                            case 'tpwd':
                                if ($scope.tpwdSetForm.tpwd.$error.pattern) {
                                    $filter('修改交易密码错误信息')('tpwdPattern', $scope);
                                } else if ($scope.tpwdSetForm.tpwd.$error.required) {
                                    $filter('修改交易密码错误信息')('tpwdRequired', $scope);
                                }
                                break;
                            case 'retpwd':
                                if ($scope.tpwdSetForm.retpwd.$error.pattern) {
                                    $filter('修改交易密码错误信息')('tpwdPattern', $scope);
                                } else if ($scope.tpwdSetForm.retpwd.$error.required) {
                                    $filter('修改交易密码错误信息')('tpwdRequired', $scope);
                                }
                                break;
                        }
                    };

                    // 提交表单
                    $scope.submitForm = function (valid) {
                        if (!valid || $scope.isSubmit) {
                            return;
                        }
                        $scope.isSubmit = true;
                        resourceService.queryPost($scope, $filter('getUrl')('设置交易密码'), {
                            tpwd: $scope.trade.tpwd,
                            smsCode: $scope.trade.code,
                            uid: $scope.userOBJ.user.member.uid
                        }, '设置交易密码');
                    };

                    $scope.toback = function () {
                        $filter('跳回上一页')();
                    };

                }
            ]);
    });
define('conttrollers/pwdCtrl',[
    'webappControllers'
]
    , function (controllers) {
        controllers.controller('pwdCtrl'
            , ['$scope'
                , '$rootScope'
                , '$filter'
                , '$state'
                , 'resourceService'
                , '$interval'
                , '$stateParams'
                , function ($scope, $rootScope, $filter, $state, resourceService, $interval, $stateParams) {
                    $rootScope.title = "重置登录密码";
                    $scope.userOBJ = $filter('isRegister')();
                    $scope.isGetCode = false;
                    $scope.times = 59;
                    $scope.isSubmit = false;
                    $scope.showCode = false;
                    $scope.toback = function () {
                        // $filter('跳回上一页')();
                        $state.go('dl')
//						$state.go('findPwd')
                    };
                    if ($stateParams.forget == 'false') {
                        $scope.forget = false;
                    } else if ($stateParams.forget == 'true') {
                        $scope.forget = true;
                    }

                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                        switch (type) {
                            case '登录密码重置短信验证码':
                                if (data.success) {
                                    $scope.timer = $interval(function () {
                                        if ($scope.times == 1) {
                                            $interval.cancel($scope.timer);
                                            $scope.isGetCode = false;
                                            $scope.times = 59;
                                            return;
                                        }
                                        $scope.times--;
                                    }, 1000);
                                } else {
                                    $filter('登录交易密码短信验证码错误信息')(data.errorCode);
                                    $scope.isGetCode = false;
                                }
                                break;
                            case '设置登录密码':
                                if (data.success) {
                                    $filter('重置密码成功')('重置登录密码成功', $scope);
                                } else {
                                    $filter('重置交易密码错误信息')(data.errorCode, $scope)
                                }
                                break;
                        };
                    });

                    $scope.getCode = function () {
                        if ($scope.isGetCode) {
                            return;
                        }
                        var obj = {};
                        if ($scope.userOBJ.register) {//登录了
                            if ($scope.forget == false) {
                                obj = {
                                    uid: $scope.userOBJ.user.member.uid,
                                    type: 1
                                };
                            } else if ($scope.forget == true) {
                                obj = {
                                    mobilephone: $scope.userOBJ.user.member.mobilephone,
                                    type: 1
                                };
                            }
                        } else {//没登录
                            obj = {
                                mobilephone: $('#mobilephone').val(),
                                type: 1
                            };
                        }
                        resourceService.queryPost($scope, $filter('getUrl')('登录密码重置短信验证码'), obj, '登录密码重置短信验证码');
                        $scope.isGetCode = true;
                    };

                    $scope.setInput = function (name) {
                        console.log($scope.pwdSetForm);
                        switch (name) {
                            case 'code':
                                if ($scope.pwdSetForm.code.$error.required) {
                                    $filter('修改登录密码错误信息')('codeRequired', $scope);
                                }
                                break;
                            case 'pwd':
                                if ($scope.pwdSetForm.pwd.$error.pattern) {
                                    $filter('修改登录密码错误信息')('pwdPattern', $scope);
                                } else if ($scope.pwdSetForm.pwd.$error.required) {
                                    $filter('修改登录密码错误信息')('pwdRequired', $scope);
                                }
                                break;
                            case 'repwd':
                                if ($scope.pwdSetForm.repwd.$error.pattern) {
                                    $filter('修改登录密码错误信息')('pwdPattern', $scope);
                                } else if ($scope.pwdSetForm.repwd.$error.required) {
                                    $filter('修改登录密码错误信息')('pwdRequired', $scope);
                                }
                                break;
                        }
                    };

                    // 提交表单
                    $scope.submitForm = function (valid) {


                        if (!valid || $scope.isSubmit) {
                            return;
                        }
                        $scope.isSubmit = true;
                        var obj = {};
                        if ($scope.userOBJ.register) {//登录了
                            if ($scope.forget == false) {
                                obj = {
                                    pwd: $scope.pwd.pwd,
                                    smsCode: $scope.pwd.code,
                                    uid: $scope.userOBJ.user.member.uid
                                };
                            } else if ($scope.forget == true) {
                                obj = {
                                    pwd: $scope.pwd.pwd,
                                    smsCode: $scope.pwd.code,
                                    mobilephone: $scope.userOBJ.user.member.mobilephone,
                                };
                            }
                        } else {//没登录
                            obj = {
                                mobilephone: $('#mobilephone').val(),
                                pwd: $scope.pwd.pwd,
                                smsCode: $scope.pwd.code
                            };
                        }

                        resourceService.queryPost($scope, $filter('getUrl')('设置登录密码'), obj, '设置登录密码');
                    };
                }
            ]);
    });
define('conttrollers/app/CP080Ctrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('CP080Ctrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,'$interval'
        ,'$stateParams'
        ,function($scope,$rootScope,$filter,$state,resourceService,$interval,$stateParams){

            resourceService.queryPost($scope, $filter('getUrl')('银行限额列表'),{},'银行限额列表');

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '银行限额列表': 
                        if(data.success){
                            $scope.bankList = data.map;
                        }else{
                        }
                    break;
                };
            });
        }
    ]);
});
/* 
* @Author: si
* @Date:   2016-07-18
*/



define('conttrollers/spiderCtrl',[
    'webappControllers'
    ,'ngdialog'
    ]
    ,function(controllers,ngdialog){

    controllers.controller('spiderCtrl'
        ,['$scope','$rootScope'
        ,function($scope,$rootScope){

            $rootScope.title='注册投资领电影票';

            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            var toFrom = getUrlParam('toFrom');
            $scope.toFrom = toFrom;
        }
    ])
});
define('conttrollers/inviteCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('inviteCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,function($scope,$rootScope,$filter,$state,resourceService){
            $rootScope.title="邀请小伙伴，理财更轻松";
            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            $scope.uid = getUrlParam('uid');
            $scope.wap = getUrlParam('wap');

            var upgrade = getUrlParam('upgrade');
            if(upgrade >=0){
                $scope.upgrade = false;
            }else{
                $scope.upgrade = true;
            }
            if (getUrlParam('uid') == '' || getUrlParam('uid') == undefined) {
                $scope.isLogin = false;
            } else {
                $scope.isLogin = true;
                resourceService.queryPost($scope, $filter('getUrl')('好友互推'), {
                    uid:$scope.uid,
                    pageOn:1,
                    pageSize:5
                }, '好友互推');
            }
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '好友互推': 
                        if(data.success){
                            $scope.list = data.map.list;
                            if ($scope.list.length == 0) {
                                $scope.nolist = true;
                            } else {
                                $scope.nolist = false;
                            }
                        }else{
                            
                        }
                    break;
                };
            });
        }
    ]);
});
/* 
* @Author: si
* @Date:   2016-07-18
*/



define('conttrollers/activity/cp124Ctrl',[
    'webappControllers'
    ,'ngdialog'
    ]
    ,function(controllers,ngdialog){

    controllers.controller('cp124Ctrl'
        ,['$scope'
        ,'$rootScope'
        ,function($scope,$rootScope){

            $rootScope.title='100%领取小米手环';

            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            var toFrom = getUrlParam('toFrom');
            $scope.toFrom = toFrom;
        }
    ])

    // cp117Ctrl
    controllers.controller('cp117Ctrl'
        ,['$scope', '$rootScope'
        , 'resourceService'
        , '$filter'
        , '$state'
        , '$stateParams'
        , '$location'
        , '$localStorage'
        ,function($scope, $rootScope, resourceService, $filter, $state,$stateParams,$location,$localStorage){

            $rootScope.title='疯狂补刀';

            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            };
            var toFrom = getUrlParam('toFrom');
            $scope.toFrom = toFrom;
            $scope.showTitel=$stateParams.wap;
            $scope.pid=getUrlParam('pid');
            $scope.isShowRule=getUrlParam('isShowRule');
        }
    ])
})

;
/* 
* @Author: si
* @Date:   2016-07-18
*/



define('conttrollers/sendmaskCtrl',[
    'webappControllers'
    ,'ngdialog'
    ]
    ,function(controllers,ngdialog){

    controllers.controller('sendmaskCtrl'
        ,['$scope','$rootScope'
        ,function($scope,$rootScope){

            $rootScope.title='啄米理财携手SK-II 送您美肌套餐';

            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            var toFrom = getUrlParam('toFrom');
            $scope.toFrom = toFrom;
            $scope.type = getUrlParam('type');
            $scope.showMask = true;
            $scope.type = getUrlParam('type');
        }
    ])
});
/* 
* @Author: si
* @Date:   2016-07-18
*/



define('conttrollers/auntCtrl',[
    'webappControllers'
    ,'ngdialog'
    ]
    ,function(controllers,ngdialog){

    controllers.controller('auntCtrl'
        ,['$scope','$rootScope'
        ,function($scope,$rootScope){

            $rootScope.title='100%领取SK-II面膜/小米手环';

            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            var toFrom = getUrlParam('toFrom');
            $scope.toFrom = toFrom;
            $scope.showMask = true;
        }
    ])
});
define('conttrollers/aqbzCtrl',[
    'webappControllers','jquery'
    ]
    ,function(controllers,$){
    controllers.controller('aqbzCtrl'
        ,['$scope',function($scope){
            $scope.title="安全保障";
            $scope.showFile = false;
            $scope.showMore=function(e){
            	var elm=$(e.currentTarget);
            	var padding=parseInt(elm.siblings().css("padding-bottom"))+parseInt(elm.parent().css("padding-bottom"));
            	var parent=elm.parent().parent();
            	$scope.height=parent.height();
            	var h=parseInt(elm.siblings().find("p").height());
            	parent.css({height:h+padding}).siblings(".aqbzContent-box").height($scope.height).find(".more").show();
            	elm.hide();
            }
            $scope.wap = getUrlParam('wap');
            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            var $win = $(window);
            $win.on('load resize scroll', function() {
                $('.aqbzcheck-wrap').height()
                $('.aqbzcheck-box').height($win.height()).width($win.width());
                $('.aqbzcheck-box img').css('max-height',$win.height()).css('max-width',$win.width());
            });
        }
    ]);
});
define('conttrollers/newcomerCtrl',[
    'webappControllers', 'jquery'
]
    , function (controllers, $) {
        controllers.controller('newcomerCtrl'
            , ['$scope', 'resourceService', '$filter', '$location', '$localStorage', '$rootScope', '$state','$anchorScroll', function ($scope, resourceService, $filter, $location, $localStorage, $rootScope, $state,$anchorScroll) {
                $scope.showshare = $location.$$search.fromPcWindow;
                if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
                    $localStorage.webFormPath = $location.$$search;
                };
                $scope.wap = $location.$$search.wap ? $location.$$search.wap : null;
                if($scope.wap){
                    $state.go('tyj',{wap:true});
                }
                else{
                    $state.go('tyj');
                }
                function getUrlParam(name) {
                    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                    var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                    if (r != null) return unescape(r[2]); return null; //返回参数值
                }
                // resourceService.queryPost($scope, $filter('getUrl')('selectInvest'), {}, { name: '获取新手投资列表'});
                $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                    switch (type.name) {
                        // case '获取新手投资列表': 
                        // if (data.success) {
                        //     var array=angular.fromJson(data.map.invest100);
                        //     for(var i=0;i<5;i++){
                        //         array.push(array[i]);
                        //     }
                        //     $scope.newcomerList=array;
                        // }
                        // break;
                        case '注册验证手机号':
                            if (data.success) {
                                if (data.map.exists) { //已有用户名
                                    $rootScope.errorText = '此手机已注册';
                                    $rootScope.maskError = true;
                                } else {
                                    $state.go('newRegister', { phone: $scope.mobilephone})
                                };
                            }
                            break;
                    }
                });
                $scope.click = function (tegForm) {
                    if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                        resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                            mobilephone: $scope.mobilephone
                        }, { name: '注册验证手机号', tegForm: tegForm });
                    }
                    else {
                        $rootScope.errorText = '请填写有效手机号码';
                        $rootScope.maskError = true;
                    }
                };
                $scope.toTop = function(){
                    $location.hash('top');
                    $anchorScroll();
                }



            }
            ])
    });
define('conttrollers/NewRegisterController',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('NewRegisterController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams','$interval', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage,$stateParams, $interval){
        $scope.phone = $stateParams.phone;
        $scope.login = {};
        
        $scope.login.mobilephone = $scope.phone;
        if($localStorage.webFormPath)$scope.login.toFrom = $localStorage.webFormPath.toFrom;
        if($stateParams.recommPhone){
            $scope.login.recommPhone = $stateParams.recommPhone;
        }
        $scope.toback = function(){
            if($stateParams.from=='tyj'){
                $state.go('tyj',{wap:true});
            }
            else if($stateParams.from=='newhandreg'){
                $state.go('newhandreg',{wap:true});
            }
            else{
                $state.go('main.home');
            }
        }
        $scope.canSend = true;
        function countdown(){
            $scope.second = 60;
            var stop = $interval(function(){
                $scope.second--;
                if($scope.second==0){
                    $interval.cancel(stop);
                    $scope.canSend = true;
                }
            },1000)
        }
        $scope.zuce = function (tegForm) {
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm) {
            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                mobilephone: $scope.phone,
                picCode: $scope.login.picCode
            }, { name: '获取验证码', tegForm: tegForm });
            $filter('60秒倒计时')($scope, 60);
        };
        // $scope.getyzm();
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success) {
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                        $scope.canSend = false;
                        countdown();
                    } else {
                        $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        // delete $localStorage.webFormPath.toFrom;
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        if($stateParams.from=='newhandreg'){
                            $state.go('newhand',{wap:true,pid:data.map.pid});
                        }
                        else{
                            $state.go('tyjRegSuccess');
                        }
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
            };
        });
        
    }])
    .directive('changeHide',function(){
        return{
            link: function(scope,element,attrs){
                var height = $(window).height();
                $(window).resize(function(){
                    if($(window).height()<height){
                        $(element).hide();
                    }
                    else{
                        $(element).show();
                    }
                })
            }
        }
    })
});
define('conttrollers/flwhzCtrl',[
    'webappControllers','jquery'
    ]
    ,function(controllers,$){
    controllers.controller('flwhzCtrl'
        ,['$scope','resourceService','$filter','$location','$localStorage','$state',function($scope,resourceService,$filter,$location,$localStorage,$state){
            if($location.$$search.toFrom != undefined || $location.$$search.recommCode!= undefined||$location.$$search.tid!=undefined){
                $localStorage.webFormPath = $location.$$search;
            };
            $scope.data1={};
            $scope.data2={};
            $scope.data3={};
            $scope.goDetail=function(id){
                $state.go('cpDetail',{pid:id});
            }
            resourceService.queryPost($scope, $filter('getUrl')('selectProductInfo'), {}, { name: '获取投资列表'});
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '获取投资列表': 
                if (data.success) {
                    for(var i=0;i<data.info.length;i++){
                        switch(data.info[i].deadline){
                            case 30:
                            $scope.data1.deadline=data.info[i].deadline;
                            $scope.data1.rate=data.info[i].rate;
                            $scope.data1.id=data.info[i].id;
                            break;
                            case 60:
                            $scope.data2.deadline=data.info[i].deadline;
                            $scope.data2.rate=data.info[i].rate;
                            $scope.data2.id=data.info[i].id;
                            break;
                            case 180:
                            $scope.data3.deadline=data.info[i].deadline;
                            $scope.data3.rate=data.info[i].rate;
                            $scope.data3.id=data.info[i].id;
                            break;
                        }
                    }
                }
                break;
            }
            });
        }
        ])
});
define('conttrollers/mycashedCtrl',[
    'webappControllers',
    'jquery'
], function(controllers) {
    controllers.controller('mycashedCtrl', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$localStorage', function($scope, $rootScope, $filter, $state, resourceService, $localStorage) {
        $rootScope.title = "回款记录";
        $scope.cashedId = $state.params.cashedId;
        $scope.userOBJ = $filter('isRegister')();
        $scope.toback = function() {
            $filter('跳回上一页')();
        };

        function DX(n) {
            var str2 = "";
            n += "";
            if (n && n.length > 0) {
                var str = n.replace(/0/g, '零').replace(/1/g, '一').replace(/2/g, '二').replace(/3/g, '三').replace(/4/g, '四').replace(/5/g, '五').replace(/6/g, '六').replace(/7/g, '七').replace(/8/g, '八').replace(/9/g, '九');
                str=str.split("").reverse().join("");
                for (var i = n.length-1; i >=0; i--) {
                    switch (i) {
                        case 0:
                            str2 += str.charAt(i);
                            break;
                        case 1:
                            if (str.charAt(i) != "一") { str2 += str.charAt(i); }
                            str2 += "十";
                            break;
                        case 2:
                            str2 += str.charAt(i)+"百";
                            break;
                        case 3:
                            str2 += str.charAt(i)+"千";
                            break;
                        case 4:
                            str2 += str.charAt(i)+"万";
                            break;
                    }
                }
            }
            return str2;
        }
        resourceService.queryPost($scope, $filter('getUrl')('回款记录'), { id: $scope.cashedId, uid: $scope.userOBJ.user.member.uid }, { name: '回款记录' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '回款记录':
                    if (data.success) {
                        $scope.cashedData = data.map
                        for (var i = 0; i < $scope.cashedData.result.length; i++) {
                            var str =DX($scope.cashedData.result[i].index) + "期收益";
                            if ($scope.cashedData.result[i].residualPrincipal&&parseInt($scope.cashedData.result[i].residualPrincipal) <= 0) {
                                str +="+本金";
                            }
                            $scope.cashedData.result[i].str = str;
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
            }
        });
    }]);
})
;
define('conttrollers/specialCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('specialCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'resourceService'
        ,'ngDialog'
        ,'$timeout'
        ,'$localStorage'
        ,'$location'
        ,function($scope,$rootScope,$filter,$state,resourceService,ngDialog,$timeout,$localStorage,$location){
            $filter('isPath')('special');
            $scope.userOBJ = $filter('isRegister')();
            $scope.product = {};
            $scope.yuebiao={};
            if($location.$$search.toFrom != undefined || $location.$$search.recommCode!= undefined||$location.$$search.tid!=undefined){
                $localStorage.webFormPath = $location.$$search;
            }
            $scope.swiper = {
                name: "hongbaoSwiper",
                readyLoading: false
            }
            $scope.conf = {
                slidesPerView:3,
                centeredSlides: true,
                spaceBetween:0,
                grabCursor: true,
                loop:true,
                autoplay:3000,
                autoplayDisableOnInteraction:false
            };
            $scope.gotoDetail=function(id){
                if($location.$$search.wap){
                    $state.go('activityPerson',{id:id,wap:true});
                }else{
                    $state.go('activityPerson',{id:id});
                }
            };
            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            $scope.wap = $location.$$search.wap;
            if (!$scope.wap) {
                $scope.uid = getUrlParam('uid');
                if ($scope.uid != '' && $scope.uid != undefined) {
                    $scope.isLogin = true;
                } else {
                    $scope.isLogin = false;
                }
            } else {
                $scope.isLogin = $scope.userOBJ.register;
                if ($scope.isLogin) {
                    $scope.uid = $scope.userOBJ.user.member.uid;
                }
            }

            // 倒计时
            // $scope.getRTime = function() { 
            //     var EndTime= new Date('2016/10/20 12:00:00'); //截止时间 
            //     var NowTime = new Date(); 
            //     var t =EndTime.getTime() - NowTime.getTime(); 
            //     $scope.$apply(function() {
            //         $scope.day=Math.floor(t/1000/60/60/24); 
            //         $scope.hour=Math.floor(t/1000/60/60%24); 
            //         $scope.minute=Math.floor(t/1000/60%60); 
            //         $scope.second=Math.floor(t/1000%60);
            //     });
            //     if ($scope.day <= 0 && $scope.hour <= 0 && $scope.minute <= 0 && $scope.second <= 0) {
            //         clearInterval(timer);
            //         $scope.$apply(function() {
            //             $scope.showBtn = true;
            //         });
            //     }
            // };
            // var timer = setInterval($scope.getRTime,1000);
            // $filter('倒计时弹窗')($scope);
            $scope.closeDialog = function() {
                ngDialog.closeAll();
            };

            $scope.alertCode = function() {
                $filter('幸运码弹窗')($scope);
                $timeout(function(){
                    $('.goToApp').attr('href','jsmp://page=9?pid='+$scope.product.id+'&ptype='+$scope.product.type+'&atid=1');
                })
            };

            $scope.goLogin = function() {
                $localStorage.specialLogin = true;
                $state.go('dl',{returnurl:'special'});
            };

            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
                switch(type.name){
                    case "我的幸运码":
                        if (data.success) {
                            $scope.luckAmount = data.map.luckAmount;
                            if ($scope.luckAmount) {
                                $scope.luckCodes = data.map.luckCodes.split(',');
                            }
                        }
                    break;
                    case "活动标详情":
                        if (data.success) {
                            $scope.product = data.map.result;
                            $scope.yuebiao.prid=data.map.prid;
                            $scope.yuebiao.name=data.map.name;
                            $scope.yuebiao.isReservation=data.map.isReservation;
                            $scope.yuebiao.realverify=data.map.realverify;
                            $scope.investList = data.map.investList;
                            $scope.investTotal = data.map.investTotal;
                            $scope.codeFixation=data.map.codeFixation;
                            $scope.bannerUrl=data.map.bannerUrl;
                            // 得到id 获取幸运码
                            if ($scope.isLogin) {
                                resourceService.queryPost($scope,$filter('getUrl')('我的幸运码'),{
                                    id: $scope.product.id,
                                    uid: $scope.uid
                                },{name: '我的幸运码'});
                            }

                            // 列表数据轮动
                            if ($scope.investList.length > 4) {
                                setInterval(function() {
                                    $dataTable.animate({'margin-top': '-'+trHeight+'px'},1000,function() {
                                        $dataTable.find('tr').eq(0).appendTo($dataTable);
                                        $dataTable.css('margin-top',0);
                                    });
                                }, 5000);
                            }

                            if ($scope.wap == false) {
                                $('.goToApp').attr('href','jsmp://page=9?pid='+$scope.product.id+'&ptype='+$scope.product.type+'&atid=1');
                            }

                        }
                    break;
                    case "活动开奖结果":
                        if (data.success) {
                            $scope.current = data.map.current[0];

                            if (data.map.current.length == 0) {
                                $scope.isLottery = false;
                            } else {
                                $scope.isLottery = true;
                            }
                            $scope.history = data.map.history;
                            if(data.map.current&&data.map.current.length>0){$scope.history.unshift(data.map.current[0]);$scope.history.pop();}
                            if($scope.current&&$scope.current.length>0&&$scope.current[0].prizeUrl){$scope.videolink=$scope.current[0].prizeUrl;$scope.activityPeriods=$scope.current[0].activityPeriods;}
                            else{
                                for(var i=0;i<$scope.history.length;i++){
                                    if($scope.history[i].prizeUrl){
                                        $scope.videolink=$scope.history[i].prizeUrl;
                                        $scope.activityPeriods=$scope.history[i].activityPeriods;
                                        break;
                                    }
                                }
                            }
                            $timeout(function(){
                                $scope.swiper.initSwiper();
                                var swiper = new Swiper('.swiper-container-h', {
                                            paginationClickable: true,
                                            spaceBetween: 50,
                                            autoplay:3000,
                                            autoplayDisableOnInteraction:false,
                                            loop:true
                                        });
                            });
                            /*if ($scope.history.length > 2) {
                                clearInterval($scope.timer);
                                $scope.timer = setInterval(function() {
                                    $infoBox.animate({'margin-top': '-'+modeLength+'px'},1000,function() {
                                        $infoBox.find('.mode').eq(0).appendTo($infoBox);
                                        $infoBox.css('margin-top',0);
                                    });
                                }, 5000);
                            }*/
                        }
                    break;
                }
            });

            var $dataTable = $('.data-table'),
                trHeight = $('.data-list').height()/4,
                $infoBox = $('.myinfobox'),
                modeLength = $('.lottery-info').height()/2;

            // 活动标详情
            resourceService.queryPost($scope,$filter('getUrl')('活动标详情'),{uid:$scope.uid},{name: '活动标详情'});

            // 活动开奖结果
            resourceService.queryPost($scope,$filter('getUrl')('活动开奖结果'),{},{name: '活动开奖结果'});
            $scope.goyuebiao=function(){
                $state.go('cpDetail',{pid:$scope.product.id});
                /*if($scope.yuebiao.realverify){
                    $state.go('yuebiao',{prid:$scope.yuebiao.prid,name:$scope.yuebiao.name,toState:$state.current.name});
                }else{
                    $scope.isRealverify=true;
                }*/
            };
            // 监听登录是否成功
            // $rootScope.$on('loginSuccess', function(event, flag) {
            //     if (flag) {
            //         window.location.reload();
            //     }
            // });

        }
    ]);
})

;
define('conttrollers/myActivityCtrl',[
    'webappControllers'
], function(controllers) {
    controllers.controller('myActivityCtrl', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', function($scope, $rootScope, $filter, $state, resourceService) {
        $rootScope.title = "活动中心";
        $scope.userOBJ = $filter('isRegister')();
        $scope.showInfo = function(e) {
            $(e.currentTarget).siblings().stop().slideToggle(200);
            var obj=$(e.currentTarget).find('.cloumn4').find('img');
            if (obj.hasClass('active')) {
                obj.removeClass('active');
            } else {
                obj.addClass('active');
            }
        };
        $scope.active = 0;
        $scope.page = {};
        $scope.page.pageOn = 1;
        $scope.page.pageSize = 1000;
        $scope.prizeStatus=null;
        var init = function() {
            var obj = {};
            obj.uid = $scope.userOBJ.user.member.uid;
            obj.pageOn = $scope.page.pageOn;
            obj.pageSize = $scope.page.pageSize;
            obj.prizeStatus=$scope.prizeStatus;
            resourceService.queryPost($scope, $filter('getUrl')('getMyPrizeRecords'),obj, '中奖记录');
        }

        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type) {
                case '中奖记录':
                    if (data.success) {
                        $scope.activityData = data.map.pageInfo.rows;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    };
                    break;
            }
        });
        init();
        $scope.clickItem=function(i){
            $scope.active=i;
            if(i==0){$scope.prizeStatus=null;}
            else if(i==1){$scope.prizeStatus=0;}
            else if(i==2){$scope.prizeStatus=1;}
            init();
        };
        // console.log($state);
        $scope.toback = function() {
            $filter('跳回上一页')();
        };
    }]);
})
;
define('conttrollers/activityPersonCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('activityPersonCtrl'
        ,['$scope'
        ,'$rootScope'
        ,'$filter'
        ,'$state'
        ,'$stateParams'
        ,'resourceService'
        ,function($scope,$rootScope,$filter,$state,$stateParams,resourceService){
            $rootScope.title="中奖者";
            $scope.userOBJ=$filter('isRegister')();
            $scope.wap=$stateParams.wap;
            resourceService.queryPost($scope, $filter('getUrl')('getPrizeInfoByProductId'), {
                    id:$state.params.id
            }, '中奖者');
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,type) {
                switch(type){
                    case '中奖者': 
                        if(data.success){
                            if(data.map.list.length>0){
                                $scope.user = data.map.list[0];
                                
                            }
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y');
                        };
                    break;
                }
            });
            // $scope.toback=function () {
            //     $state.go('iphonelist',{wap:true});
            // };
            $scope.toback = function () {
                $filter('跳回上一页')(1);
            };
        }
    ]);
});
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define('clipboard',[],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.copyToClipboard = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var deselectCurrent = require('toggle-selection');

var defaultMessage = 'Copy to clipboard: #{key}, Enter';

function format(message) {
  var copyKey = (/mac os x/i.test(navigator.userAgent) ? '⌘' : 'Ctrl') + '+C';
  return message.replace(/#{\s*key\s*}/g, copyKey);
}

function copy(text, options) {
  var debug, message, reselectPrevious, range, selection, mark, success = false;
  if (!options) { options = {}; }
  debug = options.debug || false;
  try {
    reselectPrevious = deselectCurrent();

    range = document.createRange();
    selection = document.getSelection();

    mark = document.createElement('mark');
    mark.textContent = text;
    mark.setAttribute('style', [
      // prevents scrolling to the end of the page
      'position: fixed',
      'top: 0',
      'clip: rect(0, 0, 0, 0)',
      // used to preserve spaces and line breaks
      'white-space: pre',
      // do not inherit user-select (it may be `none`)
      '-webkit-user-select: text',
      '-moz-user-select: text',
      '-ms-user-select: text',
      'user-select: text',
    ].join(';'));

    document.body.appendChild(mark);

    range.selectNode(mark);
    selection.addRange(range);

    var successful = document.execCommand('copy');
    if (!successful) {
      throw new Error('copy command was unsuccessful');
    }
    success = true;
  } catch (err) {
    debug && console.error('unable to copy using execCommand: ', err);
    debug && console.warn('trying IE specific stuff');
    try {
      window.clipboardData.setData('text', text);
      success = true;
    } catch (err) {
      debug && console.error('unable to copy using clipboardData: ', err);
      debug && console.error('falling back to prompt');
      message = format('message' in options ? options.message : defaultMessage);
      window.prompt(message, text);
    }
  } finally {
    if (selection) {
      if (typeof selection.removeRange == 'function') {
        selection.removeRange(range);
      } else {
        selection.removeAllRanges();
      }
    }

    if (mark) {
      document.body.removeChild(mark);
    }
    reselectPrevious();
  }

  return success;
}

module.exports = copy;

},{"toggle-selection":2}],2:[function(require,module,exports){
var module = module || {};

module.exports = function () {
  var selection = document.getSelection();
  if (!selection.rangeCount) {
    return function () {};
  }
  var active = document.activeElement;

  var ranges = [];
  for (var i = 0; i < selection.rangeCount; i++) {
    ranges.push(selection.getRangeAt(i));
  }

  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML
    case 'INPUT':
    case 'TEXTAREA':
      active.blur();
      break;

    default:
      active = null;
      break;
  }

  selection.removeAllRanges();
  return function () {
    selection.type === 'Caret' &&
    selection.removeAllRanges();

    if (!selection.rangeCount) {
      ranges.forEach(function(range) {
        selection.addRange(range);
      });
    }

    active &&
    active.focus();
  };
};

},{}]},{},[1])(1)
});

define('conttrollers/activity/hlsbt',[
    'webappControllers',
    'clipboard'
], function (controllers, clipboard) {
    controllers.controller('moreController'
        , ['$scope'
            , '$filter'
            , '$state'
            , 'resourceService', function ($scope, $filter, $state, resourceService) {
                $filter('isPath')('main.more');
                $scope.userOBJ = $filter('isRegister')();
                $scope.protocol = $filter('protocolFilter')()
                $scope.title = '发现';
                $scope.wechat = 'hyjf888666';
                resourceService.queryPost($scope, $filter('getUrl')('活动聚合'), {}, { name: '活动聚合' });
                $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                    switch (type.name) {
                        case '活动聚合':
                            if (data.success) {
                                $scope.activeList = data.map.Page.rows.filter(function (item) {
                                    return item.status === 1
                                });
                            }
                            break;
                    }
                });
                $scope.out = function (argument) {
                    switch (argument) {
                        case 'out':
                            $filter('清空缓存')();
                            $state.go('main.home');
                            break;
                    };
                }
                $scope.hint = function (argument) {
                    switch (argument) {
                        case 'server':
                            $filter('serverCenter')($scope);
                            break;
                        case 'coming':
                            $filter('reminder')(1001);
                            break;
                        case 'wechat':
                            $filter('wechatReminder')($scope);
                            break;
                    };
                }
                $scope.copyWechat = function () {
                    if (clipboard($scope.wechat)) {
                        $scope.hint('wechat')
                    }
                }
            }
        ]);
    controllers.controller('hlsbtCtrl'
        , ['$scope'
            , '$filter'
            , '$state'
            , '$location'
            , '$localStorage'
            , function ($scope, $filter, $state, $location, $localStorage) {
                if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
                    $localStorage.webFormPath = $location.$$search;
                };
            }
        ]);
});
define('conttrollers/activity/inviteFriend1',[
    'jweixin',
    'webappControllers'
], function(wx, controllers) {
    controllers.controller('inviteFriend1', ['$scope', '$filter', '$state', '$location', 'resourceService', 'isWeixin', '$timeout','$localStorage', function($scope, $filter, $state, $location, resourceService, isWeixin, $timeout,$localStorage) {

        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $scope.wap = $location.$$search.wap;
        if ($location.$$search.afid) { $scope.rfid = $location.$$search.afid; }
        if ($location.$$search.uid) { $scope.uid = $location.$$search.uid;
            $scope.androidUrl = "jsmp://page=100?"; } else { $scope.androidUrl = "jsmp://page=4?"; }
        if ($filter('isRegister')().user && $filter('isRegister')().user.member && $filter('isRegister')().user.member.uid) {
            $scope.user = $filter('isRegister')().user;
            if ($scope.wap) { $scope.uid = $scope.user.member.uid; }
            $scope.shareUrl = 'http://m.zhuomilicai.com/zhuomireg?recommCode=' + $scope.user.member.mobilephone;
        }
        $scope.actives = [{ code: 1, text: '2.5‰', num: 0.0025 }, { code: 2, text: '5‰', num: 0.005 }, { code: 3, text: '1%', num: 0.01 }]
        $scope.active = $scope.actives[2];
        $scope.money = 100;
        $scope.sumAcount = 0;

        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.date = new Date().getTime();
        $scope.xuanze = function(i) {
            $scope.active = $scope.actives[i - 1];
        }
        $scope.jisuan = function() {
            if ($scope.money <= 1000000000) {
                if ($scope.money % 100 == 0 && $scope.money > 0) {
                    $scope.sumAcount = $filter('currency')($scope.money * $scope.active.num, '￥');
                } else {
                    alert('请输入100的倍数！');
                }
            } else {
                alert('您输入的金额过大！');
            }
        }
        $scope.closefixed = function() {
            $scope.fixedshow = false;
            $scope.sumAcount=null;
        };
        $scope.lijiyaoqing = function() {
            if ($scope.uid) {
                if (isWeixin()) {
                    $('.activity-firend-boxweixin').fadeIn(200);
                } else {
                    $('.activity-firend-boxh5').fadeIn(200);
                }
            } else {
                $state.go('dl', { returnurl: 'inviteFriend2' });
            }
        };
        $scope.copyShare = function() {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function() {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function(e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function() {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        $scope.lingqu = function() {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.uid, afid: $scope.rfid }, { name: '领取奖励' });
        };
        $scope.closehongbao = function() {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.jisuanqi = function() {
            $scope.fixedshow = true;
            $scope.money = 0;
            $scope.sumAmount = 0;
        }
        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfig'), { id: $scope.rfid }, { name: '任务详情' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '任务详情':
                    $scope.data = data.map;
                    if (!$scope.rfid) { $scope.rfid = $scope.data.jsActivityFriend.id }
                    if ($scope.uid) {
                        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    }
                    break;
                case '邀请好友列表':
                    $scope.firendList = data.map;
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    break;
            }
        });
        var linkstr = "";
        if ($scope.user && $scope.user.member.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.member.mobilephone;
        }
            wx.ready(function() {
                wx.onMenuShareTimeline({
                        link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareAppMessage({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareQQ({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareWeibo({
                    title: '知道你又败家了，送你666元红包，拿走不谢！', // 分享标题
                    desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareQZone({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
            })
    }]);
})
;
define('conttrollers/activity/inviteFriend2',[
    'jweixin',
    'webappControllers'
], function(wx, controllers) {
    controllers.controller('inviteFriend2', ['$scope', '$filter', '$state', '$location', 'resourceService', 'isWeixin', '$timeout','$localStorage', function($scope, $filter, $state, $location, resourceService, isWeixin, $timeout,$localStorage) {

        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $scope.wap = $location.$$search.wap;
        if ($location.$$search.afid) { $scope.rfid = $location.$$search.afid; }
        if ($location.$$search.uid) { $scope.uid = $location.$$search.uid;
            $scope.androidUrl = "jsmp://page=100?"; } else { $scope.androidUrl = "jsmp://page=4?"; }
        if ($filter('isRegister')().user && $filter('isRegister')().user.member && $filter('isRegister')().user.member.uid) {
            $scope.user = $filter('isRegister')().user;
            if ($scope.wap) { $scope.uid = $scope.user.member.uid; }
            $scope.shareUrl = 'http://m.zhuomilicai.com/zhuomireg?recommCode=' + $scope.user.member.mobilephone;
        }
        $scope.actives = [{ code: 1, text: '2.5‰', num: 0.0025 }, { code: 2, text: '5‰', num: 0.005 }, { code: 3, text: '1%', num: 0.01 }]
        $scope.typerates=[{text:'3.5‰',num:0.001},{text:'8‰',num:0.003},{text:'2%',num:0.01}];
        $scope.active = $scope.actives[2];
        $scope.money = 100;
        $scope.sumAcount = 0;
        $scope.investType='pc';
        $scope.typerate=null;
        $scope.selecttype=function(type){
            $scope.investType=type;
            if($scope.investType=='app'){
                $scope.typerate=$scope.typerates[$scope.active.code-1];
            }else{
                $scope.typerate=null;
            }
        };
        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.date = new Date().getTime();
        $scope.xuanze = function(i) {
            $scope.active = $scope.actives[i - 1];
            if($scope.investType=='app'){
                $scope.typerate=$scope.typerates[$scope.active.code-1];
            }
        };
        $scope.jisuan = function() {
            if ($scope.money <= 1000000000) {
                if ($scope.money % 100 == 0 && $scope.money > 0) {
                    var rate=!$scope.typerate?$scope.active.num:$scope.active.num+$scope.typerate.num;
                    $scope.sumAcount = $filter('currency')($scope.money * rate, '￥');
                } else {
                    alert('请输入100的倍数！');
                }
            } else {
                alert('您输入的金额过大！');
            }
        }
        $scope.closefixed = function() {
            $scope.fixedshow = false;
            $('.activity-firend').css({height:'auto','overflow-y':'auto'});
        };
        $scope.lijiyaoqing = function() {
            if ($scope.uid) {
                if (isWeixin()) {
                    $('.activity-firend-boxweixin').fadeIn(200);
                } else {
                    $('.activity-firend-boxh5').fadeIn(200);
                }
            } else {
                $state.go('dl', { returnurl: 'inviteFriend' });
            }
        };
        $scope.copyShare = function() {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function() {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function(e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function() {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        $scope.lingqu = function() {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.uid, afid: $scope.rfid }, { name: '领取奖励' });
        };
        $scope.closehongbao = function() {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.jisuanqi = function() {
            $('body,html').css({height:'100%'});
            $('.activity-firend').parent().css({height:'100%'});
            $('.activity-firend').css({height:'100%','overflow-y':'scroll'});
            $scope.fixedshow = true;
            $scope.money = 0;
            $scope.sumAmount = 0;
        }
        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfig'), { id: $scope.rfid }, { name: '任务详情' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '任务详情':
                    $scope.data = data.map;
                    if (!$scope.rfid) { $scope.rfid = $scope.data.jsActivityFriend.id }
                    if ($scope.uid) {
                        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    }
                    break;
                case '邀请好友列表':
                    $scope.firendList = data.map;
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    break;
            }
        });
        var linkstr = "";
        if ($scope.user && $scope.user.member.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.member.mobilephone;
        }
            wx.ready(function() {
                wx.onMenuShareTimeline({
                        link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareAppMessage({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareQQ({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareWeibo({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareQZone({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
            })
            var browser = {
                versions: function() {
                    var u = navigator.userAgent,
                        app = navigator.appVersion;
                    return { //移动终端浏览器版本信息
                        trident: u.indexOf('Trident') > -1, //IE内核
                        presto: u.indexOf('Presto') > -1, //opera内核
                        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                        mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                        iPad: u.indexOf('iPad') > -1, //是否iPad
                        webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                    };
                }(),
                language: (navigator.browserLanguage || navigator.language).toLowerCase()
            }
            function isWeiXin(){
                var ua = window.navigator.userAgent.toLowerCase();
                if(ua.match(/MicroMessenger/i) == 'micromessenger'){
                    return true;
                }else{
                    return false;
                }
            }
            $scope.downloadclick=function(){
                if (isWeiXin()){
                    if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                        $('.share-ios').fadeIn(200);
                    } else {
                        // $('.share-android').fadeIn(200);
                        window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                    }
                } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
                } else if (browser.versions.android) {
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                } else {
                    window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
                }
            };
            $scope.closethis=function(){
                $('.share-ios,.share-android').fadeOut(200);
            };
    }]);
})
;
define('conttrollers/activity/inviteFriend3',[
    'jweixin',
    'webappControllers'
], function(wx, controllers) {
    controllers.controller('inviteFriend3', ['$scope', '$filter', '$state', '$location', 'resourceService', 'isWeixin', '$timeout','$localStorage', function($scope, $filter, $state, $location, resourceService, isWeixin, $timeout,$localStorage) {

        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $scope.wap = $location.$$search.wap;
        if ($location.$$search.afid) { $scope.rfid = $location.$$search.afid; }
        if ($location.$$search.uid) { $scope.uid = $location.$$search.uid;
            $scope.androidUrl = "jsmp://page=100?"; } else { $scope.androidUrl = "jsmp://page=4?"; }
        if ($filter('isRegister')().user && $filter('isRegister')().user.member && $filter('isRegister')().user.member.uid) {
            $scope.user = $filter('isRegister')().user;
            if ($scope.wap) { $scope.uid = $scope.user.member.uid; }
            $scope.shareUrl = 'http://m.zhuomilicai.com/zhuomireg?recommCode=' + $scope.user.member.mobilephone;
        }
        $scope.actives = [{ code: 1, text: '2.5‰', num: 0.0025 }, { code: 2, text: '5‰', num: 0.005 }, { code: 3, text: '1%', num: 0.01 }]
        $scope.typerates=[{text:'3.5‰',num:0.001},{text:'8‰',num:0.003},{text:'2%',num:0.01}];
        $scope.active = $scope.actives[2];
        $scope.money = 100;
        $scope.sumAcount = 0;
        $scope.investType='pc';
        $scope.typerate=null;
        $scope.selecttype=function(type){
            $scope.investType=type;
            if($scope.investType=='app'){
                $scope.typerate=$scope.typerates[$scope.active.code-1];
            }else{
                $scope.typerate=null;
            }
        };
        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.date = new Date().getTime();
        $scope.xuanze = function(i) {
            $scope.active = $scope.actives[i - 1];
            if($scope.investType=='app'){
                $scope.typerate=$scope.typerates[$scope.active.code-1];
            }
        };
        $scope.jisuan = function() {
            if ($scope.money <= 1000000000) {
                if ($scope.money % 100 == 0 && $scope.money > 0) {
                    var rate=!$scope.typerate?$scope.active.num:$scope.active.num+$scope.typerate.num;
                    $scope.sumAcount = $filter('currency')($scope.money * rate, '￥');
                } else {
                    alert('请输入100的倍数！');
                }
            } else {
                alert('您输入的金额过大！');
            }
        }
        $scope.closefixed = function() {
            $scope.fixedshow = false;
            $('.activity-firend').css({height:'auto','overflow-y':'auto'});
        };
        $scope.lijiyaoqing = function() {
            if ($scope.uid) {
                if (isWeixin()) {
                    $('.activity-firend-boxweixin').fadeIn(200);
                } else {
                    $('.activity-firend-boxh5').fadeIn(200);
                }
            } else {
                $state.go('dl', { returnurl: 'inviteFriend' });
            }
        };
        $scope.copyShare = function() {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function() {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function(e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function() {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        $scope.lingqu = function() {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.uid, afid: $scope.rfid }, { name: '领取奖励' });
        };
        $scope.closehongbao = function() {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.jisuanqi = function() {
            $('body,html').css({height:'100%'});
            $('.activity-firend').parent().css({height:'100%'});
            $('.activity-firend').css({height:'100%','overflow-y':'scroll'});
            $scope.fixedshow = true;
            $scope.money = 0;
            $scope.sumAmount = 0;
        }
        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfig'), { id: $scope.rfid }, { name: '任务详情' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '任务详情':
                    $scope.data = data.map;
                    if (!$scope.rfid) { $scope.rfid = $scope.data.jsActivityFriend.id }
                    if ($scope.uid) {
                        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    }
                    break;
                case '邀请好友列表':
                    $scope.firendList = data.map;
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    break;
            }
        });
        var linkstr = "";
        if ($scope.user && $scope.user.member.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.member.mobilephone;
        }
            wx.ready(function() {
                wx.onMenuShareTimeline({
                        link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareAppMessage({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareQQ({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareWeibo({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
                wx.onMenuShareQZone({
                        desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                    link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                    imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                    success: function() {
                        alert('分享成功！');
                    },
                    cancel: function() {
                        alert('您取消了分享！');
                    }
                });
            })
            var browser = {
                versions: function() {
                    var u = navigator.userAgent,
                        app = navigator.appVersion;
                    return { //移动终端浏览器版本信息
                        trident: u.indexOf('Trident') > -1, //IE内核
                        presto: u.indexOf('Presto') > -1, //opera内核
                        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                        mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                        iPad: u.indexOf('iPad') > -1, //是否iPad
                        webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                    };
                }(),
                language: (navigator.browserLanguage || navigator.language).toLowerCase()
            }
            function isWeiXin(){
                var ua = window.navigator.userAgent.toLowerCase();
                if(ua.match(/MicroMessenger/i) == 'micromessenger'){
                    return true;
                }else{
                    return false;
                }
            }
            $scope.downloadclick=function(){
                if (isWeiXin()){
                    if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                        $('.share-ios').fadeIn(200);
                    } else {
                        // $('.share-android').fadeIn(200);
                        window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                    }
                } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
                } else if (browser.versions.android) {
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                } else {
                    window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
                }
            };
            $scope.closethis=function(){
                $('.share-ios,.share-android').fadeOut(200);
            };
    }]);
});
define('conttrollers/activity/inviteFriend4',[
    'jweixin',
    'webappControllers'
], function(wx, controllers) {
    controllers.controller('inviteFriend4', ['$scope', '$filter', '$state', '$location', 'resourceService', 'isWeixin', '$timeout', '$localStorage', function($scope, $filter, $state, $location, resourceService, isWeixin, $timeout, $localStorage) {

        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $scope.wap = $location.$$search.wap;
        if ($location.$$search.afid) { $scope.rfid = $location.$$search.afid; }
        if ($location.$$search.uid) {
            $scope.uid = $location.$$search.uid;
            $scope.androidUrl = "jsmp://page=100?";
        } else { $scope.androidUrl = "jsmp://page=4?"; }
        if ($filter('isRegister')().user && $filter('isRegister')().user.member && $filter('isRegister')().user.member.uid) {
            $scope.user = $filter('isRegister')().user;
            if ($scope.wap) { $scope.uid = $scope.user.member.uid; }
            $scope.shareUrl = 'http://m.zhuomilicai.com/zhuomireg?recommCode=' + $scope.user.member.mobilephone;
        }
        if (!$scope.uid) {
            $scope.ftype = 1;
        }
        $scope.actives = [{ code: 1, text: '2.5‰', num: 0.0025 }, { code: 2, text: '5‰', num: 0.005 }, { code: 3, text: '1%', num: 0.01 }]
        $scope.typerates = [{ text: '3.5‰', num: 0.001 }, { text: '8‰', num: 0.003 }, { text: '2%', num: 0.01 }];
        $scope.active = $scope.actives[2];
        $scope.money = 100;
        $scope.sumAcount = 0;
        $scope.investType = 'pc';
        $scope.typerate = null;
        $scope.selecttype = function(type) {
            $scope.investType = type;
            if ($scope.investType == 'app') {
                $scope.typerate = $scope.typerates[$scope.active.code - 1];
            } else {
                $scope.typerate = null;
            }
        };
        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.date = new Date().getTime();
        $scope.xuanze = function(i) {
            $scope.active = $scope.actives[i - 1];
            if ($scope.investType == 'app') {
                $scope.typerate = $scope.typerates[$scope.active.code - 1];
            }
        };
        $scope.jisuan = function() {
            if ($scope.money <= 1000000000) {
                if ($scope.money % 100 == 0 && $scope.money > 0) {
                    var rate = !$scope.typerate ? $scope.active.num : $scope.active.num + $scope.typerate.num;
                    $scope.sumAcount = $filter('currency')($scope.money * rate, '￥');
                } else {
                    alert('请输入100的倍数！');
                }
            } else {
                alert('您输入的金额过大！');
            }
        }
        $scope.lijiyaoqing = function() {
            if ($scope.uid) {
                if (isWeixin()) {
                    $('.activity-firend-boxweixin').fadeIn(200);
                } else {
                    $('.activity-firend-boxh5').fadeIn(200);
                }
            } else {
                $state.go('dl', { returnurl: 'inviteFriend4' });
            }
        };
        $scope.copyShare = function() {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function() {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function(e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function() {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        $scope.lingqu = function() {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.uid, afid: $scope.rfid }, { name: '领取奖励' });
        };
        $scope.closehongbao = function() {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.jisuanqi = function() {
            $('body,html').css({ height: '100%', overflow: 'hidden' });
            $scope.fixedshow = true;
            $scope.money = 0;
            $scope.sumAmount = 0;
        };
        $scope.closefixed = function() {
            $scope.fixedshow = false;
            $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        $scope.showRule = function() {
            $scope.ruleshow = true;
            $('body,html').css({ height: '100%', overflow: 'hidden' });
        };
        $scope.closeRule = function() {
            $scope.ruleshow = false;
            $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfig'), { id: $scope.rfid }, { name: '任务详情' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '任务详情':
                    $scope.data = data.map;
                    if (!$scope.rfid) { $scope.rfid = $scope.data.jsActivityFriend.id }
                    if ($scope.uid) {
                        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    }
                    resourceService.queryPost($scope, $filter('getUrl')('返现前5'), {}, { name: '返现前5' });
                    break;
                case '邀请好友列表':
                    $scope.firendList = data.map;
                    if (data.map.unclaimed > 0) {
                        $scope.ftype = 3;
                    }
                    else {
                        $scope.ftype = 2;
                    }
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    break;
                case '返现前5':
                    $scope.topFiveList = data.map.topFiveList;
                    break;
            }
        });
        var linkstr = "";
        if ($scope.user && $scope.user.member.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.member.mobilephone;
        }
        wx.ready(function() {
            wx.onMenuShareTimeline({
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function() {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
    }])
        .directive("repeatFinish", function() {
            return {
                link: function(scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('inviteScroll', function() {
            var temp = '<li repeat-finish="finish()" ng-repeat="item in topFiveList">' +
                '<p>{{item.userName}}获得了{{item.amountSum}}元</p>' +
                '</li>'
            return {
                restrict: 'A',
                template: temp,
                scope: true,
                link: function($scope, element, attrs) {
                    $scope.finish = function() {
                        $(element).find('li').each(function(i) {
                            var width = parseFloat($(this).css('width'));
                            $(this).css({
                                position: 'absolute',
                                left: i * width + 'px',
                                top: 0
                            })
                            var that = this;
                            setInterval(function() {
                                var left = parseFloat($(that).css('left'));
                                if (left < (width * (-1))) {
                                    $(that).css({ left: ($scope.topFiveList.length - 1) * width + 'px' });
                                }
                                var left = parseFloat($(that).css('left'));
                                $(that).css({
                                    left: (left - 1) + 'px'
                                })
                            }, 30)
                        })
                    }
                }
            }
        });
});
define('conttrollers/activity/inviteFriend5',[
    'jweixin',
    'webappControllers'
], function(wx, controllers) {
    controllers.controller('inviteFriend5', ['$scope', '$filter', '$state', '$location', 'resourceService', 'isWeixin', '$timeout', '$localStorage', function($scope, $filter, $state, $location, resourceService, isWeixin, $timeout, $localStorage) {
        $('body').scrollTop(0);
        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $scope.wap = $location.$$search.wap;
        // if ($location.$$search.afid) { $scope.rfid = $location.$$search.afid; }
        if ($location.$$search.uid) {
            $scope.uid = $location.$$search.uid;
            $scope.androidUrl = "jsmp://page=100?";
        } else { $scope.androidUrl = "jsmp://page=4?"; }
        if ($filter('isRegister')().user && $filter('isRegister')().user.member && $filter('isRegister')().user.member.uid) {
            $scope.user = $filter('isRegister')().user;
            if ($scope.wap) { $scope.uid = $scope.user.member.uid; }
            $scope.shareUrl = 'http://m.zhuomilicai.com/zhuomireg?recommCode=' + $scope.user.member.mobilephone;
        }
        if (!$scope.uid) {
            $scope.ftype = 1;
        }
        $scope.actives = [{ code: 1, text: '2.5‰', num: 0.0025 }, { code: 2, text: '5‰', num: 0.005 }, { code: 3, text: '1%', num: 0.01 }]
        $scope.typerates = [{ text: '3.5‰', num: 0.001 }, { text: '8‰', num: 0.003 }, { text: '2%', num: 0.01 }];
        $scope.active = $scope.actives[2];
        $scope.money = 100;
        $scope.sumAcount = 0;
        $scope.investType = 'pc';
        $scope.typerate = null;
        $scope.selecttype = function(type) {
            $scope.investType = type;
            if ($scope.investType == 'app') {
                $scope.typerate = $scope.typerates[$scope.active.code - 1];
            } else {
                $scope.typerate = null;
            }
        };
        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.date = new Date().getTime();
        $scope.xuanze = function(i) {
            $scope.active = $scope.actives[i - 1];
            if ($scope.investType == 'app') {
                $scope.typerate = $scope.typerates[$scope.active.code - 1];
            }
        };
        $scope.jisuan = function() {
            if ($scope.money <= 1000000000) {
                if ($scope.money % 100 == 0 && $scope.money > 0) {
                    var rate = !$scope.typerate ? $scope.active.num : $scope.active.num + $scope.typerate.num;
                    $scope.sumAcount = $filter('currency')($scope.money * rate, '￥');
                } else {
                    alert('请输入100的倍数！');
                }
            } else {
                alert('您输入的金额过大！');
            }
        }
        $scope.lijiyaoqing = function() {
            if ($scope.uid) {
                if (isWeixin()) {
                    $('.activity-firend-boxweixin').fadeIn(200);
                } else {
                    $('.activity-firend-boxh5').fadeIn(200);
                }
            } else {
                $state.go('dl', { returnurl: 'inviteFriend5' });
            }
        };
        $scope.copyShare = function() {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function() {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function(e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function() {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        $scope.lingqu = function() {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.uid, afid: $scope.rfid }, { name: '领取奖励' });
        };
        $scope.closehongbao = function() {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.jisuanqi = function() {
            $('body,html').css({ height: '100%', overflow: 'hidden' });
            $scope.fixedshow = true;
            $scope.money = 0;
            $scope.sumAcount = 0;
        };
        $scope.closefixed = function() {
            $scope.fixedshow = false;
            $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        $scope.showRule = function() {
            $scope.ruleshow = true;
            $('body,html').css({ height: '100%', overflow: 'hidden' });
        };
        $scope.closeRule = function() {
            $scope.ruleshow = false;
            $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfig'), {}, { name: '任务详情' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '任务详情':
                    $scope.data = data.map;
                    $scope.rfid = $scope.data.jsActivityFriend.id;
                    if ($scope.uid) {
                        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    }
                    resourceService.queryPost($scope, $filter('getUrl')('返现前5'), {}, { name: '返现前5' });
                    break;
                case '邀请好友列表':
                    $scope.firendList = data.map;
                    if (data.map.unclaimed > 0) {
                        $scope.ftype = 3;
                    }
                    else {
                        $scope.ftype = 2;
                    }
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    break;
                case '返现前5':
                    $scope.topFiveList = data.map.topFiveList;
                    break;
            }
        });
        var linkstr = "";
        if ($scope.user && $scope.user.member.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.member.mobilephone;
        }
        wx.ready(function() {
            wx.onMenuShareTimeline({
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function() {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
    }])
        .directive("repeatFinish", function() {
            return {
                link: function(scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('invite5Scroll', function() {
            var temp = '<li repeat-finish="finish()" ng-repeat="item in topFiveList">' +
                '<p>{{item.userName}}获得了{{item.amountSum}}元</p>' +
                '</li>'
            return {
                restrict: 'A',
                template: temp,
                scope: true,
                link: function($scope, element, attrs) {
                    var a = 1;
                    $scope.finish = function() {
                        if(a==1){
                            a++;
                            $(element).find('li').each(function(i) {
                                var width = parseFloat($(this).css('width'));
                                $(this).css({
                                    position: 'absolute',
                                    left: i * width + 'px',
                                    top: 0
                                })
                                var that = this;
                                setInterval(function() {
                                    var left = parseFloat($(that).css('left'));
                                    if (left < (width * (-1))) {
                                        $(that).css({ left: ($scope.topFiveList.length - 1) * width + 'px' });
                                    }
                                    var left = parseFloat($(that).css('left'));
                                    $(that).css({
                                        left: (left - 1.5) + 'px'
                                    })
                                }, 20)
                            })
                        }
                    }
                }
            }
        });
});
define('conttrollers/activity/inviteFriend6',[
    'jweixin',
    'webappControllers'
], function(wx, controllers) {
    controllers.controller('inviteFriend6', ['$scope', '$filter', '$state', '$location', 'resourceService', 'isWeixin', '$timeout', '$localStorage', function($scope, $filter, $state, $location, resourceService, isWeixin, $timeout, $localStorage) {
        $('body').scrollTop(0);
        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $scope.wap = $location.$$search.wap;
        // if ($location.$$search.afid) { $scope.rfid = $location.$$search.afid; }
        if ($location.$$search.uid) {
            $scope.uid = $location.$$search.uid;
            $scope.androidUrl = "jsmp://page=100?";
        } else { $scope.androidUrl = "jsmp://page=4?"; }
        if ($filter('isRegister')().user && $filter('isRegister')().user.member && $filter('isRegister')().user.member.uid) {
            $scope.user = $filter('isRegister')().user;
            if ($scope.wap) { $scope.uid = $scope.user.member.uid; }
            $scope.shareUrl = 'http://m.zhuomilicai.com/zhuomireg?recommCode=' + $scope.user.member.mobilephone;
        }
        if (!$scope.uid) {
            $scope.ftype = 1;
        }
        $scope.actives = [{ code: 1, text: '2.5‰', num: 0.0025 }, { code: 2, text: '5‰', num: 0.005 }, { code: 3, text: '1%', num: 0.01 }]
        $scope.typerates = [{ text: '3.5‰', num: 0.001 }, { text: '8‰', num: 0.003 }, { text: '2%', num: 0.01 }];
        $scope.active = $scope.actives[2];
        $scope.money = 100;
        $scope.sumAcount = 0;
        $scope.investType = 'pc';
        $scope.typerate = null;
        $scope.selecttype = function(type) {
            $scope.investType = type;
            if ($scope.investType == 'app') {
                $scope.typerate = $scope.typerates[$scope.active.code - 1];
            } else {
                $scope.typerate = null;
            }
        };
        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.date = new Date().getTime();
        $scope.xuanze = function(i) {
            $scope.active = $scope.actives[i - 1];
            if ($scope.investType == 'app') {
                $scope.typerate = $scope.typerates[$scope.active.code - 1];
            }
        };
        $scope.jisuan = function() {
            if ($scope.money <= 1000000000) {
                if ($scope.money % 100 == 0 && $scope.money > 0) {
                    var rate = !$scope.typerate ? $scope.active.num : $scope.active.num + $scope.typerate.num;
                    $scope.sumAcount = $filter('currency')($scope.money * rate, '￥');
                } else {
                    alert('请输入100的倍数！');
                }
            } else {
                alert('您输入的金额过大！');
            }
        }
        $scope.lijiyaoqing = function() {
            if ($scope.uid) {
                if (isWeixin()) {
                    $('.activity-firend-boxweixin').fadeIn(200);
                } else {
                    $('.activity-firend-boxh5').fadeIn(200);
                }
            } else {
                $state.go('dl', { returnurl: 'inviteFriend6' });
            }
        };
        $scope.copyShare = function() {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function() {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function(e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function() {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        $scope.lingqu = function() {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.uid, afid: $scope.rfid }, { name: '领取奖励' });
        };
        $scope.closehongbao = function() {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.jisuanqi = function() {
            $('body,html').css({ height: '100%', overflow: 'hidden' });
            $scope.fixedshow = true;
            $scope.money = 0;
            $scope.sumAcount = 0;
        };
        $scope.closefixed = function() {
            $scope.fixedshow = false;
            $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        $scope.showRule = function() {
            $scope.ruleshow = true;
            $('body,html').css({ height: '100%', overflow: 'hidden' });
        };
        $scope.closeRule = function() {
            $scope.ruleshow = false;
            $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfig'), {}, { name: '任务详情' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '任务详情':
                    $scope.data = data.map;
                    $scope.rfid = $scope.data.jsActivityFriend.id;
                    if ($scope.uid) {
                        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    }
                    resourceService.queryPost($scope, $filter('getUrl')('返现前5'), {}, { name: '返现前5' });
                    break;
                case '邀请好友列表':
                    $scope.firendList = data.map;
                    if (data.map.unclaimed > 0) {
                        $scope.ftype = 3;
                    }
                    else {
                        $scope.ftype = 2;
                    }
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.rfid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    break;
                case '返现前5':
                    $scope.topFiveList = data.map.topFiveList;
                    break;
            }
        });
        var linkstr = "";
        if ($scope.user && $scope.user.member.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.member.mobilephone;
        }
        wx.ready(function() {
            wx.onMenuShareTimeline({
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function() {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
    }])
        .directive("repeatFinish", function() {
            return {
                link: function(scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('invite6Scroll', function() {
            var temp = '<li repeat-finish="finish()" ng-repeat="item in topFiveList">' +
                '<p>{{item.userName}}获得了{{item.amountSum}}元</p>' +
                '</li>'
            return {
                restrict: 'A',
                template: temp,
                scope: true,
                link: function($scope, element, attrs) {
                    var a = 1;
                    $scope.finish = function() {
                        if(a==1){
                            a++;
                            $(element).find('li').each(function(i) {
                                var width = parseFloat($(this).css('width'));
                                $(this).css({
                                    position: 'absolute',
                                    left: i * width + 'px',
                                    top: 0
                                })
                                var that = this;
                                setInterval(function() {
                                    var left = parseFloat($(that).css('left'));
                                    if (left < (width * (-1))) {
                                        $(that).css({ left: ($scope.topFiveList.length - 1) * width + 'px' });
                                    }
                                    var left = parseFloat($(that).css('left'));
                                    $(that).css({
                                        left: (left - 1.5) + 'px'
                                    })
                                }, 20)
                            })
                        }
                    }
                }
            }
        });
});
define('conttrollers/activity/inviteFriendTri',['jweixin', 'webappControllers'], function (wx, controllers) {
    controllers.controller('inviteFriendTri', function ($scope, $filter, $state, $location, resourceService, isWeixin, $timeout, $localStorage,$stateParams,$interval,signWeChatService) {
        // signWeChatService();
        $('body').scrollTop(0);
        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
            if ($filter('isRegister')().register==true) {
                $scope.user = $filter('isRegister')().user;
                $scope.uid = $scope.user.member.uid;
                $scope.shareUrl = 'http://m.zhuomilicai.com/friendreg?recommCode=' + $scope.user.member.mobilephone;
            }
            else{
                $scope.ftype = 1;
            }
        }
        else if ($stateParams.uid) {
            $scope.uid = $stateParams.uid;
        }
        else{
            $scope.ftype = 1;
        }
        resourceService.queryPost($scope, $filter('getUrl')('邀请好友三重礼top10'), {}, { name: '邀请好友三重礼top10' });
        // resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfig'), {}, { name: '任务详情' });
        // 计算器相关
        $scope.cpList = [
            {index:0,days:35,rate:6},
            {index:1,days:60,rate:7.5},
            {index:2,days:180,rate:10.5}
        ];
        $scope.showJsq = function(){
            $scope.investAmount = 50000;
            $scope.cpDetail = $scope.cpList[2];
            $('.jsq').fadeIn(200);
        }
        $scope.closeJsq = function(){
            $('.jsq').fadeOut(200);
        }
        $scope.changeTime = function(i){
            $scope.cpDetail = $scope.cpList[i];
        }
        // 活动规则
        $scope.showRule = function (i) {
            $scope.ruleShow = i;
            $('.rule').fadeIn(200);
        };
        $scope.closeRule = function () {
            $('.rule').fadeOut(200);
        };
        // 滑动到顶部
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $('body').offset().top });
        };
        // 领取奖金
        $scope.lingqu = function () {
            resourceService.queryPost($scope, $filter('getUrl')('getTheRewards'), { uid: $scope.uid, afid: $scope.afid }, { name: '领取奖励' });
        };
        $scope.closehongbao = function () {
            $('.activity-firend-hongbao').fadeOut(200);
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                // case '任务详情':
                //     $scope.data = data.map;
                //     $scope.afid = $scope.data.jsActivityFriend.id;
                //     $scope.endDate = $scope.data.jsActivityFriend.endDate/1000;
                //     $scope.days = Math.floor(($scope.endDate-new Date().getTime()/1000)/86400);
                //     $scope.hours = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400/3600);
                //     $scope.minutes = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400%3600/60);
                //     $interval(function(){
                //         $scope.days = Math.floor(($scope.endDate-new Date().getTime()/1000)/86400);
                //         $scope.hours = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400/3600);
                //         $scope.minutes = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400%3600/60);
                //     },1000)
                //     if ($scope.uid) {
                //         resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.afid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                //     }
                //     break;
                case '邀请好友列表':
                    $scope.firendList = data.map;
                    $scope.ftype = 2;
                    break;
                case '领取奖励':
                    $scope.hongbao = {};
                    $scope.hongbao.amount = data.map.amount;
                    $('.activity-firend-hongbao').fadeIn(200);
                    resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.afid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    break;
                case '邀请好友三重礼top10':
                    $scope.repeatInvestList = data.map.top;
                    $scope.data = data.map.activity;
                    $scope.afid = $scope.data.id;
                    if ($scope.uid) {
                        resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendStatistics'), { uid: $scope.uid, afid: $scope.afid, pageOn: 1, pageSize: 10000 }, { name: '邀请好友列表' });
                    }
                    $scope.endDate = $scope.data.endDate/1000;
                    $scope.days = Math.floor(($scope.endDate-new Date().getTime()/1000)/86400)>0?Math.floor(($scope.endDate-new Date().getTime()/1000)/86400):0;
                    $scope.hours = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400/3600)>0?Math.floor(($scope.endDate-new Date().getTime()/1000)%86400/3600):0;
                    $scope.minutes = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400%3600/60)>0?Math.floor(($scope.endDate-new Date().getTime()/1000)%86400%3600/60):0;
                    $interval(function(){
                        $scope.days = Math.floor(($scope.endDate-new Date().getTime()/1000)/86400)>0?Math.floor(($scope.endDate-new Date().getTime()/1000)/86400):0;
                        $scope.hours = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400/3600)>0?Math.floor(($scope.endDate-new Date().getTime()/1000)%86400/3600):0;
                        $scope.minutes = Math.floor(($scope.endDate-new Date().getTime()/1000)%86400%3600/60)>0?Math.floor(($scope.endDate-new Date().getTime()/1000)%86400%3600/60):0;
                    },1000)
                    break;
            }
        });
        // 邀请弹框
        $scope.lijiyaoqing = function () {
            if (isWeixin()) {
                $('.activity-firend-boxweixin').fadeIn(200);
            } else {
                $('.activity-firend-boxh5').fadeIn(200);
            }
        };
        $scope.copyShare = function () {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshareh5 = function () {
            $('.activity-firend-boxh5').fadeOut(200);
        }
        $scope.default = function (e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function () {
            $('.activity-firend-boxweixin').fadeOut(200);
        };
        // 分享相关
        var linkstr = "";
        if ($scope.user && $scope.user.member.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.member.mobilephone;
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                link: 'http://m.zhuomilicai.com/friendreg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/firend/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/friendreg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/firend/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/friendreg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/firend/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/friendreg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/firend/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/friendreg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/firend/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
    })
});

define('conttrollers/myMissionCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('myMissionCtrl'
        ,['$scope'
        ,'$filter'
        ,'$state'
        ,'$location'
        ,'resourceService'
        ,function($scope,$filter,$state,$location,resourceService){
            $scope.title='赚钱任务';
            $scope.active=0;
            function init(){
                resourceService.queryPost($scope, $filter('getUrl')('getActivityFriendConfigAll'),{status:$scope.active,pageOn:1,pageSize:500},{name:'赚钱任务'});
            }
            $scope.changeMode=function(i){
                $scope.active=i;
                init();
            }
            init();
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
                switch (type.name) {
                    case '赚钱任务': 
                    if (data.success) {
                        $scope.datalist=data.map.pageInfo;
                    }
                    break;
                }
            });
            $scope.toback = function() {
                $filter('跳回上一页')();
            };
            $scope.statego=function(item){
                $state.go('inviteFriend'+item.periods,{afid:item.id,wap:true})
            }
            $scope.date=new Date().getTime();
        }
    ]);
});
define('conttrollers/activity/newyearController',['webappControllers'], function (controllers) {
    controllers.controller('newyearController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$localStorage', '$stateParams', function ($scope, $rootScope, $filter, $state, resourceService, $localStorage, $stateParams) {
        $rootScope.title = $scope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
        }
        if ($stateParams.uid) {
            $scope.uid = $stateParams.uid;
        }
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }]);
})
;
define('conttrollers/activity/newyearact1Controller',['webappControllers'], function (controllers) {
    controllers.controller('newyearact1Controller', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$stateParams','$window', function ($scope, $rootScope, $filter, $state, resourceService, $stateParams,$window) {
        $rootScope.title = $scope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
        }
        if ($stateParams.uid) {
            $scope.uid = $stateParams.uid;
        }
        $scope.showRule = function () {
            $scope.ruleShow = true;
            $('body,html').css({ height: '100%', overflow: 'hidden' });
        }
        $scope.closeRule = function () {
            $scope.ruleShow = false;
            $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        $scope.gotoDetail = function (deadline) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: deadline }, { name: '获取最新产品' });
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取最新产品':
                    if ($scope.wap) {
                        $state.go("cpDetail", { pid: data.map.pid,from:'newyearact1' });
                    }
                    else {
                        $window.location.href = 'jsmp://page=9?pid='+data.map.pid+'&ptype='+data.map.pType;
                    }
                    break;
            };
        });
    }]);
});
define('conttrollers/activity/newyearshareController',['webappControllers'], function (controllers) {
    controllers.controller('newyearshareController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$stateParams', '$window', '$timeout', function ($scope, $rootScope, $filter, $state, resourceService, $stateParams, $window, $timeout) {
        // $scope.url = $stateParams;
        $rootScope.title = $scope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        if ($stateParams.uid) {
            $scope.uid = $stateParams.uid;
            resourceService.queryPost($scope, $filter('getUrl')('压岁钱分享页'), {
                shaerUid: $scope.uid
            }, { name: '压岁钱分享页' });
        }
        if($stateParams.recommPhone){
            $scope.recommPhone = $stateParams.recommPhone;
        }
        // if($stateParams.time){
        //     $scope.time = $stateParams.time;
        // }
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
        }
        else if ($stateParams.phone) {
            resourceService.queryPost($scope, $filter('getUrl')('领压岁钱'), {
                shaerUid: $scope.uid,
                mobilePhone: $stateParams.phone
            }, { name: '领压岁钱' });
        }
        $scope.click = function (tegForm) {
            $scope.mobilephone = tegForm.mobilephone.$viewValue;
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: tegForm.mobilephone.$viewValue
                }, { name: '注册验证手机号', tegForm: tegForm });
            }
            else {
                $rootScope.errorText = '请填写有效手机号码';
                $rootScope.maskError = true;
            }
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '压岁钱分享页':
                    if (data.success) {
                        $scope.userName = data.map.userName;
                    }
                    else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $('body,html').css({ height: '100%', overflow: 'hidden' });
                            $scope.fail = true;
                        } else {
                            resourceService.queryPost($scope, $filter('getUrl')('领压岁钱'), {
                                shaerUid: $scope.uid,
                                mobilePhone: $scope.mobilephone
                            }, { name: '领压岁钱' });
                        };
                    }
                    else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
                case '领压岁钱':
                    if (data.success) {
                        $scope.luckMoneyList = data.map.luckMoneyList;
                        if (data.map.isOverCount == true) {
                            $scope.status = 4;
                        }
                        else if (data.map.isOverdue == true) {
                            $scope.status = 3;
                        }
                        else {
                            $scope.status = 2;
                            $scope.luckMoney = data.map.luckMoney;
                            $scope.phone = data.map.mobilePhone;
                        }
                    }
                    else if(data.errorCode=='10001' || data.errorCode=='10004'){
                        $state.go('main.home');
                    }
                    break;
            }
        });
        $scope.close = function () {
            $('body,html').css({ height: 'auto', overflow: 'initial' });
            $scope.fail = false;
        }
        $scope.toNewyear = function () {
            $('body,html').css({ height: 'auto', overflow: 'initial' });
            if ($scope.wap) {
                $state.go('newyear', { wap: true });
            }
            else {
                $state.go('newyear');
            }
        }
    }])
        .directive("repeatFinish", function () {
            return {
                link: function (scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('newyearscrollText', function () {
            var temp = '<ul><li repeat-finish="finish()" ng-repeat="item in luckMoneyList">' +
                '<div><p>{{item.mobilePhone}}</p><p>{{item.updateTime | date:"yyyy-MM-dd HH:mm:ss"}}</p></div>' +
                '<h3>￥ {{item.amount}}元</h3>' +
                '</li></ul>'
            return {
                template: temp,
                scope: true,
                transclude: true,
                link: function ($scope, element, attrs) {
                    var a = 1;
                    $scope.finish = function () {
                        if(a==1){
                            a++;
                            $(element).find('li').each(function (i) {
                                var height = parseFloat($(this).css('height'));
                                $(this).css({
                                    position: 'absolute',
                                    top: (i * height) + 'px'
                                })
                                var that = this;
                                setInterval(function () {
                                    var top = parseFloat($(that).css('top'));
                                    if (top < (height * (-1))) {
                                        $(that).css({ top: ($scope.luckMoneyList.length - 1) * height + 'px' });
                                    }
                                    var top = parseFloat($(that).css('top'));
                                    $(that).css({
                                        top: (top - 1) + 'px'
                                    })
                                }, 20)
                            })
                        }
                    }
                }
            }
        });
});
define('conttrollers/actListController',['webappControllers'], function (controllers) {
    controllers.controller('actListController', ['$scope', '$filter', '$state', '$stateParams', 'resourceService', '$timeout', '$localStorage', function ($scope, $filter, $state, $stateParams, resourceService, $timeout, $localStorage) {
        $scope.title = '活动中心';
        $filter('isPath')('actList');
        var isLoad = true;
        var pageOn = 1;
        $scope.publicWelfareList = [];
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
            if ($stateParams.active == 3) {
                $scope.active = 3;
                $localStorage.active = 3;
                resourceService.queryPost($scope, $filter('getUrl')('公益活动列表'), { pageOn: pageOn, pageSize: 10 }, { name: '公益活动列表' });
            }
            else {
                $scope.active = 0;
                init();
            }
        }
        else {
            $scope.active = 3;
            resourceService.queryPost($scope, $filter('getUrl')('公益活动列表'), { pageOn: pageOn, pageSize: 10 }, { name: '公益活动列表' });
        }
        function init() {
            resourceService.queryPost($scope, $filter('getUrl')('活动聚合'), {
                pageSize: 100,
                pageOn: 1
            }, { name: '活动聚合' });
        }
        $scope.changeMode = function (i) {
            if ($scope.active != i) {
                $scope.active = i;
                if (i == 0) {
                    init();
                    delete $localStorage.active;
                }
                else if (i == 3) {
                    isLoad = true;
                    pageOn = 1;
                    $scope.publicWelfareList = [];
                    $localStorage.active = 3;
                    resourceService.queryPost($scope, $filter('getUrl')('公益活动列表'), { pageOn: pageOn, pageSize: 10 }, { name: '公益活动列表' });
                }
            }
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '活动聚合':
                    if (data.success) {
                        $scope.datalist = data.map.Page.rows;
                        $scope.ableList = data.map.Page.rows.filter(function (item) {
                            return item.status === 1
                        })
                        $scope.unableList = data.map.Page.rows.filter(function (item) {
                            return item.status === 2
                        })
                    }
                    break;
                case '公益活动列表':
                    if (data.success) {
                        $scope.page = data.map.page;
                        $scope.kfrBanner = data.map.openDayPicUrl;
                        $scope.kfrTitle = data.map.openDayLabel;
                        if (pageOn == $scope.page.pageOn) {
                            isLoad = true;
                        }
                        if (data.map.page.pageOn <= data.map.page.totalPage) {
                            pageOn = $scope.page.pageOn + 1;
                            for (var i = 0; i < data.map.page.rows.length; i++) {
                                $scope.publicWelfareList.push(data.map.page.rows[i]);
                            }
                        }
                        else {
                            isLoad = false;
                        }
                    }
                    break;
            }
        });
        $scope.loadMore = function (item) {
            if (item.id == $scope.publicWelfareList[$scope.publicWelfareList.length - 1].id) {
                if (isLoad) {
                    if (pageOn != $scope.page.pageOn) {
                        var obj = {
                            pageOn: pageOn,
                            pageSize: 10
                        };
                        resourceService.queryPost($scope, $filter('getUrl')('公益活动列表'), obj, { name: '公益活动列表' });
                        isLoad = false;
                    }
                };
            };
        };
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
    }]);
});

define('conttrollers/activity/friendReg',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('friendreg'
        ,['$scope'
        ,'$filter'
        ,'$state'
        ,'$location'
        ,function($scope,$filter,$state,$location){
        	if($location.$$search.toFrom != undefined || $location.$$search.recommCode!= undefined||$location.$$search.tid!=undefined){
                $localStorage.webFormPath = $location.$$search;
            };
            if($location.$$search.frompc){$scope.frompc=$location.$$search.frompc;}
            if($filter('isRegister')().user&&$filter('isRegister')().user.member&&$filter('isRegister')().user.member.id){
                $scope.user=$filter('isRegister')().user;
            }
            
        }
    ]);
});
define('conttrollers/appdownload',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('appdownload'
        ,['$scope'
        ,function($scope){
            var browser = {
                versions: function() {
                    var u = navigator.userAgent,
                        app = navigator.appVersion;
                    return { //移动终端浏览器版本信息
                        trident: u.indexOf('Trident') > -1, //IE内核
                        presto: u.indexOf('Presto') > -1, //opera内核
                        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                        mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                        iPad: u.indexOf('iPad') > -1, //是否iPad
                        webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                    };
                }(),
                language: (navigator.browserLanguage || navigator.language).toLowerCase()
            }
            function isWeiXin(){
                var ua = window.navigator.userAgent.toLowerCase();
                if(ua.match(/MicroMessenger/i) == 'micromessenger'){
                    return true;
                }else{
                    return false;
                }
            }
            $scope.downloadclick=function(){
                if (isWeiXin()){
                    if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                        $('.share-ios').fadeIn(200);
                    } else {
                        // $('.share-android').fadeIn(200);
                        window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                    }
                } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";

                } else if (browser.versions.android) {
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                } else {
                    window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
                }
            };
            $scope.closethis=function(){
                $('.share-ios,.share-android').fadeOut(200);
            };
        }
    ]);
});
define('conttrollers/app2download',['webappControllers'], function (controllers) {
    controllers.controller('app2download', function ($scope,$rootScope) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        var endDate = new Date(2017,4,5,0,0,0).getTime();
        var date = new Date().getTime();
        if(endDate>date){
            $scope.status = 1;
        }
        else{
            $scope.status = 2;
        }
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                                 window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    });
});

define('conttrollers/activity/yuebiao',[
    'webappControllers'
]
    , function (controllers) {
        controllers.controller('yuebiaoCtrl'
            , ['$scope'
                , '$filter'
                , '$state'
                , "$stateParams"
                , 'resourceService'
                , function ($scope, $filter, $state, $stateParams, resourceService) {
                    $scope.name = $stateParams.name;
                    $scope.prid = $stateParams.prid;
                    var user = $filter('isRegister')().user;
                    if (!user || !user.member || !user.member.uid) {
                        $state.go('dl');
                    }
                    $scope.yuebiaoFn = function () {
                        if (!$scope.amount || $scope.amount % 1200 != 0 || $scope.amount <= 0 || $scope.amount > 1000000) {
                            alert("请输入正确的预约金额！");
                        } else {
                            resourceService.queryPost($scope, $filter('getUrl')('getReservation'), {
                                prid: $scope.prid,
                                uid: user.member.uid,
                                amount: $scope.amount
                            }, { name: 'getReservation' });
                        }

                    };
                    $scope.gohistory = function () {
                        if ($stateParams.toState == "main.home") {
                            $state.go($stateParams.toState);
                        } else if ($stateParams.toState == "cpDetail") {
                            $state.go($stateParams.toState, { pid: $stateParams.pid, wap: true });
                        } else if ($stateParams.toState == "special") {
                            $state.go($stateParams.toState, { upgrade: 0, wap: true });
                        }
                    };
                    $scope.closeOver = function () {
                        $scope.isOver = false;
                    };
                    $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
                        switch (eObj.name) {
                            case 'getReservation':
                                if (data.success) {
                                    $scope.isSuccess = true;
                                } else {
                                    if (data.errorCode == "1003") {
                                        $scope.isOver = true;
                                    }
                                }
                                break;
                        };
                    });
                }
            ]);
    });
define('conttrollers/investSuccess',[
    'webappControllers'
], function(controllers) {
    controllers.controller('investSuccess', ['$scope', '$rootScope', '$filter', '$state', 'resourceService','$localStorage', function($scope, $rootScope, $filter, $state, resourceService,$localStorage) {
        $rootScope.title = "投资成功";
        $scope.data={};
        $scope.user = $filter('isRegister')().user.member;
        if(!$scope.user){$state.go('dl');return;}
        if($localStorage.successData){
            $scope.data=$localStorage.successData;
        }
        delete $localStorage.successData;
        if($scope.data.coupon&&$scope.data.coupon.type){
            if($scope.data.coupon.type==1){
                $scope.couponText='返现券 '+$scope.data.coupon.amount+"元";
                $scope.couponTitle='红包';
            }else if($scope.data.coupon.type==2){
                $scope.couponText='加息券 '+$scope.data.coupon.raisedRates+"%";
                $scope.couponTitle='加息券';
            }
            else if($scope.data.coupon.type==4){
                $scope.couponText='翻倍券 '+$scope.data.coupon.multiple+"倍";
                $scope.couponTitle='翻倍券';
            }
        }
        $scope.closeyaoqing=function(){
            $('.yaoqinghaoyou').fadeOut(200);
        };
        $scope.showCancel=function(){
            $scope.cancelShow=true;
        };
        $scope.closeCancel=function(){
            $scope.cancelShow=false;
        };


    }]);
})
;
define('conttrollers/continuedInvest',[
    'webappControllers'
], function(controllers) {
    controllers.controller('continuedInvest', ['$scope', '$rootScope', '$filter', '$state', 'resourceService','$timeout', function($scope, $rootScope, $filter, $state, resourceService,$timeout) {
        $rootScope.title = "领取现金";
        $scope.user = $filter('isRegister')().user.member;
        if(!$scope.user){
            $state.go('dl');
            return;
        }
        $scope.swiper = {
            name: "hongbaoSwiper",
            readyLoading: false
        };
        $scope.conf = {
            initialSlide:1,
            slidesPerView: 3,
            centeredSlides: true,
            grabCursor: true,
            onTap:function(i,event){
                console.log(i);
                if(i.clickedIndex>=0){
                    i.slideTo(i.clickedIndex);
                }
            },
            onSlideChangeEnd:function(swiper){
                console.log(swiper);
                var index=swiper.activeIndex%3;
                $scope.$apply(function(){
                    $scope.activeData=$scope.rewardList[index];
                })
            }
        };
        $('body').scrollTop(0);
        $scope.cancelShow=false;
        $scope.sureShow=false;
        $scope.linqu=function(){
            $scope.activeData=item;
            $scope.swiper.swiper.slideTo($index);
        };
        $scope.toback=function(){
            $state.go("main.bankBillList");
        };
        // $scope.clickitem=function(item,$index){
        //     $scope.activeData=item;
        //     $scope.swiper.swiper.slideTo($index);
        // };
        $scope.tishiclick=function(){
            $('.tishiclick').slideUp(200);
            $('.wenxintishi').slideDown(200);
        };
        $scope.lijilingqu=function(){
            $scope.sureShow=true;
        };
        $scope.fangqi=function(){
            $scope.cancelShow=true;
        };
        $scope.closethink=function(){
            $scope.cancelShow=false;
        };
        $scope.subxutou=function(){
            resourceService.queryPost($scope, $filter('getUrl')('addContinueReward'), {
                    uid:$scope.user.uid,
                    period:parseInt($scope.activeData.deadline)
                }, '确认续投');
        };
        $scope.left=0;
        $scope.lock=false;
        $scope.huadongstart=function(e){
            e.preventDefault();
            if(!$scope.lock){
                $scope.templeft=$('.huadong-box').offset().left;
                $('.huadong').stop();
                $('.huadongjt').stop();
                var width=parseInt($('.huadong-box').width())+parseInt($('.huadong-box').css('padding-left'))+parseInt($('.huadong-box').css('padding-right'))-parseInt($('.huadong').width());
                $('.huadongjt img').width(width-parseInt($('.yuan').width()));
                console.log($scope.templeft);
            }
        };
        $scope.huadongmove=function(e){
            e.preventDefault();
            if(!$scope.lock){
                var left=e.touches[0].clientX-$scope.templeft-parseInt($('.huadong').width()/2);
                var width=parseInt($('.huadong-box').width())+parseInt($('.huadong-box').css('padding-left'))+parseInt($('.huadong-box').css('padding-right'))-parseInt($('.huadong').width());
                console.log(width,left);
                if(left>=0 && left<width){
                    $('.huadong').css({left:left});
                    $('.huadongjt').width(left-parseInt($('.yuan').width()));
                }else if(left>=width){
                    left=width;
                    $('.huadong').css({left:left});
                    $('.huadongjt').width(left-parseInt($('.yuan').width()));
                    $scope.lock=true;
                    var w=100;
                    $('.huadong').css('background','#e84034');
                    $('.huadong img').animate({width:0,height:0,'margin-left':$('.huadong img').width()/2,'margin-top':$('.huadong img').width()/2},function(){
                        $('.querenxutou').slideDown();
                        $('.tishi').slideUp();
                    });
                }
            }
        };
        $scope.huadongend=function(e){
            e.preventDefault();
            if(!$scope.lock){
                $('.huadong').animate({left:0},400);
                $('.huadongjt').animate({width:0},400);
            }

        };
        $scope.huadongcancel=function(e){
            e.preventDefault();
            if(!$scope.lock){
                $('.huadong').animate({left:0},400);
                $('.huadongjt').animate({width:0},400);
            }
        };


        resourceService.queryPost($scope, $filter('getUrl')('getContinueReward'), {
                    uid:$scope.user.uid
                }, '续投');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type) {
                case '续投':
                    if (data.success) {
                        $scope.parcelList=data.map.parcelList;
                        $scope.rewardList=data.map.rewardList;
                        var objs=$scope.rewardList.splice(1,1);
                        $scope.rewardList.push(objs[0]);
                        $scope.parcelList.push($scope.parcelList[0]);
                        $scope.activeData=$scope.rewardList[1];
                        var t;
                        $timeout(function(){
                            var index=0;
                            t=setInterval(function(){
                                index++;
                                $('.xutoulist-box ul').animate({'margin-top':-2.2*index+"rem"},500,function(){
                                    if(index==$scope.parcelList.length-1){
                                        index=0;
                                        $('.xutoulist-box ul').css({'margin-top':0});
                                    }
                                });
                            },3000);
                        });
                        $scope.$on('$stateChangeStart',function(){
                            clearInterval(t);
                        });
                        $scope.swiper.initSwiper();
                    }
                break;
                case '确认续投':
                    $scope.successShow=true;
                break;
            }
        });
    }]);
})
;
// JavaScript Document
(function ($) {
    //for html5 canvas;
    var $window = window,
        $timeout = setTimeout;

    var supportCanvas = function () {
        var eCan = document.createElement("canvas");
        return (typeof eCan.getContext) == "function";
    };
   
    window.Snow = function (element, settings) {
        (function () {
            var lastTime = 0;
            var vendors = ['webkit', 'moz'];
            for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
                window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
                window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||    // name has changed in Webkit
                    window[vendors[x] + 'CancelRequestAnimationFrame'];
            }

            if (!window.requestAnimationFrame) {
                window.requestAnimationFrame = function (callback, element) {
                    /*
                    var currTime = new Date().getTime();
                    var timeToCall = Math.max(0, 16.7 - (currTime - lastTime));
                    var id = window.setTimeout(function () {
                        callback(currTime + timeToCall);
                    }, timeToCall);
                    lastTime = currTime + timeToCall;
                     */
                    var timeToCall = 14; //freezes in safari for windows ,and mac to , so i change time to call with 14;
                    var id = window.setTimeout(function () {
                        callback(timeToCall);
                    }, timeToCall);

                    return id;
                };
            }
            if (!window.cancelAnimationFrame) {
                window.cancelAnimationFrame = function (id) {
                    clearTimeout(id);
                };
            }
        }());
        this.settings = settings,
            this.flakes = [],
            this.flakeCount = settings.count,
            this.mx = -100,
            this.my = -100,
            this.init(element)
    };
    Snow.prototype.init = function (element) {
        this.canvas = element.get(0), this.ctx = this.canvas.getContext("2d"), this.canvas.width = $window.innerWidth*1.3, this.canvas.height = $window.innerHeight, this.flakes = [];
        this.settings.size = Math.floor(5 * Math.random());
        for (var i = 0; i < this.flakeCount; i++) {
            var x = Math.floor(Math.random() * this.canvas.width),
                y = Math.floor(Math.random() * this.canvas.height),
                size = Math.floor(100 * Math.random()) % this.settings.size + 2,
                speed = Math.floor(100 * Math.random()) % this.settings.speed + Math.random() * size / 10 + .5,
                opacity = .5 * Math.random() + this.settings.opacity;
            this.flakes.push({
                speed: speed,
                velY: speed,
                velX: 0,
                x: x,
                y: y,
                size: size,
                stepSize: Math.random() / 30,
                step: 0,
                angle: 180,
                opacity: opacity
            })
        }
        1 == this.settings.interaction && this.canvas.addEventListener("mousemove", function (e) {
            this.mx = e.clientX, this.my = e.client
        });
        var thiz = this;
        $($window).resize(function () {
            thiz.ctx.clearRect(0, 0, thiz.canvas.width, thiz.canvas.height), thiz.canvas.width = $window.innerWidth*1.3, thiz.canvas.height = $window.innerHeight
        });
        if (typeof this.settings.image === "string") {
            this.image = $("<img src='" + this.settings.image + "' style='display: none'>");
        }
        ;

        this.snow();
    }, Snow.prototype.snow = function () {
        var thiz = this,
            render = function () {
                thiz.ctx.clearRect(0, 0, thiz.canvas.width, thiz.canvas.height);
                for (var i = 0; i < thiz.flakeCount; i++) {
                    var flake = thiz.flakes[i],
                        x = thiz.mx,
                        y = thiz.my,
                        minDist = 100,
                        x2 = flake.x,
                        y2 = flake.y,
                        dist = Math.sqrt((x2 - x) * (x2 - x) + (y2 - y) * (y2 - y));
                    if (minDist > dist) {
                        var force = minDist / (dist * dist),
                            xcomp = (x - x2) / dist,
                            ycomp = (y - y2) / dist,
                            deltaV = force / 2;
                        flake.velX -= deltaV * xcomp, flake.velY -= deltaV * ycomp
                    } else
                        switch (flake.velX *= .98, flake.velY <= flake.speed && (flake.velY = flake.speed), thiz.settings.windPower) {
                            case !1:
                                flake.velX += Math.cos(flake.step += .05) * flake.stepSize;
                                break;
                            case 0:
                                flake.velX += Math.cos(flake.step += .05) * flake.stepSize;
                                break;
                            default:
                                flake.velX += .01 + thiz.settings.windPower / 100
                        }
                        if(isNaN(flake.velY)){
                            flake.velY = 0.5;
                        }
                        if(isNaN(flake.velX)){
                            flake.velX = 0.5;
                        }
                    if (flake.y += flake.velY, flake.x += flake.velX, (flake.y >= thiz.canvas.height || flake.y <= 0) && thiz.resetFlake(flake), (flake.x >= thiz.canvas.width || flake.x <= 0) && thiz.resetFlake(flake), 0 == thiz.settings.image) {
                        if(isNaN(flake.size)){
                            flake.size = 2;
                        }
                        // flake.y = 0 + parseFloat(flake.y);
                        // console.log('ctx====',flake.size);
                        // flake.size = 0 + parseFloat(flake.size);
                        var grd = thiz.ctx.createRadialGradient(flake.x, flake.y, 0, flake.x, flake.y, flake.size - 1);
                        // var grd = thiz.ctx.createRadialGradient(1.2, 1, 0, 2, 2, 2 - 1);
                        grd.addColorStop(0, thiz.settings.startColor), grd.addColorStop(1, thiz.settings.endColor), thiz.ctx.fillStyle = grd, thiz.ctx.beginPath(), thiz.ctx.arc(flake.x, flake.y, flake.size, 0, 2 * Math.PI), thiz.ctx.fill()
                    } else{
                        console.log('2=======',thiz.image.get(0), flake.x, flake.y, 2 * flake.size, 2 * flake.size);
                        thiz.ctx.drawImage(thiz.image.get(0), flake.x, flake.y, 2 * flake.size, 2 * flake.size);
                    }
                }
                $window.cancelAnimationFrame(render), $window.requestAnimationFrame(render);
            };
        render();
    }, Snow.prototype.resetFlake = function (flake) {
        if (0 == this.settings.windPower || 0 == this.settings.windPower)
            flake.x = Math.floor(Math.random() * this.canvas.width), flake.y = 0;
        else if (this.settings.windPower > 0) {
            var xarray = Array(Math.floor(Math.random() * this.canvas.width), 0),
                yarray = Array(0, Math.floor(Math.random() * this.canvas.height)),
                allarray = Array(xarray, yarray),
                selected_array = allarray[Math.floor(Math.random() * allarray.length)];
            flake.x = selected_array[0], flake.y = selected_array[1]
        } else {
            var xarray = Array(Math.floor(Math.random() * this.canvas.width), 0),
                yarray = Array(this.canvas.width, Math.floor(Math.random() * this.canvas.height)),
                allarray = Array(xarray, yarray),
                selected_array = allarray[Math.floor(Math.random() * allarray.length)];
            flake.x = selected_array[0], flake.y = selected_array[1]
        }
        flake.size = Math.floor(100 * Math.random()) % this.settings.size + 2, flake.speed = Math.floor(100 * Math.random()) % this.settings.speed + Math.random() * flake.size / 10 + .5, flake.velY = flake.speed, flake.velX = 0, flake.opacity = .5 * Math.random() + this.settings.opacity
    };

    $.fn.snow = function () {
        var userCanvas = supportCanvas();
        userCanvas && $(this).each(function (i, e) {
            var scope = {};
            $.each(e.attributes, function (index, key) {
                scope[ $.camelCase(key.name) ] = Number(Number(key.value)) ? Number(key.value) : key.value
            });
            if (typeof scope.image === "string" && scope.image === "false") {
                scope.image = false
            }
            ;

            new Snow($(e), {
                speed: 1 || 0,
                interaction: scope.interaction || !0,
                size: scope.size || 2,
                count: scope.count || 200,
                opacity: scope.opacity || 1,
                startColor: scope.startColor || "rgba(255,255,255,1)",
                endColor: scope.endColor || "rgba(255,255,255,0)",
                windPower: scope.windPower || 0,
                image: scope.image || !1
            });
        });
        if (!userCanvas) {
            var setting = {};
            $(this).each(function (i, e) {
                setting["image"] = $(e).attr("image") || "./imgs/snow.png";
                $(this).remove();
                createSnow("", 40);
            });
        }
        ;
    };

    //for ie678
    /**
     * method createSnow("", 40);
     * method removeSnow();
     */
    function k(a, b, c) {
        if (a.addEventListener) a.addEventListener(b, c, false);
        else a.attachEvent && a.attachEvent("on" + b, c)
    }

    function g(a) {
        if (typeof window.onload != "function") window.onload = a;
        else {
            var b = window.onload;
            window.onload = function () {
                b();
                a()
            }
        }
    }

    function h() {
        var a = {};
        for (type in {
            Top: "",
            Left: ""
        }) {
            var b = type == "Top" ? "Y" : "X";
            if (typeof window["page" + b + "Offset"] != "undefined")
                a[type.toLowerCase()] = window["page" + b + "Offset"];
            else {
                b = document.documentElement.clientHeight ? document.documentElement : document.body;
                a[type.toLowerCase()] = b["scroll" + type]
            }
        }
        return a
    }

    function l() {
        var a = document.body,
            b;
        if (window.innerHeight) b = window.innerHeight;
        else if (a.parentElement.clientHeight) b = a.parentElement.clientHeight;
        else if (a && a.clientHeight) b = a.clientHeight;
        return b
    };
    var j = true;
    var f = true;
    var m = null;
    var c = [];
    var createSnow = function (a, b) {
        clearInterval(m);
        c = [];
        m = setInterval(function () {
            f && b > c.length && Math.random() < b * 0.0025 && c.push(new i(a));
            !f && !c.length && clearInterval(m);
            for (var e = h().top, n = l(), d = c.length - 1; d >= 0; d--)
                if (c[d])
                    if (c[d].top < e || c[d].top + c[d].size + 1 > e + n) {
                        c[d].remove();
                        c[d] = null;
                        c.splice(d, 1)
                    } else {
                        c[d].move();
                        c[d].draw()
                    }
        }, 40);
        k(window, "scroll",
            function () {
                for (var e = c.length - 1; e >= 0; e--) c[e].draw()
            })
    };
    var removeSnow = function () {
        clearInterval(m);
        do {
            c.pop().remove();
        } while (c.length);
    };

    //雪花的构造函数;
    function i(a) {
        this.parent = document.body;
        this.createEl(this.parent, a);
        this.size = Math.random() * 5 + 5;
        this.el.style.width = Math.round(this.size) + "px";
        this.el.style.height = Math.round(this.size) + "px";
        this.maxLeft = document.body.offsetWidth - this.size;
        this.maxTop = document.body.offsetHeight - this.size;
        this.left = Math.random() * this.maxLeft;
        this.top = h().top + 1;
        this.angle = 1.4 + 0.2 * Math.random();
        this.minAngle = 1.4;
        this.maxAngle = 1.6;
        this.angleDelta = 0.01 * Math.random();
        this.speed = 2 + Math.random()
    }

    i.prototype = {
        createEl: function (a, b) {
            this.el = document.createElement("img");
            this.el.classname = "nicesnowclass";
            this.el.setAttribute("src", b || "./html/activity/web/snow.png");
            this.el.style.position = "absolute";
            this.el.style.display = "block";
            this.el.style.zIndex = "99999";
            this.parent.appendChild(this.el)
        },
        move: function () {
            if (this.angle < this.minAngle || this.angle > this.maxAngle)
                this.angleDelta = -this.angleDelta;
            this.angle += this.angleDelta;
            this.left += this.speed * Math.cos(this.angle * Math.PI);
            this.top -= this.speed * Math.sin(this.angle * Math.PI);
            if (this.left < 0) this.left = this.maxLeft;
            else if (this.left > this.maxLeft) this.left = 0
        },
        draw: function () {
            this.el.style.top = Math.round(this.top) + "px";
            this.el.style.left = Math.round(this.left) + "px"
        },
        remove: function () {
            this.parent.removeChild(this.el);
            this.parent = this.el = null
        }
    };
})(jQuery);
define("xue", function(){});

define('conttrollers/shuangdanController',['jweixin', 'webappControllers', 'xue'], function (wx, controllers) {
    controllers.controller('shuangdanController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$timeout', '$location', '$anchorScroll', '$stateParams','isWeixin','ngDialog', function ($scope, $rootScope, $filter, $state, resourceService, $timeout, $location, $anchorScroll, $stateParams, isWeixin,ngDialog) {
        $rootScope.title = "";
        /*下雪*/
        $(".snow-canvas").snow();
        var uid = '';
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
            $scope.user = $filter('isRegister')().user.member;
            if($scope.user){
                uid = $scope.user.uid;
            }
        }
        else if ($stateParams.uid) {
            $scope.user = {};
            $scope.user.uid = $stateParams.uid;
        }
        if ($scope.user) {
            resourceService.queryPost($scope, $filter('getUrl')('双旦活动'), {
                uid: $scope.user.uid
            }, '双旦活动');
        }
        else {
            resourceService.queryPost($scope, $filter('getUrl')('双旦活动'), {}, '双旦活动');
        }
        $('body').scrollTop(0);
        $scope.openBox = function () {
            if(!$scope.user){
                if($stateParams.wap){
                    $state.go('dl',{returnurl: 'shuangdan'});
                }
            }
            else{
                resourceService.queryPost($scope, $filter('getUrl')('拆双旦红包'), {
                    uid: $scope.user.uid
                }, '拆双旦红包');
            }
            // else if ($scope.isOldUser == true && $scope.pullCount > 0) {
            //     resourceService.queryPost($scope, $filter('getUrl')('拆双旦红包'), {
            //         uid: $scope.user.uid
            //     }, '拆双旦红包');
            // }
            // else if ($scope.isOldUser == false) {
            //     $scope.boxOpen = true;
            //     $scope.boxType = 'new';
            //     $("body,html").css({ "overflow": "hidden", "height": "100%" });
            // }
            // else {
            //     $scope.boxOpen = true;
            //     $scope.boxType = 'none';
            //     $("body,html").css({ "overflow": "hidden", "height": "100%" });
            // }
        };
        $scope.closeBox = function () {
            $scope.boxOpen = false;
            $scope.boxType = '';
            $("body,html").css({ "overflow": "auto", "height": "auto" });
        };
        $scope.tojxq = function () {
            $scope.boxOpen = false;
            $scope.boxType = '';
            $("body,html").css({ "overflow": "auto", "height": "auto" });
            $location.hash('jxq');
            $anchorScroll();
        }
        $scope.tolpq = function () {
            $scope.boxOpen = false;
            $scope.boxType = '';
            $("body,html").css({ "overflow": "auto", "height": "auto" });
            $location.hash('lpq');
            $anchorScroll();
        }
        $scope.toLists = function () {
            $scope.boxOpen = false;
            $scope.boxType = '';
            $("body,html").css({ "overflow": "auto", "height": "auto" });
            $state.go('main.bankBillList');
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '双旦活动':
                    if (data.success) {
                        $scope.productList = data.map.productList;
                        $scope.isOldUser = data.map.isOldUser;
                        $scope.pullCount = data.map.pullCount;
                        $scope.luckyList = data.map.luckyList;
                        $scope.activity60 = data.map.activity_60;
                        $scope.activity180 = data.map.activity_180;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
                case '拆双旦红包':
                    if (data.success) {
                        $scope.pullCount = data.map.pullCount;
                        $scope.amount = data.map.amount;
                        $scope.prizeName = data.map.prizeName;
                        $scope.boxOpen = true;
                        $scope.boxType = 'share';
                        $("body,html").css({ "overflow": "hidden", "height": "100%" });
                    }
                    else if(data.errorCode == 9999 || data.errorCode == 1002){
                        $scope.boxOpen = true;
                        $scope.boxType = 'error';
                        $("body,html").css({ "overflow": "hidden", "height": "100%" });
                    }
                    else if(data.errorCode == 1001){
                        ngDialog.open({
                            template: '<p class="error-msg">活动已经结束</p>',
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                    }
                    else if(data.errorCode == 1003){
                        if ($scope.isOldUser == false) {
                            $scope.boxOpen = true;
                            $scope.boxType = 'new';
                            $("body,html").css({ "overflow": "hidden", "height": "100%" });
                        }
                        else {
                            $scope.boxOpen = true;
                            $scope.boxType = 'none';
                            $("body,html").css({ "overflow": "hidden", "height": "100%" });
                        }
                    }
                    break;
            };
        });

        if(isWeixin()){
            $scope.weixin = true;
        }
        else{
            $scope.weixin = false;
        }

        $scope.share = function () {
            $('.activity-firend-boxweixin').fadeIn(150);
        };
        $scope.closeshareweixin = function () {
            $('.activity-firend-boxweixin').fadeOut(150);
        };

        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '我在参加拆钱袋活动，拆了'+$scope.amount+'元现金，你也来参加吧！', // 分享标题
                link: 'http://m.zhuomilicai.com/shuangdanshare?wap=true&uid=' + uid, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/shuangdan/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '我在参加拆钱袋活动，拆了'+$scope.amount+'元现金，你也来参加吧！', // 分享标题
                // desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/shuangdanshare?wap=true&uid=' + uid, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/shuangdan/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '我在参加拆钱袋活动，拆了'+$scope.amount+'元现金，你也来参加吧！', // 分享标题
                // desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/shuangdanshare?wap=true&uid=' + uid, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/shuangdan/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '我在参加拆钱袋活动，拆了'+$scope.amount+'元现金，你也来参加吧！', // 分享标题
                // desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/shuangdanshare?wap=true&uid=' + uid, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/shuangdan/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '我在参加拆钱袋活动，拆了'+$scope.amount+'元现金，你也来参加吧！', // 分享标题
                // desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/shuangdanshare?wap=true&uid=' + uid, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/shuangdan/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    }])
        .directive("repeatFinish", function () {
            return {
                link: function (scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('scrollLeft', function () {
            var temp = '<li repeat-finish="finish()" ng-repeat="item in luckyList">' +
                '<p>{{item.userName}}获得了{{item.amount}}元</p>' +
                '</li>'
            return {
                restrict: 'A',
                template: temp,
                scope: true,
                link: function ($scope, element, attrs) {
                    var a = 1;
                    $scope.finish = function () {
                        if(a==1){
                            a++;
                            $(element).find('li').each(function (i) {
                                var width = parseFloat($(this).css('width'));
                                $(this).css({
                                    left: i * width + 'px'
                                })
                                var that = this;
                                setInterval(function () {
                                    var left = parseFloat($(that).css('left'));
                                    if (left < (width * (-1))) {
                                        $(that).css({ left: ($scope.luckyList.length - 1) * width + 'px' });
                                    }
                                    var left = parseFloat($(that).css('left'));
                                    $(that).css({
                                        left: (left - 2) + 'px'
                                    })
                                }, 20)
                            })
                        }
                    }
                }
            }
        });
})
;
define('conttrollers/shuangdanshareController',['webappControllers'], function (controllers) {
    controllers.controller('shuangdanshareController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$timeout', '$location', '$anchorScroll', '$stateParams', function ($scope, $rootScope, $filter, $state, resourceService, $timeout, $location, $anchorScroll, $stateParams) {
        $scope.wap = $stateParams.wap;
        $('body').scrollTop(0);

        resourceService.queryPost($scope, $filter('getUrl')('双旦分享'), {
            uid: $stateParams.uid
        }, '双旦分享');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '双旦分享':
                    if (data.success) {
                        $scope.name = data.map.name;
                        $scope.amount = data.map.amount;
                        $scope.phone = data.map.phone;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            };
        });
    }])
})
;
define('conttrollers/tjsController',['jweixin','webappControllers'], function (wx,controllers) {
    controllers.controller('tjsController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$timeout', '$location', '$anchorScroll', '$stateParams', '$localStorage','isWeixin','signWeChatService', function ($scope, $rootScope, $filter, $state, resourceService, $timeout, $location, $anchorScroll, $stateParams, $localStorage,isWeixin,signWeChatService) {
        // signWeChatService();
        $('body').scrollTop(0);
        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        };
        $filter('isPath')('tjs');
        $rootScope.title = '汇元金服';
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
        }
        else{
            $scope.uid = $stateParams.uid;
        }
        resourceService.queryPost($scope, $filter('getUrl')('tjs活动页'), {}, '投即送活动页');
        var $dataTable = $('.data-table');
        var trHeight = $('.data-list').height()/5;
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '投即送活动页':
                    if (data.success) {
                        $scope.prizeList = data.map.prizeList;
                        $scope.investList = data.map.investList;
                        $scope.orderShareList = data.map.orderShareList;
                        $scope.investCount = data.map.investCount;
                        // 列表数据轮动
                        if ($scope.investList.length > 5) {
                            setInterval(function() {
                                $dataTable.animate({'margin-top': '-'+trHeight+'px'},1000,function() {
                                    $dataTable.find('tr').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top',0);
                                });
                            }, 3000);
                        }
                        $timeout(function(){
                            var swiper = new Swiper('.swiper-container', {
                                paginationClickable: true,
                                autoplay: 3000,
                                spaceBetween: 0,
                                loop: true,
                                autoplayDisableOnInteraction: false,
                                pagination: '.swiper-pagination-h'
                            });
                        })
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
            };
        });
        $scope.showRule = function () {
            $('.rule-box').fadeIn(200);
        };
        $scope.closeRule = function () {
            $('.rule-box').fadeOut(200);
        };
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: 0 });
        };

        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                "SymbianOS", "Windows Phone",
                "iPad", "iPod"
            ];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        };
        $scope.share = function() {
            if (isWeixin()) {
                $('.activity-tjs-boxweixin').fadeIn(200);
            } else {
                $('.activity-tjs-boxh5').fadeIn(200);
            }
        };
        $scope.copyShare = function() {
            var e = document.getElementById("shareurl"); //对象是contents 
            e.select(); //选择对象 
            document.execCommand("Copy");
            $scope.isCopy = true;
            if (IsPC()) {
                $scope.isCopytext = '链接已复制';
            } else {
                $scope.isCopytext = '长按文字全选复制链接';
            }
            /*$timeout(function(){
                $('.activity-firend-boxh5').fadeOut(200);
                $scope.isCopy = false;
            },1000);*/
        };
        $scope.closeshare = function() {
            $('.activity-tjs-boxh5').fadeOut(200);
        }
        $scope.default = function(e) {
            e.stopPropagation();
        }
        $scope.closeshareweixin = function() {
            $('.activity-tjs-boxweixin').fadeOut(200);
        };
        wx.ready(function() {
            wx.onMenuShareTimeline({
                title: '不花钱也能消费，爆款好礼免费送！', // 分享标题
                link: 'http://m.zhuomilicai.com/tjs?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/tjs/share.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '不花钱也能消费，爆款好礼免费送！', // 分享标题
                desc: '智慧投资，0元消费~ ', // 分享描述
                link: 'http://m.zhuomilicai.com/tjs?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/tjs/share.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '不花钱也能消费，爆款好礼免费送！', // 分享标题
                desc: '智慧投资，0元消费~ ', // 分享描述
                link: 'http://m.zhuomilicai.com/tjs?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/tjs/share.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '不花钱也能消费，爆款好礼免费送！', // 分享标题
                desc: '智慧投资，0元消费~ ', // 分享描述
                link: 'http://m.zhuomilicai.com/tjs?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/tjs/share.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '不花钱也能消费，爆款好礼免费送！', // 分享标题
                desc: '智慧投资，0元消费~ ', // 分享描述
                link: 'http://m.zhuomilicai.com/tjs?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/activity/tjs/share.png', // 分享图标
                success: function() {
                    alert('分享成功！');
                },
                cancel: function() {
                    alert('您取消了分享！');
                }
            });
        })
    }])
})
;
define('conttrollers/mytjsController',['webappControllers','jquery'], function (controllers) {
    controllers.controller('mytjsController', function ($scope, $rootScope, $filter, $state, resourceService, $timeout, $location, $anchorScroll, $stateParams, $window) {
        $rootScope.title = '投资即送';
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
            $scope.userOBJ = $filter('isRegister')();
            $scope.user = $scope.userOBJ.user.member;
            if ($scope.userOBJ.register) {
                resourceService.queryPost($scope, $filter('getUrl')('tjs投资记录'), {
                    uid: $scope.userOBJ.user.member.uid
                }, '投即送投资记录');
                // resourceService.queryPost($scope, $filter('getUrl')('tjs获取地址'), {
                //     uid: $scope.userOBJ.user.member.uid
                // }, '投即送获取收货地址');
            } else {
                $state.go('dl',{returnurl:'mytjs'});
                return;
            };
        }
        else{
            if($stateParams.uid){
                resourceService.queryPost($scope, $filter('getUrl')('tjs投资记录'), {
                    uid: $stateParams.uid
                }, '投即送投资记录');
            }
            else{
                $window.location.href = 'jsmp://page=4?';
            }
            // resourceService.queryPost($scope, $filter('getUrl')('tjs获取地址'), {
            //     uid: $stateParams.uid
            // }, '投即送获取收货地址');
        }
        var $dataTable = $('.data-table');
        var trHeight = $('.data-list').height()/4;
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '投即送投资记录':
                    if (data.success) {
                        $scope.logsList = data.map.logsList;
                        // 列表数据轮动
                        // if ($scope.logsList.length > 4) {
                        //     setInterval(function() {
                        //         $dataTable.animate({'margin-top': '-'+trHeight+'px'},1000,function() {
                        //             $dataTable.find('tr').eq(0).appendTo($dataTable);
                        //             $dataTable.css('margin-top',0);
                        //         });
                        //     }, 3000);
                        // }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case '投即送获取收货地址':
                    if (data.success) {
                        if(data.map.jsMemberInfo){
                            $scope.name = data.map.jsMemberInfo.name;
                            $scope.address = data.map.jsMemberInfo.address;
                            $scope.phone = data.map.jsMemberInfo.phone;
                            $scope.hasAddress = true;
                        }
                        else{
                            $scope.hasAddress = false;
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            }
        })
    })
});
define('conttrollers/tjswishController',['webappControllers'], function (controllers) {
    controllers.controller('tjswishController', function ($scope, $rootScope, $filter, $state, resourceService, $stateParams, $window, ngDialog) {
        $rootScope.title = '礼品心愿';
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
            $scope.userOBJ = $filter('isRegister')();
            if ($scope.userOBJ.register) {
                $scope.uid = $scope.userOBJ.user.member.uid;
            } else {
                $state.go('dl', { returnurl: 'tjswish' });
                return;
            };
        }
        else{
            if($stateParams.uid){
                $scope.uid = $stateParams.uid;
            }
            else{
                $window.location.href = 'jsmp://page=4?';
            }
        }
        function isUrl(str){
            return !!str.match(/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g);
        }
        $scope.submitWish = function () {
            if($scope.url){
                if(isUrl($scope.url)==true){
                    resourceService.queryPost($scope, $filter('getUrl')('tjs许愿'), {
                        uid: $scope.uid,
                        url: $scope.url,
                        remarks: $scope.remarks
                    }, '投即送许愿');
                }
                else{
                    $rootScope.errorText = '请填写有效链接';
                    $rootScope.maskError = true;
                }
            }
            else{
                $rootScope.errorText = '请填写商品链接';
                $rootScope.maskError = true;
            }
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '投即送许愿':
                    if (data.success==true) {
                        ngDialog.open({
                            template: '<p class="error-msg">提交成功</p>',
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                    } 
                    else if(data.errorCode=='1004' || data.errorCode=='1001' || data.errorCode=='1002' || data.errorCode=='1003') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    }
                    break;
            }
        })
        $scope.toback = function() {
            $filter('跳回上一页')();
        };
    })
})
;
define('conttrollers/tjsaddressController',['webappControllers'], function (controllers) {
    controllers.controller('tjsaddressController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$timeout', '$location', '$anchorScroll', '$stateParams', function ($scope, $rootScope, $filter, $state, resourceService, $timeout, $location, $anchorScroll, $stateParams) {
        $scope.wap = $stateParams.wap;
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;
        if ($scope.userOBJ.register) {
            $scope.investId = $stateParams.investId;
            // $scope.hasaddress = false;
            resourceService.queryPost($scope, $filter('getUrl')('tjs获取地址'), {
                uid: $scope.user.uid,
                prizeType: $stateParams.type
            }, '投即送获取收货地址');
        } else {
            $state.go('dl', { returnurl: 'mytjs' });
            return;
        };
        if ($stateParams.type == '1') {
            $rootScope.title = $scope.title = '填写号码';
        }
        else{
            $rootScope.title = $scope.title = '填写地址';
        }
        $scope.type = parseInt($stateParams.type);
        $scope.data = {};
        $scope.data.uid = $scope.userOBJ.user.member.uid;
        $scope.data.investId = $scope.investId;
        $scope.saveAddress = function (tegForm) {
            if ($scope.type == 1) {
                if (!tegForm.phone.$error.required && !tegForm.phone.$error.minlength && !tegForm.phone.$error.pattern) {
                    resourceService.queryPost($scope, $filter('getUrl')('tjs添加地址'), $scope.data , '投即送添加收货地址');
                }
                else {
                    $rootScope.errorText = '请填写有效手机号码';
                    $rootScope.maskError = true;
                }
            }
            else {
                if (!tegForm.name.$error.required) {
                    if (!tegForm.phone.$error.required && !tegForm.phone.$error.minlength && !tegForm.phone.$error.pattern) {
                        if (!tegForm.address.$error.required && !tegForm.address.$error.minlength) {
                            // if ($scope.hasaddress == true) {
                            //     resourceService.queryPost($scope, $filter('getUrl')('tjs修改地址'), {
                            //         uid: $scope.userOBJ.user.member.uid,
                            //         name: $scope.name,
                            //         address: $scope.address,
                            //         phone: $scope.phone
                            //     }, '投即送修改收货地址');
                            // }
                            // else {
                            resourceService.queryPost($scope, $filter('getUrl')('tjs添加地址'), $scope.data , '投即送添加收货地址');
                            // }
                        }
                        else {
                            $rootScope.errorText = '请正确填写有效地址';
                            $rootScope.maskError = true;
                        }
                    }
                    else {
                        $rootScope.errorText = '请填写有效手机号码';
                        $rootScope.maskError = true;
                    }
                }
                else {
                    $rootScope.errorText = '请填写姓名';
                    $rootScope.maskError = true;
                }
            }
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '投即送获取收货地址':
                    if (data.success) {
                        if (data.map.jsMemberInfo) {
                            // $scope.hasaddress = true;
                            if($scope.type==1){
                                if(data.map.jsMemberInfo.phone){
                                    $scope.data.phone = data.map.jsMemberInfo.phone;
                                }
                            }
                            else{
                                if(data.map.jsMemberInfo.phone){
                                    $scope.data.phone = data.map.jsMemberInfo.phone;
                                }
                                if(data.map.jsMemberInfo.address){
                                    $scope.data.address = data.map.jsMemberInfo.address;
                                }
                                if(data.map.jsMemberInfo.name){
                                    $scope.data.name = data.map.jsMemberInfo.name;
                                }
                            }
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
                case '投即送添加收货地址':
                    if (data.success) {
                        $state.go('mytjs', { wap: true });
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
                case '投即送修改收货地址':
                    if (data.success) {
                        $state.go('mytjs', { wap: true });
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break;
            }
        })
    }])
})
;
define('conttrollers/tjsdetailController',['webappControllers'], function (controllers) {
    controllers.controller('tjsdetailController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', '$stateParams', '$location', '$localStorage', '$anchorScroll', function ($scope, $rootScope, resourceService, $filter, $state, $stateParams, $location, $localStorage, $anchorScroll) {
        delete $localStorage.coupon;
        $filter('isPath')('tjsdetail');
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
        $('body').scrollTop(0);
        $scope.yuebiao = {};
        $rootScope.title = "年末豪礼专享标";
        // $scope.mainbox = true;
        var user = $filter('isRegister')();
        $scope.active = 0;
        $scope.isShowRule = false;
        $scope.showBigImg = false;
        var $win = $(window);
        $scope.goBack = function () {
            if ($stateParams.from) {
                $state.go($stateParams.from);
            }
            else {
                $state.go('tjs', { wap: true });
            }
        }
        $win.on('load resize scroll', function () {
            // $('.check-img-wrap').height($('body').height());
            $('.check-img-wrap').height($win.height()).width($win.width());
            $('.check-img-wrap img').css('max-height', $win.height()).css('max-width', $win.width());
        });
        $scope.showmore = function () {
            $location.hash('moredetail');
            $anchorScroll();
            $scope.moremsg = true;
        }
        $scope.showImg = function (event) {
            $scope.bigImgSrc = $(event.currentTarget).attr('src');
            $scope.showBigImg = true;
        };
        $scope.slideToggle = function (e) {
            $(e.currentTarget).parent().siblings("p").stop().slideToggle(200);
            if ($(e.currentTarget).hasClass('slideDown')) {
                $(e.currentTarget).removeClass('slideDown')
            } else { $(e.currentTarget).addClass('slideDown') }
        };
        $scope.closeRealverify = function () {
            $scope.isRealverify = false;
        };
        $scope.gologin = function () {
            $state.go('dl', { returnurl: 'tjsdetail?wap=true&pid=' + $scope.cp.id });
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
            switch (eObj.name) {
                case 'cpDetail':
                    $localStorage.cp = data.map;
                    $localStorage.prize = data.map.prize;
                    // $scope.yuebiao.name=data.map.name;
                    // $scope.yuebiao.isReservation=data.map.isReservation;
                    // $scope.yuebiao.prid=data.map.prid;
                    $scope.yuebiao.realverify = data.map.realverify;
                    // $scope.linkURL=data.map.linkURL;
                    // $scope.appTitle=data.map.appTitle;
                    $scope.cp = data.map.info;
                    $scope.prize = data.map.prize;
                    $scope.extendInfos = data.map.extendInfos;
                    if ($scope.cp.establish != undefined) {
                        var date3 = $scope.cp.establish - Date.parse(new Date());
                        var day = Math.floor(date3 / (24 * 3600 * 1000));
                        var hh = Math.floor(date3 / (3600 * 1000));
                        if (day > 0) {
                            $scope.nowTimer = day + '天';
                            // $scope.isFinish = true;
                        } else
                            if (day == 0 && hh > 1) {
                                $scope.nowTimer = hh + '小时';
                                // $scope.isFinish = true;
                                $scope.isBuTimer = true;
                            } else
                                if (day == 0 && hh < 1) {
                                    $scope.nowTimer = '1小时内'
                                    // $scope.isFinish = true;
                                } else
                                    if (hh < 0) {
                                        if ($scope.cp.type == 1) {
                                            $scope.nowTimer = '无限制';
                                        } else {
                                            $scope.nowTimer = '已结束';
                                        }
                                        $scope.isFinish = true;
                                    }
                    } else {
                        $scope.nowTimer = '已结束';
                        $scope.isFinish = true;
                    };
                    if ($stateParams.pid) {
                        resourceService.queryPost($scope, $filter('getUrl')('cpPicAndInvest'), {
                            pid: $stateParams.pid,
                            type: $scope.cp.type
                        }, { name: 'cpPicAndInvest' });
                    }
                    break;
                case 'cpPicAndInvest':
                    $scope.picList = data.map.picList;
                    $scope.investList = data.map.investList;
                    break;
                case '是否认证':
                    $scope.map = data.map;
                    break;
            };
        });
        $scope.goyuebiao = function () {
            if ($scope.yuebiao.realverify) {
                $state.go('yuebiao', { prid: $scope.yuebiao.prid, name: $scope.yuebiao.name, toState: $state.current.name, pid: $stateParams.pid });
            } else {
                $scope.isRealverify = true;
            }
        };
        if ($stateParams.pid != null) {
            var obj = {};
            obj.pid = $stateParams.pid;
            if (user.register) {
                obj.uid = user.user.member.uid;
                resourceService.queryPost($scope, $filter('getUrl')('我的信息'), {
                    uid: user.user.member.uid
                }, { name: '是否认证' });
            }
            resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), obj, { name: 'cpDetail' });
        } else {
            $state.go('tjs', { wap: true });
        };
    }]);
    controllers.controller('tjsinvestmentController', ['$scope', 'resourceService', '$filter', '$state', '$rootScope', '$localStorage', '$stateParams', function ($scope, resourceService, $filter, $state, $rootScope, $localStorage, $stateParams) {
        $scope.submitBool = true;
        $rootScope.title = '确认投资';
        $scope.pid = $stateParams.pid;
        $filter('isPath')('tjsinvestment');
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
        var user = $filter('isRegister')().user;
        $scope.smrFrom = {};
        if ($stateParams.amt != null) {
            $scope.amount = $stateParams.amt * 1;
        };

        if ($stateParams.pid) {
            resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), {
                'pid': $stateParams.pid,
                'uid': user.member.uid
            }, '产品详情');
        } else {
            $state.go('tjs', { wap: true });
        }
        $scope.playSound = true;
        $scope.userTypes = {};
        $scope.userTypes.passWord = '';
        $scope.showMask = false;

        $scope.onChange = function () {
            $rootScope.amt = $scope.amount * 1;
        };
        $scope.agreeclick = function () {
            $scope.playSound = !$scope.playSound;
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '用户状态':
                    if (data.success) {
                        $scope.userTypes = data.map;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case '产品详情':
                    if (data.success) {
                        $localStorage.cp = $scope.cp = data.map;
                        $scope.amount = data.map.prize.amount;
                        if ($scope.cp.info.type == 1) { $scope.playSound = true; }
                        if ($filter('isRegister')().user.member != undefined) {
                            resourceService.queryPost($scope, $filter('getUrl')('判断用户状态'), {
                                'uid': $filter('isRegister')().user.member.uid
                            }, '用户状态');
                            resourceService.queryPost($scope, $filter('getUrl')('cpDetail'), {
                                'uid': $filter('isRegister')().user.member.uid,
                                'pid': $stateParams.pid
                            }, '账户余额');
                        } else {
                            resourceService.queryPost($scope, $filter('getUrl')('判断用户状态'), {}, '用户状态');
                        };
                    }
                    break;
                case '账户余额':
                    $scope.balance = data.map.balance;
                    $scope.repair = data.map.repair;

                    // 返现红包
                    if ($scope.repair != undefined && $scope.cp.info.surplusAmount == $scope.amount) {
                        if ($scope.repair.type == 2) {/*补标收益为加息*/
                            $scope.FXJiaXi = true;
                        } else if ($scope.repair.type == 1) {/*补标收益为返现*/
                            $scope.FXFanXian = true;
                        }
                    } else {
                        $scope.noFXshouyi = true;
                    }
                    if ($scope.cp.info.establish != undefined) {
                        var date3 = $scope.cp.info.establish - Date.parse(new Date());
                        var day = Math.floor(date3 / (24 * 3600 * 1000));
                        var hh = Math.floor(date3 / (3600 * 1000));
                        if (day > 0) {
                            $scope.nowTimer = day + '天';
                            // $scope.isFinish = true;
                        } else
                            if (day == 0 && hh > 1) {
                                $scope.nowTimer = hh + '小时';
                                // $scope.isFinish = true;
                                $scope.isBuTimer = true;
                            } else
                                if (day == 0 && hh < 1) {
                                    $scope.nowTimer = '1小时内'
                                    // $scope.isFinish = true;
                                } else
                                    if (hh < 0) {
                                        if ($scope.cp.info.type == 1) {
                                            $scope.nowTimer = '无限制';
                                        } else {
                                            $scope.nowTimer = '已结束';
                                        }
                                        $scope.isFinish = true;
                                    }
                    } else {
                        $scope.nowTimer = '已结束';
                        $scope.isFinish = true;
                    };
                    if ($scope.repair != undefined && $scope.cp.info.surplusAmount == $scope.amount) {
                        if ($scope.repair.type == 2) {
                            $scope.FBJiaXi = true;
                        } else if ($scope.repair.type == 1) {
                            $scope.FBFanXian = true;
                        }
                    } else {
                        $scope.noFBshouyi = true;
                    }
                    if ($scope.repair != undefined && $scope.cp.info.surplusAmount == $scope.amount) {
                        if ($scope.repair.type == 2) {
                            $scope.JXQJiaXi = true;
                        } else if ($scope.repair.type == 1) {
                            $scope.JXQFanXian = true;
                        }
                    } else {
                        $scope.noJXshouyi = true;
                    }
                    // type==0
                    if ($scope.repair != undefined) {
                        if ($scope.repair.type == 2) {
                            $scope.noHBJiaXi = true;
                        } else if ($scope.repair.type == 1) {
                            $scope.noHBFanXian = true;
                        }
                    } else {
                        $scope.noHBshouyi = true;
                    }
                    break;
                case '购买产品':
                    if (data.success) {
                        $scope.successData = $scope.cp;
                        $scope.successData.shouyi = $rootScope.shouyi;
                        $scope.successData.investAmount = $scope.amount;
                        $scope.successData.investTime = data.map.investTime;
                        $scope.successData.isRepeats = data.map.isRepeats;
                        $scope.successData.activityURL = data.map.activityURL;
                        $scope.successData.jumpURL = data.map.jumpURL;
                        $scope.successData.investId = data.map.investId;
                        $localStorage.successData = $scope.successData;
                        $state.go('tjssuccess', { wap: true });
                    } else {
                        if (data.errorCode == '2001') {
                            $filter('投资交易密码错误信息')($scope);
                        } else {
                            $filter('投资错误信息')(data.errorCode, $scope, 'y');
                        }
                    }
                    break;
            };
        });
        $scope.agreeclick = function () {
            $scope.playSound = !$scope.playSound;
        }
        $scope.tobuy = function () {
            if ($scope.amount != '' && $scope.amount != undefined && $('#myPwd').val() != '') {
                resourceService.queryPost($scope, $filter('getUrl')('购买产品'), {
                    'pid': $stateParams.pid,
                    'tpwd': $scope.userTypes.passWord,
                    'amount': $scope.amount,
                    'uid': $filter('isRegister')().user.member.uid
                }, '购买产品');
            } else {
                if ($scope.amount == '' || $scope.amount == undefined) {
                    $filter('投资错误信息')('noInp', $scope, 'y');
                } else if ($('#myPwd').val() == '') {
                    $filter('投资错误信息')('noPwd', $scope, 'y');
                }
            }
        };
        $scope.onClick = function (name) {
            switch (name) {
                case '去设置交易密码':
                    $localStorage.fromJY = {};
                    $localStorage.fromJY.amount = $scope.amount;
                    $localStorage.fromJY.cpInfoId = $scope.cp.info.id;

                    $state.go('resetTradePwd', { firstset: true });
                    break;
            };
        };
    }]);
    controllers.controller('tjssuccessController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$localStorage', function ($scope, $rootScope, $filter, $state, resourceService, $localStorage) {
        $rootScope.title = "投资成功";
        $scope.data = {};
        $scope.user = $filter('isRegister')().user.member;
        if (!$scope.user) { $state.go('dl'); return; }
        if ($localStorage.successData) {
            $scope.data = $localStorage.successData;
        }
        delete $localStorage.successData;
        $scope.closeyaoqing = function () {
            $('.yaoqinghaoyou').fadeOut(200);
        };
        // resourceService.queryPost($scope, $filter('getUrl')('tjs获取地址'), {
        //     uid: $scope.user.uid
        // }, '投即送获取收货地址');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '投即送获取收货地址':
                    if (data.map.jsMemberInfo) {
                        $scope.hasaddress = true;
                        $scope.name = data.map.jsMemberInfo.name;
                        $scope.address = data.map.jsMemberInfo.address;
                        $scope.phone = data.map.jsMemberInfo.phone;
                    } else {
                        $scope.hasaddress = false;
                    }
                    break;
            }
        })
    }]);
});
define('conttrollers/giftyyController',['webappControllers'], function (controllers) {
    controllers.controller('giftyyController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$timeout', '$location', '$anchorScroll', '$stateParams', 'ngDialog', function ($scope, $rootScope, $filter, $state, resourceService, $timeout, $location, $anchorScroll, $stateParams, ngDialog) {
        $scope.wap = $stateParams.wap;
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;
        $scope.toback = function () {
            $filter('跳回上一页')(1);
        };
        $scope.goBack = function () {
            if ($state.params.backUrl) {
                if ($state.params.backUrl.indexOf('?') != -1) {
                    var router = $state.params.backUrl.split('?')[0];
                    var params = $state.params.backUrl.split('?')[1];
                    var obj = {};
                    var array = params.split("&");
                    if (array.length > 1) {
                        for (var i = 0; i < array.length; i++) {
                            obj[array[i].split("=")[0]] = array[i].split("=")[1];
                        }
                    } else {
                        obj[array[0].split("=")[0]] = array[0].split("=")[1];
                    }
                    $state.go(router, obj);
                } else {
                    $state.go($state.params.backUrl, { wap: true });
                }
            } else {
                $state.go("tjs", { wap: true });
            }
        }
        if ($stateParams.id) {
            var obj = {};
            obj.id = $stateParams.id;
            resourceService.queryPost($scope, $filter('getUrl')('tjs产品奖品'), obj, { name: 'tjs产品奖品' });
        } else {
            $state.go('tjs', { wap: true });
        }
        $scope.confirm = function () {
            if ($scope.user) {
                resourceService.queryPost($scope, $filter('getUrl')('tjs添加预约'), {
                    uid: $scope.user.uid,
                    ppid: $scope.prize.id
                }, { name: 'tjs预约' });
            }
            else {
                $('body,html').css({ height: 'auto', overflow: 'initial' });
                $state.go('dl', { returnurl: 'giftyy?wap=true&id=' + $stateParams.id });
            }
        }
        $scope.showyy = function () {
            $('.yy-box').fadeIn();
            // $scope.yyshow = true;
            // $('body,html').css({ height: '100%', overflow: 'hidden' });
        };
        $scope.closeyy = function () {
            $('.yy-box').fadeOut();
            // $scope.yyshow = false;
            // $('body,html').css({ height: 'auto', overflow: 'initial' });
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
            switch (eObj.name) {
                case 'tjs产品奖品':
                    if (data.success) {
                        $scope.prize = data.map.prize;
                    }
                    break;
                case 'tjs预约':
                    if (data.success) {
                        $('body,html').css({ height: 'auto', overflow: 'initial' });
                        ngDialog.open({
                            template: '<p class="error-msg">预约成功</p>',
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                        $state.go('tjs', { wap: true });
                    }
                    break;
            };
        });

    }])
});
define('conttrollers/prizedetailController',['webappControllers'], function(controllers) {
    controllers.controller('prizedetailController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$timeout', '$location', '$anchorScroll', '$stateParams', '$localStorage', function($scope, $rootScope, $filter, $state, resourceService, $timeout, $location, $anchorScroll, $stateParams, $localStorage) {
        $scope.title = '礼品详情';
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;
        $scope.pid = $localStorage.cp.info.id;
        $scope.wap = $stateParams.wap;
        $scope.prize = $localStorage.prize;
        $filter('isPath')('prizedetail');
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
    }])
});
define('conttrollers/changcheng2Controller',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('changcheng2Controller', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams) {
        $filter('isPath')('changcheng2');
        $scope.userObj = $filter('isRegister')();
        if ($scope.userObj.register == true) {
            $scope.user = $scope.userObj.user.member;
            if($scope.user.realName){
                $scope.name = $scope.user.realName;
            }
            else{
                $scope.name = $scope.userObj.user.userName;
            }
            resourceService.queryPost($scope, $filter('getUrl')('getGreatWallInfo'), {
                uid:$scope.user.uid
            }, {name:'我的账户'});
        }
        $rootScope.title = '';
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.quickbuy = function(){
            if($scope.userObj.register == true){
                resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: 35 }, { name: '长城宽带' });
            }
            else{
                $scope.gotop();
            }
        }
        
        // $scope.changchengclick = function (i) {
        //     resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        // }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng2").offset().top });
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
                };
            };
        };
        $scope.clickOnChangeIMG = function (event) {
            changeIMG(event);
        };
        var isSub = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }

        }

        $scope.isSubMin = true;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;

            if (tegForm.mobilephone.$valid == false) {
                alert("请输入正确的手机号码!");
                // $scope.isSubMin =false;
            } else {
                // $scope.isSubMin = true;
                if ($scope.isSubMin) {
                    resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                        mobilephone: $scope.login.mobilephone,
                        picCode: $scope.login.picCode
                    }, { name: '获取验证码', tegForm: tegForm });
                    $filter('60秒倒计时')($scope, 60);
                }
                // $scope.isSubMin =true;
            };
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '我的账户': 
                        if(data.success){
                            $scope.account = data.map;
                        }else{
                            $filter('服务器信息')(data.errorCode,$scope,'y')
                        }
                    break;
                case '获取验证码':
                    if (data.success) {
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else {
                        $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                        } else {
                            // type.tegForm.mobilephone.$error.serverError = data.map.exists;
                        };
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        $scope.userObj = $filter('isRegister')();
                        if ($scope.userObj.register == true) {
                            $scope.user = $scope.userObj.user.member;
                            if($scope.user.realName){
                                $scope.name = $scope.user.realName;
                            }
                            else{
                                $scope.name = $scope.userObj.user.userName;
                            }
                            resourceService.queryPost($scope, $filter('getUrl')('getGreatWallInfo'), {
                                uid:$scope.user.uid
                            }, {name:'我的账户'});
                        }
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($scope.webFormPath.recommCode) {
            linkstr = '&recommCode=' + $scope.webFormPath.recommCode;
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
                window.location.href = "http://m.zhuomilicai.com";

            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }])
});
define('conttrollers/tyjController',['webappControllers', 'jquery'], function (controllers, $) {
    controllers.controller('tyjController', function ($scope, resourceService, $filter, $location, $localStorage, $rootScope, $state, $window, $stateParams) {
        $('body').scrollTop(0);
        $rootScope.title = '汇元金服';
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
            var user = $filter('isRegister')();
            if(user.register==true){
                $scope.isLog = true;
                resourceService.queryPost($scope, $filter('getUrl')('推广页账户'), {
                    uid: user.user.member.uid
                }, { name: '推广页账户' });
            }
            else{
                $scope.isLog = false;
            }
        }
        else{
            if($stateParams.uid){
                $scope.isLog = true;
                resourceService.queryPost($scope, $filter('getUrl')('推广页账户'), {
                    uid: $stateParams.uid
                }, { name: '推广页账户' });
            }
            else{
                $scope.isLog = false;
            }
        }
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = true;
        $scope.nowTimer = "获取验证码";
        var isSub = true;
        var changePicEvent;
        var targetFrom;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm) {
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '推广页账户':
                    if (data.success) {
                        $scope.user = data.map;
                    }
                    break;
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.cangetm = false;
                        } else {
                            $scope.cangetm = true;
                        };
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        $state.go('tyjRegSuccess');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
            }
        });
        // $scope.click = function (tegForm) {
        //     if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
        //         resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
        //             mobilephone: $scope.login.mobilephone
        //         }, { name: '注册验证手机号', tegForm: tegForm });
        //     }
        //     else {
        //         $rootScope.errorText = '请填写有效手机号码';
        //         $rootScope.maskError = true;
        //     }
        // };
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".tyj").offset().top });
        };
        // var swiper = new Swiper('.swiper-container', {
        //     paginationClickable: true,
        //     autoplay: 3000,
        //     spaceBetween: 0,
        //     loop: true,
        //     autoplayDisableOnInteraction: false,
        //     pagination : '.swiper-pagination',
        // });
    })
});
define('conttrollers/newAccountSuccess',[
    'webappControllers'
], function (controller) {
    controller.controller('newAccountSuccess', ['$scope', '$filter', '$rootScope', function ($scope, $filter, $rootScope) {
        $scope.toback = function () {
            $filter('跳回上一页')(2)
        }
        $rootScope.title = '注册成功'
        $scope.height = {
            height: window.innerHeight + 'px',
            paddingBottom: '0'
        }
    }])
});

define('conttrollers/myTyjController',['webappControllers', 'jquery', 'ngdialog'], function (controllers, $, ngdialog) {
    controllers.controller('myTyjController', ['$scope', 'resourceService', '$filter', '$state', '$rootScope', '$localStorage', function ($scope, resourceService, $filter, $state, $rootScope, $localStorage) {
        $rootScope.title = '体验金';
        $scope.userOBJ = $filter('isRegister')();
        $scope.height = {
            'min-height': window.innerHeight + 'px',
            'box-sizing': 'border-box'
        }
        $filter('isPath')('myTyj');
        if (!$scope.userOBJ.register) {
            $state.go("dl");
            return;
        }
        $scope.queryDetail = function () {
            $state.go('GGXQ', {
                wap: true,
                artiId: 2
            })
        }
        $scope.active = 0;
        $scope.showDownload = true;
        if ($scope.userOBJ.user.member.toFrom == '16yy' || '18yy' == $scope.userOBJ.user.member.toFrom) {
            $rootScope.isShowMaskError = true;
            $rootScope.errorText = '投资新手标不参加此活动';

        } else if ($scope.userOBJ.user.member.toFrom == '19yy') {
            switch ($localStorage.maskType) {
                case '1':
                    $rootScope.isShowMaskError = true;
                    $rootScope.errorText = '投资新手标不参加此活动';
                    break;
                case '3':
                    $rootScope.isShowMaskError = true;
                    $rootScope.errorText = '投资新手标不参加此活动';
                    break;
            };
        }

        resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
            uid: $scope.userOBJ.user.member.uid,
            // status: $scope.active,
            flag: 0
        }, '我的体验金');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '我的体验金':
                    if (data.success) {
                        $scope.amountSum = data.map.amountSum;
                        $scope.coupons = data.map.list;
                        $scope.newHandId = data.map.newHandId;
                        $scope.tyjFlag = data.map.list.filter(function (item) {
                            return item.status === 0 && item.source === 99
                        }).length > 0 ? true : false
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            };
        });
        $scope.onClick = function (num) {
            $scope.active = num;
            resourceService.queryPost($scope, $filter('getUrl')('我的红包'), {
                uid: $scope.userOBJ.user.member.uid,
                status: $scope.active,
                flag: 0
            }, '我的体验金');
        };
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadapp = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }]);
})
;
define('conttrollers/tyjdetailController',['jweixin', 'webappControllers', 'jquery', 'ngdialog'], function (wx, controllers, $, ngdialog) {
    controllers.controller('tyjdetailController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', '$stateParams', '$location', '$localStorage', function ($scope, $rootScope, resourceService, $filter, $state, $stateParams, $location, $localStorage) {
        $rootScope.title = "体验金专享";
        var user = $filter('isRegister')();
        if(user.register){
            resourceService.queryPost($scope, $filter('getUrl')('体验标详情'), {
                uid: user.user.member.uid
            }, '体验标详情');
        }
        else{
            $state.go('dl');
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, name) {
            switch (name) {
                case '体验标详情':
                    if (data.success) {
                        $scope.data = data.map;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case '体验标投资':
                    if (data.success) {
                        $localStorage.tyjSuccessData = {};
                        $localStorage.tyjSuccessData = data.map;
                        $localStorage.tyjSuccessData.rate = $scope.data.Info.rate;
                        $localStorage.tyjSuccessData.amount = $scope.data.experienceAmount.experAmount;
                        if($scope.data.Info.activityRate>0){
                            $localStorage.tyjSuccessData.shouyi = $scope.data.experienceAmount.experAmount * ($scope.data.Info.rate+$scope.data.Info.activityRate) / 100 / 360 * 1;
                        }
                        else{
                            $localStorage.tyjSuccessData.shouyi = $scope.data.experienceAmount.experAmount * $scope.data.Info.rate / 100 / 360 * 1;
                        }
                        $localStorage.tyjSuccessData.activityRate = $scope.data.Info.activityRate;
                        $state.go('tyjSuccess');
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            };
        });
        $scope.close = function(){
            $scope.confirm = false;
        }
        $scope.changeSelect = function(){
            $scope.canInvest = !$scope.canInvest;
        }
        $scope.investment = function(){
            resourceService.queryPost($scope, $filter('getUrl')('体验标投资'), {
                uid: user.user.member.uid,
                pid: $scope.data.Info.id,
                ids: $scope.data.experienceAmount.ids
            }, '体验标投资');
        }
        $scope.toback = function () {
            $filter('跳回上一页')(1);
        };
    }])
});
define('conttrollers/tyjSuccessController',['webappControllers'], function(controllers) {
    controllers.controller('tyjSuccessController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService','$localStorage', function($scope, $rootScope, $filter, $state, resourceService,$localStorage) {
        $rootScope.title = "投资成功";
        $scope.data={};
        $scope.user = $filter('isRegister')().user.member;
        if(!$scope.user){$state.go('dl');return;}
        if($localStorage.tyjSuccessData){
            $scope.data=$localStorage.tyjSuccessData;
        }
        delete $localStorage.tyjSuccessData;
    }]);
})
;

define('conttrollers/reportController',['webappControllers', 'ngdialog'], function (controllers, ngdialog) {
    controllers.controller('reportController', ['$scope', '$rootScope', 'resourceService', '$http', '$filter', '$state','$stateParams', function ($scope, $rootScope, resourceService, $http, $filter, $state,$stateParams) {
        $rootScope.title = $scope.title = '媒体报道';
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
        }
        if($stateParams.page){
            $scope.page = $stateParams.page;
        }
        else{
            $scope.page = 1;
        }
    }])
});
define('conttrollers/activity/yuanxiaoController',['webappControllers'], function (controllers) {
    controllers.controller('yuanxiaoController', ['$scope', '$rootScope', '$filter', '$state', 'resourceService', '$stateParams', '$window', '$timeout','ngDialog', function ($scope, $rootScope, $filter, $state, resourceService, $stateParams, $window, $timeout,ngDialog) {
        $('body').scrollTop(0);
        $rootScope.title = $scope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
            
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
            $scope.user = $filter('isRegister')().user.member;
            if($scope.user){
                $scope.uid = $scope.user.uid;
            }
        }else if($stateParams.uid){
            $scope.uid = $stateParams.uid;
        }
        resourceService.queryPost($scope, $filter('getUrl')('元宵领取记录'), {}, { name: '元宵领取记录' });
        $scope.click = function () {
            resourceService.queryPost($scope, $filter('getUrl')('吃元宵'), {
                uid: $scope.uid
            }, { name: '吃元宵' });
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '吃元宵':
                    if (data.success) {
                        // if(data.map.isReceive==true){
                        //     $('body,html').css({ height: '100%', overflow: 'hidden' });
                        //     $scope.type=2;
                        //     $scope.show = true;
                        // }
                        // else{
                            $scope.hbtype = data.map.type;
                            $scope.num = data.map.num;
                            $('body,html').css({ height: '100%', overflow: 'hidden' });
                            $scope.type=1;
                            $scope.show = true;
                        // }
                    }
                    else if(data.errorCode == 9997){
                        ngDialog.open({
                            template: '<p class="error-msg">非活动期间内</p>',
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                    }
                    else if(data.map.isReceive==true){
                        $('body,html').css({ height: '100%', overflow: 'hidden' });
                        $scope.type=2;
                        $scope.show = true;
                    }
                    
                    break;
                case '元宵领取记录':
                    if (data.success) {
                        $scope.logList = data.map.drMemberLotteryLogList;
                    }

                    break;
            }
        });
        $scope.close = function () {
            $('body,html').css({ height: 'auto', overflow: 'initial' });
            $scope.show = false;
        }
        $scope.goto = function(){
            if($scope.hbtype==3){
                $('body,html').css({ height: 'auto', overflow: 'initial' });
                $scope.show = false;
                $state.go('tyjdetail');
            }
            else{
                $('body,html').css({ height: 'auto', overflow: 'initial' });
                $scope.show = false;
                $state.go('main.bankBillList');
            }
        }
    }])
        .directive("repeatFinish", function () {
            return {
                link: function (scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('yuanxiaoscrollText', function () {
            var temp = '<li repeat-finish="finish()" ng-repeat="item in logList">' +
                '<div><p>{{item.updateTime | date:"yyyy-MM-dd HH:mm:ss"}}</p><p>{{item.mobilePhone}}</p></div>' +
                '<h3>{{item.name}}</h3>' +
                '</li>'
            return {
                template: temp,
                scope: true,
                transclude: true,
                link: function ($scope, element, attrs) {
                    var a = 1;
                    $scope.finish = function () {
                        if(a==1){
                            a++;
                            $(element).find('li').each(function (i) {
                                var height = parseFloat($(this).css('height'));
                                $(this).css({
                                    position: 'absolute',
                                    top: (i * height) + 'px'
                                })
                                var that = this;
                                setInterval(function () {
                                    var top = parseFloat($(that).css('top'));
                                    if (top < (height * (-1))) {
                                        $(that).css({ top: ($scope.logList.length - 1) * height + 'px' });
                                    }
                                    var top = parseFloat($(that).css('top'));
                                    $(that).css({
                                        top: (top - 1) + 'px'
                                    })
                                }, 20)
                            })
                        }
                    }
                }
            }
        });
});
define('conttrollers/activity/iPhoneadController',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('iPhoneadController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams) {
        $filter('isPath')('iPhonead');
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.login = {};
        $('body').scrollTop(0);
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".iPhonead").offset().top });
        };
        resourceService.queryPost($scope, $filter('getUrl')('iPhoneSEM'), {}, { name: 'iPhoneSEM' });

        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = true;
        $scope.nowTimer = "获取验证码";
        var isSub = true;
        var changePicEvent;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm) {
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.cangetm = false;
                        }
                        else {
                            $scope.cangetm = true;
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        $rootScope.errorText = '注册成功';
                        $rootScope.maskError = true;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        if ($stateParams.wap) {
                            $state.go('special', { wap: true });
                        }
                        else {
                            $state.go('special');
                        }
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case 'iPhoneSEM':
                    if (data.success) {
                        $scope.investCount = data.map.investCount;
                        $scope.prizeCount = data.map.prizeCount;
                        $scope.cp = data.map.info;
                    }
                    var swiper = new Swiper('.swiper-container', {
                        paginationClickable: true,
                        autoplay: 3000,
                        spaceBetween: 0,
                        loop: true,
                        autoplayDisableOnInteraction: false,
                        pagination: '.swiper-pagination-h'
                    });
                    break;
            };
        });
    }])
});
define('conttrollers/activity/promoteController',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('promoteController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams) {
        $filter('isPath')('promote');
        $('body').scrollTop(0);
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.login = {};
        $scope.showdownload = true;
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".promote").offset().top });
        };

        var swiper = new Swiper('.swiper-container', {
            paginationClickable: true,
            autoplay: 3000,
            spaceBetween: 0,
            loop: true,
            autoplayDisableOnInteraction: false,
            pagination: '.swiper-pagination-h'
        });

        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = true;
        $scope.nowTimer = "获取验证码";
        var isSub = true;
        var changePicEvent;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm) {
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.cangetm = false;
                        }
                        else{
                            $scope.cangetm = true;
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        $rootScope.errorText = '注册成功';
                        $rootScope.maskError = true;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        $state.go('main.home');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
            };
        });
        $scope.closedownload = function(){
            $scope.showdownload = false;
            $('.mainc').css('margin-bottom',0);
        }
        var browser = {
            versions: function() {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin(){
            var ua = window.navigator.userAgent.toLowerCase();
            if(ua.match(/MicroMessenger/i) == 'micromessenger'){
                return true;
            }else{
                return false;
            }
        }
        $scope.downloadclick=function(){
            if (isWeiXin()){
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis=function(){
            $('.share-ios,.share-android').fadeOut(200);
        };
    }])
});
define('conttrollers/activity/newtyjController',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('newtyjController', function ($scope, $rootScope, resourceService, $filter, $state, $location, $localStorage, $stateParams) {
        $filter('isPath')('newtyj');
        $('body').scrollTop(0);
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.login = {};
        $scope.showdownload = true;
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
            var user = $filter('isRegister')();
            if(user.register==true){
                $scope.isLog = true;
                resourceService.queryPost($scope, $filter('getUrl')('推广页账户'), {
                    uid: user.user.member.uid
                }, { name: '推广页账户' });
            }
            else{
                $scope.isLog = false;
            }
        }
        else{
            if($stateParams.uid){
                $scope.isLog = true;
                resourceService.queryPost($scope, $filter('getUrl')('推广页账户'), {
                    uid: $stateParams.uid
                }, { name: '推广页账户' });
            }
            else{
                $scope.isLog = false;
            }
        }
        resourceService.queryPost($scope, $filter('getUrl')('lastRegMember'), {}, { name: 'lastRegMember' });
        // 图形验证码
        var changeIMG = function (i,event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[i] != undefined) {
                    $('.img-box img')[i].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG(0);
        $scope.clickInput = function (i,event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(i,changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = true;
        $scope.nowTimer = "获取验证码";
        var isSub = true;
        var changePicEvent;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm,i) {
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG(i);
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm, i) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG(i);
        };
        var $dataTable = $('.data-table');
        var trHeight = $('.data-list').height()/5;
        $scope.showSuccess = false;
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '推广页账户':
                    if (data.success) {
                        $scope.user = data.map;
                    }
                    break;
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.cangetm = false;
                        }
                        else{
                            $scope.cangetm = true;
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // $rootScope.errorText = '注册成功';
                        // $rootScope.maskError = true;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        // if($stateParams.wap){
                        //     $state.go('tyj',{wap:true});
                        // }
                        // else{
                        //     $state.go('tyj');
                        // }
                        $scope.showSuccess = true;
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case 'lastRegMember':
                    if (data.success) {
                        $scope.newtyjList = data.map.list;
                        $dataTable.find('tr').each(function(i){
                            if(i%2==0){
                                $(this).css('background','#F9EDD2');
                            }
                        })
                        // 列表数据轮动
                        if ($scope.newtyjList.length > 5) {
                            setInterval(function() {
                                $dataTable.animate({'margin-top': '-'+trHeight+'px'},1000,function() {
                                    $dataTable.find('tr').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top',0);
                                });
                            }, 3000);
                        }
                    } 
                    break;
            };
        });
        $scope.background = function(){
            $dataTable.find('tr').each(function(i){
                if(i%2==0){
                    $(this).css('background','#F9EDD2');
                }
            })
        }
        $scope.closeSuccess = function(){
            $scope.showSuccess = false;
            $state.go('newtyj',{wap:true});
        }
        var ruleHeight = $('.rule-box').height();
        var ruleheaderHeight = $('.rule-box').find('h1').outerHeight();
        $('.rule-box').height(ruleheaderHeight);
        $scope.ruleShow=false;
        $scope.ruleCtrl = function(){
            if($scope.ruleShow==true){
                $scope.ruleShow=false;
                $('.rule-box').animate({
                    height:ruleheaderHeight
                },300);
                $('.rule-box').find('img').css({
                    transform: 'rotate(180deg)',
                    
                });
            }
            else{
                $scope.ruleShow=true;
                $('.rule-box').animate({
                    height:ruleHeight
                },300);
                $('.rule-box').find('img').css({
                    transform: 'rotate(0deg)'
                });
                $("html,body").animate({ scrollTop: $(".rule-box").offset().top });
            }
        }
        $scope.openhongbao = function(){
            changeIMG(1);
            $scope.hasopen=true;
        }
        $scope.closedownload = function(){
            $scope.showdownload = false;
            $('.newtyj').css('padding-bottom',0);
        }
        var browser = {
            versions: function() {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin(){
            var ua = window.navigator.userAgent.toLowerCase();
            if(ua.match(/MicroMessenger/i) == 'micromessenger'){
                return true;
            }else{
                return false;
            }
        }
        $scope.downloadclick=function(){
            if (isWeiXin()){
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis=function(){
            $('.share-ios,.share-android').fadeOut(200);
        };
    })
});
define('conttrollers/activity/tjsadController',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('tjsadController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams) {
        $filter('isPath')('tjsad');
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.login = {};
        $('body').scrollTop(0);
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".tjsad").offset().top });
        };
        // resourceService.queryPost($scope, $filter('getUrl')('iPhoneSEM'), {}, { name: 'iPhoneSEM' });

        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = true;
        $scope.nowTimer = "获取验证码";
        var isSub = true;
        var changePicEvent;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm) {
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        resourceService.queryPost($scope, $filter('getUrl')('tjs活动页'), {}, { name: '投即送活动页' });
        var $dataTable = $('.data-table');
        var trHeight = $('.data-list').height() / 5;
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.cangetm = false;
                        }
                        else {
                            $scope.cangetm = true;
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        $rootScope.errorText = '注册成功';
                        $rootScope.maskError = true;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        if ($stateParams.wap) {
                            $state.go('tjs', { wap: true });
                        }
                        else {
                            $state.go('tjs');
                        }
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '投即送活动页':
                    if (data.success) {
                        $scope.investList = data.map.investList;
                        $scope.investCount = data.map.investCount;
                        if ($scope.investList.length > 5) {
                            setInterval(function () {
                                $dataTable.animate({ 'margin-top': '-' + trHeight + 'px' }, 1000, function () {
                                    $dataTable.find('tr').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top', 0);
                                });
                            }, 3000);
                        }
                    }
                    break;
            };
        });
        var swiper = new Swiper('.swiper-container', {
            paginationClickable: true,
            autoplay: 3000,
            spaceBetween: 0,
            loop: true,
            autoplayDisableOnInteraction: false,
            pagination: '.swiper-pagination-h'
        });
    }])
});
define('conttrollers/activity/xiaomiadController',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('xiaomiadController', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams) {
        $filter('isPath')('xiaomiad');
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.login = {};
        $("html,body").animate({ scrollTop: 0 });
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: 0 });
        };

        $scope.passwordText = false;
        $scope.isSubMin = true;
        $scope.nowTimer = "获取验证码";
        var isSub = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm) {
            if (tegForm.mobilephone.$valid == false) {
                alert("请输入正确的手机号码!");
            } else {
                if ($scope.isSubMin && $scope.cangetm == true) {
                    resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                        mobilephone: $scope.login.mobilephone,
                        picCode: $scope.login.picCode
                    }, { name: '获取验证码', tegForm: tegForm });
                    $filter('60秒倒计时')($scope, 60);
                }
                else if ($scope.isSubMin && $scope.cangetm == false) {
                    $rootScope.errorText = '此手机已注册';
                    $rootScope.maskError = true;
                }
            };
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success) {
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else {
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.cangetm = false;
                        }
                        else {
                            $scope.cangetm = true;
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        ngDialog.open({
                            template: '<p class="error-msg">注册成功！</p>',
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                        setTimeout(function() {
                            ngDialog.closeAll();
                            $state.go('main.home');
                        }, 2000);
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '投即送活动页':
                    if (data.success) {
                        $scope.investList = data.map.investList;
                        $scope.investCount = data.map.investCount;
                        if ($scope.investList.length > 5) {
                            setInterval(function () {
                                $dataTable.animate({ 'margin-top': '-' + trHeight + 'px' }, 1000, function () {
                                    $dataTable.find('tr').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top', 0);
                                });
                            }, 3000);
                        }
                    }
                    break;
            };
        });
    })
});
define('conttrollers/kfrEnrolController',['webappControllers'], function (controllers) {
    controllers.controller('kfrEnrolController', ['$scope', '$filter', '$state', '$stateParams', 'resourceService', 'ngDialog', function ($scope, $filter, $state, $stateParams, resourceService, ngDialog) {
        $scope.userOBJ = $filter('isRegister')();
        if ($scope.userOBJ.register) {
            $scope.user = $scope.userOBJ.user.member;
            // resourceService.queryPost($scope, $filter('getUrl')('myacc'), {
            //     uid: $scope.userOBJ.user.member.uid
            // }, '我的账户');
        } else {
            $state.go('dl', { returnurl: 'kfrEnrol' });
            return;
        };
        
        $scope.title = '在线报名';
        $scope.enrol = {};
        $scope.enrol.uid = $scope.user.uid;
        $scope.enrol.openDayId = $stateParams.openDayId;
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, name) {
            switch (name) {
                case '报名':
                    if (data.success) {
                        ngDialog.open({
                            template: '<p class="error-msg">报名成功！</p>',
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                    }
                    break;
            }
        });
        $scope.toback = function () {
            $filter('跳回上一页')(1);
        };
        $scope.submitEnrol = function (tegForm) {
            // if (tegForm.$valid == false || $scope.enrol.city == '请选择') {
            //     $('body,html').css({ height: 'auto', overflow: 'initial' });
            //     ngDialog.open({
            //         template: '<p class="error-msg">请正确填写个人信息</p>',
            //         showClose: false,
            //         closeByDocument: true,
            //         plain: true
            //     });
            // }
            // else {
                resourceService.queryPost($scope, $filter('getUrl')('开放日报名'), $scope.enrol, '报名');
            // }
        }
        $scope.cityList = [{
            "ProID": 1,
            "name": "北京市",
            "ProSort": 1,
            "ProRemark": "直辖市"
        }, {
            "ProID": 2,
            "name": "天津市",
            "ProSort": 2,
            "ProRemark": "直辖市"
        }, {
            "ProID": 3,
            "name": "河北省",
            "ProSort": 5,
            "ProRemark": "省份"
        }, {
            "ProID": 4,
            "name": "山西省",
            "ProSort": 6,
            "ProRemark": "省份"
        }, {
            "ProID": 5,
            "name": "内蒙古自治区",
            "ProSort": 32,
            "ProRemark": "自治区"
        }, {
            "ProID": 6,
            "name": "辽宁省",
            "ProSort": 8,
            "ProRemark": "省份"
        }, {
            "ProID": 7,
            "name": "吉林省",
            "ProSort": 9,
            "ProRemark": "省份"
        }, {
            "ProID": 8,
            "name": "黑龙江省",
            "ProSort": 10,
            "ProRemark": "省份"
        }, {
            "ProID": 9,
            "name": "上海市",
            "ProSort": 3,
            "ProRemark": "直辖市"
        }, {
            "ProID": 10,
            "name": "江苏省",
            "ProSort": 11,
            "ProRemark": "省份"
        }, {
            "ProID": 11,
            "name": "浙江省",
            "ProSort": 12,
            "ProRemark": "省份"
        }, {
            "ProID": 12,
            "name": "安徽省",
            "ProSort": 13,
            "ProRemark": "省份"
        }, {
            "ProID": 13,
            "name": "福建省",
            "ProSort": 14,
            "ProRemark": "省份"
        }, {
            "ProID": 14,
            "name": "江西省",
            "ProSort": 15,
            "ProRemark": "省份"
        }, {
            "ProID": 15,
            "name": "山东省",
            "ProSort": 16,
            "ProRemark": "省份"
        }, {
            "ProID": 16,
            "name": "河南省",
            "ProSort": 17,
            "ProRemark": "省份"
        }, {
            "ProID": 17,
            "name": "湖北省",
            "ProSort": 18,
            "ProRemark": "省份"
        }, {
            "ProID": 18,
            "name": "湖南省",
            "ProSort": 19,
            "ProRemark": "省份"
        }, {
            "ProID": 19,
            "name": "广东省",
            "ProSort": 20,
            "ProRemark": "省份"
        }, {
            "ProID": 20,
            "name": "海南省",
            "ProSort": 24,
            "ProRemark": "省份"
        }, {
            "ProID": 21,
            "name": "广西壮族自治区",
            "ProSort": 28,
            "ProRemark": "自治区"
        }, {
            "ProID": 22,
            "name": "甘肃省",
            "ProSort": 21,
            "ProRemark": "省份"
        }, {
            "ProID": 23,
            "name": "陕西省",
            "ProSort": 27,
            "ProRemark": "省份"
        }, {
            "ProID": 24,
            "name": "新疆维吾尔自治区",
            "ProSort": 31,
            "ProRemark": "自治区"
        }, {
            "ProID": 25,
            "name": "青海省",
            "ProSort": 26,
            "ProRemark": "省份"
        }, {
            "ProID": 26,
            "name": "宁夏回族自治区",
            "ProSort": 30,
            "ProRemark": "自治区"
        }, {
            "ProID": 27,
            "name": "重庆市",
            "ProSort": 4,
            "ProRemark": "直辖市"
        }, {
            "ProID": 28,
            "name": "四川省",
            "ProSort": 22,
            "ProRemark": "省份"
        }, {
            "ProID": 29,
            "name": "贵州省",
            "ProSort": 23,
            "ProRemark": "省份"
        }, {
            "ProID": 30,
            "name": "云南省",
            "ProSort": 25,
            "ProRemark": "省份"
        }, {
            "ProID": 31,
            "name": "西藏自治区",
            "ProSort": 29,
            "ProRemark": "自治区"
        }, {
            "ProID": 32,
            "name": "台湾省",
            "ProSort": 7,
            "ProRemark": "省份"
        }, {
            "ProID": 33,
            "name": "澳门特别行政区",
            "ProSort": 33,
            "ProRemark": "特别行政区"
        }, {
            "ProID": 34,
            "name": "香港特别行政区",
            "ProSort": 34,
            "ProRemark": "特别行政区"
        }]
    }]);
});
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/friendregController',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('friendregController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams','signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams,signWeChatService) {
        // signWeChatService();
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        // $rootScope.maskError=true;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $("body").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };

        $scope.passwordText = false;
        $scope.isSubMin = true;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }
        }
        $scope.getyzm = function (tegForm) {
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                        }
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 60);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);
                        if ($stateParams.toWhere) {
                            $state.go($stateParams.toWhere, { wap: true });
                        }
                        else {
                            $state.go('tyjRegSuccess');
                        }
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
            };
        });
        var linkstr = "";
        if ($scope.webFormPath.recommCode) {
            linkstr = '&recommCode=' + $scope.webFormPath.recommCode;
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                desc: '注册即送 618元现金红包 +　99999元体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?wap=true' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                                 window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }

    ])
})
;
define('conttrollers/reminderController',['webappControllers'], function (controllers) {
    controllers.controller('reminderController', function ($scope, $filter, $rootScope,$stateParams) {
        $rootScope.title = "优惠券温馨提示";
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
        }
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
    })
})
;
define('conttrollers/activity/iPhoneController',['webappControllers'], function (controllers) {
    controllers.controller('iPhoneController', function ($scope, $rootScope, $filter, $state, resourceService, ngDialog, $timeout, $localStorage, $location,$stateParams, $interval) {
        $filter('isPath')('special');
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.product = {};
        $scope.yuebiao = {};
        $("html,body").scrollTop(0);
        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        }
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
        }
        $scope.swiper = {
            name: "hongbaoSwiper",
            readyLoading: false
        };
        $scope.conf = {
            slidesPerView: 3,
            centeredSlides: true,
            spaceBetween: 0,
            grabCursor: true,
            loop: true,
            autoplay: 3000,
            autoplayDisableOnInteraction: false
        };
        // 活动标详情
        resourceService.queryPost($scope, $filter('getUrl')('活动标详情'), {}, { name: '活动标详情' });
        // 活动开奖结果
        resourceService.queryPost($scope, $filter('getUrl')('活动开奖结果'), {}, { name: '活动开奖结果' });
        var height = $('.news-list').height()/5;
        var $dataTable = $('.news-list ul');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case "活动标详情":
                    if (data.success) {
                        $scope.product = data.map.result;
                        $scope.newTrends = data.map.newTrends;
                        // 列表数据轮动
                        if ($scope.newTrends.length > 5) {
                            setInterval(function () {
                                $dataTable.animate({ 'margin-top': '-' + height + 'px' }, 1000, function () {
                                    $dataTable.find('li').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top', 0);
                                });
                            }, 3000);
                        }
                    }
                    break;
                case "活动开奖结果":
                    if (data.success) {
                        $scope.current = data.map.current[0];
                        $scope.history = data.map.history;
                        if (data.map.current && data.map.current.length > 0) { 
                            $scope.history.unshift(data.map.current[0]); 
                            $scope.history.pop(); 
                        }
                        if ($scope.current && $scope.current.length > 0 && $scope.current[0].prizeUrl) { 
                            $scope.videolink = $scope.current[0].prizeUrl; 
                            $scope.activityPeriods = $scope.current[0].activityPeriods; 
                            $scope.prizeCode = $scope.current[0].prizeCode; 
                            $scope.prizeMobile = $scope.current[0].prizeMobile; 
                        }
                        else {
                            for (var i = 0; i < $scope.history.length; i++) {
                                if ($scope.history[i].prizeUrl) {
                                    $scope.videolink = $scope.history[i].prizeUrl;
                                    $scope.activityPeriods = $scope.history[i].activityPeriods;
                                    $scope.prizeCode = $scope.history[i].prizeCode;
                                    $scope.prizeMobile = $scope.history[i].prizeMobile;
                                    break;
                                }
                            }
                        }
                        $timeout(function () {
                            $scope.swiper.initSwiper();
                        });
                    }
                    break;
            }
        });
        $scope.showRule = function(){
            $('.rule').fadeIn(200);
        }
        $scope.closeRule = function(){
            $('.rule').fadeOut(200);
        }
        $scope.gotoDetail = function (id) {
            if ($stateParams.wap) {
                $state.go('activityPerson', { id: id, wap: true });
            } else {
                $state.go('activityPerson', { id: id });
            }
        };
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: 0 });
        };
    });
})

;
define('conttrollers/activity/app2lotteryController',['webappControllers'], function (controllers) {
    controllers.controller('app2lotteryController', function ($scope, $rootScope, $filter, $state, resourceService, ngDialog, $timeout, $localStorage, $location, $stateParams, $window) {
        $rootScope.title = '汇元金服';
        if ($location.$$search.toFrom != undefined || $location.$$search.recommCode != undefined || $location.$$search.tid != undefined) {
            $localStorage.webFormPath = $location.$$search;
        }
        var appVersion = 200;
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
            $scope.isApp2 = false;
        }
        else{
            if($stateParams.version){
                if(parseFloat($stateParams.version.replace(/\./g,''))>=appVersion){
                    $scope.isApp2 = true;
                    $('.app2lottery').css('margin-bottom','0');
                    $scope.user = {};
                    $scope.user.uid = $stateParams.uid;
                    $scope.user.channel = $stateParams.channel;
                    $scope.user.version = $stateParams.version;
                }
                else{
                    $scope.isApp2 = false;
                }
            }
            else{
                $scope.isApp2 = false;
            }
        }
        var $dataTable = $('.data-table');
        var trHeight = $('.data-list').height() / 3;
        resourceService.queryPost($scope, $filter('getUrl')('app2.0翻牌领取记录'), {}, 'app2.0翻牌领取记录');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case "app2.0翻牌领取记录":
                    if (data.success) {
                        $scope.dataList = data.map.luckDrawList;
                        // 列表数据轮动
                        if ($scope.dataList.length > 3) {
                            setInterval(function () {
                                $dataTable.animate({ 'margin-top': '-' + trHeight + 'px' }, 700, function () {
                                    $dataTable.find('tr').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top', 0);
                                });
                            }, 3000);
                        }
                    }
                    break;
                case "app2.0翻牌":
                    $scope.canClick = true;
                    $('.lottery-card').removeClass('animate');
                    if (data.success) {
                        if(data.map.isWinning==true){
                            $scope.prizeType = 3;
                            $scope.couponType = data.map.type;
                            $scope.couponNum = data.map.num;
                            $('.prize').fadeIn(200);
                        }
                        else{
                            $scope.prizeType = 2;
                            $scope.failType = 2;//没有中奖
                            $('.prize').fadeIn(200);
                        }
                    }
                    else if(data.errorCode=='1005'){ 
                        $scope.prizeType = 2;
                        $scope.failType = 1;//没有翻牌机会
                        $('.prize').fadeIn(200);
                    }
                    else if(data.errorCode=='1003'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    }
                    break;
            }
        });
        $scope.canClick = true;
        $scope.showPrize = function(i){
            if($scope.isApp2==false){
                $scope.prizeType = 1;
                $('.prize').fadeIn(200);
            }
            else{
                if($scope.user.uid){
                    if($scope.canClick == true){
                        $scope.canClick = false;
                        $('.lottery-card').eq(i-1).addClass('animate');
                        $timeout(function(){
                            resourceService.queryPost($scope, $filter('getUrl')('app2.0翻牌'), $scope.user , 'app2.0翻牌');
                        },500);
                    }
                }
                else{
                    $window.location.href = 'jsmp://page=4?';
                }
            }
        }
        $scope.closePrize = function(){
            $('.prize').fadeOut(200);
        }
        $scope.showRule = function () {
            $('.rule').fadeIn(200);
        }
        $scope.closeRule = function () {
            $('.rule').fadeOut(200);
        }
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    });
})

;

define('conttrollers/activity/iphonelistCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('iphonelistCtrl'
        ,['$scope'
        ,'$filter'
        ,'$state'
        ,"$stateParams"
        ,'resourceService'
        ,'$timeout'
        ,function($scope,$filter,$state,$stateParams,resourceService,$timeout){
            $scope.title="iphone7活动标";
            $scope.datalist=[];
            $scope.pageOn=1;
            $scope.wap=$stateParams.wap;
            $filter('isPath')('iphonelist');
            $scope.toback = function () {
                $filter('跳回上一页')(2);
            };
            $(window).scrollTop(0);
            $scope.loading=true;
            resourceService.queryPost($scope, $filter('getUrl')('活动开奖结果'), {
            	pageOn:$scope.pageOn,
            	pageSize:20
            }, {name:'getReservation'});
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event,data,eObj) {
                switch(eObj.name){
                    case 'getReservation': 
                    if(data.success){
                        $scope.datalist=$scope.datalist.concat(data.map.history);
                        if(data.map.history.length>0){
                        	$scope.pageOn++;
                        }
                        $scope.loading=true;
                    }
                    break;
                };
            });
            var scrollLoading=function(){
				　　var scrollTop = $(window).scrollTop();
				　　var scrollHeight = $(document).height();
				　　var windowHeight = $(window).height();
				　　if(scrollTop + windowHeight == scrollHeight){
						if($scope.loading){
							$scope.loading=false;
							resourceService.queryPost($scope, $filter('getUrl')('活动开奖结果'), {
				            	pageOn:$scope.pageOn,
				            	pageSize:20
				            }, {name:'getReservation'});
			            }
				　　}
			}
            $scope.gotoDetail=function(id){
                if($scope.wap){
                    $state.go('activityPerson',{id:id,wap:true});
                }else{
                    $state.go('activityPerson',{id:id});
                }
            }
            $timeout(function(){
            	document.addEventListener('scroll',scrollLoading);
            })
            $scope.$on('$stateChangeStart',function(){
            	document.removeEventListener('scroll',scrollLoading);
            })
        }
    ]);
});

define('conttrollers/activity/fanliCtrl',[
    'webappControllers'
    ]
    ,function(controllers){
    controllers.controller('fanliCtrl'
        ,['$scope'
        ,'$filter'
        ,'$state'
        ,'$location'
        ,'resourceService'
        ,'$localStorage'
        ,function($scope,$filter,$state,$location,resourceService,$localStorage){
        	if($location.$$search.toFrom != undefined || $location.$$search.recommCode!= undefined||$location.$$search.tid!=undefined){
                $localStorage.webFormPath = $location.$$search;
            };
            resourceService.queryPost($scope, $filter('getUrl')('selectProductInfo'), {}, { name: '产品详情'});
            if($location.$$search.frompc){$scope.frompc=$location.$$search.frompc;}
            if($filter('isRegister')().user&&$filter('isRegister')().user.member&&$filter('isRegister')().user.member.id){
                $scope.user=$filter('isRegister')().user;
            }
            $scope.fanli30=[
            	{amount:5000,money:170},
            	{amount:10000,money:240},
            	{amount:30000,money:360},
            	{amount:50000,money:480},
            	{amount:100000,money:600}
            ];
            $scope.fanli60=[
            	{amount:5000,money:200},
            	{amount:10000,money:280},
            	{amount:30000,money:420},
            	{amount:50000,money:620},
            	{amount:100000,money:1100}
            ];
            $scope.fanli180=[
            	{amount:5000,money:260},
            	{amount:10000,money:300},
            	{amount:30000,money:600},
            	{amount:50000,money:900},
            	{amount:100000,money:1650}
            ];
            $scope.gotoDetail=function(deadline){
            	resourceService.queryPost($scope, $filter('getUrl')('getUse'), {deadline:deadline}, { name: '获取最新产品'});
            };
            $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
                switch (type.name) {
                    case '获取最新产品':
                        $state.go("cpDetail",{pid:data.map.pid});
                        break;
                    case '产品详情':
                        $scope.data = data.map;
                        break;
                };
            });
        }
    ]);
});
define('conttrollers/activity/opendayController',['webappControllers'], function(controllers) {
    controllers.controller('opendayController', function($scope, $filter, $state, $stateParams, resourceService,$timeout,$localStorage) {
        $scope.title = '开放日';
        $filter('isPath')('openday');
        var isLoad = true;
        var pageOn = 1;
        $scope.opendayList = [];
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
        }
        $scope.showMore = false;
        resourceService.queryPost($scope, $filter('getUrl')('getOpenDayList'), {status:2}, { name: '往期列表' });
        resourceService.queryPost($scope, $filter('getUrl')('getOpenDayDetail'), {}, { name: '活动内容' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case '往期列表':
                    if (data.success) {
                        $scope.page = data.map.page;
                        if (pageOn == $scope.page.pageOn) {
                            isLoad = true;
                        }
                        if (data.map.page.pageOn <= data.map.page.totalPage) {
                            pageOn = $scope.page.pageOn + 1;
                            for (var i = 0; i < data.map.page.rows.length; i++) {
                                $scope.opendayList.push(data.map.page.rows[i]);
                            }
                        } else {
                            isLoad = false;
                        }
                    }
                    break;
                case '活动内容':
                    if (data.success) {
                        $scope.content = data.map.jsSpecial;
                        $timeout(function(){
                            var swiper = new Swiper('.swiper-container', {
                                paginationClickable: true,
                                autoplay: 3000,
                                spaceBetween: 0,
                                loop: true,
                                autoplayDisableOnInteraction: false,
                                pagination: '.swiper-pagination-h'
                            });
                        })
                    }
                    break;
            }
        });
        $scope.loadMore = function(item) {
            if (item.id == $scope.opendayList[$scope.opendayList.length - 1].id) {
                if (isLoad) {
                    if (pageOn != $scope.page.pageOn) {
                        var obj = {
                            pageOn: pageOn,
                            pageSize: 10,
                            status: 2
                        };
                        resourceService.queryPost($scope, $filter('getUrl')('getOpenDayList'), obj, { name: '往期列表' });
                        isLoad = false;
                    }
                };
            };
        };
        $scope.toback = function() {
            $filter('跳回上一页')(2);
        };
    });
});
define('conttrollers/activity/publicWelfareController',['webappControllers'], function(controllers) {
    controllers.controller('publicWelfareController', function($scope, $filter, $state, $stateParams, resourceService,$timeout,$localStorage) {
        $scope.title = '公益活动';
        $filter('isPath')('publicWelfare');
        if ($stateParams.wap) {
            $scope.wap = $stateParams.wap;
        }
        resourceService.queryPost($scope, $filter('getUrl')('公益活动内容'), {id:$stateParams.id}, { name: '公益活动内容' });
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function(event, data, type) {
            switch (type.name) {
                case "公益活动内容":
                    if (data.success) {
                        $scope.picList = data.map.picList;
                        $scope.h5Banner = data.map.jsActivityOffline.h5Banner;
                        $scope.content = data.map.jsActivityOffline.content;
                        $scope.mtitle = data.map.jsActivityOffline.title;
                        $scope.summary = data.map.jsActivityOffline.summary;
                        $scope.imgUrl = data.map.jsActivityOffline.imgUrl;
                        $scope.videoUrl = data.map.jsActivityOffline.videoUrl;
                        $timeout(function () {
                            var swiper = new Swiper('.live-slider',{
                                slidesPerView: 1.3,
                                loop: true,
                                autoplay: 2500,
                                autoplayDisableOnInteraction: false,
                                effect: 'coverflow',
                                grabCursor: true,
                                centeredSlides: true,
                                // slideToClickedSlide:true,
                                loopAdditionalSlides : 1,
                                coverflow: {
                                    rotate: 0,
                                    stretch: 0,
                                    depth: 200,
                                    modifier: 1,
                                    slideShadows : true
                                }
                            })
                        });
                    }
                    break;
            }
        });
        $scope.toback = function() {
            $filter('跳回上一页')(2);
        };
    });
});
define('conttrollers/activity/newtyj2Controller',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('newtyj2Controller', function ($scope, $rootScope, resourceService, $filter, $state, $location, $localStorage, $stateParams) {
        $filter('isPath')('newtyj2');
        $('body').scrollTop(0);
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.login = {};
        $scope.showdownload = true;
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
            var user = $filter('isRegister')();
            if(user.register==true){
                $scope.isLog = true;
            }
            else{
                $scope.isLog = false;
            }
        }
        else{
            if($stateParams.uid){
                $scope.isLog = true;
            }
            else{
                $scope.isLog = false;
            }
        }
        resourceService.queryPost($scope, $filter('getUrl')('lastRegMember'), {}, { name: 'lastRegMember' });
        var $dataTable = $('.data-table');
        var trHeight = $('.data-list').height()/5;
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case 'lastRegMember':
                    if (data.success) {
                        $scope.newtyjList = data.map.list;
                        // 列表数据轮动
                        if ($scope.newtyjList.length > 5) {
                            setInterval(function() {
                                $dataTable.animate({'margin-top': '-'+trHeight+'px'},1000,function() {
                                    $dataTable.find('tr').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top',0);
                                });
                            }, 3000);
                        }
                    } 
                    break;
            };
        });
        $scope.background = function(){
            $dataTable.find('tr').each(function(i){
                if(i%2==0){
                    $(this).css('background','#F9EDD2');
                }
            })
        }
        var ruleHeight = $('.rule-box').height();
        var ruleheaderHeight = $('.rule-box').find('h1').outerHeight();
        $('.rule-box').height(ruleheaderHeight);
        $scope.ruleShow=false;
        $scope.ruleCtrl = function(){
            if($scope.ruleShow==true){
                $scope.ruleShow=false;
                $('.rule-box').animate({
                    height:ruleheaderHeight
                },300);
                $('.rule-box').find('img').css({
                    transform: 'rotate(180deg)',
                    
                });
            }
            else{
                $scope.ruleShow=true;
                $('.rule-box').animate({
                    height:ruleHeight
                },300);
                $('.rule-box').find('img').css({
                    transform: 'rotate(0deg)'
                });
                $("html,body").animate({ scrollTop: $(".rule-box").offset().top });
            }
        }
        $scope.closedownload = function(){
            $scope.showdownload = false;
            $('.newtyj').css('padding-bottom',0);
        }
        var browser = {
            versions: function() {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin(){
            var ua = window.navigator.userAgent.toLowerCase();
            if(ua.match(/MicroMessenger/i) == 'micromessenger'){
                return true;
            }else{
                return false;
            }
        }
        $scope.downloadclick=function(){
            if (isWeiXin()){
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis=function(){
            $('.share-ios,.share-android').fadeOut(200);
        };
    })
});
define('conttrollers/activity/festival518Controller',['jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('festival518Controller', function ($scope, $rootScope, resourceService, $filter, $state, $location, $localStorage, $stateParams) {
        $filter('isPath')('festival518');
        $('body').scrollTop(0);
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        if($stateParams.wap){
            $scope.wap = $stateParams.wap;
            var user = $filter('isRegister')();
            if(user.register==true){
                $scope.isLog = true;
                resourceService.queryPost($scope, $filter('getUrl')('518理财节'), {uid: user.user.member.uid}, { name: '518理财节' });
            }
            else{
                $scope.isLog = false;
                resourceService.queryPost($scope, $filter('getUrl')('518理财节'), {}, { name: '518理财节' });
            }
        }
        else{
            if($stateParams.uid){
                $scope.isLog = true;
                resourceService.queryPost($scope, $filter('getUrl')('518理财节'), {uid: $stateParams.uid}, { name: '518理财节' });
            }
            else{
                $scope.isLog = false;
                resourceService.queryPost($scope, $filter('getUrl')('518理财节'), {}, { name: '518理财节' });
            }
        }
        resourceService.queryPost($scope, $filter('getUrl')('518产品详情'), {}, { name: '518产品详情' });
        var $dataTable = $('.data-table');
        var trHeight = $('.data-list').height();
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '518理财节':
                    if (data.success) {
                        $scope.amount = data.map.amount;
                        $scope.count = data.map.count;
                        $scope.investList = data.map.activList;
                        if ($scope.investList.length > 1) {
                            setInterval(function() {
                                $dataTable.animate({'margin-top': '-'+trHeight+'px'},600,function() {
                                    $dataTable.find('tr').eq(0).appendTo($dataTable);
                                    $dataTable.css('margin-top',0);
                                });
                            }, 2500);
                        }
                    }
                    break;
                case '518产品详情':
                    if (data.success) {
                        for(var i=0;i<data.map.list.length;i++){
                            if(data.map.list[i].deadline==60){
                                $scope.detaila = data.map.list[i];
                            }
                            else if(data.map.list[i].deadline==180){
                                $scope.detailb = data.map.list[i];
                            }
                        }
                    }
                    break;
            };
        });
    })
});
define('conttrollers/normalcplistController',['jweixin', 'webappControllers', 'ngdialog'], function (wx, controllers, ngdialog) {
    controllers.controller('normalcplistController', function ($scope, $rootScope, resourceService, $filter, $state, $localStorage, $timeout) {
        $rootScope.title = "企融计划";
        delete $localStorage.coupon;
        $filter('isPath')('normalcplist');
        var isLoad = true;
        var pageOn = 1;
        $scope.cpList = [];
        resourceService.queryPost($scope, $filter('getUrl')('cplist'), { type: 2 }, { name: '产品列表' });
        $scope.loadMore = function (item) {
            if (item.id == $scope.cpList[$scope.cpList.length - 1].id) {
                if (isLoad) {
                    if (pageOn != $scope.page.pageOn) {
                        var obj = {
                            pageOn: pageOn,
                            pageSize: 10
                        };
                        obj.type = 2;
                        resourceService.queryPost($scope, $filter('getUrl')('cplist'), obj, { name: '产品列表' });
                        isLoad = false;
                    }
                };
            };
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
            switch (eObj.name) {
                case '产品列表':
                    $scope.page = data.map.page;
                    if (pageOn == $scope.page.pageOn) {
                        isLoad = true;
                    }
                    if (data.map.page.pageOn <= data.map.page.totalPage) {
                        pageOn = $scope.page.pageOn + 1;
                        for (var i = 0; i < data.map.page.rows.length; i++) {
                            $scope.cpList.push(data.map.page.rows[i]);
                        }
                    } else {
                        isLoad = false;
                    }
                    break;
            };
        });
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
        $scope.radius = $('.rem-rule').width();
    }) 
});
define('conttrollers/pastcplistController',['jweixin', 'webappControllers', 'ngdialog'], function (wx, controllers, ngdialog) {
    controllers.controller('pastcplistController', function ($scope, $rootScope, resourceService, $filter, $state, $localStorage, $timeout) {
        $rootScope.title = "往期企融计划";
        delete $localStorage.coupon;
        $filter('isPath')('normalcplist');
        var isLoad = true;
        var pageOn = 1;
        $scope.cpList = [];
        $scope.active = 0;
        $scope.statuses = "6,8";
        resourceService.queryPost($scope, $filter('getUrl')('pastProductList'), { statuses : $scope.statuses},{ name: '产品列表' });
        $scope.loadMore = function (item) {
            if (item.id == $scope.cpList[$scope.cpList.length - 1].id) {
                if (isLoad) {
                    if (pageOn != $scope.page.pageOn) {
                        var obj = {
                            pageOn: pageOn,
                            pageSize: 10,
                            statuses : $scope.statuses
                        };
                        obj.type = 2;
                        resourceService.queryPost($scope, $filter('getUrl')('pastProductList'), obj, { name: '产品列表' });
                        isLoad = false;
                    }
                };
            };
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
            switch (eObj.name) {
                case '产品列表':
                    $scope.page = data.map.page;
                    if (pageOn == $scope.page.pageOn) {
                        isLoad = true;
                    }
                    if (data.map.page.pageOn <= data.map.page.totalPage) {
                        pageOn = $scope.page.pageOn + 1;
                        for (var i = 0; i < data.map.page.rows.length; i++) {
                            $scope.cpList.push(data.map.page.rows[i]);
                        }
                    } else {
                        isLoad = false;
                    }
                    break;
            };
        });
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
        $scope.onClick = function (num) {
            $scope.active = num;
            if(num == 0){
                $scope.statuses = "6,8"
            } else if (num == 1){
                $scope.statuses = "9"
            }
            pageOn = 1;
            $scope.cpList = [];
            resourceService.queryPost($scope, $filter('getUrl')('pastProductList'), { statuses : $scope.statuses},{ name: '产品列表' });            
        };

        $scope.radius = $('.rem-rule').width();
    }) 
});
define('conttrollers/activitycplistController',['jweixin', 'webappControllers', 'ngdialog'], function (wx, controllers, ngdialog) {
    controllers.controller('activitycplistController', function ($scope, $rootScope, resourceService, $filter, $state, $localStorage, $timeout) {
        $rootScope.title = "活动专享标";
        delete $localStorage.coupon;
        $filter('isPath')('activitycplist');
        var isLoad = true;
        var pageOn = 1;
        $scope.cpList = [];
        resourceService.queryPost($scope, $filter('getUrl')('cplist'), { type: 1 }, { name: '产品列表' });
        resourceService.queryPost($scope, $filter('getUrl')('活动标列表banner'), {}, { name: '活动标列表banner' });        
        $scope.loadMore = function (item) {
            if (item.id == $scope.cpList[$scope.cpList.length - 1].id) {
                if (isLoad) {
                    if (pageOn != $scope.page.pageOn) {
                        var obj = {
                            pageOn: pageOn,
                            pageSize: 10
                        };
                        obj.type = 1;
                        resourceService.queryPost($scope, $filter('getUrl')('cplist'), obj, { name: '产品列表' });
                        isLoad = false;
                    }
                };
            };
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, eObj) {
            switch (eObj.name) {
                case '产品列表':
                    $scope.page = data.map.page;
                    if (pageOn == $scope.page.pageOn) {
                        isLoad = true;
                    }
                    if (data.map.page.pageOn <= data.map.page.totalPage) {
                        pageOn = $scope.page.pageOn + 1;
                        for (var i = 0; i < data.map.page.rows.length; i++) {
                            $scope.cpList.push(data.map.page.rows[i]);
                        }
                    } else {
                        isLoad = false;
                    }
                    break;
                case '活动标列表banner':
                    $scope.bannerList = data.map.sysBanners;
                    $timeout(function () {
                        var swiper = new Swiper('.activitycplist-swiper',{
                            slidesPerView: 1,
                            loop: true,
                            autoplay: 2500,
                            autoplayDisableOnInteraction: false,
                            grabCursor: true,
                            spaceBetween: 0,
                            pagination: '.swiper-pagination',
                            paginationClickable: true
                        })
                    });
                    break;
            };
        });
        $scope.tocpdetail = function(item){
            if(item.prizeId){
                $state.go('tjsdetail',{pid:item.id});
            }
            else{
                $state.go('cpDetail',{pid:item.id});
            }
        }
        $scope.toback = function () {
            $filter('跳回上一页')(2);
        };
        $scope.radius = $('.rem-rule').width();
    }) 
});
define('conttrollers/aqbzDetailCtrl',['webappControllers', ['$scope', '$filter', '$rootScope', '$stateParams']], function (controllers) {
    controllers.controller('aqbzDetailCtrl', function ($scope, $filter, $rootScope,$stateParams) {
        $rootScope.title = "安全保障";
        $scope.wap = $stateParams.wap;

        $scope.toback = function () {
            $filter('跳回上一页')();
        };
    })
})
;
define('conttrollers/hongyadownloadCtrl',['webappControllers'], function (controllers) {
    controllers.controller('hongyadownloadCtrl', function ($scope, $rootScope) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        var endDate = new Date(2017, 4, 5, 0, 0, 0).getTime();
        var date = new Date().getTime();
        if (endDate > date) {
            $scope.status = 1;
        }
        else {
            $scope.status = 2;
        }
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }

        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.zmlc.zm_app";
                }
            }
            else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            }
            else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.zmlc.zm_app";
            } else {
                window.location.href = "http://www.zhuomilicai.com/upload/apk/zm_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    });
});
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/hongyaregCtrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('hongyaregCtrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
        // signWeChatService();
        $scope.protocol = $filter('protocolFilter')()
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $rootScope.title = '新用户注册';
        // $rootScope.maskError=true;
        $scope.toFrom = $stateParams.toFrom;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        if ($stateParams.phone != undefined) {
            $scope.login.mobilephone = $stateParams.phone;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined || $scope.login.toFrom) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                } else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                } else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                } else if (tegForm.passWord.$invalid) {
                    if (tegForm.passWord.$error.pattern) {
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if ($scope.isImgCode == true) {
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic: true
                        }, { name: '获取验证码', tegForm: tegForm });

                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else {
                    $scope.login.picCode = '';
                    $scope.isImgCode = true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success == true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode = false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if (data.errorCode == '1006') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                        // $state.go('tyjRegSuccess2');
                        window.location.href = window.location.origin + (window.location.port != '' ? ':' + window.location.port : '') + '/tyjRegSuccess2'
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($stateParams.toFrom) {
            linkstr = '&toFrom=' + $stateParams.toFrom;
        } else if ($scope.user && $scope.user.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.mobilephone;
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '汇元金服，国企背景',
                desc: '注册就送5188红包+10000体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '汇元金服，国企背景',
                desc: '注册就送5188红包+10000体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '汇元金服，国企背景',
                desc: '注册就送5188红包+10000体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '汇元金服，国企背景',
                desc: '注册就送5188红包+10000体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '汇元金服，国企背景',
                desc: '注册就送5188红包+10000体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.zmlc.zm_app";
                }
            } else if (window.HM_JsBridge) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    openInBrowser("https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8");
                } else if (browser.versions.android) {
                    openInBrowser("http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app");
                } else {
                    openInBrowser("http://www.hongyajinrong.com/upload/apk/hy_app.apk");
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.zmlc.zm_app";
            } else {
                window.location.href = "http://www.zhuomilicai.com/upload/apk/zm_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }
    ])
})
;
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/hyInviteRegCtrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('hyInviteRegCtrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
        // signWeChatService();
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $rootScope.title = '新用户注册';
        // $rootScope.maskError=true;
        $scope.toFrom = $stateParams.toFrom;
        $scope.invitePerson = $stateParams.invitePerson;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;

            if ($scope.login.recommPhone === undefined || $scope.login.toFrom) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                } else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                } else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                } else if (tegForm.passWord.$invalid) {
                    if (tegForm.passWord.$error.pattern) {
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if ($scope.isImgCode == true) {
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic: true
                        }, { name: '获取验证码', tegForm: tegForm });

                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else {
                    $scope.login.picCode = '';
                    $scope.isImgCode = true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success == true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode = false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if (data.errorCode == '1006') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                        $state.go('tyjRegSuccess2');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($stateParams.toFrom) {
            linkstr = '&toFrom=' + $stateParams.toFrom;
        } else if ($scope.user && $scope.user.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.mobilephone;
        }
        //微信邀请分享-邀请页面
        $filter('微信邀请分享-邀请')(linkstr)
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }
    ])
})
;
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/hongyainviteCtrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('hongyainviteCtrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
        // signWeChatService();
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $rootScope.title = '新用户注册';
        // $rootScope.maskError=true;
        $scope.wap = $stateParams.wap;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                $rootScope.errorText = '请正确填写以上信息';
                $rootScope.maskError = true;
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if ($scope.isImgCode == true) {
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic: true
                        }, { name: '获取验证码', tegForm: tegForm });

                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else {
                    $scope.login.picCode = '';
                    $scope.isImgCode = true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success == true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode = false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if (data.errorCode == '1006') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                        $state.go('tyjRegSuccess2');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($scope.webFormPath.recommCode) {
            linkstr = '&recommCode=' + $scope.webFormPath.recommCode;
        }
        //啄米长期邀请活动
        $filter('微信邀请分享-渠道')(linkstr)
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };

    }

    ])
})
;
define('conttrollers/hongyaTouziyueCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaTouziyueCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.showFixedbtn = true;
        $scope.app = $stateParams.app;
        if($stateParams.wap) {
            $scope.wap = $stateParams.wap;
            $scope.userOBJ = $filter('isRegister')();
            $scope.user = $scope.userOBJ.user.member;
            if ($scope.userOBJ.register) { 
                $scope.isLog = true;
                resourceService.queryPost($scope, $filter('getUrl')('julyActiveAwardRank'), {
                    uid: $scope.userOBJ.user.member.uid
                }, { name: 'julyActiveAwardRank' });
            }
        } else {
            // if($stateParams.uid){
                // $scope.isLog = true;
                // resourceService.queryPost($scope, $filter('getUrl')('julyActiveAwardRank'), {
                //     uid: $stateParams.uid
                // }, 'julyActiveAwardRank');
            // }
        }
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case 'julyActiveAwardRank':
                    if (data.success) {
                        $scope.cashAmount = data.map.cashAmount;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            }
        })


        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '七月投资悦，投资就返现', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyatouziyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '七月投资悦，投资就返现', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyatouziyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '七月投资悦，投资就返现', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyatouziyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '七月投资悦，投资就返现', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyatouziyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '七月投资悦，投资就返现', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyatouziyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        document.addEventListener('scroll',handleScroll, false);

        function handleScroll(){
            if($state.current.name == 'hongyatouziyue'){
            　　var scrollTop = $(window).scrollTop();
            　　var windowHeight = $(window).height();
                var btnBottom = $('.invest-btn').offset().top + $('.invest-btn').height();

                $scope.$apply(function(){
                    $scope.showFixedbtn = !(scrollTop + windowHeight > btnBottom);
                })
            } else {
                document.removeEventListener('scroll',handleScroll,false);
            }
        }

    });
});
define('conttrollers/hongyaJiaxiCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaJiaxiCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.showFixedbtn = true;
        $scope.wap = $stateParams.wap;
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '月中加息专场，累计加息到达一定金额，即可获得加息券', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyajiaxi?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/jaixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '月中加息专场，累计加息到达一定金额，即可获得加息券', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyajiaxi?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/jaixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '月中加息专场，累计加息到达一定金额，即可获得加息券', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyajiaxi?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/jaixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '月中加息专场，累计加息到达一定金额，即可获得加息券', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyajiaxi?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/jaixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '月中加息专场，累计加息到达一定金额，即可获得加息券', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyajiaxi?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/jaixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        document.addEventListener('scroll', handleScroll, false);

        function handleScroll(){
            if($state.current.name == 'hongyajiaxi'){
            　　var scrollTop = $(window).scrollTop();
            　　var windowHeight = $(window).height();
                var btnBottom = $('.invest-btn').offset().top + $('.invest-btn').height();

                $scope.$apply(function(){
                    $scope.showFixedbtn = !(scrollTop + windowHeight > btnBottom);
                })
            } else {
                document.removeEventListener('scroll',handleScroll,false);
            }
        }

    });
});
define('conttrollers/hongyaRunyueCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaRunyueCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.showFixedbtn = true;

        var endDay = new Date(2017,8-1,22,0,0,0);
        $scope.overDue = new Date() >= endDay;

        $scope.wap = $stateParams.wap;
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;

        var userObj = {};
        
        if($scope.userOBJ.register){
            userObj = {uid: $scope.user.uid}
        } else if (!$scope.wap && $stateParams.uid && $stateParams.token){
            userObj = {
                uid: $stateParams.uid,
                token: $stateParams.token
            }
        }

        resourceService.queryPost($scope, $filter('getUrl')('leapMonthStatist'), userObj, 'leapMonthStatist');

        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case 'leapMonthActive':
                    if (data.success) {
                        if($scope.wap) {
                            $state.go('cpDetail', { pid: data.map.id ,from: 'hongyarunyue'});
                        } else {
                            window.location.href = 'jsmp://page=5?pid=' + data.map.id;
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case 'leapMonthStatist':
                    if (data.success) {
                        $scope.userData = data.map;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            }
        })

        $scope.goInvest = function(){
            resourceService.queryPost($scope, $filter('getUrl')('leapMonthActive'), {}, 'leapMonthActive');
        }


        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '错过这次再等8年！你投资我就送，百万现金疯抢中...',
                desc: '啄米理财任性送壕礼，就问你来不来！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyarunyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/runyue.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '错过这次再等8年！你投资我就送，百万现金疯抢中...',
                desc: '啄米理财任性送壕礼，就问你来不来！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyarunyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/runyue.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '错过这次再等8年！你投资我就送，百万现金疯抢中...',
                desc: '啄米理财任性送壕礼，就问你来不来！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyarunyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/runyue.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '错过这次再等8年！你投资我就送，百万现金疯抢中...',
                desc: '啄米理财任性送壕礼，就问你来不来！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyarunyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/runyue.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '错过这次再等8年！你投资我就送，百万现金疯抢中...',
                desc: '啄米理财任性送壕礼，就问你来不来！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyarunyue?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/runyue.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    });
});
define('conttrollers/hongyaHongbaoyuCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaHongbaoyuCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.showDialog = false;

        var endDay = new Date(2017,8-1,21,0,0,0);
        $scope.overDue = new Date() >= endDay;

        $scope.wap = $stateParams.wap;
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;

        var userObj = {};
        
        if($scope.userOBJ.register){
            userObj = {uid: $scope.user.uid}
        } else if (!$scope.wap && $stateParams.uid && $stateParams.token){
            userObj = {
                uid: $stateParams.uid,
                token: $stateParams.token
            }
        }

        resourceService.queryPost($scope, $filter('getUrl')('summerRedpaperSendList'), {}, 'summerRedpaperSendList');

        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case 'summerRedpaperSendList':
                    if (data.success) {
                        $scope.userList = data.map.list;

                        var $list = $('.table-body table');
                        var tdHeight = $('.tdHeight').css('height')
                        if ($scope.userList.length > 6) {
                            setInterval(function() {
                                $list.animate({'margin-top':'-'+tdHeight},500,function() {
                                    $list.find('tr').eq(0).appendTo($list);
                                    $list.css('margin-top',0);
                                });
                            }, 3000);
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case 'summerRedpaperSend':
                    if (data.success) {
                        $scope.showDialog = true;
                        $scope.getGiftSuccess = data.map.isSendSuccess;
                    } else {
						if (data.msg=='未登录，请先登录') {
							window.location.href = 'jsmp://page=3';
						} else {
							$filter('活动信息')(1002, $scope, 'y')
						}
                    }
                    break;
                case 'summerRedpaperSendActive':
                    if (data.success) {
                        if($scope.wap) {
                            $state.go('cpDetail', { pid: data.map.id ,from: 'hongyahongbaoyu'});
                        } else {
                            window.location.href = 'jsmp://page=5?pid=' + data.map.id;
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            }
        })

        $scope.getGift = function(){
            if($scope.wap && !$scope.userOBJ.register){
                $state.go('dl',{ returnurl: 'hongyahongbaoyu?wap=true'});
            } else {
                resourceService.queryPost($scope, $filter('getUrl')('summerRedpaperSend'), userObj, 'summerRedpaperSend');
            }
        }

        $scope.goInvest = function(){
            resourceService.queryPost($scope, $filter('getUrl')('summerRedpaperSendActive'), {}, 'summerRedpaperSendActive');
        }

        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '高温卷土重来，啄米理财送上及时雨大红包请笑纳~',
                desc: '天降及时雨，红包嘉年华，8月7日，啄米理财开启“夏日及时雨大红包”活动。3670元夏日及时雨红包组合免费领！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyahongbaoyu?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/hongbaoyu.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '高温卷土重来，啄米理财送上及时雨大红包请笑纳~',
                desc: '天降及时雨，红包嘉年华，8月7日，啄米理财开启“夏日及时雨大红包”活动。3670元夏日及时雨红包组合免费领！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyahongbaoyu?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/hongbaoyu.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '高温卷土重来，啄米理财送上及时雨大红包请笑纳~',
                desc: '天降及时雨，红包嘉年华，8月7日，啄米理财开启“夏日及时雨大红包”活动。3670元夏日及时雨红包组合免费领！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyahongbaoyu?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/hongbaoyu.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '高温卷土重来，啄米理财送上及时雨大红包请笑纳~',
                desc: '天降及时雨，红包嘉年华，8月7日，啄米理财开启“夏日及时雨大红包”活动。3670元夏日及时雨红包组合免费领！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyahongbaoyu?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/hongbaoyu.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '高温卷土重来，啄米理财送上及时雨大红包请笑纳~',
                desc: '天降及时雨，红包嘉年华，8月7日，啄米理财开启“夏日及时雨大红包”活动。3670元夏日及时雨红包组合免费领！', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyahongbaoyu?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/hongbaoyu.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    });
});
define('conttrollers/hongyaAugustCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaAugustCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state,$localStorage) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.showDialog = false;

        $scope.dialogType = '';
        $scope.showPopbtn = false;

        var date = new Date();
        if(date < new Date(2017,8-1,21,0,0,0)){
            $scope.dateState = 1;
        } else if(date >= new Date(2017,8-1,21,0,0,0) && date < new Date(2017,8-1,26,0,0,0)){
            $scope.dateState = 2;
        } else if(date >= new Date(2017,8-1,26,0,0,0) && date < new Date(2017,8-1,28,0,0,0)){
            $scope.dateState = 3;
        } else {
            $scope.dateState = 4;
        }

        $scope.wap = $stateParams.wap;
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;

        var userObj = {};
        
        if($scope.userOBJ.register){
            userObj = {uid: $scope.user.uid}
            if($localStorage.showActivityRedbagDialog == undefined){
                resourceService.queryPost($scope, $filter('getUrl')('getMyInvestStatistics'), userObj, 'weekendPopup');
            }
        } else if (!$scope.wap && $stateParams.uid && $stateParams.token){
            userObj = {
                uid: $stateParams.uid,
                token: $stateParams.token
            }
        }


        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case 'moneySeasonRedSend':
                    if (data.success) {
                        if(data.map.isSendSuccess){
                            $scope.dialogType = 'succ'
                        } else {
                            $scope.dialogType = 'successful'
                        }
                        $scope.showDialog = true;
                    } else {
                        if (data.msg=='未登录，请先登录') {
                            window.location.href = 'jsmp://page=3';
                        } else {
                            $filter('活动信息')(1002, $scope, 'y')
                        }
                    }
                    break;
                case 'getMyInvestStatistics':
                    if (data.success) {
                        $scope.investNumber = data.map.totalAmount
                        $scope.dialogType = 'result'
                        $scope.showDialog = true;
                    } else {
                        if (data.msg=='未登录，请先登录') {
                            window.location.href = 'jsmp://page=3';
                        } else {
                            $filter('活动信息')(1002, $scope, 'y')
                        }
                    }

                    break;
                case 'moneySeasonRedSendActive':
                    if (data.success) {
                        if($scope.wap) {
                            $state.go('cpDetail', { pid: data.map.id ,from: 'hongyaAugust'});
                        } else {
                            window.location.href = 'jsmp://page=5?pid=' + data.map.id;
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case 'weekendPopup':
                    if(data.map.totalAmount >= 100000){
                        redbag = 998;
                    } else if(data.map.totalAmount >= 50000){
                        redbag = 448;
                    }  else if(data.map.totalAmount >= 30000){
                        redbag = 288;
                    }  else if(data.map.totalAmount >= 10000){
                        redbag = 88;
                    } 
                    if(redbag > 0){
                        $scope.dialogObj = {
                            className: 'august-hongbao',
                            href: 'main.bankBillList',
                            redbag: redbag
                        }
                        $scope.showActivityDialog = true;
                    }
                break;
            }
        })

        document.addEventListener('scroll',handleScroll,false);

        function handleScroll(){
            if($state.current.name == 'hongyaAugust'){
            　　var scrollTop = $(window).scrollTop();
            　　var windowHeight = $(window).height();
                var btnTop = $('.box-a').offset().top;
    
                $scope.$apply(function(){
                    $scope.showPopbtn = (scrollTop + windowHeight * 0.4 >= btnTop);
                })

            } else{
                document.removeEventListener('scroll',handleScroll,false);
            }
        }

        $scope.getGift = function(){
            if($scope.wap && !$scope.userOBJ.register){
                $state.go('dl',{ returnurl: 'hongyaAugust?wap=true'});
            } else {
                resourceService.queryPost($scope, $filter('getUrl')('moneySeasonRedSend'), userObj, 'moneySeasonRedSend');
            }
        }

        $scope.goInvest = function(){
            resourceService.queryPost($scope, $filter('getUrl')('moneySeasonRedSendActive'), userObj, 'moneySeasonRedSendActive');
        }        

        $scope.goInvestList = function(){
            if($scope.wap){
                $state.go('main.bankBillList');
            } else {
                window.location.href = 'jsmp://page=2';
            }
        }

        $scope.getResult = function(){
            if($scope.wap && !$scope.userOBJ.register){
                $state.go('dl',{ returnurl: 'hongyaAugust?wap=true'});
            } else {
                resourceService.queryPost($scope, $filter('getUrl')('getMyInvestStatistics'), userObj, 'getMyInvestStatistics');
            }
        }

        $scope.handleDialog = function(){
            switch($scope.dialogType){
                case 'rule':
                    break;
                case 'result':
                    break;
                case 'succ':
                    if($scope.wap){
                        $state.go('main.bankBillList');
                    } else {
                        window.location.href = 'jsmp://page=2';
                    }
                    break;
                case 'successful':
                    if($scope.wap){
                        $state.go('myCoupon');
                    } else {
                        window.location.href = 'jsmp://page=11';
                    }
                    break;
            }
        }

        $scope.closeActivityDialog = function(){
            $scope.showActivityDialog = false;
            $localStorage.showActivityRedbagDialog = true;
        }


        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '8月超级钜献！啄米四重礼，红包拿到你手软。',
                desc: '厉害了，每次都是大招！这样的壕礼此时不领更待何时？', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaAugust?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/august.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '8月超级钜献！啄米四重礼，红包拿到你手软。',
                desc: '厉害了，每次都是大招！这样的壕礼此时不领更待何时？', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaAugust?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/august.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '8月超级钜献！啄米四重礼，红包拿到你手软。',
                desc: '厉害了，每次都是大招！这样的壕礼此时不领更待何时？', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaAugust?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/august.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '8月超级钜献！啄米四重礼，红包拿到你手软。',
                desc: '厉害了，每次都是大招！这样的壕礼此时不领更待何时？', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaAugust?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/august.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '8月超级钜献！啄米四重礼，红包拿到你手软。',
                desc: '厉害了，每次都是大招！这样的壕礼此时不领更待何时？', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaAugust?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/august.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    });
});
define('conttrollers/hongyaQixiCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaQixiCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';

        $scope.showDialog = false;
        $scope.lastCount = 0;
        $scope.dialogType = ''
        $scope.lotteryStatus = true;
        $scope.showFixbtn = false;
        $scope.lastCount = 0;
        $scope.form = {}

        var giftMap = {
            1 : [1,9],
            2 : [6,11],
            3 : [3,8],
            4 : [2],
            5 : [5],
            6 : [0],
            7 : [4],
            8 : [7],
            9 : [10],
        }

        var endDay = new Date(2017,9-1,1,0,0,0);
        $scope.overDue = new Date() >= endDay;

        $scope.wap = $stateParams.wap;
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;

        var userObj = {};
        
        if($scope.userOBJ.register){
            userObj = {uid: $scope.user.uid}
        } else if (!$scope.wap && $stateParams.uid && $stateParams.token){
            userObj = {
                uid: $stateParams.uid,
                token: $stateParams.token
            }
        }

        resourceService.queryPost($scope,$filter('getUrl')('qixiActivityWinningMembers'),{},'qixiActivityWinningMembers');
        resourceService.queryPost($scope,$filter('getUrl')('qixiActivityIndex'),userObj,'qixiActivityIndex');

        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case 'qixiActivityIndex':
                    if(data.success){
                        $scope.lastCount = data.map.lastCount;
                    }
                    break;
                case 'qixiActivityWinningMembers':
                    if(data.success){
                        $scope.giftList = data.map.winningMemberList;

                        var $list = $('.gift-list');
                        var tdHeight = $('.tdHeight').css('height')
                        if ($scope.giftList.length > 6) {
                            setInterval(function() {
                                $list.animate({'margin-top':'-'+tdHeight},500,function() {
                                    $list.find('li').eq(0).appendTo($list);
                                    $list.css('margin-top',0);
                                });
                            }, 3000);
                        }
                    }
                    break;  
                case 'qixiActivityId':
                    if (data.success) {
                        if($scope.wap) {
                            $state.go('cpDetail', { pid: data.map.id ,from: 'hongyaqixi'});
                        } else {
                            window.location.href = 'jsmp://page=5?pid=' + data.map.id;
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }

                    break;
                case 'myQixiActivityGifts':
                    if (data.success) {
                        $scope.myGiftList = data.map.giftList;
                        showDialog('gift')
                    } else {
                        if (data.msg=='未登录，请先登录') {
                            window.location.href = 'jsmp://page=3';
                        } else {
                            $filter('活动信息')(1002, $scope, 'y')
                        }
                    }
                    break;
                case 'qixiActivityLottery':
                    if(data.success){
                        $scope.lastCount = data.map.lastCount;
                        var arr = giftMap[data.map.giftId]; 
                        var index = Math.floor((Math.random()*arr.length));
                        $scope.prize = {
                            id: data.map.giftId,
                            index: arr[index],
                            type: data.map.prizeType,
                            logId: data.map.lotteryLogId
                        }

                        lottery.speed = 100;
                        roll();
                    } else {
                        if (data.msg=='未登录，请先登录') {
                            window.location.href = 'jsmp://page=3';
                        } else if(data.errorCode == '1003'){
                            $scope.lastCount = 0;
                            alert(data.errorMsg);
                        } else {
                            $filter('活动信息')(1002, $scope, 'y')
                        }
                    }
                    break;
                case 'insertDeliveryAddress':
                    if(data.success){
                        showDialog('address-ok')
                    } else{
                        if (data.msg=='未登录，请先登录') {
                            window.location.href = 'jsmp://page=3';
                        } else if(data.errorCode == '1004'){
                            alert(data.errorMsg);
                            $scope.dialogType = ''
                            hideDialog();
                        } else {
                            $filter('活动信息')(1002, $scope, 'y')
                        }
                    }
                    break;
            }
        })

        $scope.getGift = function(){
            if($scope.wap && !$scope.userOBJ.register){
                $state.go('dl',{ returnurl: 'hongyaqixi?wap=true'});
            } else {
                resourceService.queryPost($scope,$filter('getUrl')('myQixiActivityGifts'),userObj,'myQixiActivityGifts');                  
            }
        }

        $scope.goInvite = function(){
            if ($scope.wap && !$scope.userOBJ.register) {
                $state.go('dl',{ returnurl: 'myInvitation'});
            } else if($scope.wap && $scope.userOBJ.register){
                window.location.href = '/myInvitation'
            } else {
                window.location.href = 'jsmp://page=1'
            }
        }

        $scope.goInvest = function($event){
            resourceService.queryPost($scope,$filter('getUrl')('qixiActivityIndex'),{},'qixiActivityId');
        }

        $scope.beginLottery = function(){
            if($scope.lotteryStatus){
                $scope.lotteryStatus = false;
                resourceService.queryPost($scope,$filter('getUrl')('qixiActivityLottery'),userObj,'qixiActivityLottery');
            }
        }

        $scope.checkAddress = function(){
            $scope.showNameError = false;
            $scope.showPhoneError = false;
            $scope.showAddressError = false;

            if($scope.form.name == undefined || $scope.form.name == ''){
                $scope.showNameError = true;
            } else if($scope.form.phone == undefined || $scope.form.phone == ''){
                $scope.showPhoneError = true;
            } else if($scope.form.address == undefined || $scope.form.address == ''){
                $scope.showAddressError = true;
            } else {
                $scope.dialogType = 'address-sure';
            }
        }

        $scope.submitAddress = function(){
            var obj = {}
            if($scope.userOBJ.register){
                obj = {uid: $scope.user.uid}
            } else if (!$scope.wap && $stateParams.uid && $stateParams.token){
                obj = {
                    uid: $stateParams.uid,
                    token: $stateParams.token
                }
            }
            obj.name = $scope.form.name;
            obj.phone = $scope.form.phone;
            obj.address = $scope.form.address;
            obj.lotteryLogId = $scope.prize.logId;
            resourceService.queryPost($scope,$filter('getUrl')('insertDeliveryAddress'),obj,'insertDeliveryAddress');
        }

        $scope.hideDialog = function(){
            switch($scope.dialogType){
                case 'gift':
                case 'gift-1':
                case 'address-ok':
                case '':
                    $('body').css({overflow:'visible',height:'auto',position:'relative'})
                    var top = parseInt($('.hy-qixi').css('marginTop')) * -1;
                    $('.hy-qixi').css({marginTop: 0});
                    $(window).scrollTop(top)
                    $scope.dialogType = ''
                    $scope.showDialog = false;
                    break;
            }
        }

        function showGift(){
            showDialog('gift-'+$scope.prize.type)
        }

        function showDialog(type){
            var top = $(window).scrollTop()
            console.log(top)
            $('body').css({overflow:'hidden',height:'100%',position:'absolute'})
            $('.hy-qixi').css({marginTop: top * (-1)})
            $scope.dialogType = type
            $scope.showDialog = true;
        }

        var lottery = {
            index: -1, //当前转动到哪个位置，起点位置
            count: 0, //总共有多少个位置
            timer: 0, //setTimeout的ID，用clearTimeout清除
            speed: 20, //初始转动速度
            times: 0, //转动次数
            cycle: 10, //转动基本次数：即至少需要转动多少次再进入抽奖环节
            prize: -1, //中奖位置
            init: function(id) {
                if ($("#" + id).find(".lottery-unit").length > 0) {
                    $lottery = $("#" + id);
                    $units = $lottery.find(".lottery-unit");
                    this.obj = $lottery;
                    this.count = $units.length;
                    $lottery.find(".lottery-unit-" + this.index).addClass("qixi-gift-active");
                };
            },
            roll: function() {
                var index = this.index;
                var count = this.count;
                var lottery = this.obj;
                $(lottery).find(".lottery-unit-" + index).removeClass("qixi-gift-active");
                index += 1;
                if (index > count - 1) {
                    index = 0;
                };
                $(lottery).find(".lottery-unit-" + index).addClass("qixi-gift-active");
                this.index = index;
                return false;
            },
            stop: function(index) {
                this.prize = index;
                return false;
            }
        };

        function roll() {
            lottery.times += 1;
            lottery.roll();
            if (lottery.times > lottery.cycle + 10 && lottery.prize == lottery.index) {
                clearTimeout(lottery.timer);
                lottery.prize = -1;
                lottery.times = 0;
                setTimeout(function(){
                    $scope.$apply(function(){
                        $scope.lotteryStatus = true;
                        showGift();
                    })
                }, 1000)
            } else {
                if (lottery.times < lottery.cycle) {
                    lottery.speed -= 10;
                } else if (lottery.times == lottery.cycle) {
                    lottery.prize = $scope.prize.index;
                } else {
                    if (lottery.times > lottery.cycle + 10 && ((lottery.prize == 0 && lottery.index == 7) || lottery.prize == lottery.index + 1)) {
                        lottery.speed += 110;
                    } else {
                        lottery.speed += 20;
                    }
                }
                if (lottery.speed < 40) {
                    lottery.speed = 40;
                };
                //console.log(lottery.times+'^^^^^^'+lottery.speed+'^^^^^^^'+lottery.prize);
                lottery.timer = setTimeout(roll, lottery.speed);
            }
            return false;
        }

        lottery.init('lottery');

        document.addEventListener('scroll',handleScroll,false);
        function handleScroll(){
            if($state.current.name == 'hongyaqixi'){
            　　var scrollTop = $(window).scrollTop();
                var windowHeight = $(window).height();
                var h1 = $('.box-a').offset().top;
                var h2 = $('.box-b').offset().top + $('.qixi-ticket').height();
                var h3 = $('.page-1').offset().top;
                $scope.$apply(function(){
                    $scope.showFixbtn = (scrollTop + 0.5*windowHeight >= h1 && scrollTop < h2 + 0.5*windowHeight) || scrollTop >= h3;
                })
            } else {
                document.removeEventListener('scroll',handleScroll,false);
            }
        }   

        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '你约会我报销！啄米理财助你七夕壕壕过~',
                desc: '啄米理财七夕超值活动：最高1314元返现、专享标加息，更有iphone7、iPadmini4等大礼等你抽（百分百中奖哦）', // 分享描述
                link: 'https://m.hongyajinrong.com/hongyaqixi?wap=true', // 分享链接
                imgUrl: 'https://m.hongyajinrong.com/images/wechat-share/qixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '你约会我报销！啄米理财助你七夕壕壕过~',
                desc: '啄米理财七夕超值活动：最高1314元返现、专享标加息，更有iphone7、iPadmini4等大礼等你抽（百分百中奖哦）', // 分享描述
                link: 'https://m.hongyajinrong.com/hongyaqixi?wap=true', // 分享链接
                imgUrl: 'https://m.hongyajinrong.com/images/wechat-share/qixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '你约会我报销！啄米理财助你七夕壕壕过~',
                desc: '啄米理财七夕超值活动：最高1314元返现、专享标加息，更有iphone7、iPadmini4等大礼等你抽（百分百中奖哦）', // 分享描述
                link: 'https://m.hongyajinrong.com/hongyaqixi?wap=true', // 分享链接
                imgUrl: 'https://m.hongyajinrong.com/images/wechat-share/qixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '你约会我报销！啄米理财助你七夕壕壕过~',
                desc: '啄米理财七夕超值活动：最高1314元返现、专享标加息，更有iphone7、iPadmini4等大礼等你抽（百分百中奖哦）', // 分享描述
                link: 'https://m.hongyajinrong.com/hongyaqixi?wap=true', // 分享链接
                imgUrl: 'https://m.hongyajinrong.com/images/wechat-share/qixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '你约会我报销！啄米理财助你七夕壕壕过~',
                desc: '啄米理财七夕超值活动：最高1314元返现、专享标加息，更有iphone7、iPadmini4等大礼等你抽（百分百中奖哦）', // 分享描述
                link: 'https://m.hongyajinrong.com/hongyaqixi?wap=true', // 分享链接
                imgUrl: 'https://m.hongyajinrong.com/images/wechat-share/qixi.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    });
});
define('conttrollers/hongyaFanACtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaFanACtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.showDialog = false;
        $scope.showFixedbtn = true;

        var startTime = (new Date(Date.UTC(2017,9-1,6,-8,0,0))).getTime();
        var endTime = (new Date(Date.UTC(2017,9-1,13,-8,0,0))).getTime();
        var now = (new Date()).getTime();

        if(now < startTime){
            $scope.activityStatus = -1;
        } else if(now >= endTime){
            $scope.activityStatus = 1;
        } else {
            $scope.activityStatus = 0;
        }


        $scope.wap = $stateParams.wap;
        $scope.userOBJ = $filter('isRegister')();
        $scope.user = $scope.userOBJ.user.member;

        var userObj = {};
        
        if($scope.userOBJ.register){
            userObj = {uid: $scope.user.uid}
            resourceService.queryPost($scope, $filter('getUrl')('financingInvestStatistics'), userObj, 'financingInvestStatistics');
        } else if (!$scope.wap && $stateParams.uid && $stateParams.token){
            userObj = {
                uid: $stateParams.uid,
                token: $stateParams.token
            }    
            resourceService.queryPost($scope, $filter('getUrl')('financingInvestStatistics'), userObj, 'financingInvestStatistics');
        }

        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case 'financingInvestStatistics':
                    if (data.success) {
                        $scope.result = data.map.repeatTotalAmount;
                        $scope.gift = data.map.rewards;
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
                case 'moneySeasonRedSend':
                    if (data.success) {
                        $scope.showDialog = true;
                        $scope.getGiftSuccess = data.map.isSendSuccess;
                    } else {
                        if (data.msg=='未登录，请先登录') {
                            window.location.href = 'jsmp://page=3';
                        } else {
                            $filter('活动信息')(1002, $scope, 'y')
                        }
                    }
                    break;
                case 'summerRedpaperSendActive':
                    if (data.success) {
                        if($scope.wap) {
                            $state.go('cpDetail', { pid: data.map.id ,from: 'hongyaFanA'});
                        } else {
                            window.location.href = 'jsmp://page=5?pid=' + data.map.id;
                        }
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            }
        })

        $scope.getGift = function(){
            if($scope.wap && !$scope.userOBJ.register){
                $state.go('dl',{ returnurl: 'hongyaFanA?wap=true'});
            } else {
                resourceService.queryPost($scope, $filter('getUrl')('moneySeasonRedSend'), userObj, 'moneySeasonRedSend');
            }
        }

        $scope.goInvest = function(){
            resourceService.queryPost($scope, $filter('getUrl')('summerRedpaperSendActive'), {}, 'summerRedpaperSendActive');
        }

        document.addEventListener('scroll', handleScroll, false);

        function handleScroll(){
            if($state.current.name == 'hongyaFanA'){
            　　var scrollTop = $(window).scrollTop();
            　　var windowHeight = $(window).height();
                var btnBottom = $('.invest-btn').offset().top + $('.invest-btn').height();

                $scope.$apply(function(){
                    $scope.showFixedbtn = !(scrollTop + windowHeight > btnBottom);
                })
            } else {
                document.removeEventListener('scroll',handleScroll,false);
            }
        }        

        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '啄米理财喜获A轮融资',
                desc: '感恩回馈，最高送2000元京东卡', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaFanA?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/fan-a.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '啄米理财喜获A轮融资',
                desc: '感恩回馈，最高送2000元京东卡', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaFanA?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/fan-a.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '啄米理财喜获A轮融资',
                desc: '感恩回馈，最高送2000元京东卡', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaFanA?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/fan-a.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '啄米理财喜获A轮融资',
                desc: '感恩回馈，最高送2000元京东卡', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaFanA?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/fan-a.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '啄米理财喜获A轮融资',
                desc: '感恩回馈，最高送2000元京东卡', // 分享描述
                link: 'http://m.zhuomilicai.com/hongyaFanA?wap=true', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/fan-a.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    });
});
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/hongyaChannelregCtrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('hongyaChannelregCtrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams','signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams,signWeChatService) {
        // signWeChatService();
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        var title, channel, wechatTitle, wechatLink, wechatImg;
        if($state.current.name == 'oilReg'){
            title = '啄米理财-350元油卡等你来';
            channel = 'chedaojiayou';
            wechatTitle = '350元油卡等你来抢。';
            wechatLink = 'https://m.hongyajinrong.com/oilreg';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/reg-oil.png'
        } else if($state.current.name == 'xiaomiReg'){
            title = '啄米理财-啄米家居节，豪礼带回家';
            channel = 'xmyd'
            wechatTitle = '啄米家居节，豪礼拿回家';
            wechatLink = 'https://m.hongyajinrong.com/xiaomiReg';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        } else if($state.current.name == 'chediandian'){
            title = '啄米理财-1000京东卡等你来';
            channel = 'chediandian'
            wechatTitle = '1000京东卡等你来领';
            wechatLink = 'https://m.hongyajinrong.com/chediandian';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        } else{
            title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
            channel = ''
            wechatTitle = '啄米理财，国企背景';
            wechatLink = 'https://m.hongyajinrong.com';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        }

        $rootScope.title = title;
        // $rootScope.maskError=true;
        $scope.toFrom = $stateParams.toFrom;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined || $scope.login.toFrom) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };

            $scope.login.toFrom = channel;
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                } else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                } else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                } else if (tegForm.passWord.$invalid) {
                    if(tegForm.passWord.$error.pattern){
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                        
                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                         $state.go('tyjRegSuccess2');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        $scope.goReg = function () {
            $("html,body").animate({ scrollTop: $(".reg-form").offset().top });
        };
        $scope.showFixedbtn = true;
        document.addEventListener('scroll',handleScroll,false);

        function handleScroll(){
            if($state.current.name == 'oilReg' || $state.current.name == 'xiaomiReg'){
            　　var scrollTop = $(window).scrollTop();
            　　var windowHeight = $(window).height();
                var btnBottom = $('.reg-form').offset().top; // + $('.reg-form').height()

                $scope.$apply(function(){
                    $scope.showFixedbtn = !(scrollTop + windowHeight > btnBottom);
                })
            } else {
                document.removeEventListener('scroll',handleScroll,false);
            }
        }
        // var linkstr = "";
        // if($stateParams.toFrom){
        //     linkstr = '&toFrom=' + $stateParams.toFrom;
        // } else if($scope.user && $scope.user.mobilephone){
        //     linkstr = '&recommCode=' + $scope.user.mobilephone;
        // }

        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                                 window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }

    ])
})
;
define('conttrollers/hongyaXmydCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaXmydCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.wap = $stateParams.wap;

        $scope.goReg = function(){
            $state.go('hongyareg', {toFrom:'xmsport', phone: $scope.phone})
        }
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '你与优质生活，只差一件小米的距离', // 分享描述
                link: 'http://m.zhuomilicai.com/xmydReg2', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '你与优质生活，只差一件小米的距离', // 分享描述
                link: 'http://m.zhuomilicai.com/xmydReg2', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '你与优质生活，只差一件小米的距离', // 分享描述
                link: 'http://m.zhuomilicai.com/xmydReg2', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '你与优质生活，只差一件小米的距离', // 分享描述
                link: 'http://m.zhuomilicai.com/xmydReg2', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '啄米理财-纯国企背景投资理财平台',
                desc: '你与优质生活，只差一件小米的距离', // 分享描述
                link: 'http://m.zhuomilicai.com/xmydReg2', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    });
});
define('conttrollers/hongyaJrttCtrl',['webappControllers','jweixin'], function (controllers, wx) {
    controllers.controller('hongyaJrttCtrl', function ($scope,$rootScope,$stateParams,$filter,resourceService,$state) {
        $rootScope.title = '汇元金服-投资理财,P2P理财，P2P网贷,个人理财';
        $scope.wap = $stateParams.wap;

        $scope.goReg = function(){
            $state.go('hongyareg', {toFrom:'xmsport', phone: $scope.phone})
        }
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '啄米理财-100%国资平台，豪礼送不停',
                // desc: '', // 分享描述
                link: 'http://m.zhuomilicai.com/jinritoutiao', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '啄米理财-100%国资平台，豪礼送不停',
                // desc: '', // 分享描述
                link: 'http://m.zhuomilicai.com/jinritoutiao', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '啄米理财-100%国资平台，豪礼送不停',
                // desc: '', // 分享描述
                link: 'http://m.zhuomilicai.com/jinritoutiao', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '啄米理财-100%国资平台，豪礼送不停',
                // desc: '', // 分享描述
                link: 'http://m.zhuomilicai.com/jinritoutiao', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '啄米理财-100%国资平台，豪礼送不停',
                // desc: '', // 分享描述
                link: 'http://m.zhuomilicai.com/jinritoutiao', // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/share.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
    });
});
define('conttrollers/inviteCenterController',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope', '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('inviteCenter', function ($scope, $filter, resourceService, isWeixin) {
        $scope.title = '我的邀请'
        $scope.userOBJ = $filter('isRegister')();
        if ($scope.userOBJ.register) {
            resourceService.queryPost($scope, $filter('getUrl')('我的邀请列表'), { uid: $scope.userOBJ.user.member.uid, pageSize: 20, pageOn: 1 }, '我的邀请');
        } else {
            $state.go('dl');
            return;
        };
        $scope.protocol = $filter('protocolFilter')()
        $scope.invitePerson = '';
        if ($scope.userOBJ.user.member.realName) {
            var name = $scope.userOBJ.user.member.realName;
            $scope.invitePerson = $filter('mosaic')(name)
        } else {
            var mobile = $scope.userOBJ.user.member.mobilephone;
            $scope.invitePerson = $filter('mosaic')(mobile)
        }
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.height = {
            'min-height': window.innerHeight + 'px'
        }
        var linkstr = "";
        if ($scope.userOBJ.user && $scope.userOBJ.user.member.mobilephone) {
            linkstr = 'recommCode=' + $scope.userOBJ.user.member.mobilephone + '&';
        }
        if ($scope.invitePerson) {
            linkstr += 'invitePerson=' + $scope.invitePerson;
        }
        // 三重礼邀请
        $filter('微信邀请分享-邀请')(linkstr)
        // 分享相关
        $scope.share = function () {
            $('.fixed-box').fadeIn(200);
            // if (isWeixin()) {
            //     $('.activity-firend-boxweixin').fadeIn(150);
            // } else {
            //     $('.fixed-box').fadeIn(200);
            // }
        };
        $scope.closeshareweixin = function () {
            $('.activity-firend-boxweixin').fadeOut(150);
        };
        $scope.closeshare = function () {
            $('.fixed-box').fadeOut(200);
        };
        $scope.default = function (event) {
            event.stopPropagation();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '我的邀请':
                    if (data.success) {
                        $scope.inviteList = data.map
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y');
                    }
                    break
            }
        })
    })
});
define('conttrollers/zmActive/zmInviteController',[
    'webappControllers',
    'jquery'
], function (controller) {
    controller.controller('zmInviteController', ['$scope', '$filter', '$state', '$location', 'resourceService', 'isWeixin', '$timeout', '$localStorage', '$stateParams', function ($scope, $filter, $state, $location, resourceService, isWeixin, $timeout, $localStorage, $stateParams) {
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '返现列表':
                    if (data.success) {
                        $scope.list = data.map.awardList
                    }
                    break
                case '30天标':
                    if (data.success) {
                        $scope.goInvestList = function () {
                            if ($stateParams.wap) {
                                $state.go('cpDetail', {
                                    pid: data.map.id
                                })
                            } else {
                                window.location.href = 'jsmp://page=5?pid=' + data.map.id
                            }
                        }
                    }
                    break
            }
        })
        var startTime = new Date(2017, 10 - 1, 31, 0, 0, 0),
            endTime = new Date(2017, 11 - 1, 11, 0, 0, 0),
            nowTime = new Date()
            
        $scope.isActiveTime = (function () {
            if (nowTime < startTime) return 1
            if (nowTime >= startTime && nowTime < endTime) return 2
            return 3
        })()
        resourceService.queryPost($scope, $filter('getUrl')('啄米返现活动'), {
            type: 2
        }, '返现列表')
        resourceService.queryPost($scope, $filter('getUrl')('30天标'), {
            deadline: 30
        }, '30天标')
        $scope.gofriend = function () {
            if ($stateParams.wap) {
                $state.go('myInvitation')
            } else {
                window.location.href = 'jsmp://page=1'
            }
        }
    }])
        .directive("repeatFinish", function () {
            return {
                link: function (scope, element, attr) {
                    if (scope.$last == true) {
                        scope.$eval(attr.repeatFinish);
                    }
                }
            }
        })
        .directive('scroll', function () {
            var temp = '<span repeat-finish="finish()" ng-repeat="item in list">{{item.mobilePhone}}成功投资{{item.investAmount}}获得{{item.amount}}元现金</span>'
            return {
                template: temp,
                scope: true,
                transclude: true,
                link: function ($scope, element, attrs) {
                    var a = 1;
                    $scope.finish = function () {
                        if (a == 1) {
                            a++;
                            var height;
                            $('.notice-box').find('span').each(function (i) {
                                height = parseFloat($(this).css('height'));
                                $(this).css({
                                    top: (i * height) + 'px'
                                })
                                var that = this;
                                setInterval(function () {
                                    var top = parseFloat($(that).css('top'));
                                    $(that).animate({
                                        top: (top - height) + 'px'
                                    }, 500, function () {
                                        var top = parseFloat($(that).css('top'));
                                        if (top <= (height * (-1))) {
                                            $(that).css({ top: ($scope.list.length - 1) * height + 'px' });
                                        }
                                        if (top == 0) {
                                            $(that).css({ zIndex: 1 });
                                        }
                                        else {
                                            $(that).css({ zIndex: 0 });
                                        }
                                    })
                                }, 2500)
                            })
                        }
                    }
                }
            }
        });
});
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/zmChannel/chedao',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('chedaoController', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
        // signWeChatService();
        $scope.protocol = $filter('protocolFilter')()
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $rootScope.title = '新用户注册';
        $scope.login = {};
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.toFrom = 'chedao'
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                } else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                } else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                } else if (tegForm.passWord.$invalid) {
                    if (tegForm.passWord.$error.pattern) {
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }
        }
        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if ($scope.isImgCode == true) {
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic: true
                        }, { name: '获取验证码', tegForm: tegForm });

                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else {
                    $scope.login.picCode = '';
                    $scope.isImgCode = true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success == true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode = false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if (data.errorCode == '1006') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                        // $state.go('tyjRegSuccess2');
                        window.location.href = window.location.origin + (window.location.port != '' ? ':' + window.location.port : '') + '/tyjRegSuccess2'
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($stateParams.toFrom) {
            linkstr = '&toFrom=' + $stateParams.toFrom;
        } else if ($scope.user && $scope.user.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.mobilephone;
        }
        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: '啄米理财，国企背景',
                desc: '注册就送618红包+99999体验金', // 分享描述
                link: 'http://m.zhuomilicai.com/zhuomireg?' + linkstr, // 分享链接
                imgUrl: 'http://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.zmlc.zm_app";
                }
            } else if (window.HM_JsBridge) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    openInBrowser("https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8");
                } else if (browser.versions.android) {
                    openInBrowser("http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app");
                } else {
                    openInBrowser("http://www.hongyajinrong.com/upload/apk/hy_app.apk");
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.zmlc.zm_app";
            } else {
                window.location.href = "http://www.zhuomilicai.com/upload/apk/zm_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }
    ])
})
;
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/zmChannel/zmChannelregCtrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('zmChannelregCtrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams','signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams,signWeChatService) {
        // signWeChatService();
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        var title, channel, wechatTitle, wechatLink, wechatImg;
        if($state.current.name == 'chediandian'){//车点点
            title = '汇元金服-壕礼送送送不停';
            channel = 'hyccvx'
            wechatTitle = '送华为 送京东卡 还送现金红包';
            wechatLink = 'https://192.168.0.125:8888/chediandian';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        } else if($state.current.name == 'yunrui'){//云锐开发
        	title = '汇元金服-壕礼送送送不停';
            channel = 'yuyue'
            wechatTitle = '汇元金服-壕礼送送送不停';
            wechatLink = 'https://192.168.0.125:8888/yunrui';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        }else if($state.current.name == 'nav360'){//360导航
        	title = '汇元金服-壕礼送送送不停';
            channel = '360dh'
            wechatTitle = '汇元金服-壕礼送送送不停';
            wechatLink = 'https://192.168.0.125:8888/nav360';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        }else if($state.current.name == 'ddyc'){//典典养车
        	title = '汇元金服-壕礼送送送不停';
            channel = 'ddyc'
            wechatTitle = '汇元金服-壕礼送送送不停';
            wechatLink = 'https://192.168.0.125:8888/inviteReg';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        }else if($state.current.name == 'inviteReg'){//典典养车
        	title = '汇元金服-壕礼送送送不停';
            channel = 'hyjf'
            wechatTitle = '汇元金服-壕礼送送送不停';
            wechatLink = 'https://192.168.0.125:8888/inviteReg';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        }else{
            title = '啄米理财-网贷投资理财，国资背景平台';
            channel = ''
            wechatTitle = '啄米理财，国资背景';
            wechatLink = 'https://m.zhuomilicai.com';
            wechatImg = 'http://m.zhuomilicai.com/images/wechat-share/share.png'
        }

        $rootScope.title = title;
        // $rootScope.maskError=true;
        $scope.toFrom = $stateParams.toFrom;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined || $scope.login.toFrom) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };

            $scope.login.toFrom = channel;
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                } else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                } else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                } else if (tegForm.passWord.$invalid) {
                    if(tegForm.passWord.$error.pattern){
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if($scope.isImgCode==true){
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic : true
                        }, { name: '获取验证码', tegForm: tegForm });
                        
                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else{
                    $scope.login.picCode = '';
                    $scope.isImgCode=true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success==true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode=false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if(data.errorCode == '1006'){
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                         $state.go('tyjRegSuccess2');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        $scope.goReg = function () {
            $("html,body").animate({ scrollTop: $(".reg-form").offset().top });
        };
        $scope.showFixedbtn = true;
        document.addEventListener('scroll',handleScroll,false);

        function handleScroll(){
            if($state.current.name == 'oilReg' || $state.current.name == 'xiaomiReg'){
            　　var scrollTop = $(window).scrollTop();
            　　var windowHeight = $(window).height();
                var btnBottom = $('.reg-form').offset().top; // + $('.reg-form').height()

                $scope.$apply(function(){
                    $scope.showFixedbtn = !(scrollTop + windowHeight > btnBottom);
                })
            } else {
                document.removeEventListener('scroll',handleScroll,false);
            }
        }
        // var linkstr = "";
        // if($stateParams.toFrom){
        //     linkstr = '&toFrom=' + $stateParams.toFrom;
        // } else if($scope.user && $scope.user.mobilephone){
        //     linkstr = '&recommCode=' + $scope.user.mobilephone;
        // }

        wx.ready(function () {
            wx.onMenuShareTimeline({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareAppMessage({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQQ({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareWeibo({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
            wx.onMenuShareQZone({
                title: wechatTitle,
                // desc: wechatDesc, // 分享描述
                link: wechatLink, // 分享链接
                imgUrl: wechatImg, // 分享图标
                success: function () {
                    alert('分享成功！');
                },
                cancel: function () {
                    alert('您取消了分享！');
                }
            });
        })
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            } (),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                                 window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.zhuomilicai.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };

        $scope.toTop = function(){
            $('html,body').animate({ scrollTop: 0 }, 500);
        }
    }

    ])
})
;
define('conttrollers/inviteFri',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state", '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('inviteFri', function ($scope, $filter,$state,$stateParams, resourceService, isWeixin) {
        $scope.title = '邀请好友'
        $scope.app = $stateParams.app;
		$scope.userOBJ = $filter('isRegister')();	
//      
        $scope.protocol = $filter('protocolFilter')()
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.default = function (event) {
            event.stopPropagation();
        };
        $scope.share = function(){
        	if($scope.userOBJ.register){
	        	$state.go('inviteCenter');
	        }else{
	        	$state.go('dl');
	        	return;
	        }
        
        }
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
//
    })
});
define('conttrollers/inviteFriApp',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state", '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('inviteFriApp', function ($scope, $filter,$state,$stateParams, resourceService, isWeixin) {
        $scope.title = '邀请好友'
        $scope.app = $stateParams.app;
		$scope.userOBJ = $filter('isRegister')();
    
        $scope.protocol = $filter('protocolFilter')()

        $scope.default = function (event) {
            event.stopPropagation();
        };
        $scope.share = function(){
        	if($scope.userOBJ.register){
	        	$state.go('inviteCenter');
//	        	console.log(11)
	        }else{
	        	$state.go('dl');
//	        	console.log(22);
	        	return;
	        }
        }
        
		var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
    })
});
define('conttrollers/shuangCtrl',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state", '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('shuangCtrl', function ($scope, $filter,$rootScope,$state,$stateParams, resourceService, isWeixin) {
       
       $scope.app = $stateParams.app;
       var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
       
       resourceService.queryPost($scope, $filter('getUrl')('双十二活动'), {}, '双十二活动');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                case '双十二活动':
                    if (data.success) {
//                  	console.log(data);
                    	$scope.userList = data.map.Statisticslist.slice(0, 10);
                    } else {
                        $filter('服务器信息')(data.errorCode, $scope, 'y')
                    }
                    break;
            };
        });
    })
});
define('conttrollers/ChristmasCtrl',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state", '$stateParams', 'resourceService']], function (controllers, jweixin) {
	//圣诞活动
    controllers.controller('christmasCtrl', function ($scope, $filter,$rootScope,$state,$stateParams, resourceService, isWeixin) {
    	$scope.app = $stateParams.app;
    	var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        
    })
   });
define('conttrollers/yuandanCtrl',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state",'$location','ngDialog','$localStorage', '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('yuandanCtrl', function ($scope, $filter,$rootScope,$state,$location,ngDialog,$localStorage,$stateParams, resourceService, isWeixin) {
        $rootScope.title = '年底加"薪"计划正式启动';
        $scope.days = [{
            id: '1',
            name: '30'
        }, {
            id: '2',
            name: '60'
        }, {
            id: '3',
            name: '90'
        }, {
            id: '4',
            name: '180'
        }];
        $scope.investScore = 0;
        $scope.userOBJ = $filter('isRegister')(); 
        $scope.isShow = false;//兑奖记录弹出框默认隐藏
        $scope.isShowChange = false;
        $scope.app = $stateParams.app;
        $scope.isLogin =true;           //判断是否登录        
        if($scope.changeScore == ''|| $scope.changeScore == undefined){
            $scope.money = 0;
        }
        // var browser = {
        //     versions: function () {
        //         var u = navigator.userAgent,
        //             app = navigator.appVersion;
        //         return { //移动终端浏览器版本信息
        //             trident: u.indexOf('Trident') > -1, //IE内核
        //             presto: u.indexOf('Presto') > -1, //opera内核
        //             webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        //             gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        //             mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
        //             ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        //             android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
        //             iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
        //             iPad: u.indexOf('iPad') > -1, //是否iPad
        //             webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
        //         };
        //     }(),
        //     language: (navigator.browserLanguage || navigator.language).toLowerCase()
        // }

        //判断登录状态
        if(!$scope.app&&$localStorage.user){
          //H5
            $scope.uid = $localStorage.user.member.uid; //获取uid
        }else if($scope.app&&$stateParams.uid && $stateParams.token){
            //App
            $scope.uid = $stateParams.uid; //获取uid
        }else{
            $scope.isLogin =false;
        }
        resourceService.queryPost($scope, $filter('getUrl')('积分显示'), {
            uid:$scope.uid,
        },'积分显示');
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type) {
                 case "积分显示":
                    $scope.point = data.map.point; 
                 break;
            }
        })
        // 一键领取
        
        $scope.getAll = function(){
            if($scope.isLogin){
                resourceService.queryPost($scope, $filter('getUrl')('一键领取'), {
                    uid:$scope.uid,//传参
                },'一键领取');  
                $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
                    switch (type) {
                         case "一键领取":
                            $scope.isGetAll = data.flag;
                            if ($scope.isGetAll) {
                                ngDialog.open({
                                    template: '<p class="error-msg">您已经领取过了！</p>',
                                    showClose: false,
                                    closeByDocument: true,
                                    plain: true
                                });
                            } else if (!$scope.isGetAll || $scope.isGetAll==undefined) {
                                ngDialog.open({
                                    template: '<p class="error-msg">福利已到账，请到"我的"查看！</p>',
                                    showClose: false,
                                    closeByDocument: true,
                                    plain: true
                                });
                            }
                         break;
                    }
                })
            }else{
                if($scope.app){
                    window.location.href = "jsmp://page=3";
                }else{
                    $state.go('dl',{
                      returnurl:'yuandanCtrl'  
                    });
                }
            }
        }
       
        // 计算可得积分
        $scope.getScore = function(){
            if ($scope.investMoney < 1000) {
                $scope.investScore = 0;
                ngDialog.open({
                    template: '<p class="error-msg">投资金额要大于1000！</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                }, 500);
            }else {
                $scope.selectDay = $('#select').val();
                switch ($scope.selectDay) {
                    case '30':
                        $scope.investScore = $scope.investMoney * 1.2
                        break;
                    case '60':
                        $scope.investScore = $scope.investMoney * 3
                        break;
                    case '90':
                        $scope.investScore = $scope.investMoney * 4
                        break;
                    case '180':
                        $scope.investScore = $scope.investMoney * 5
                        break;
                };
            }
        }
        // 积分兑换奖品
        $scope.showGiftPanel = function(id,points){
            if($scope.isLogin){
                $scope.record = points;//奖品所需积分
                if($scope.point <points){
                    ngDialog.open({
                        template: '<p class="error-msg">剩余积分不足</p>',
                        showClose: false,
                        closeByDocument: true,
                        plain: true
                    });
                }else{
                    $scope.isShowChange = true;
                    $scope.id = id;
                }
            }else{
                ngDialog.open({
                    template: '<p class="error-msg">请先登录！</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                }, 1000); 
            }
        }
        // 积分兑换现金
        $scope.changeMoney = function(){
            if($scope.isLogin){
                if (!$scope.changeScore) {
                    ngDialog.open({
                        template: '<p class="error-msg">请输入要兑换的积分！</p>',
                        showClose: false,
                        closeByDocument: true,
                        plain: true
                    });
                    setTimeout(function () {
                        ngDialog.closeAll();
                    }, 1000); 
                } else {
                    if($scope.changeScore<120) {
                        ngDialog.open({
                            template: '<p class="error-msg">兑换积分数值不得少于120积分！</p>',
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                        setTimeout(function () {
                            ngDialog.closeAll();
                        }, 1000); 
                    }else if($scope.changeScore > $scope.point){
                        ngDialog.open({
                            template: '<p class="error-msg">剩余积分不足！</p>',  
                            showClose: false,
                            closeByDocument: true,
                            plain: true
                        });
                        setTimeout(function () {
                            ngDialog.closeAll();
                        }, 1000); 
                    }
                    else{
                        $scope.isShowChange = true;
                        $scope.id = '26';
                        $scope.points = $scope.changeScore;
                    }
                }
            }else{
                ngDialog.open({
                    template: '<p class="error-msg">请先登录！</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                }, 1000);
            }
        }
        // 确认兑换
        $scope.changeGift = function(id,points){
            id = $scope.id;
            if(id == 26){
                points =  $scope.points;
                resourceService.queryPost($scope, $filter('getUrl')('奖品兑换'), { 
                    uid:$scope.uid,
                    goodId:id,
                    point:points
                }, '奖品兑换');
            }else{
                points = $scope.record;
                resourceService.queryPost($scope, $filter('getUrl')('奖品兑换'), { 
                    uid:$scope.uid,
                    goodId:id,
                }, '奖品兑换');
            }
            $scope.isShowChange = false;
            window.location.reload();
        }
        // 登录可见
        $scope.onClick = function(){
            if($scope.app){
                window.location.href = "jsmp://page=3";
            }else{
                $state.go('dl',{
                    returnurl:'yuandanCtrl'  
                  });
            }
           
        }
        // 兑换记录
        $scope.myRecord = function(){
            if($scope.isLogin){
                if($scope.isShow){
                    $scope.isShow = false;
                }else{
                    $scope.isShow = true;
                }
                resourceService.queryPost($scope, $filter('getUrl')('积分显示'), {
                    uid:$scope.uid,
                },'积分显示');
                $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) { 
                    switch (type) {
                         case "积分显示":
                            $scope.rescordList = data.map.ExchangeList;
                         break;
                    }
                })
            }else{
                ngDialog.open({
                    template: '<p class="error-msg">请先登录！</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            }
        }
        // 关闭弹窗
        $scope.close = function(){
            $scope.isShow = false;
            $scope.isShowChange = false;
        }
        // $scope.ishide = true;
        $scope.is120 = function(){
            if ($scope.changeScore % 120 == 0) {
                $scope.ishide = true;
            } else {
                $scope.ishide = false;
            }
        }
    })
});
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/yunruiCtrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('yunruiCtrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
    	$scope.from = $stateParams.from;
        // signWeChatService();
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $rootScope.title = '新用户注册';
        // $rootScope.maskError=true;
        $scope.toFrom = $stateParams.toFrom;
        $scope.invitePerson = $stateParams.invitePerson;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;

            if ($scope.login.recommPhone === undefined || $scope.login.toFrom) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                }else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                }else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                }else if (tegForm.passWord.$invalid) {
                    if (tegForm.passWord.$error.pattern) {
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }
            
            if($scope.from == 'yuyue'){
            	$state.go('yunrui',{from:'yuyue'});
            }else if($scope.from == '360dh'){
            	$state.go('nav360',{from:'360dh'});
            }else{
            	$state.go('ddyc',{from:'ddyc'});
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if ($scope.isImgCode == true) {
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic: true
                        }, { name: '获取验证码', tegForm: tegForm });

                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else {
                    $scope.login.picCode = '';
                    $scope.isImgCode = true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success == true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode = false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if (data.errorCode == '1006') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                        $state.go('tyjRegSuccess2');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($stateParams.toFrom) {
            linkstr = '&toFrom=' + $stateParams.toFrom;
        } else if ($scope.user && $scope.user.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.mobilephone;
        }
        //微信邀请分享-邀请页面
        $filter('微信邀请分享-邀请')(linkstr)
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }
    ])
})
;
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/nav360Ctrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('nav360Ctrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
    	$scope.from = $stateParams.from;
        // signWeChatService();
        if ($filter('isRegister')().register) {
            $scope.user = $filter('isRegister')().user.member;
        }
        $rootScope.title = '新用户注册';
        // $rootScope.maskError=true;
        $scope.toFrom = $stateParams.toFrom;
        $scope.invitePerson = $stateParams.invitePerson;
        $scope.login = {};
        if ($localStorage.webFormPath != undefined) {
            if ($localStorage.webFormPath.recommCode != undefined) {
                $scope.login.recommPhone = $localStorage.webFormPath.recommCode;
            };
            if ($localStorage.webFormPath.toFrom != undefined) {
                $scope.login.toFrom = $localStorage.webFormPath.toFrom;
            };
            if ($localStorage.webFormPath.tid != undefined) {
                $scope.login.tid = $localStorage.webFormPath.tid;
            };
        };
        $scope.webFormPath = $localStorage.webFormPath;
        if ($location.$$search) { $scope.webFormPath = $location.$$search; }

        if ($scope.webFormPath.toFrom != undefined) {
            $scope.login.toFrom = $scope.webFormPath.toFrom;
        }
        if ($scope.webFormPath.recommCode != undefined) {
            $scope.login.recommPhone = $scope.webFormPath.recommCode;
        }
        if ($scope.webFormPath.tid != undefined) {
            $scope.login.tid = $scope.webFormPath.tid;
        }
        if ($stateParams.myToFrom != '' && $stateParams.myToFrom != null) {
            $scope.login.toFrom = $stateParams.myToFrom;
        }
        if ($stateParams.maskType != '' || $stateParams.maskType != undefined) {
            $localStorage.maskType = $stateParams.maskType;
        }
        $scope.changchengclick = function (i) {
            resourceService.queryPost($scope, $filter('getUrl')('getUse'), { deadline: i }, { name: '长城宽带' });
        }
        $scope.gotop = function () {
            $("html,body").animate({ scrollTop: $(".changcheng-reg").offset().top });
        };
        // 图形验证码
        var changeIMG = function (event) { //换图片验证码
            if (event != undefined) {
                event.currentTarget.src += '?' + new Date().getTime();
            } else {
                if ($('.img-box img')[0] != undefined) {
                    $('.img-box img')[0].src += '?' + new Date().getTime();
                }
            }
        };
        changeIMG();
        $scope.clickInput = function (event) {
            // $scope.userLogin.picCode = null;
            changePicEvent = event;
            changeIMG(changePicEvent);
        };
        $scope.passwordText = false;
        $scope.isSubMin = false;
        $scope.nowTimer = "获取验证码";
        var changePicEvent;
        var targetFrom;
        if ($location.$$search.frompc) { $scope.frompc = $location.$$search.frompc; }
        // var changeIMG = function (event) { //换图片验证码
        //     if (event != undefined) {
        //         event.currentTarget.src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //     } else {
        //         if ($('.img-box img')[0] != undefined) {
        //             $('.img-box img')[0].src = '../login/validateCode.do?version=' + $rootScope.version + '&channel=' + $rootScope.channel + '&' + new Date().getTime();
        //         };
        //     };
        // };
        // $scope.clickOnChangeIMG = function (event) {
        //     changeIMG(event);
        // };
        var isSub = true;
        $scope.isImgCode = true;
        $scope.zuce = function (tegForm) {
            $scope.login.checkbox = true;
            if ($scope.login.recommPhone === undefined || $scope.login.toFrom) {
                delete $scope.login.recommPhone;
            };
            if ($scope.login.toFrom === undefined) {
                delete $scope.login.toFrom;
            };
            if (tegForm.$valid) {
                if ($scope.login.passWord.length > 5) {
                    if (isSub) {
                        isSub = false;
                        resourceService.queryPost($scope, $filter('getUrl')('zuce'), $scope.login, { name: '注册', tegForm: tegForm });
                    }
                }
            } else {
                if (tegForm.mobilephone.$invalid) {
                    $rootScope.errorText = '请正确填写手机号码';
                } else if (tegForm.picCode.$invalid) {
                    $rootScope.errorText = '请正确填写图形验证码';
                } else if (tegForm.smsCode.$invalid) {
                    $rootScope.errorText = '请正确填写短信验证码';
                } else if (tegForm.passWord.$invalid) {
                    if (tegForm.passWord.$error.pattern) {
                        $rootScope.errorText = '密码为6-18位字母数字混合';
                    } else {
                        $rootScope.errorText = '请正确填写密码';
                    }
                } else {
                    $rootScope.errorText = '请正确填写以上信息';
                }
                $rootScope.maskError = true;
            }
            if($scope.from == 'yuyue'){
            	$state.go('yunrui',{from:'yuyue'});
            }else if($scope.from == '360dh'){
            	$state.go('nav360',{from:'360dh'});
            }else{
            	$state.go('ddyc',{from:'ddyc'});
            }

        }

        $scope.showPassword = function (passwordTextBool) {
            if (passwordTextBool) {
                $scope.passwordText = false;
            } else {
                $scope.passwordText = true;
            }
        }
        $scope.isSubMin = true;
        $scope.hasPhone = false;
        $scope.getyzm = function (tegForm) {
            targetFrom = tegForm;
            if ($scope.isSubMin == true) {
                if ($scope.isImgCode == true) {
                    if (tegForm.mobilephone.$error.required == true) {
                        $rootScope.errorText = '请输入需验证的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.mobilephone.$valid == false) {
                        $rootScope.errorText = '请输入正确的手机号码';
                        $rootScope.maskError = true;
                    }
                    else if ($scope.hasPhone == true) {
                        $rootScope.errorText = '此手机已注册';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$error.required == true) {
                        $rootScope.errorText = '请输入图形码';
                        $rootScope.maskError = true;
                    }
                    else if (tegForm.picCode.$valid == false) {
                        $rootScope.errorText = '请输入正确的图形码';
                        $rootScope.maskError = true;
                    }
                    else {
                        resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                            mobilephone: $scope.login.mobilephone,
                            picCode: $scope.login.picCode,
                            // 有图形码时设置isPic为true，没有不设置
                            isPic: true
                        }, { name: '获取验证码', tegForm: tegForm });

                        // resourceService.queryPost($scope, $filter('getUrl')('验证图形码'), {
                        //     mobilephone: $scope.login.mobilephone,
                        //     picCode: $scope.login.picCode
                        // }, { name: '验证图形码' });
                    }
                }
                else {
                    $scope.login.picCode = '';
                    $scope.isImgCode = true;
                    changeIMG();
                    $rootScope.errorText = '请重新输入图形码';
                    $rootScope.maskError = true;
                }
            }
        };
        /*焦点进入与离开*/
        $scope.blurID = function (code, tegForm) {
            if (!tegForm.mobilephone.$error.required && !tegForm.mobilephone.$error.minlength && !tegForm.mobilephone.$error.pattern) {
                resourceService.queryPost($scope, $filter('getUrl')('getPhone'), {
                    mobilephone: $scope.login.mobilephone
                }, { name: '注册验证手机号', tegForm: tegForm });
            };
            changeIMG();
        };
        $scope.toback = function () {
            $filter('跳回上一页')();
        };
        $scope.$on('resourceService.QUERY_POST_MYEVENT', function (event, data, type) {
            switch (type.name) {
                case '获取验证码':
                    if (data.success == true) {
                        $filter('60秒倒计时')($scope, 120);
                        $scope.isImgCode = false;
                        $rootScope.errorText = '验证码发送成功';
                        $rootScope.maskError = true;
                    } else if (data.errorCode == '1006') {
                        $rootScope.errorText = data.errorMsg;
                        $rootScope.maskError = true;
                    } else {
                        // $scope.stop();
                        $filter('手机短信验证错误')(type.tegForm, data.errorCode);
                    }
                    break;
                case '注册验证手机号':
                    if (data.success) {
                        if (data.map.exists) { //已有用户名
                            $rootScope.errorText = '此手机已注册';
                            $rootScope.maskError = true;
                            $scope.hasPhone = true;
                        } else {
                            $scope.hasPhone = false;
                        };
                    }
                    break;
                case '验证图形码':
                    if (data.success) {
                        if (data.map) { //图形码验证失败
                            $rootScope.errorText = '请输入正确的图形码';
                            $rootScope.maskError = true;
                        }
                        else if ($scope.isSubMin) {
                            resourceService.queryPost($scope, $filter('getUrl')('getyzm'), {
                                mobilephone: $scope.login.mobilephone,
                                picCode: $scope.login.picCode
                            }, { name: '获取验证码', tegForm: tegForm });
                            $filter('60秒倒计时')($scope, 120);
                        }
                    }
                    break;
                case '注册':
                    isSub = true;
                    if (data.success) {
                        $localStorage.user = data.map;
                        // _hmt.push(['_trackPageview', '/maidian/zccg']);
                        // _hmt.push(['_trackPageview', '/mian/myCoupon']);                        
                        $state.go('tyjRegSuccess2');
                    } else {
                        $filter('serverZuceError')(type.tegForm, data.errorCode);
                        $scope.login.passWord = '';
                    };
                    break;
                case '长城宽带':
                    $state.go("cpDetail", { pid: data.map.pid });
                    break;
            };
        });
        var linkstr = "";
        if ($stateParams.toFrom) {
            linkstr = '&toFrom=' + $stateParams.toFrom;
        } else if ($scope.user && $scope.user.mobilephone) {
            linkstr = '&recommCode=' + $scope.user.mobilephone;
        }
        //微信邀请分享-邀请页面
        $filter('微信邀请分享-邀请')(linkstr)
        var browser = {
            versions: function () {
                var u = navigator.userAgent,
                    app = navigator.appVersion;
                return { //移动终端浏览器版本信息
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                    iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function isWeiXin() {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
        $scope.downloadclick = function () {
            if (isWeiXin()) {
                if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                    $('.share-ios').fadeIn(200);
                } else {
                    // $('.share-android').fadeIn(200);
                    window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
                }
            } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) {
                window.location.href = "https://itunes.apple.com/cn/app/%E5%95%84%E7%B1%B3%E7%90%86%E8%B4%A2/id1294612994?mt=8";
            } else if (browser.versions.android) {
                window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.hyjr.hy_app";
            } else {
                window.location.href = "http://www.hongyajinrong.com/upload/apk/hy_app.apk";
            }
        };
        $scope.closethis = function () {
            $('.share-ios,.share-android').fadeOut(200);
        };
    }
    ])
})
;
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:29:04
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-12 21:49:52
 */

define('conttrollers/ddycCtrl',[
    'jweixin', 'webappControllers', 'jquery', 'ngdialog', 'SHR256'
    // ,'weixin'
], function (wx, controllers, $, ngdialog, SHR256, weixin) {
    controllers.controller('ddycCtrl', ['$scope', '$rootScope', 'resourceService', '$filter', '$state', 'ngDialog', '$location', 'md5', '$localStorage', '$stateParams', 'signWeChatService', function ($scope, $rootScope, resourceService, $filter, $state, ngDialog, $location, md5, $localStorage, $stateParams, signWeChatService) {
     
      }])
})
;
define('conttrollers/hyzxCtrl',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state", '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('hyzxCtrl', function ($scope, $filter,$rootScope,$state,$stateParams, resourceService, isWeixin) {
        $rootScope.title = "汇元资讯";
        $scope.title = "汇元资讯";
        $scope.active = 0;
        $scope.onClick = function(num){
            $scope.active = num;
        }
    })
});
define('conttrollers/lcktCtrl',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state", '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('lcktCtrl', function ($scope, $filter,$rootScope,$state,$stateParams, resourceService, isWeixin) {
        $rootScope.title = "理财课堂";
        $scope.title = "理财课堂";
        $scope.active = 0;
        $scope.onClick = function(num){
            $scope.active = num;
            console.log($scope.active);
        }
    })
});
define('conttrollers/xxplCtrl',['webappControllers', 'jweixin', ['$scope', '$filter', '$rootScope',"$state", '$stateParams', 'resourceService']], function (controllers, jweixin) {
    controllers.controller('xxplCtrl', function ($scope, $filter,$rootScope,$state,$stateParams, resourceService, isWeixin) {
        $rootScope.title = "信息披露";
        $scope.title = "信息披露";
        $scope.active = 0;

        $scope.onClick = function(num){
            $scope.active = num;
        }
    })
});
/* 
 * @Author: lee
 * @Date:   2016-01-10 23:28:00
 * @Last Modified by:   anchen
 * @Last Modified time: 2016-01-13 10:57:44
 */


define('conttrollers/mianController',[
	'conttrollers/controllerHome',
	'conttrollers/controllerSign',
	'conttrollers/controllerRegister',
	'conttrollers/controllerH5Register',
	'conttrollers/myaccountCtrl',
	'conttrollers/indexCtrl',
	'conttrollers/controllerNewhand',
	'conttrollers/controllerCpList',
	'conttrollers/shiMingRenZhengConttroller',
	'conttrollers/moreCtrl',

	'conttrollers/getCashCtrl',
	'conttrollers/minxiController',

	'conttrollers/investmentCtrl',
	'conttrollers/hbopenCtrl',
	'conttrollers/payPWFromController',
	'conttrollers/couponCtrl',
	'conttrollers/myCouponCtrl',
	'conttrollers/rechargeCtrl',
	'conttrollers/myassetsCtrl',
	'conttrollers/myInvestCtrl',
	'conttrollers/myInvestDetailCtrl',
	'conttrollers/myInvitationCtrl',
	'conttrollers/myInfoCtrl',
	'conttrollers/myBankCtrl',
	'conttrollers/myMessageCtrl',
	'conttrollers/znMessageCtrl',
	'conttrollers/tradepwdCtrl',
	'conttrollers/pwdCtrl',
	'conttrollers/app/CP080Ctrl',
	'conttrollers/spiderCtrl',
	'conttrollers/inviteCtrl',
	'conttrollers/activity/cp124Ctrl',
	'conttrollers/sendmaskCtrl',
	'conttrollers/auntCtrl',
	'conttrollers/aqbzCtrl',
	'conttrollers/newcomerCtrl',
	'conttrollers/NewRegisterController',
	'conttrollers/flwhzCtrl',
	'conttrollers/mycashedCtrl',
	'conttrollers/specialCtrl',
	'conttrollers/myActivityCtrl',
	'conttrollers/activityPersonCtrl',
	'conttrollers/activity/hlsbt',
	'conttrollers/activity/inviteFriend1',
	'conttrollers/activity/inviteFriend2',
	'conttrollers/activity/inviteFriend3',
	'conttrollers/activity/inviteFriend4',
	'conttrollers/activity/inviteFriend5',
	'conttrollers/activity/inviteFriend6',
	'conttrollers/activity/inviteFriendTri',
	'conttrollers/myMissionCtrl',
	// 新年活动
	'conttrollers/activity/newyearController',
	// 新年活动一
	'conttrollers/activity/newyearact1Controller',
	// 新年活动分享页
	'conttrollers/activity/newyearshareController',
	// 活动聚合页
	'conttrollers/actListController',
	'conttrollers/activity/friendReg',
	'conttrollers/appdownload',
	'conttrollers/app2download',
	'conttrollers/activity/yuebiao',
	'conttrollers/investSuccess',
	'conttrollers/continuedInvest',
	// 双蛋活动
	'conttrollers/shuangdanController',
	'conttrollers/shuangdanshareController',
	// 投即送活动
	'conttrollers/tjsController',
	'conttrollers/mytjsController',
	'conttrollers/tjswishController',
	'conttrollers/tjsaddressController',
	'conttrollers/tjsdetailController',
	'conttrollers/giftyyController',
	'conttrollers/prizedetailController',
	// 长城宽带
	'conttrollers/changcheng2Controller',
	// 体验金
	'conttrollers/tyjController',
	// 'conttrollers/tyjRegSuccessController',
	'conttrollers/newAccountSuccess',
	'conttrollers/myTyjController',
	'conttrollers/tyjdetailController',
	'conttrollers/tyjSuccessController',
	// 发布会专题页
	// 'conttrollers/conferenceController',
	// 媒体报道
	'conttrollers/reportController',
	// 元宵活动
	'conttrollers/activity/yuanxiaoController',
	// 新手标推广页
	// 'conttrollers/activity/newhandregController',
	// iPhone7推广页
	'conttrollers/activity/iPhoneadController',
	// 企业形象推广页
	'conttrollers/activity/promoteController',
	// 新体验金推广页
	'conttrollers/activity/newtyjController',
	// 垂直管理推广页
	// 'conttrollers/activity/czgladController',
	// 投即送推广页
	'conttrollers/activity/tjsadController',
	// 小米推广页
	'conttrollers/activity/xiaomiadController',
	// 开放日报名页
	'conttrollers/kfrEnrolController',
	// 邀请好友分享注册页
	'conttrollers/friendregController',
	// 优惠券温馨提示
	'conttrollers/reminderController',
	// iPhone活动页
	'conttrollers/activity/iPhoneController',
	// app2翻牌
	'conttrollers/activity/app2lotteryController',

	'conttrollers/activity/iphonelistCtrl',
	'conttrollers/activity/fanliCtrl',
	'conttrollers/activity/opendayController',
	'conttrollers/activity/publicWelfareController',
	'conttrollers/activity/newtyj2Controller',
	// 518理财节
	'conttrollers/activity/festival518Controller',
	// 企融计划列表页
	'conttrollers/normalcplistController',
	// 募集企融计划列表页
	'conttrollers/pastcplistController',
	// 活动标列表页
	'conttrollers/activitycplistController',
	'conttrollers/aqbzDetailCtrl',

	'conttrollers/hongyadownloadCtrl',
	'conttrollers/hongyaregCtrl',
	'conttrollers/hyInviteRegCtrl',
	'conttrollers/hongyainviteCtrl',
	'conttrollers/hongyaTouziyueCtrl',
	'conttrollers/hongyaJiaxiCtrl',
	'conttrollers/hongyaRunyueCtrl',
	'conttrollers/hongyaHongbaoyuCtrl',
	'conttrollers/hongyaAugustCtrl',
	'conttrollers/hongyaQixiCtrl',
	'conttrollers/hongyaFanACtrl',


	// 'conttrollers/hongyaOilregCtrl',	
	'conttrollers/hongyaChannelregCtrl',
	'conttrollers/hongyaXmydCtrl',
	'conttrollers/hongyaJrttCtrl',
	'conttrollers/inviteCenterController',
	//啄米活动
	'conttrollers/zmActive/zmInviteController',
	'conttrollers/zmChannel/chedao',
	'conttrollers/zmChannel/zmChannelregCtrl',
	//汇元 邀请好友
	'conttrollers/inviteFri',
	'conttrollers/inviteFriApp',
	//双十二活动
	'conttrollers/shuangCtrl',
	//圣诞活动
	'conttrollers/ChristmasCtrl',
	//元旦活动
	'conttrollers/yuandanCtrl',
    //云锐开发
	'conttrollers/yunruiCtrl',
	//360导航
	'conttrollers/nav360Ctrl',
	//典典养车
	'conttrollers/ddycCtrl',
	//汇元资讯
	'conttrollers/hyzxCtrl',
	//理财课堂
	'conttrollers/lcktCtrl',
	//信息披露
	'conttrollers/xxplCtrl',
	//信息披露
], function () {
});



/* ng-infinite-scroll - v1.2.1 - 2016-02-09 */
/*
  angular-md5 - v0.1.8 
  2015-11-17
*/
define('ngInfiniteScroll',["angular"],function(angular){
    var mod;

mod = angular.module('infinite-scroll', []);

mod.value('THROTTLE_MILLISECONDS', null);

mod.directive('infiniteScroll', [
  '$rootScope', '$window', '$interval', 'THROTTLE_MILLISECONDS', function($rootScope, $window, $interval, THROTTLE_MILLISECONDS) {
    return {
      scope: {
        infiniteScroll: '&',
        infiniteScrollContainer: '=',
        infiniteScrollDistance: '=',
        infiniteScrollDisabled: '=',
        infiniteScrollUseDocumentBottom: '=',
        infiniteScrollListenForEvent: '@'
      },
      link: function(scope, elem, attrs) {
        var changeContainer, checkInterval, checkWhenEnabled, container, handleInfiniteScrollContainer, handleInfiniteScrollDisabled, handleInfiniteScrollDistance, handleInfiniteScrollUseDocumentBottom, handler, height, immediateCheck, offsetTop, pageYOffset, scrollDistance, scrollEnabled, throttle, unregisterEventListener, useDocumentBottom, windowElement;
        windowElement = angular.element($window);
        scrollDistance = null;
        scrollEnabled = null;
        checkWhenEnabled = null;
        container = null;
        immediateCheck = true;
        useDocumentBottom = false;
        unregisterEventListener = null;
        checkInterval = false;
        height = function(elem) {
          elem = elem[0] || elem;
          if (isNaN(elem.offsetHeight)) {
            return elem.document.documentElement.clientHeight;
          } else {
            return elem.offsetHeight;
          }
        };
        offsetTop = function(elem) {
          if (!elem[0].getBoundingClientRect || elem.css('none')) {
            return;
          }
          return elem[0].getBoundingClientRect().top + pageYOffset(elem);
        };
        pageYOffset = function(elem) {
          elem = elem[0] || elem;
          if (isNaN(window.pageYOffset)) {
            return elem.document.documentElement.scrollTop;
          } else {
            return elem.ownerDocument.defaultView.pageYOffset;
          }
        };
        handler = function() {
          var containerBottom, containerTopOffset, elementBottom, remaining, shouldScroll;
          if (container === windowElement) {
            containerBottom = height(container) + pageYOffset(container[0].document.documentElement);
            elementBottom = offsetTop(elem) + height(elem);
          } else {
            containerBottom = height(container);
            containerTopOffset = 0;
            if (offsetTop(container) !== void 0) {
              containerTopOffset = offsetTop(container);
            }
            elementBottom = offsetTop(elem) - containerTopOffset + height(elem);
          }
          if (useDocumentBottom) {
            elementBottom = height((elem[0].ownerDocument || elem[0].document).documentElement);
          }
          remaining = elementBottom - containerBottom;
          shouldScroll = remaining <= height(container) * scrollDistance + 1;
          if (shouldScroll) {
            checkWhenEnabled = true;
            if (scrollEnabled) {
              if (scope.$$phase || $rootScope.$$phase) {
                return scope.infiniteScroll();
              } else {
                return scope.$apply(scope.infiniteScroll);
              }
            }
          } else {
            if (checkInterval) {
              $interval.cancel(checkInterval);
            }
            return checkWhenEnabled = false;
          }
        };
        throttle = function(func, wait) {
          var later, previous, timeout;
          timeout = null;
          previous = 0;
          later = function() {
            previous = new Date().getTime();
            $interval.cancel(timeout);
            timeout = null;
            return func.call();
          };
          return function() {
            var now, remaining;
            now = new Date().getTime();
            remaining = wait - (now - previous);
            if (remaining <= 0) {
              $interval.cancel(timeout);
              timeout = null;
              previous = now;
              return func.call();
            } else {
              if (!timeout) {
                return timeout = $interval(later, remaining, 1);
              }
            }
          };
        };
        if (THROTTLE_MILLISECONDS != null) {
          handler = throttle(handler, THROTTLE_MILLISECONDS);
        }
        scope.$on('$destroy', function() {
          container.unbind('scroll', handler);
          if (unregisterEventListener != null) {
            unregisterEventListener();
            return unregisterEventListener = null;
          }
        });
        handleInfiniteScrollDistance = function(v) {
          return scrollDistance = parseFloat(v) || 0;
        };
        scope.$watch('infiniteScrollDistance', handleInfiniteScrollDistance);
        handleInfiniteScrollDistance(scope.infiniteScrollDistance);
        handleInfiniteScrollDisabled = function(v) {
          scrollEnabled = !v;
          if (scrollEnabled && checkWhenEnabled) {
            checkWhenEnabled = false;
            return handler();
          }
        };
        scope.$watch('infiniteScrollDisabled', handleInfiniteScrollDisabled);
        handleInfiniteScrollDisabled(scope.infiniteScrollDisabled);
        handleInfiniteScrollUseDocumentBottom = function(v) {
          return useDocumentBottom = v;
        };
        scope.$watch('infiniteScrollUseDocumentBottom', handleInfiniteScrollUseDocumentBottom);
        handleInfiniteScrollUseDocumentBottom(scope.infiniteScrollUseDocumentBottom);
        changeContainer = function(newContainer) {
          if (container != null) {
            container.unbind('scroll', handler);
          }
          container = newContainer;
          if (newContainer != null) {
            return container.bind('scroll', handler);
          }
        };
        changeContainer(windowElement);
        if (scope.infiniteScrollListenForEvent) {
          unregisterEventListener = $rootScope.$on(scope.infiniteScrollListenForEvent, handler);
        }
        handleInfiniteScrollContainer = function(newContainer) {
          if ((newContainer == null) || newContainer.length === 0) {
            return;
          }
          if (newContainer.nodeType && newContainer.nodeType === 1) {
            newContainer = angular.element(newContainer);
          } else if (typeof newContainer.append === 'function') {
            newContainer = angular.element(newContainer[newContainer.length - 1]);
          } else if (typeof newContainer === 'string') {
            newContainer = angular.element(document.querySelector(newContainer));
          }
          if (newContainer != null) {
            return changeContainer(newContainer);
          } else {
            throw new Error("invalid infinite-scroll-container attribute.");
          }
        };
        scope.$watch('infiniteScrollContainer', handleInfiniteScrollContainer);
        handleInfiniteScrollContainer(scope.infiniteScrollContainer || []);
        if (attrs.infiniteScrollParent != null) {
          changeContainer(angular.element(elem.parent()));
        }
        if (attrs.infiniteScrollImmediateCheck != null) {
          immediateCheck = scope.$eval(attrs.infiniteScrollImmediateCheck);
        }
        return checkInterval = $interval((function() {
          if (immediateCheck) {
            handler();
          }
          return $interval.cancel(checkInterval);
        }));
      }
    };
  }
]);
    return mod;
// }]);
}) ;
/*
 * angular-qrcode v6.2.1
 * (c) 2013 Monospaced http://monospaced.com
 * License: MIT
 */

angular.module('monospaced.qrcode', [])
  .directive('qrcode', ['$window', function($window) {

    var canvas2D = !!$window.CanvasRenderingContext2D,
        levels = {
          'L': 'Low',
          'M': 'Medium',
          'Q': 'Quartile',
          'H': 'High'
        },
        draw = function(context, qr, modules, tile) {
          for (var row = 0; row < modules; row++) {
            for (var col = 0; col < modules; col++) {
              var w = (Math.ceil((col + 1) * tile) - Math.floor(col * tile)),
                  h = (Math.ceil((row + 1) * tile) - Math.floor(row * tile));

              context.fillStyle = qr.isDark(row, col) ? '#000' : '#fff';
              context.fillRect(Math.round(col * tile),
                               Math.round(row * tile), w, h);
            }
          }
        };

    return {
      restrict: 'E',
      template: '<canvas class="qrcode"></canvas>',
      link: function(scope, element, attrs) {
        var domElement = element[0],
            $canvas = element.find('canvas'),
            canvas = $canvas[0],
            context = canvas2D ? canvas.getContext('2d') : null,
            download = 'download' in attrs,
            href = attrs.href,
            link = download || href ? document.createElement('a') : '',
            trim = /^\s+|\s+$/g,
            error,
            version,
            errorCorrectionLevel,
            data,
            size,
            modules,
            tile,
            qr,
            $img,
            setVersion = function(value) {
              version = Math.max(1, Math.min(parseInt(value, 10), 40)) || 5;
            },
            setErrorCorrectionLevel = function(value) {
              errorCorrectionLevel = value in levels ? value : 'M';
            },
            setData = function(value) {
              if (!value) {
                return;
              }

              data = value.replace(trim, '');
              qr = qrcode(version, errorCorrectionLevel);
              qr.addData(data);

              try {
                qr.make();
              } catch(e) {
                error = e.message;
                return;
              }

              error = false;
              modules = qr.getModuleCount();
            },
            setSize = function(value) {
              size = parseInt(value, 10) || modules * 2;
              tile = size / modules;
              canvas.width = canvas.height = size;
            },
            render = function() {
              if (!qr) {
                return;
              }

              if (error) {
                if (link) {
                  link.removeAttribute('download');
                  link.title = '';
                  link.href = '#_';
                }
                if (!canvas2D) {
                  domElement.innerHTML = '<img src width="' + size + '"' +
                                         'height="' + size + '"' +
                                         'class="qrcode">';
                }
                scope.$emit('qrcode:error', error);
                return;
              }

              if (download) {
                domElement.download = 'qrcode.png';
                domElement.title = 'Download QR code';
              }

              if (canvas2D) {
                draw(context, qr, modules, tile);

                if (download) {
                  domElement.href = canvas.toDataURL('image/png');
                  return;
                }
              } else {
                domElement.innerHTML = qr.createImgTag(tile, 0);
                $img = element.find('img');
                $img.addClass('qrcode');

                if (download) {
                  domElement.href = $img[0].src;
                  return;
                }
              }

              if (href) {
                domElement.href = href;
              }
            };

        if (link) {
          link.className = 'qrcode-link';
          $canvas.wrap(link);
          domElement = domElement.firstChild;
        }

        setVersion(attrs.version);
        setErrorCorrectionLevel(attrs.errorCorrectionLevel);
        setSize(attrs.size);

        attrs.$observe('version', function(value) {
          if (!value) {
            return;
          }

          setVersion(value);
          setData(data);
          setSize(size);
          render();
        });

        attrs.$observe('errorCorrectionLevel', function(value) {
          if (!value) {
            return;
          }

          setErrorCorrectionLevel(value);
          setData(data);
          setSize(size);
          render();
        });

        attrs.$observe('data', function(value) {
          if (!value) {
            return;
          }

          setData(value);
          setSize(size);
          render();
        });

        attrs.$observe('size', function(value) {
          if (!value) {
            return;
          }

          setSize(value);
          render();
        });

        attrs.$observe('href', function(value) {
          if (!value) {
            return;
          }

          href = value;
          render();
        });
      }
    };
  }]);

define("angularQrcode", ["angular"], function(){});

define('app',["angular",
  'conttrollers/mianController'
  , 'ngInfiniteScroll'
  , 'angularQrcode'
], function (angular) {
  return angular.module("webapp", ['ui.router', 'ngStorage', 'webappControllers', 'ngResource', 'ngDialog', 'angular-md5', 'infinite-scroll', 'monospaced.qrcode', 'widget.scrollbar']);
});
define('ngScrollTop',["angular","app","jquery"
       ],function(angular){
    return angular.module("webapp").directive('ngScrolltop',['$timeout','$interval',function($timeout,$interval){
	return {
		restrict: "A",
		scope:{
			ngScrolltopSpeed:"@"
		},
		link:function(scope,element,attr){
			
			if(!scope.ngScrolltopSpeed){scope.ngScrolltopSpeed=60;}
			var timer;
			$timeout(function(){
				 timer= $interval(function(){
				 	var elm=$(element[0]);
				 	var top=parseInt(elm.css('margin-top'));
				 	if(top>-parseInt(elm.height())+parseInt(elm.parent().height())-parseInt(elm.css("padding-top"))-parseInt(elm.css("padding-bottom"))){
						elm.css({"margin-top":top-1});
				 	}else{
				 		elm.css({"margin-top":0});
				 	}
				},scope.ngScrolltopSpeed);
			})
			scope.$on("$destroy", function() {
                if (timer) {
                    $interval.cancel(timer);
                }
            });
		}
	}
}]);
});
define('ngDraw',["angular","app","jquery"
       ],function(angular){
    return angular.module("webapp").directive('ngDraw',['$compile','$timeout',function($compile,$timeout){
	return {
		restrict: "A",
		scope:{
			drawdata:"=",
			drawvalue:"="
		},
		link:function(scope,element,attr){
			var str='';
			if(scope.drawdata){
				if(scope.drawdata.indexOf(scope.drawvalue)!=-1){
					str=scope.drawdata.replace(scope.drawvalue,'<font color="red">'+scope.drawvalue+'</font>');
				}else{
					str=scope.drawdata;
				}
				element.html(str);
				$compile(element)(scope);
			}
		}
	}
}]);
});
define('ngTouch',["angular","app","jquery"
       ],function(angular){
    return angular.module("webapp")
    .directive("ngTouchstart", ['$parse', function($parse, $rootScope) {
        return {
            restrict: "A",
            compile: function($element, attr) {
                var fn = $parse(attr.ngTouchstart, null, true);
                return function ngEventHandler(scope, element) {
                    element[0].addEventListener('touchstart', function(event) {
                        var callback = function() {
                            fn(scope, { $event: event });
                        };
                        scope.$apply(callback);
                    });
                };
            }
        }
    }])
    .directive("ngTouchmove",['$parse', function($parse, $rootScope) {
        return {
            restrict: "A",
            compile: function($element, attr) {
                var fn = $parse(attr.ngTouchmove, null, true);
                return function ngEventHandler(scope, element) {
                    element[0].addEventListener('touchmove', function(event) {
                        var callback = function() {
                            fn(scope, { $event: event });
                        };
                        scope.$apply(callback);
                    });
                };
            }
        }
    }])
    .directive("ngTouchend",['$parse', function($parse, $rootScope) {
        return {
            restrict: "A",
            compile: function($element, attr) {
                var fn = $parse(attr.ngTouchend, null, true);
                return function ngEventHandler(scope, element) {
                    element[0].addEventListener('touchend', function(event) {
                        var callback = function() {
                            fn(scope, { $event: event });
                        };
                        scope.$apply(callback);
                    });
                };
            }
        }
    }])
    .directive("ngTouchcancel",['$parse', function($parse, $rootScope) {
        return {
            restrict: "A",
            compile: function($element, attr) {
                var fn = $parse(attr.ngTouchcancel, null, true);
                return function ngEventHandler(scope, element) {
                    element[0].addEventListener('touchcancel', function(event) {
                        var callback = function() {
                            fn(scope, { $event: event });
                        };
                        scope.$apply(callback);
                    });
                };
            }
        }
    }])
})
;
/**
 * State-based routing for AngularJS
 * @version v0.2.10
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

/* commonjs package manager support (eg componentjs) */
if (typeof module !== "undefined" && typeof exports !== "undefined" && module.exports === exports){
  module.exports = 'ui.router';
}

(function (window, angular, undefined) {
/*jshint globalstrict:true*/
/*global angular:false*/


var isDefined = angular.isDefined,
    isFunction = angular.isFunction,
    isString = angular.isString,
    isObject = angular.isObject,
    isArray = angular.isArray,
    forEach = angular.forEach,
    extend = angular.extend,
    copy = angular.copy;

function inherit(parent, extra) {
  return extend(new (extend(function() {}, { prototype: parent }))(), extra);
}

function merge(dst) {
  forEach(arguments, function(obj) {
    if (obj !== dst) {
      forEach(obj, function(value, key) {
        if (!dst.hasOwnProperty(key)) dst[key] = value;
      });
    }
  });
  return dst;
}

/**
 * Finds the common ancestor path between two states.
 *
 * @param {Object} first The first state.
 * @param {Object} second The second state.
 * @return {Array} Returns an array of state names in descending order, not including the root.
 */
function ancestors(first, second) {
  var path = [];

  for (var n in first.path) {
    if (first.path[n] !== second.path[n]) break;
    path.push(first.path[n]);
  }
  return path;
}

/**
 * IE8-safe wrapper for `Object.keys()`.
 *
 * @param {Object} object A JavaScript object.
 * @return {Array} Returns the keys of the object as an array.
 */
function keys(object) {
  if (Object.keys) {
    return Object.keys(object);
  }
  var result = [];

  angular.forEach(object, function(val, key) {
    result.push(key);
  });
  return result;
}

/**
 * IE8-safe wrapper for `Array.prototype.indexOf()`.
 *
 * @param {Array} array A JavaScript array.
 * @param {*} value A value to search the array for.
 * @return {Number} Returns the array index value of `value`, or `-1` if not present.
 */
function arraySearch(array, value) {
  if (Array.prototype.indexOf) {
    return array.indexOf(value, Number(arguments[2]) || 0);
  }
  var len = array.length >>> 0, from = Number(arguments[2]) || 0;
  from = (from < 0) ? Math.ceil(from) : Math.floor(from);

  if (from < 0) from += len;

  for (; from < len; from++) {
    if (from in array && array[from] === value) return from;
  }
  return -1;
}

/**
 * Merges a set of parameters with all parameters inherited between the common parents of the
 * current state and a given destination state.
 *
 * @param {Object} currentParams The value of the current state parameters ($stateParams).
 * @param {Object} newParams The set of parameters which will be composited with inherited params.
 * @param {Object} $current Internal definition of object representing the current state.
 * @param {Object} $to Internal definition of object representing state to transition to.
 */
function inheritParams(currentParams, newParams, $current, $to) {
  var parents = ancestors($current, $to), parentParams, inherited = {}, inheritList = [];

  for (var i in parents) {
    if (!parents[i].params || !parents[i].params.length) continue;
    parentParams = parents[i].params;

    for (var j in parentParams) {
      if (arraySearch(inheritList, parentParams[j]) >= 0) continue;
      inheritList.push(parentParams[j]);
      inherited[parentParams[j]] = currentParams[parentParams[j]];
    }
  }
  return extend({}, inherited, newParams);
}

/**
 * Normalizes a set of values to string or `null`, filtering them by a list of keys.
 *
 * @param {Array} keys The list of keys to normalize/return.
 * @param {Object} values An object hash of values to normalize.
 * @return {Object} Returns an object hash of normalized string values.
 */
function normalize(keys, values) {
  var normalized = {};

  forEach(keys, function (name) {
    var value = values[name];
    normalized[name] = (value != null) ? String(value) : null;
  });
  return normalized;
}

/**
 * Performs a non-strict comparison of the subset of two objects, defined by a list of keys.
 *
 * @param {Object} a The first object.
 * @param {Object} b The second object.
 * @param {Array} keys The list of keys within each object to compare. If the list is empty or not specified,
 *                     it defaults to the list of keys in `a`.
 * @return {Boolean} Returns `true` if the keys match, otherwise `false`.
 */
function equalForKeys(a, b, keys) {
  if (!keys) {
    keys = [];
    for (var n in a) keys.push(n); // Used instead of Object.keys() for IE8 compatibility
  }

  for (var i=0; i<keys.length; i++) {
    var k = keys[i];
    if (a[k] != b[k]) return false; // Not '===', values aren't necessarily normalized
  }
  return true;
}

/**
 * Returns the subset of an object, based on a list of keys.
 *
 * @param {Array} keys
 * @param {Object} values
 * @return {Boolean} Returns a subset of `values`.
 */
function filterByKeys(keys, values) {
  var filtered = {};

  forEach(keys, function (name) {
    filtered[name] = values[name];
  });
  return filtered;
}
/**
 * @ngdoc overview
 * @name ui.router.util
 *
 * @description
 * # ui.router.util sub-module
 *
 * This module is a dependency of other sub-modules. Do not include this module as a dependency
 * in your angular app (use {@link ui.router} module instead).
 *
 */
angular.module('ui.router.util', ['ng']);

/**
 * @ngdoc overview
 * @name ui.router.router
 * 
 * @requires ui.router.util
 *
 * @description
 * # ui.router.router sub-module
 *
 * This module is a dependency of other sub-modules. Do not include this module as a dependency
 * in your angular app (use {@link ui.router} module instead).
 */
angular.module('ui.router.router', ['ui.router.util']);

/**
 * @ngdoc overview
 * @name ui.router.state
 * 
 * @requires ui.router.router
 * @requires ui.router.util
 *
 * @description
 * # ui.router.state sub-module
 *
 * This module is a dependency of the main ui.router module. Do not include this module as a dependency
 * in your angular app (use {@link ui.router} module instead).
 * 
 */
angular.module('ui.router.state', ['ui.router.router', 'ui.router.util']);

/**
 * @ngdoc overview
 * @name ui.router
 *
 * @requires ui.router.state
 *
 * @description
 * # ui.router
 * 
 * ## The main module for ui.router 
 * There are several sub-modules included with the ui.router module, however only this module is needed
 * as a dependency within your angular app. The other modules are for organization purposes. 
 *
 * The modules are:
 * * ui.router - the main "umbrella" module
 * * ui.router.router - 
 * 
 * *You'll need to include **only** this module as the dependency within your angular app.*
 * 
 * <pre>
 * <!doctype html>
 * <html ng-app="myApp">
 * <head>
 *   <script src="js/angular.js"></script>
 *   <!-- Include the ui-router script -->
 *   <script src="js/angular-ui-router.min.js"></script>
 *   <script>
 *     // ...and add 'ui.router' as a dependency
 *     var myApp = angular.module('myApp', ['ui.router']);
 *   </script>
 * </head>
 * <body>
 * </body>
 * </html>
 * </pre>
 */
angular.module('ui.router', ['ui.router.state']);

angular.module('ui.router.compat', ['ui.router']);

/**
 * @ngdoc object
 * @name ui.router.util.$resolve
 *
 * @requires $q
 * @requires $injector
 *
 * @description
 * Manages resolution of (acyclic) graphs of promises.
 */
$Resolve.$inject = ['$q', '$injector'];
function $Resolve(  $q,    $injector) {
  
  var VISIT_IN_PROGRESS = 1,
      VISIT_DONE = 2,
      NOTHING = {},
      NO_DEPENDENCIES = [],
      NO_LOCALS = NOTHING,
      NO_PARENT = extend($q.when(NOTHING), { $$promises: NOTHING, $$values: NOTHING });
  

  /**
   * @ngdoc function
   * @name ui.router.util.$resolve#study
   * @methodOf ui.router.util.$resolve
   *
   * @description
   * Studies a set of invocables that are likely to be used multiple times.
   * <pre>
   * $resolve.study(invocables)(locals, parent, self)
   * </pre>
   * is equivalent to
   * <pre>
   * $resolve.resolve(invocables, locals, parent, self)
   * </pre>
   * but the former is more efficient (in fact `resolve` just calls `study` 
   * internally).
   *
   * @param {object} invocables Invocable objects
   * @return {function} a function to pass in locals, parent and self
   */
  this.study = function (invocables) {
    if (!isObject(invocables)) throw new Error("'invocables' must be an object");
    
    // Perform a topological sort of invocables to build an ordered plan
    var plan = [], cycle = [], visited = {};
    function visit(value, key) {
      if (visited[key] === VISIT_DONE) return;
      
      cycle.push(key);
      if (visited[key] === VISIT_IN_PROGRESS) {
        cycle.splice(0, cycle.indexOf(key));
        throw new Error("Cyclic dependency: " + cycle.join(" -> "));
      }
      visited[key] = VISIT_IN_PROGRESS;
      
      if (isString(value)) {
        plan.push(key, [ function() { return $injector.get(value); }], NO_DEPENDENCIES);
      } else {
        var params = $injector.annotate(value);
        forEach(params, function (param) {
          if (param !== key && invocables.hasOwnProperty(param)) visit(invocables[param], param);
        });
        plan.push(key, value, params);
      }
      
      cycle.pop();
      visited[key] = VISIT_DONE;
    }
    forEach(invocables, visit);
    invocables = cycle = visited = null; // plan is all that's required
    
    function isResolve(value) {
      return isObject(value) && value.then && value.$$promises;
    }
    
    return function (locals, parent, self) {
      if (isResolve(locals) && self === undefined) {
        self = parent; parent = locals; locals = null;
      }
      if (!locals) locals = NO_LOCALS;
      else if (!isObject(locals)) {
        throw new Error("'locals' must be an object");
      }       
      if (!parent) parent = NO_PARENT;
      else if (!isResolve(parent)) {
        throw new Error("'parent' must be a promise returned by $resolve.resolve()");
      }
      
      // To complete the overall resolution, we have to wait for the parent
      // promise and for the promise for each invokable in our plan.
      var resolution = $q.defer(),
          result = resolution.promise,
          promises = result.$$promises = {},
          values = extend({}, locals),
          wait = 1 + plan.length/3,
          merged = false;
          
      function done() {
        // Merge parent values we haven't got yet and publish our own $$values
        if (!--wait) {
          if (!merged) merge(values, parent.$$values); 
          result.$$values = values;
          result.$$promises = true; // keep for isResolve()
          resolution.resolve(values);
        }
      }
      
      function fail(reason) {
        result.$$failure = reason;
        resolution.reject(reason);
      }
      
      // Short-circuit if parent has already failed
      if (isDefined(parent.$$failure)) {
        fail(parent.$$failure);
        return result;
      }
      
      // Merge parent values if the parent has already resolved, or merge
      // parent promises and wait if the parent resolve is still in progress.
      if (parent.$$values) {
        merged = merge(values, parent.$$values);
        done();
      } else {
        extend(promises, parent.$$promises);
        parent.then(done, fail);
      }
      
      // Process each invocable in the plan, but ignore any where a local of the same name exists.
      for (var i=0, ii=plan.length; i<ii; i+=3) {
        if (locals.hasOwnProperty(plan[i])) done();
        else invoke(plan[i], plan[i+1], plan[i+2]);
      }
      
      function invoke(key, invocable, params) {
        // Create a deferred for this invocation. Failures will propagate to the resolution as well.
        var invocation = $q.defer(), waitParams = 0;
        function onfailure(reason) {
          invocation.reject(reason);
          fail(reason);
        }
        // Wait for any parameter that we have a promise for (either from parent or from this
        // resolve; in that case study() will have made sure it's ordered before us in the plan).
        forEach(params, function (dep) {
          if (promises.hasOwnProperty(dep) && !locals.hasOwnProperty(dep)) {
            waitParams++;
            promises[dep].then(function (result) {
              values[dep] = result;
              if (!(--waitParams)) proceed();
            }, onfailure);
          }
        });
        if (!waitParams) proceed();
        function proceed() {
          if (isDefined(result.$$failure)) return;
          try {
            invocation.resolve($injector.invoke(invocable, self, values));
            invocation.promise.then(function (result) {
              values[key] = result;
              done();
            }, onfailure);
          } catch (e) {
            onfailure(e);
          }
        }
        // Publish promise synchronously; invocations further down in the plan may depend on it.
        promises[key] = invocation.promise;
      }
      
      return result;
    };
  };
  
  /**
   * @ngdoc function
   * @name ui.router.util.$resolve#resolve
   * @methodOf ui.router.util.$resolve
   *
   * @description
   * Resolves a set of invocables. An invocable is a function to be invoked via 
   * `$injector.invoke()`, and can have an arbitrary number of dependencies. 
   * An invocable can either return a value directly,
   * or a `$q` promise. If a promise is returned it will be resolved and the 
   * resulting value will be used instead. Dependencies of invocables are resolved 
   * (in this order of precedence)
   *
   * - from the specified `locals`
   * - from another invocable that is part of this `$resolve` call
   * - from an invocable that is inherited from a `parent` call to `$resolve` 
   *   (or recursively
   * - from any ancestor `$resolve` of that parent).
   *
   * The return value of `$resolve` is a promise for an object that contains 
   * (in this order of precedence)
   *
   * - any `locals` (if specified)
   * - the resolved return values of all injectables
   * - any values inherited from a `parent` call to `$resolve` (if specified)
   *
   * The promise will resolve after the `parent` promise (if any) and all promises 
   * returned by injectables have been resolved. If any invocable 
   * (or `$injector.invoke`) throws an exception, or if a promise returned by an 
   * invocable is rejected, the `$resolve` promise is immediately rejected with the 
   * same error. A rejection of a `parent` promise (if specified) will likewise be 
   * propagated immediately. Once the `$resolve` promise has been rejected, no 
   * further invocables will be called.
   * 
   * Cyclic dependencies between invocables are not permitted and will caues `$resolve`
   * to throw an error. As a special case, an injectable can depend on a parameter 
   * with the same name as the injectable, which will be fulfilled from the `parent` 
   * injectable of the same name. This allows inherited values to be decorated. 
   * Note that in this case any other injectable in the same `$resolve` with the same
   * dependency would see the decorated value, not the inherited value.
   *
   * Note that missing dependencies -- unlike cyclic dependencies -- will cause an 
   * (asynchronous) rejection of the `$resolve` promise rather than a (synchronous) 
   * exception.
   *
   * Invocables are invoked eagerly as soon as all dependencies are available. 
   * This is true even for dependencies inherited from a `parent` call to `$resolve`.
   *
   * As a special case, an invocable can be a string, in which case it is taken to 
   * be a service name to be passed to `$injector.get()`. This is supported primarily 
   * for backwards-compatibility with the `resolve` property of `$routeProvider` 
   * routes.
   *
   * @param {object} invocables functions to invoke or 
   * `$injector` services to fetch.
   * @param {object} locals  values to make available to the injectables
   * @param {object} parent  a promise returned by another call to `$resolve`.
   * @param {object} self  the `this` for the invoked methods
   * @return {object} Promise for an object that contains the resolved return value
   * of all invocables, as well as any inherited and local values.
   */
  this.resolve = function (invocables, locals, parent, self) {
    return this.study(invocables)(locals, parent, self);
  };
}

angular.module('ui.router.util').service('$resolve', $Resolve);


/**
 * @ngdoc object
 * @name ui.router.util.$templateFactory
 *
 * @requires $http
 * @requires $templateCache
 * @requires $injector
 *
 * @description
 * Service. Manages loading of templates.
 */
$TemplateFactory.$inject = ['$http', '$templateCache', '$injector'];
function $TemplateFactory(  $http,   $templateCache,   $injector) {

  /**
   * @ngdoc function
   * @name ui.router.util.$templateFactory#fromConfig
   * @methodOf ui.router.util.$templateFactory
   *
   * @description
   * Creates a template from a configuration object. 
   *
   * @param {object} config Configuration object for which to load a template. 
   * The following properties are search in the specified order, and the first one 
   * that is defined is used to create the template:
   *
   * @param {string|object} config.template html string template or function to 
   * load via {@link ui.router.util.$templateFactory#fromString fromString}.
   * @param {string|object} config.templateUrl url to load or a function returning 
   * the url to load via {@link ui.router.util.$templateFactory#fromUrl fromUrl}.
   * @param {Function} config.templateProvider function to invoke via 
   * {@link ui.router.util.$templateFactory#fromProvider fromProvider}.
   * @param {object} params  Parameters to pass to the template function.
   * @param {object} locals Locals to pass to `invoke` if the template is loaded 
   * via a `templateProvider`. Defaults to `{ params: params }`.
   *
   * @return {string|object}  The template html as a string, or a promise for 
   * that string,or `null` if no template is configured.
   */
  this.fromConfig = function (config, params, locals) {
    return (
      isDefined(config.template) ? this.fromString(config.template, params) :
      isDefined(config.templateUrl) ? this.fromUrl(config.templateUrl, params) :
      isDefined(config.templateProvider) ? this.fromProvider(config.templateProvider, params, locals) :
      null
    );
  };

  /**
   * @ngdoc function
   * @name ui.router.util.$templateFactory#fromString
   * @methodOf ui.router.util.$templateFactory
   *
   * @description
   * Creates a template from a string or a function returning a string.
   *
   * @param {string|object} template html template as a string or function that 
   * returns an html template as a string.
   * @param {object} params Parameters to pass to the template function.
   *
   * @return {string|object} The template html as a string, or a promise for that 
   * string.
   */
  this.fromString = function (template, params) {
    return isFunction(template) ? template(params) : template;
  };

  /**
   * @ngdoc function
   * @name ui.router.util.$templateFactory#fromUrl
   * @methodOf ui.router.util.$templateFactory
   * 
   * @description
   * Loads a template from the a URL via `$http` and `$templateCache`.
   *
   * @param {string|Function} url url of the template to load, or a function 
   * that returns a url.
   * @param {Object} params Parameters to pass to the url function.
   * @return {string|Promise.<string>} The template html as a string, or a promise 
   * for that string.
   */
  this.fromUrl = function (url, params) {
    if (isFunction(url)) url = url(params);
    if (url == null) return null;
    else return $http
        .get(url, { cache: $templateCache })
        .then(function(response) { return response.data; });
  };

  /**
   * @ngdoc function
   * @name ui.router.util.$templateFactory#fromUrl
   * @methodOf ui.router.util.$templateFactory
   *
   * @description
   * Creates a template by invoking an injectable provider function.
   *
   * @param {Function} provider Function to invoke via `$injector.invoke`
   * @param {Object} params Parameters for the template.
   * @param {Object} locals Locals to pass to `invoke`. Defaults to 
   * `{ params: params }`.
   * @return {string|Promise.<string>} The template html as a string, or a promise 
   * for that string.
   */
  this.fromProvider = function (provider, params, locals) {
    return $injector.invoke(provider, null, locals || { params: params });
  };
}

angular.module('ui.router.util').service('$templateFactory', $TemplateFactory);

/**
 * @ngdoc object
 * @name ui.router.util.type:UrlMatcher
 *
 * @description
 * Matches URLs against patterns and extracts named parameters from the path or the search
 * part of the URL. A URL pattern consists of a path pattern, optionally followed by '?' and a list
 * of search parameters. Multiple search parameter names are separated by '&'. Search parameters
 * do not influence whether or not a URL is matched, but their values are passed through into
 * the matched parameters returned by {@link ui.router.util.type:UrlMatcher#methods_exec exec}.
 * 
 * Path parameter placeholders can be specified using simple colon/catch-all syntax or curly brace
 * syntax, which optionally allows a regular expression for the parameter to be specified:
 *
 * * `':'` name - colon placeholder
 * * `'*'` name - catch-all placeholder
 * * `'{' name '}'` - curly placeholder
 * * `'{' name ':' regexp '}'` - curly placeholder with regexp. Should the regexp itself contain
 *   curly braces, they must be in matched pairs or escaped with a backslash.
 *
 * Parameter names may contain only word characters (latin letters, digits, and underscore) and
 * must be unique within the pattern (across both path and search parameters). For colon 
 * placeholders or curly placeholders without an explicit regexp, a path parameter matches any
 * number of characters other than '/'. For catch-all placeholders the path parameter matches
 * any number of characters.
 * 
 * Examples:
 * 
 * * `'/hello/'` - Matches only if the path is exactly '/hello/'. There is no special treatment for
 *   trailing slashes, and patterns have to match the entire path, not just a prefix.
 * * `'/user/:id'` - Matches '/user/bob' or '/user/1234!!!' or even '/user/' but not '/user' or
 *   '/user/bob/details'. The second path segment will be captured as the parameter 'id'.
 * * `'/user/{id}'` - Same as the previous example, but using curly brace syntax.
 * * `'/user/{id:[^/]*}'` - Same as the previous example.
 * * `'/user/{id:[0-9a-fA-F]{1,8}}'` - Similar to the previous example, but only matches if the id
 *   parameter consists of 1 to 8 hex digits.
 * * `'/files/{path:.*}'` - Matches any URL starting with '/files/' and captures the rest of the
 *   path into the parameter 'path'.
 * * `'/files/*path'` - ditto.
 *
 * @param {string} pattern  the pattern to compile into a matcher.
 *
 * @property {string} prefix  A static prefix of this pattern. The matcher guarantees that any
 *   URL matching this matcher (i.e. any string for which {@link ui.router.util.type:UrlMatcher#methods_exec exec()} returns
 *   non-null) will start with this prefix.
 *
 * @property {string} source  The pattern that was passed into the contructor
 *
 * @property {string} sourcePath  The path portion of the source property
 *
 * @property {string} sourceSearch  The search portion of the source property
 *
 * @property {string} regex  The constructed regex that will be used to match against the url when 
 *   it is time to determine which url will match.
 *
 * @returns {Object}  New UrlMatcher object
 */
function UrlMatcher(pattern) {

  // Find all placeholders and create a compiled pattern, using either classic or curly syntax:
  //   '*' name
  //   ':' name
  //   '{' name '}'
  //   '{' name ':' regexp '}'
  // The regular expression is somewhat complicated due to the need to allow curly braces
  // inside the regular expression. The placeholder regexp breaks down as follows:
  //    ([:*])(\w+)               classic placeholder ($1 / $2)
  //    \{(\w+)(?:\:( ... ))?\}   curly brace placeholder ($3) with optional regexp ... ($4)
  //    (?: ... | ... | ... )+    the regexp consists of any number of atoms, an atom being either
  //    [^{}\\]+                  - anything other than curly braces or backslash
  //    \\.                       - a backslash escape
  //    \{(?:[^{}\\]+|\\.)*\}     - a matched set of curly braces containing other atoms
  var placeholder = /([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,
      names = {}, compiled = '^', last = 0, m,
      segments = this.segments = [],
      params = this.params = [];

  function addParameter(id) {
    if (!/^\w+(-+\w+)*$/.test(id)) throw new Error("Invalid parameter name '" + id + "' in pattern '" + pattern + "'");
    if (names[id]) throw new Error("Duplicate parameter name '" + id + "' in pattern '" + pattern + "'");
    names[id] = true;
    params.push(id);
  }

  function quoteRegExp(string) {
    return string.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");
  }

  this.source = pattern;

  // Split into static segments separated by path parameter placeholders.
  // The number of segments is always 1 more than the number of parameters.
  var id, regexp, segment;
  while ((m = placeholder.exec(pattern))) {
    id = m[2] || m[3]; // IE[78] returns '' for unmatched groups instead of null
    regexp = m[4] || (m[1] == '*' ? '.*' : '[^/]*');
    segment = pattern.substring(last, m.index);
    if (segment.indexOf('?') >= 0) break; // we're into the search part
    compiled += quoteRegExp(segment) + '(' + regexp + ')';
    addParameter(id);
    segments.push(segment);
    last = placeholder.lastIndex;
  }
  segment = pattern.substring(last);

  // Find any search parameter names and remove them from the last segment
  var i = segment.indexOf('?');
  if (i >= 0) {
    var search = this.sourceSearch = segment.substring(i);
    segment = segment.substring(0, i);
    this.sourcePath = pattern.substring(0, last+i);

    // Allow parameters to be separated by '?' as well as '&' to make concat() easier
    forEach(search.substring(1).split(/[&?]/), addParameter);
  } else {
    this.sourcePath = pattern;
    this.sourceSearch = '';
  }

  compiled += quoteRegExp(segment) + '$';
  segments.push(segment);
  this.regexp = new RegExp(compiled);
  this.prefix = segments[0];
}

/**
 * @ngdoc function
 * @name ui.router.util.type:UrlMatcher#concat
 * @methodOf ui.router.util.type:UrlMatcher
 *
 * @description
 * Returns a new matcher for a pattern constructed by appending the path part and adding the
 * search parameters of the specified pattern to this pattern. The current pattern is not
 * modified. This can be understood as creating a pattern for URLs that are relative to (or
 * suffixes of) the current pattern.
 *
 * @example
 * The following two matchers are equivalent:
 * ```
 * new UrlMatcher('/user/{id}?q').concat('/details?date');
 * new UrlMatcher('/user/{id}/details?q&date');
 * ```
 *
 * @param {string} pattern  The pattern to append.
 * @returns {ui.router.util.type:UrlMatcher}  A matcher for the concatenated pattern.
 */
UrlMatcher.prototype.concat = function (pattern) {
  // Because order of search parameters is irrelevant, we can add our own search
  // parameters to the end of the new pattern. Parse the new pattern by itself
  // and then join the bits together, but it's much easier to do this on a string level.
  return new UrlMatcher(this.sourcePath + pattern + this.sourceSearch);
};

UrlMatcher.prototype.toString = function () {
  return this.source;
};

/**
 * @ngdoc function
 * @name ui.router.util.type:UrlMatcher#exec
 * @methodOf ui.router.util.type:UrlMatcher
 *
 * @description
 * Tests the specified path against this matcher, and returns an object containing the captured
 * parameter values, or null if the path does not match. The returned object contains the values
 * of any search parameters that are mentioned in the pattern, but their value may be null if
 * they are not present in `searchParams`. This means that search parameters are always treated
 * as optional.
 *
 * @example
 * ```
 * new UrlMatcher('/user/{id}?q&r').exec('/user/bob', { x:'1', q:'hello' });
 * // returns { id:'bob', q:'hello', r:null }
 * ```
 *
 * @param {string} path  The URL path to match, e.g. `$location.path()`.
 * @param {Object} searchParams  URL search parameters, e.g. `$location.search()`.
 * @returns {Object}  The captured parameter values.
 */
UrlMatcher.prototype.exec = function (path, searchParams) {
  var m = this.regexp.exec(path);
  if (!m) return null;

  var params = this.params, nTotal = params.length,
    nPath = this.segments.length-1,
    values = {}, i;

  if (nPath !== m.length - 1) throw new Error("Unbalanced capture group in route '" + this.source + "'");

  for (i=0; i<nPath; i++) values[params[i]] = m[i+1];
  for (/**/; i<nTotal; i++) values[params[i]] = searchParams[params[i]];

  return values;
};

/**
 * @ngdoc function
 * @name ui.router.util.type:UrlMatcher#parameters
 * @methodOf ui.router.util.type:UrlMatcher
 *
 * @description
 * Returns the names of all path and search parameters of this pattern in an unspecified order.
 * 
 * @returns {Array.<string>}  An array of parameter names. Must be treated as read-only. If the
 *    pattern has no parameters, an empty array is returned.
 */
UrlMatcher.prototype.parameters = function () {
  return this.params;
};

/**
 * @ngdoc function
 * @name ui.router.util.type:UrlMatcher#format
 * @methodOf ui.router.util.type:UrlMatcher
 *
 * @description
 * Creates a URL that matches this pattern by substituting the specified values
 * for the path and search parameters. Null values for path parameters are
 * treated as empty strings.
 *
 * @example
 * ```
 * new UrlMatcher('/user/{id}?q').format({ id:'bob', q:'yes' });
 * // returns '/user/bob?q=yes'
 * ```
 *
 * @param {Object} values  the values to substitute for the parameters in this pattern.
 * @returns {string}  the formatted URL (path and optionally search part).
 */
UrlMatcher.prototype.format = function (values) {
  var segments = this.segments, params = this.params;
  if (!values) return segments.join('');

  var nPath = segments.length-1, nTotal = params.length,
    result = segments[0], i, search, value;

  for (i=0; i<nPath; i++) {
    value = values[params[i]];
    // TODO: Maybe we should throw on null here? It's not really good style to use '' and null interchangeabley
    if (value != null) result += encodeURIComponent(value);
    result += segments[i+1];
  }
  for (/**/; i<nTotal; i++) {
    value = values[params[i]];
    if (value != null) {
      result += (search ? '&' : '?') + params[i] + '=' + encodeURIComponent(value);
      search = true;
    }
  }

  return result;
};



/**
 * @ngdoc object
 * @name ui.router.util.$urlMatcherFactory
 *
 * @description
 * Factory for {@link ui.router.util.type:UrlMatcher} instances. The factory is also available to providers
 * under the name `$urlMatcherFactoryProvider`.
 */
function $UrlMatcherFactory() {

  /**
   * @ngdoc function
   * @name ui.router.util.$urlMatcherFactory#compile
   * @methodOf ui.router.util.$urlMatcherFactory
   *
   * @description
   * Creates a {@link ui.router.util.type:UrlMatcher} for the specified pattern.
   *   
   * @param {string} pattern  The URL pattern.
   * @returns {ui.router.util.type:UrlMatcher}  The UrlMatcher.
   */
  this.compile = function (pattern) {
    return new UrlMatcher(pattern);
  };

  /**
   * @ngdoc function
   * @name ui.router.util.$urlMatcherFactory#isMatcher
   * @methodOf ui.router.util.$urlMatcherFactory
   *
   * @description
   * Returns true if the specified object is a UrlMatcher, or false otherwise.
   *
   * @param {Object} object  The object to perform the type check against.
   * @returns {Boolean}  Returns `true` if the object has the following functions: `exec`, `format`, and `concat`.
   */
  this.isMatcher = function (o) {
    return isObject(o) && isFunction(o.exec) && isFunction(o.format) && isFunction(o.concat);
  };
  
  /* No need to document $get, since it returns this */
  this.$get = function () {
    return this;
  };
}

// Register as a provider so it's available to other providers
angular.module('ui.router.util').provider('$urlMatcherFactory', $UrlMatcherFactory);

/**
 * @ngdoc object
 * @name ui.router.router.$urlRouterProvider
 *
 * @requires ui.router.util.$urlMatcherFactoryProvider
 *
 * @description
 * `$urlRouterProvider` has the responsibility of watching `$location`. 
 * When `$location` changes it runs through a list of rules one by one until a 
 * match is found. `$urlRouterProvider` is used behind the scenes anytime you specify 
 * a url in a state configuration. All urls are compiled into a UrlMatcher object.
 *
 * There are several methods on `$urlRouterProvider` that make it useful to use directly
 * in your module config.
 */
$UrlRouterProvider.$inject = ['$urlMatcherFactoryProvider'];
function $UrlRouterProvider(  $urlMatcherFactory) {
  var rules = [], 
      otherwise = null;

  // Returns a string that is a prefix of all strings matching the RegExp
  function regExpPrefix(re) {
    var prefix = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);
    return (prefix != null) ? prefix[1].replace(/\\(.)/g, "$1") : '';
  }

  // Interpolates matched values into a String.replace()-style pattern
  function interpolate(pattern, match) {
    return pattern.replace(/\$(\$|\d{1,2})/, function (m, what) {
      return match[what === '$' ? 0 : Number(what)];
    });
  }

  /**
   * @ngdoc function
   * @name ui.router.router.$urlRouterProvider#rule
   * @methodOf ui.router.router.$urlRouterProvider
   *
   * @description
   * Defines rules that are used by `$urlRouterProvider to find matches for
   * specific URLs.
   *
   * @example
   * <pre>
   * var app = angular.module('app', ['ui.router.router']);
   *
   * app.config(function ($urlRouterProvider) {
   *   // Here's an example of how you might allow case insensitive urls
   *   $urlRouterProvider.rule(function ($injector, $location) {
   *     var path = $location.path(),
   *         normalized = path.toLowerCase();
   *
   *     if (path !== normalized) {
   *       return normalized;
   *     }
   *   });
   * });
   * </pre>
   *
   * @param {object} rule Handler function that takes `$injector` and `$location`
   * services as arguments. You can use them to return a valid path as a string.
   *
   * @return {object} $urlRouterProvider - $urlRouterProvider instance
   */
  this.rule =
    function (rule) {
      if (!isFunction(rule)) throw new Error("'rule' must be a function");
      rules.push(rule);
      return this;
    };

  /**
   * @ngdoc object
   * @name ui.router.router.$urlRouterProvider#otherwise
   * @methodOf ui.router.router.$urlRouterProvider
   *
   * @description
   * Defines a path that is used when an invalied route is requested.
   *
   * @example
   * <pre>
   * var app = angular.module('app', ['ui.router.router']);
   *
   * app.config(function ($urlRouterProvider) {
   *   // if the path doesn't match any of the urls you configured
   *   // otherwise will take care of routing the user to the
   *   // specified url
   *   $urlRouterProvider.otherwise('/index');
   *
   *   // Example of using function rule as param
   *   $urlRouterProvider.otherwise(function ($injector, $location) {
   *     ...
   *   });
   * });
   * </pre>
   *
   * @param {string|object} rule The url path you want to redirect to or a function 
   * rule that returns the url path. The function version is passed two params: 
   * `$injector` and `$location` services.
   *
   * @return {object} $urlRouterProvider - $urlRouterProvider instance
   */
  this.otherwise =
    function (rule) {
      if (isString(rule)) {
        var redirect = rule;
        rule = function () { return redirect; };
      }
      else if (!isFunction(rule)) throw new Error("'rule' must be a function");
      otherwise = rule;
      return this;
    };


  function handleIfMatch($injector, handler, match) {
    if (!match) return false;
    var result = $injector.invoke(handler, handler, { $match: match });
    return isDefined(result) ? result : true;
  }

  /**
   * @ngdoc function
   * @name ui.router.router.$urlRouterProvider#when
   * @methodOf ui.router.router.$urlRouterProvider
   *
   * @description
   * Registers a handler for a given url matching. if handle is a string, it is
   * treated as a redirect, and is interpolated according to the syyntax of match
   * (i.e. like String.replace() for RegExp, or like a UrlMatcher pattern otherwise).
   *
   * If the handler is a function, it is injectable. It gets invoked if `$location`
   * matches. You have the option of inject the match object as `$match`.
   *
   * The handler can return
   *
   * - **falsy** to indicate that the rule didn't match after all, then `$urlRouter`
   *   will continue trying to find another one that matches.
   * - **string** which is treated as a redirect and passed to `$location.url()`
   * - **void** or any **truthy** value tells `$urlRouter` that the url was handled.
   *
   * @example
   * <pre>
   * var app = angular.module('app', ['ui.router.router']);
   *
   * app.config(function ($urlRouterProvider) {
   *   $urlRouterProvider.when($state.url, function ($match, $stateParams) {
   *     if ($state.$current.navigable !== state ||
   *         !equalForKeys($match, $stateParams) {
   *      $state.transitionTo(state, $match, false);
   *     }
   *   });
   * });
   * </pre>
   *
   * @param {string|object} what The incoming path that you want to redirect.
   * @param {string|object} handler The path you want to redirect your user to.
   */
  this.when =
    function (what, handler) {
      var redirect, handlerIsString = isString(handler);
      if (isString(what)) what = $urlMatcherFactory.compile(what);

      if (!handlerIsString && !isFunction(handler) && !isArray(handler))
        throw new Error("invalid 'handler' in when()");

      var strategies = {
        matcher: function (what, handler) {
          if (handlerIsString) {
            redirect = $urlMatcherFactory.compile(handler);
            handler = ['$match', function ($match) { return redirect.format($match); }];
          }
          return extend(function ($injector, $location) {
            return handleIfMatch($injector, handler, what.exec($location.path(), $location.search()));
          }, {
            prefix: isString(what.prefix) ? what.prefix : ''
          });
        },
        regex: function (what, handler) {
          if (what.global || what.sticky) throw new Error("when() RegExp must not be global or sticky");

          if (handlerIsString) {
            redirect = handler;
            handler = ['$match', function ($match) { return interpolate(redirect, $match); }];
          }
          return extend(function ($injector, $location) {
            return handleIfMatch($injector, handler, what.exec($location.path()));
          }, {
            prefix: regExpPrefix(what)
          });
        }
      };

      var check = { matcher: $urlMatcherFactory.isMatcher(what), regex: what instanceof RegExp };

      for (var n in check) {
        if (check[n]) {
          return this.rule(strategies[n](what, handler));
        }
      }

      throw new Error("invalid 'what' in when()");
    };

  /**
   * @ngdoc object
   * @name ui.router.router.$urlRouter
   *
   * @requires $location
   * @requires $rootScope
   * @requires $injector
   *
   * @description
   *
   */
  this.$get =
    [        '$location', '$rootScope', '$injector',
    function ($location,   $rootScope,   $injector) {
      // TODO: Optimize groups of rules with non-empty prefix into some sort of decision tree
      function update(evt) {
        if (evt && evt.defaultPrevented) return;
        function check(rule) {
          var handled = rule($injector, $location);
          if (handled) {
            if (isString(handled)) $location.replace().url(handled);
            return true;
          }
          return false;
        }
        var n=rules.length, i;
        for (i=0; i<n; i++) {
          if (check(rules[i])) return;
        }
        // always check otherwise last to allow dynamic updates to the set of rules
        if (otherwise) check(otherwise);
      }

      $rootScope.$on('$locationChangeSuccess', update);

      return {
        /**
         * @ngdoc function
         * @name ui.router.router.$urlRouter#sync
         * @methodOf ui.router.router.$urlRouter
         *
         * @description
         * Triggers an update; the same update that happens when the address bar url changes, aka `$locationChangeSuccess`.
         * This method is useful when you need to use `preventDefault()` on the `$locationChangeSuccess` event, 
         * perform some custom logic (route protection, auth, config, redirection, etc) and then finally proceed 
         * with the transition by calling `$urlRouter.sync()`.
         *
         * @example
         * <pre>
         * angular.module('app', ['ui.router']);
         *   .run(function($rootScope, $urlRouter) {
         *     $rootScope.$on('$locationChangeSuccess', function(evt) {
         *       // Halt state change from even starting
         *       evt.preventDefault();
         *       // Perform custom logic
         *       var meetsRequirement = ...
         *       // Continue with the update and state transition if logic allows
         *       if (meetsRequirement) $urlRouter.sync();
         *     });
         * });
         * </pre>
         */
        sync: function () {
          update();
        }
      };
    }];
}

angular.module('ui.router.router').provider('$urlRouter', $UrlRouterProvider);

/**
 * @ngdoc object
 * @name ui.router.state.$stateProvider
 *
 * @requires ui.router.router.$urlRouterProvider
 * @requires ui.router.util.$urlMatcherFactoryProvider
 * @requires $locationProvider
 *
 * @description
 * The new `$stateProvider` works similar to Angular's v1 router, but it focuses purely
 * on state.
 *
 * A state corresponds to a "place" in the application in terms of the overall UI and
 * navigation. A state describes (via the controller / template / view properties) what
 * the UI looks like and does at that place.
 *
 * States often have things in common, and the primary way of factoring out these
 * commonalities in this model is via the state hierarchy, i.e. parent/child states aka
 * nested states.
 *
 * The `$stateProvider` provides interfaces to declare these states for your app.
 */
$StateProvider.$inject = ['$urlRouterProvider', '$urlMatcherFactoryProvider', '$locationProvider'];
function $StateProvider(   $urlRouterProvider,   $urlMatcherFactory,           $locationProvider) {

  var root, states = {}, $state, queue = {}, abstractKey = 'abstract';

  // Builds state properties from definition passed to registerState()
  var stateBuilder = {

    // Derive parent state from a hierarchical name only if 'parent' is not explicitly defined.
    // state.children = [];
    // if (parent) parent.children.push(state);
    parent: function(state) {
      if (isDefined(state.parent) && state.parent) return findState(state.parent);
      // regex matches any valid composite state name
      // would match "contact.list" but not "contacts"
      var compositeName = /^(.+)\.[^.]+$/.exec(state.name);
      return compositeName ? findState(compositeName[1]) : root;
    },

    // inherit 'data' from parent and override by own values (if any)
    data: function(state) {
      if (state.parent && state.parent.data) {
        state.data = state.self.data = extend({}, state.parent.data, state.data);
      }
      return state.data;
    },

    // Build a URLMatcher if necessary, either via a relative or absolute URL
    url: function(state) {
      var url = state.url;

      if (isString(url)) {
        if (url.charAt(0) == '^') {
          return $urlMatcherFactory.compile(url.substring(1));
        }
        return (state.parent.navigable || root).url.concat(url);
      }

      if ($urlMatcherFactory.isMatcher(url) || url == null) {
        return url;
      }
      throw new Error("Invalid url '" + url + "' in state '" + state + "'");
    },

    // Keep track of the closest ancestor state that has a URL (i.e. is navigable)
    navigable: function(state) {
      return state.url ? state : (state.parent ? state.parent.navigable : null);
    },

    // Derive parameters for this state and ensure they're a super-set of parent's parameters
    params: function(state) {
      if (!state.params) {
        return state.url ? state.url.parameters() : state.parent.params;
      }
      if (!isArray(state.params)) throw new Error("Invalid params in state '" + state + "'");
      if (state.url) throw new Error("Both params and url specicified in state '" + state + "'");
      return state.params;
    },

    // If there is no explicit multi-view configuration, make one up so we don't have
    // to handle both cases in the view directive later. Note that having an explicit
    // 'views' property will mean the default unnamed view properties are ignored. This
    // is also a good time to resolve view names to absolute names, so everything is a
    // straight lookup at link time.
    views: function(state) {
      var views = {};

      forEach(isDefined(state.views) ? state.views : { '': state }, function (view, name) {
        if (name.indexOf('@') < 0) name += '@' + state.parent.name;
        views[name] = view;
      });
      return views;
    },

    ownParams: function(state) {
      if (!state.parent) {
        return state.params;
      }
      var paramNames = {}; forEach(state.params, function (p) { paramNames[p] = true; });

      forEach(state.parent.params, function (p) {
        if (!paramNames[p]) {
          throw new Error("Missing required parameter '" + p + "' in state '" + state.name + "'");
        }
        paramNames[p] = false;
      });
      var ownParams = [];

      forEach(paramNames, function (own, p) {
        if (own) ownParams.push(p);
      });
      return ownParams;
    },

    // Keep a full path from the root down to this state as this is needed for state activation.
    path: function(state) {
      return state.parent ? state.parent.path.concat(state) : []; // exclude root from path
    },

    // Speed up $state.contains() as it's used a lot
    includes: function(state) {
      var includes = state.parent ? extend({}, state.parent.includes) : {};
      includes[state.name] = true;
      return includes;
    },

    $delegates: {}
  };

  function isRelative(stateName) {
    return stateName.indexOf(".") === 0 || stateName.indexOf("^") === 0;
  }

  function findState(stateOrName, base) {
    var isStr = isString(stateOrName),
        name  = isStr ? stateOrName : stateOrName.name,
        path  = isRelative(name);

    if (path) {
      if (!base) throw new Error("No reference point given for path '"  + name + "'");
      var rel = name.split("."), i = 0, pathLength = rel.length, current = base;

      for (; i < pathLength; i++) {
        if (rel[i] === "" && i === 0) {
          current = base;
          continue;
        }
        if (rel[i] === "^") {
          if (!current.parent) throw new Error("Path '" + name + "' not valid for state '" + base.name + "'");
          current = current.parent;
          continue;
        }
        break;
      }
      rel = rel.slice(i).join(".");
      name = current.name + (current.name && rel ? "." : "") + rel;
    }
    var state = states[name];

    if (state && (isStr || (!isStr && (state === stateOrName || state.self === stateOrName)))) {
      return state;
    }
    return undefined;
  }

  function queueState(parentName, state) {
    if (!queue[parentName]) {
      queue[parentName] = [];
    }
    queue[parentName].push(state);
  }

  function registerState(state) {
    // Wrap a new object around the state so we can store our private details easily.
    state = inherit(state, {
      self: state,
      resolve: state.resolve || {},
      toString: function() { return this.name; }
    });

    var name = state.name;
    if (!isString(name) || name.indexOf('@') >= 0) throw new Error("State must have a valid name");
    if (states.hasOwnProperty(name)) throw new Error("State '" + name + "'' is already defined");

    // Get parent name
    var parentName = (name.indexOf('.') !== -1) ? name.substring(0, name.lastIndexOf('.'))
        : (isString(state.parent)) ? state.parent
        : '';

    // If parent is not registered yet, add state to queue and register later
    if (parentName && !states[parentName]) {
      return queueState(parentName, state.self);
    }

    for (var key in stateBuilder) {
      if (isFunction(stateBuilder[key])) state[key] = stateBuilder[key](state, stateBuilder.$delegates[key]);
    }
    states[name] = state;

    // Register the state in the global state list and with $urlRouter if necessary.
    if (!state[abstractKey] && state.url) {
      $urlRouterProvider.when(state.url, ['$match', '$stateParams', function ($match, $stateParams) {
        if ($state.$current.navigable != state || !equalForKeys($match, $stateParams)) {
          $state.transitionTo(state, $match, { location: false });
        }
      }]);
    }

    // Register any queued children
    if (queue[name]) {
      for (var i = 0; i < queue[name].length; i++) {
        registerState(queue[name][i]);
      }
    }

    return state;
  }

  // Checks text to see if it looks like a glob.
  function isGlob (text) {
    return text.indexOf('*') > -1;
  }

  // Returns true if glob matches current $state name.
  function doesStateMatchGlob (glob) {
    var globSegments = glob.split('.'),
        segments = $state.$current.name.split('.');

    //match greedy starts
    if (globSegments[0] === '**') {
       segments = segments.slice(segments.indexOf(globSegments[1]));
       segments.unshift('**');
    }
    //match greedy ends
    if (globSegments[globSegments.length - 1] === '**') {
       segments.splice(segments.indexOf(globSegments[globSegments.length - 2]) + 1, Number.MAX_VALUE);
       segments.push('**');
    }

    if (globSegments.length != segments.length) {
      return false;
    }

    //match single stars
    for (var i = 0, l = globSegments.length; i < l; i++) {
      if (globSegments[i] === '*') {
        segments[i] = '*';
      }
    }

    return segments.join('') === globSegments.join('');
  }


  // Implicit root state that is always active
  root = registerState({
    name: '',
    url: '^',
    views: null,
    'abstract': true
  });
  root.navigable = null;


  /**
   * @ngdoc function
   * @name ui.router.state.$stateProvider#decorator
   * @methodOf ui.router.state.$stateProvider
   *
   * @description
   * Allows you to extend (carefully) or override (at your own peril) the 
   * `stateBuilder` object used internally by `$stateProvider`. This can be used 
   * to add custom functionality to ui-router, for example inferring templateUrl 
   * based on the state name.
   *
   * When passing only a name, it returns the current (original or decorated) builder
   * function that matches `name`.
   *
   * The builder functions that can be decorated are listed below. Though not all
   * necessarily have a good use case for decoration, that is up to you to decide.
   *
   * In addition, users can attach custom decorators, which will generate new 
   * properties within the state's internal definition. There is currently no clear 
   * use-case for this beyond accessing internal states (i.e. $state.$current), 
   * however, expect this to become increasingly relevant as we introduce additional 
   * meta-programming features.
   *
   * **Warning**: Decorators should not be interdependent because the order of 
   * execution of the builder functions in non-deterministic. Builder functions 
   * should only be dependent on the state definition object and super function.
   *
   *
   * Existing builder functions and current return values:
   *
   * - **parent** `{object}` - returns the parent state object.
   * - **data** `{object}` - returns state data, including any inherited data that is not
   *   overridden by own values (if any).
   * - **url** `{object}` - returns a {link ui.router.util.type:UrlMatcher} or null.
   * - **navigable** `{object}` - returns closest ancestor state that has a URL (aka is 
   *   navigable).
   * - **params** `{object}` - returns an array of state params that are ensured to 
   *   be a super-set of parent's params.
   * - **views** `{object}` - returns a views object where each key is an absolute view 
   *   name (i.e. "viewName@stateName") and each value is the config object 
   *   (template, controller) for the view. Even when you don't use the views object 
   *   explicitly on a state config, one is still created for you internally.
   *   So by decorating this builder function you have access to decorating template 
   *   and controller properties.
   * - **ownParams** `{object}` - returns an array of params that belong to the state, 
   *   not including any params defined by ancestor states.
   * - **path** `{string}` - returns the full path from the root down to this state. 
   *   Needed for state activation.
   * - **includes** `{object}` - returns an object that includes every state that 
   *   would pass a '$state.includes()' test.
   *
   * @example
   * <pre>
   * // Override the internal 'views' builder with a function that takes the state
   * // definition, and a reference to the internal function being overridden:
   * $stateProvider.decorator('views', function ($state, parent) {
   *   var result = {},
   *       views = parent(state);
   *
   *   angular.forEach(view, function (config, name) {
   *     var autoName = (state.name + '.' + name).replace('.', '/');
   *     config.templateUrl = config.templateUrl || '/partials/' + autoName + '.html';
   *     result[name] = config;
   *   });
   *   return result;
   * });
   *
   * $stateProvider.state('home', {
   *   views: {
   *     'contact.list': { controller: 'ListController' },
   *     'contact.item': { controller: 'ItemController' }
   *   }
   * });
   *
   * // ...
   *
   * $state.go('home');
   * // Auto-populates list and item views with /partials/home/contact/list.html,
   * // and /partials/home/contact/item.html, respectively.
   * </pre>
   *
   * @param {string} name The name of the builder function to decorate. 
   * @param {object} func A function that is responsible for decorating the original 
   * builder function. The function receives two parameters:
   *
   *   - `{object}` - state - The state config object.
   *   - `{object}` - super - The original builder function.
   *
   * @return {object} $stateProvider - $stateProvider instance
   */
  this.decorator = decorator;
  function decorator(name, func) {
    /*jshint validthis: true */
    if (isString(name) && !isDefined(func)) {
      return stateBuilder[name];
    }
    if (!isFunction(func) || !isString(name)) {
      return this;
    }
    if (stateBuilder[name] && !stateBuilder.$delegates[name]) {
      stateBuilder.$delegates[name] = stateBuilder[name];
    }
    stateBuilder[name] = func;
    return this;
  }

  /**
   * @ngdoc function
   * @name ui.router.state.$stateProvider#state
   * @methodOf ui.router.state.$stateProvider
   *
   * @description
   * Registers a state configuration under a given state name. The stateConfig object
   * has the following acceptable properties.
   *
   * <a id='template'></a>
   *
   * - **`template`** - {string|function=} - html template as a string or a function that returns
   *   an html template as a string which should be used by the uiView directives. This property 
   *   takes precedence over templateUrl.
   *   
   *   If `template` is a function, it will be called with the following parameters:
   *
   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by
   *     applying the current state
   *
   * <a id='templateUrl'></a>
   *
   * - **`templateUrl`** - {string|function=} - path or function that returns a path to an html 
   *   template that should be used by uiView.
   *   
   *   If `templateUrl` is a function, it will be called with the following parameters:
   *
   *   - {array.&lt;object&gt;} - state parameters extracted from the current $location.path() by 
   *     applying the current state
   *
   * <a id='templateProvider'></a>
   *
   * - **`templateProvider`** - {function=} - Provider function that returns HTML content
   *   string.
   *
   * <a id='controller'></a>
   *
   * - **`controller`** - {string|function=} -  Controller fn that should be associated with newly 
   *   related scope or the name of a registered controller if passed as a string.
   *
   * <a id='controllerProvider'></a>
   *
   * - **`controllerProvider`** - {function=} - Injectable provider function that returns
   *   the actual controller or string.
   *
   * <a id='controllerAs'></a>
   * 
   * - **`controllerAs`** – {string=} – A controller alias name. If present the controller will be 
   *   published to scope under the controllerAs name.
   *
   * <a id='resolve'></a>
   *
   * - **`resolve`** - {object.&lt;string, function&gt;=} - An optional map of dependencies which 
   *   should be injected into the controller. If any of these dependencies are promises, 
   *   the router will wait for them all to be resolved or one to be rejected before the 
   *   controller is instantiated. If all the promises are resolved successfully, the values 
   *   of the resolved promises are injected and $stateChangeSuccess event is fired. If any 
   *   of the promises are rejected the $stateChangeError event is fired. The map object is:
   *   
   *   - key - {string}: name of dependency to be injected into controller
   *   - factory - {string|function}: If string then it is alias for service. Otherwise if function, 
   *     it is injected and return value it treated as dependency. If result is a promise, it is 
   *     resolved before its value is injected into controller.
   *
   * <a id='url'></a>
   *
   * - **`url`** - {string=} - A url with optional parameters. When a state is navigated or
   *   transitioned to, the `$stateParams` service will be populated with any 
   *   parameters that were passed.
   *
   * <a id='params'></a>
   *
   * - **`params`** - {object=} - An array of parameter names or regular expressions. Only 
   *   use this within a state if you are not using url. Otherwise you can specify your
   *   parameters within the url. When a state is navigated or transitioned to, the 
   *   $stateParams service will be populated with any parameters that were passed.
   *
   * <a id='views'></a>
   *
   * - **`views`** - {object=} - Use the views property to set up multiple views or to target views
   *   manually/explicitly.
   *
   * <a id='abstract'></a>
   *
   * - **`abstract`** - {boolean=} - An abstract state will never be directly activated, 
   *   but can provide inherited properties to its common children states.
   *
   * <a id='onEnter'></a>
   *
   * - **`onEnter`** - {object=} - Callback function for when a state is entered. Good way
   *   to trigger an action or dispatch an event, such as opening a dialog.
   *
   * <a id='onExit'></a>
   *
   * - **`onExit`** - {object=} - Callback function for when a state is exited. Good way to
   *   trigger an action or dispatch an event, such as opening a dialog.
   *
   * <a id='reloadOnSearch'></a>
   *
   * - **`reloadOnSearch = true`** - {boolean=} - If `false`, will not retrigger the same state 
   *   just because a search/query parameter has changed (via $location.search() or $location.hash()). 
   *   Useful for when you'd like to modify $location.search() without triggering a reload.
   *
   * <a id='data'></a>
   *
   * - **`data`** - {object=} - Arbitrary data object, useful for custom configuration.
   *
   * @example
   * <pre>
   * // Some state name examples
   *
   * // stateName can be a single top-level name (must be unique).
   * $stateProvider.state("home", {});
   *
   * // Or it can be a nested state name. This state is a child of the 
   * // above "home" state.
   * $stateProvider.state("home.newest", {});
   *
   * // Nest states as deeply as needed.
   * $stateProvider.state("home.newest.abc.xyz.inception", {});
   *
   * // state() returns $stateProvider, so you can chain state declarations.
   * $stateProvider
   *   .state("home", {})
   *   .state("about", {})
   *   .state("contacts", {});
   * </pre>
   *
   * @param {string} name A unique state name, e.g. "home", "about", "contacts". 
   * To create a parent/child state use a dot, e.g. "about.sales", "home.newest".
   * @param {object} definition State configuration object.
   */
  this.state = state;
  function state(name, definition) {
    /*jshint validthis: true */
    if (isObject(name)) definition = name;
    else definition.name = name;
    registerState(definition);
    return this;
  }

  /**
   * @ngdoc object
   * @name ui.router.state.$state
   *
   * @requires $rootScope
   * @requires $q
   * @requires ui.router.state.$view
   * @requires $injector
   * @requires ui.router.util.$resolve
   * @requires ui.router.state.$stateParams
   *
   * @property {object} params A param object, e.g. {sectionId: section.id)}, that 
   * you'd like to test against the current active state.
   * @property {object} current A reference to the state's config object. However 
   * you passed it in. Useful for accessing custom data.
   * @property {object} transition Currently pending transition. A promise that'll 
   * resolve or reject.
   *
   * @description
   * `$state` service is responsible for representing states as well as transitioning
   * between them. It also provides interfaces to ask for current state or even states
   * you're coming from.
   */
  // $urlRouter is injected just to ensure it gets instantiated
  this.$get = $get;
  $get.$inject = ['$rootScope', '$q', '$view', '$injector', '$resolve', '$stateParams', '$location', '$urlRouter', '$browser'];
  function $get(   $rootScope,   $q,   $view,   $injector,   $resolve,   $stateParams,   $location,   $urlRouter,   $browser) {

    var TransitionSuperseded = $q.reject(new Error('transition superseded'));
    var TransitionPrevented = $q.reject(new Error('transition prevented'));
    var TransitionAborted = $q.reject(new Error('transition aborted'));
    var TransitionFailed = $q.reject(new Error('transition failed'));
    var currentLocation = $location.url();
    var baseHref = $browser.baseHref();

    function syncUrl() {
      if ($location.url() !== currentLocation) {
        $location.url(currentLocation);
        $location.replace();
      }
    }

    root.locals = { resolve: null, globals: { $stateParams: {} } };
    $state = {
      params: {},
      current: root.self,
      $current: root,
      transition: null
    };

    /**
     * @ngdoc function
     * @name ui.router.state.$state#reload
     * @methodOf ui.router.state.$state
     *
     * @description
     * A method that force reloads the current state. All resolves are re-resolved, events are not re-fired, 
     * and controllers reinstantiated (bug with controllers reinstantiating right now, fixing soon).
     *
     * @example
     * <pre>
     * var app angular.module('app', ['ui.router']);
     *
     * app.controller('ctrl', function ($scope, $state) {
     *   $scope.reload = function(){
     *     $state.reload();
     *   }
     * });
     * </pre>
     *
     * `reload()` is just an alias for:
     * <pre>
     * $state.transitionTo($state.current, $stateParams, { 
     *   reload: true, inherit: false, notify: false 
     * });
     * </pre>
     */
    $state.reload = function reload() {
      $state.transitionTo($state.current, $stateParams, { reload: true, inherit: false, notify: false });
    };

    /**
     * @ngdoc function
     * @name ui.router.state.$state#go
     * @methodOf ui.router.state.$state
     *
     * @description
     * Convenience method for transitioning to a new state. `$state.go` calls 
     * `$state.transitionTo` internally but automatically sets options to 
     * `{ location: true, inherit: true, relative: $state.$current, notify: true }`. 
     * This allows you to easily use an absolute or relative to path and specify 
     * only the parameters you'd like to update (while letting unspecified parameters 
     * inherit from the currently active ancestor states).
     *
     * @example
     * <pre>
     * var app = angular.module('app', ['ui.router']);
     *
     * app.controller('ctrl', function ($scope, $state) {
     *   $scope.changeState = function () {
     *     $state.go('contact.detail');
     *   };
     * });
     * </pre>
     * <img src='../ngdoc_assets/StateGoExamples.png'/>
     *
     * @param {string} to Absolute state name or relative state path. Some examples:
     *
     * - `$state.go('contact.detail')` - will go to the `contact.detail` state
     * - `$state.go('^')` - will go to a parent state
     * - `$state.go('^.sibling')` - will go to a sibling state
     * - `$state.go('.child.grandchild')` - will go to grandchild state
     *
     * @param {object=} params A map of the parameters that will be sent to the state, 
     * will populate $stateParams. Any parameters that are not specified will be inherited from currently 
     * defined parameters. This allows, for example, going to a sibling state that shares parameters
     * specified in a parent state. Parameter inheritance only works between common ancestor states, I.e.
     * transitioning to a sibling will get you the parameters for all parents, transitioning to a child
     * will get you all current parameters, etc.
     * @param {object=} options Options object. The options are:
     *
     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`
     *    will not. If string, must be `"replace"`, which will update url and also replace last history record.
     * - **`inherit`** - {boolean=true}, If `true` will inherit url parameters from current url.
     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), 
     *    defines which state to be relative from.
     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.
     * - **`reload`** (v0.2.5) - {boolean=false}, If `true` will force transition even if the state or params 
     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd
     *    use this when you want to force a reload when *everything* is the same, including search params.
     *
     * @returns {promise} A promise representing the state of the new transition.
     *
     * Possible success values:
     *
     * - $state.current
     *
     * <br/>Possible rejection values:
     *
     * - 'transition superseded' - when a newer transition has been started after this one
     * - 'transition prevented' - when `event.preventDefault()` has been called in a `$stateChangeStart` listener
     * - 'transition aborted' - when `event.preventDefault()` has been called in a `$stateNotFound` listener or
     *   when a `$stateNotFound` `event.retry` promise errors.
     * - 'transition failed' - when a state has been unsuccessfully found after 2 tries.
     * - *resolve error* - when an error has occurred with a `resolve`
     *
     */
    $state.go = function go(to, params, options) {
      return this.transitionTo(to, params, extend({ inherit: true, relative: $state.$current }, options));
    };

    /**
     * @ngdoc function
     * @name ui.router.state.$state#transitionTo
     * @methodOf ui.router.state.$state
     *
     * @description
     * Low-level method for transitioning to a new state. {@link ui.router.state.$state#methods_go $state.go}
     * uses `transitionTo` internally. `$state.go` is recommended in most situations.
     *
     * @example
     * <pre>
     * var app = angular.module('app', ['ui.router']);
     *
     * app.controller('ctrl', function ($scope, $state) {
     *   $scope.changeState = function () {
     *     $state.transitionTo('contact.detail');
     *   };
     * });
     * </pre>
     *
     * @param {string} to State name.
     * @param {object=} toParams A map of the parameters that will be sent to the state,
     * will populate $stateParams.
     * @param {object=} options Options object. The options are:
     *
     * - **`location`** - {boolean=true|string=} - If `true` will update the url in the location bar, if `false`
     *    will not. If string, must be `"replace"`, which will update url and also replace last history record.
     * - **`inherit`** - {boolean=false}, If `true` will inherit url parameters from current url.
     * - **`relative`** - {object=}, When transitioning with relative path (e.g '^'), 
     *    defines which state to be relative from.
     * - **`notify`** - {boolean=true}, If `true` will broadcast $stateChangeStart and $stateChangeSuccess events.
     * - **`reload`** (v0.2.5) - {boolean=false}, If `true` will force transition even if the state or params 
     *    have not changed, aka a reload of the same state. It differs from reloadOnSearch because you'd
     *    use this when you want to force a reload when *everything* is the same, including search params.
     *
     * @returns {promise} A promise representing the state of the new transition. See
     * {@link ui.router.state.$state#methods_go $state.go}.
     */
    $state.transitionTo = function transitionTo(to, toParams, options) {
      toParams = toParams || {};
      options = extend({
        location: true, inherit: false, relative: null, notify: true, reload: false, $retry: false
      }, options || {});

      var from = $state.$current, fromParams = $state.params, fromPath = from.path;
      var evt, toState = findState(to, options.relative);

      if (!isDefined(toState)) {
        // Broadcast not found event and abort the transition if prevented
        var redirect = { to: to, toParams: toParams, options: options };

        /**
         * @ngdoc event
         * @name ui.router.state.$state#$stateNotFound
         * @eventOf ui.router.state.$state
         * @eventType broadcast on root scope
         * @description
         * Fired when a requested state **cannot be found** using the provided state name during transition.
         * The event is broadcast allowing any handlers a single chance to deal with the error (usually by
         * lazy-loading the unfound state). A special `unfoundState` object is passed to the listener handler,
         * you can see its three properties in the example. You can use `event.preventDefault()` to abort the
         * transition and the promise returned from `go` will be rejected with a `'transition aborted'` value.
         *
         * @param {Object} event Event object.
         * @param {Object} unfoundState Unfound State information. Contains: `to, toParams, options` properties.
         * @param {State} fromState Current state object.
         * @param {Object} fromParams Current state params.
         *
         * @example
         *
         * <pre>
         * // somewhere, assume lazy.state has not been defined
         * $state.go("lazy.state", {a:1, b:2}, {inherit:false});
         *
         * // somewhere else
         * $scope.$on('$stateNotFound',
         * function(event, unfoundState, fromState, fromParams){
         *     console.log(unfoundState.to); // "lazy.state"
         *     console.log(unfoundState.toParams); // {a:1, b:2}
         *     console.log(unfoundState.options); // {inherit:false} + default options
         * })
         * </pre>
         */
        evt = $rootScope.$broadcast('$stateNotFound', redirect, from.self, fromParams);
        if (evt.defaultPrevented) {
          syncUrl();
          return TransitionAborted;
        }

        // Allow the handler to return a promise to defer state lookup retry
        if (evt.retry) {
          if (options.$retry) {
            syncUrl();
            return TransitionFailed;
          }
          var retryTransition = $state.transition = $q.when(evt.retry);
          retryTransition.then(function() {
            if (retryTransition !== $state.transition) return TransitionSuperseded;
            redirect.options.$retry = true;
            return $state.transitionTo(redirect.to, redirect.toParams, redirect.options);
          }, function() {
            return TransitionAborted;
          });
          syncUrl();
          return retryTransition;
        }

        // Always retry once if the $stateNotFound was not prevented
        // (handles either redirect changed or state lazy-definition)
        to = redirect.to;
        toParams = redirect.toParams;
        options = redirect.options;
        toState = findState(to, options.relative);
        if (!isDefined(toState)) {
          if (options.relative) throw new Error("Could not resolve '" + to + "' from state '" + options.relative + "'");
          throw new Error("No such state '" + to + "'");
        }
      }
      if (toState[abstractKey]) throw new Error("Cannot transition to abstract state '" + to + "'");
      if (options.inherit) toParams = inheritParams($stateParams, toParams || {}, $state.$current, toState);
      to = toState;

      var toPath = to.path;

      // Starting from the root of the path, keep all levels that haven't changed
      var keep, state, locals = root.locals, toLocals = [];
      for (keep = 0, state = toPath[keep];
           state && state === fromPath[keep] && equalForKeys(toParams, fromParams, state.ownParams) && !options.reload;
           keep++, state = toPath[keep]) {
        locals = toLocals[keep] = state.locals;
      }

      // If we're going to the same state and all locals are kept, we've got nothing to do.
      // But clear 'transition', as we still want to cancel any other pending transitions.
      // TODO: We may not want to bump 'transition' if we're called from a location change that we've initiated ourselves,
      // because we might accidentally abort a legitimate transition initiated from code?
      if (shouldTriggerReload(to, from, locals, options) ) {
        if ( to.self.reloadOnSearch !== false )
          syncUrl();
        $state.transition = null;
        return $q.when($state.current);
      }

      // Normalize/filter parameters before we pass them to event handlers etc.
      toParams = normalize(to.params, toParams || {});

      // Broadcast start event and cancel the transition if requested
      if (options.notify) {
        /**
         * @ngdoc event
         * @name ui.router.state.$state#$stateChangeStart
         * @eventOf ui.router.state.$state
         * @eventType broadcast on root scope
         * @description
         * Fired when the state transition **begins**. You can use `event.preventDefault()`
         * to prevent the transition from happening and then the transition promise will be
         * rejected with a `'transition prevented'` value.
         *
         * @param {Object} event Event object.
         * @param {State} toState The state being transitioned to.
         * @param {Object} toParams The params supplied to the `toState`.
         * @param {State} fromState The current state, pre-transition.
         * @param {Object} fromParams The params supplied to the `fromState`.
         *
         * @example
         *
         * <pre>
         * $rootScope.$on('$stateChangeStart',
         * function(event, toState, toParams, fromState, fromParams){
         *     event.preventDefault();
         *     // transitionTo() promise will be rejected with
         *     // a 'transition prevented' error
         * })
         * </pre>
         */
        evt = $rootScope.$broadcast('$stateChangeStart', to.self, toParams, from.self, fromParams);
        if (evt.defaultPrevented) {
          syncUrl();
          return TransitionPrevented;
        }
      }

      // Resolve locals for the remaining states, but don't update any global state just
      // yet -- if anything fails to resolve the current state needs to remain untouched.
      // We also set up an inheritance chain for the locals here. This allows the view directive
      // to quickly look up the correct definition for each view in the current state. Even
      // though we create the locals object itself outside resolveState(), it is initially
      // empty and gets filled asynchronously. We need to keep track of the promise for the
      // (fully resolved) current locals, and pass this down the chain.
      var resolved = $q.when(locals);
      for (var l=keep; l<toPath.length; l++, state=toPath[l]) {
        locals = toLocals[l] = inherit(locals);
        resolved = resolveState(state, toParams, state===to, resolved, locals);
      }

      // Once everything is resolved, we are ready to perform the actual transition
      // and return a promise for the new state. We also keep track of what the
      // current promise is, so that we can detect overlapping transitions and
      // keep only the outcome of the last transition.
      var transition = $state.transition = resolved.then(function () {
        var l, entering, exiting;

        if ($state.transition !== transition) return TransitionSuperseded;

        // Exit 'from' states not kept
        for (l=fromPath.length-1; l>=keep; l--) {
          exiting = fromPath[l];
          if (exiting.self.onExit) {
            $injector.invoke(exiting.self.onExit, exiting.self, exiting.locals.globals);
          }
          exiting.locals = null;
        }

        // Enter 'to' states not kept
        for (l=keep; l<toPath.length; l++) {
          entering = toPath[l];
          entering.locals = toLocals[l];
          if (entering.self.onEnter) {
            $injector.invoke(entering.self.onEnter, entering.self, entering.locals.globals);
          }
        }

        // Run it again, to catch any transitions in callbacks
        if ($state.transition !== transition) return TransitionSuperseded;

        // Update globals in $state
        $state.$current = to;
        $state.current = to.self;
        $state.params = toParams;
        copy($state.params, $stateParams);
        $state.transition = null;

        // Update $location
        var toNav = to.navigable;
        if (options.location && toNav) {
          $location.url(toNav.url.format(toNav.locals.globals.$stateParams));

          if (options.location === 'replace') {
            $location.replace();
          }
        }

        if (options.notify) {
        /**
         * @ngdoc event
         * @name ui.router.state.$state#$stateChangeSuccess
         * @eventOf ui.router.state.$state
         * @eventType broadcast on root scope
         * @description
         * Fired once the state transition is **complete**.
         *
         * @param {Object} event Event object.
         * @param {State} toState The state being transitioned to.
         * @param {Object} toParams The params supplied to the `toState`.
         * @param {State} fromState The current state, pre-transition.
         * @param {Object} fromParams The params supplied to the `fromState`.
         */
          $rootScope.$broadcast('$stateChangeSuccess', to.self, toParams, from.self, fromParams);
        }
        currentLocation = $location.url();

        return $state.current;
      }, function (error) {
        if ($state.transition !== transition) return TransitionSuperseded;

        $state.transition = null;
        /**
         * @ngdoc event
         * @name ui.router.state.$state#$stateChangeError
         * @eventOf ui.router.state.$state
         * @eventType broadcast on root scope
         * @description
         * Fired when an **error occurs** during transition. It's important to note that if you
         * have any errors in your resolve functions (javascript errors, non-existent services, etc)
         * they will not throw traditionally. You must listen for this $stateChangeError event to
         * catch **ALL** errors.
         *
         * @param {Object} event Event object.
         * @param {State} toState The state being transitioned to.
         * @param {Object} toParams The params supplied to the `toState`.
         * @param {State} fromState The current state, pre-transition.
         * @param {Object} fromParams The params supplied to the `fromState`.
         * @param {Error} error The resolve error object.
         */
        $rootScope.$broadcast('$stateChangeError', to.self, toParams, from.self, fromParams, error);
        syncUrl();

        return $q.reject(error);
      });

      return transition;
    };

    /**
     * @ngdoc function
     * @name ui.router.state.$state#is
     * @methodOf ui.router.state.$state
     *
     * @description
     * Similar to {@link ui.router.state.$state#methods_includes $state.includes},
     * but only checks for the full state name. If params is supplied then it will be 
     * tested for strict equality against the current active params object, so all params 
     * must match with none missing and no extras.
     *
     * @example
     * <pre>
     * $state.is('contact.details.item'); // returns true
     * $state.is(contactDetailItemStateObject); // returns true
     *
     * // everything else would return false
     * </pre>
     *
     * @param {string|object} stateName The state name or state object you'd like to check.
     * @param {object=} params A param object, e.g. `{sectionId: section.id}`, that you'd like 
     * to test against the current active state.
     * @returns {boolean} Returns true if it is the state.
     */
    $state.is = function is(stateOrName, params) {
      var state = findState(stateOrName);

      if (!isDefined(state)) {
        return undefined;
      }

      if ($state.$current !== state) {
        return false;
      }

      return isDefined(params) && params !== null ? angular.equals($stateParams, params) : true;
    };

    /**
     * @ngdoc function
     * @name ui.router.state.$state#includes
     * @methodOf ui.router.state.$state
     *
     * @description
     * A method to determine if the current active state is equal to or is the child of the 
     * state stateName. If any params are passed then they will be tested for a match as well.
     * Not all the parameters need to be passed, just the ones you'd like to test for equality.
     *
     * @example
     * <pre>
     * $state.$current.name = 'contacts.details.item';
     *
     * $state.includes("contacts"); // returns true
     * $state.includes("contacts.details"); // returns true
     * $state.includes("contacts.details.item"); // returns true
     * $state.includes("contacts.list"); // returns false
     * $state.includes("about"); // returns false
     * </pre>
     *
     * @description
     * Basic globing patterns will also work.
     *
     * @example
     * <pre>
     * $state.$current.name = 'contacts.details.item.url';
     *
     * $state.includes("*.details.*.*"); // returns true
     * $state.includes("*.details.**"); // returns true
     * $state.includes("**.item.**"); // returns true
     * $state.includes("*.details.item.url"); // returns true
     * $state.includes("*.details.*.url"); // returns true
     * $state.includes("*.details.*"); // returns false
     * $state.includes("item.**"); // returns false
     * </pre>
     *
     * @param {string} stateOrName A partial name to be searched for within the current state name.
     * @param {object} params A param object, e.g. `{sectionId: section.id}`, 
     * that you'd like to test against the current active state.
     * @returns {boolean} Returns true if it does include the state
     */

    $state.includes = function includes(stateOrName, params) {
      if (isString(stateOrName) && isGlob(stateOrName)) {
        if (doesStateMatchGlob(stateOrName)) {
          stateOrName = $state.$current.name;
        } else {
          return false;
        }
      }

      var state = findState(stateOrName);
      if (!isDefined(state)) {
        return undefined;
      }

      if (!isDefined($state.$current.includes[state.name])) {
        return false;
      }

      var validParams = true;
      angular.forEach(params, function(value, key) {
        if (!isDefined($stateParams[key]) || $stateParams[key] !== value) {
          validParams = false;
        }
      });
      return validParams;
    };


    /**
     * @ngdoc function
     * @name ui.router.state.$state#href
     * @methodOf ui.router.state.$state
     *
     * @description
     * A url generation method that returns the compiled url for the given state populated with the given params.
     *
     * @example
     * <pre>
     * expect($state.href("about.person", { person: "bob" })).toEqual("/about/bob");
     * </pre>
     *
     * @param {string|object} stateOrName The state name or state object you'd like to generate a url from.
     * @param {object=} params An object of parameter values to fill the state's required parameters.
     * @param {object=} options Options object. The options are:
     *
     * - **`lossy`** - {boolean=true} -  If true, and if there is no url associated with the state provided in the
     *    first parameter, then the constructed href url will be built from the first navigable ancestor (aka
     *    ancestor with a valid url).
     * - **`inherit`** - {boolean=false}, If `true` will inherit url parameters from current url.
     * - **`relative`** - {object=$state.$current}, When transitioning with relative path (e.g '^'), 
     *    defines which state to be relative from.
     * - **`absolute`** - {boolean=false},  If true will generate an absolute url, e.g. "http://www.example.com/fullurl".
     * 
     * @returns {string} compiled state url
     */
    $state.href = function href(stateOrName, params, options) {
      options = extend({ lossy: true, inherit: false, absolute: false, relative: $state.$current }, options || {});
      var state = findState(stateOrName, options.relative);
      if (!isDefined(state)) return null;

      params = inheritParams($stateParams, params || {}, $state.$current, state);
      var nav = (state && options.lossy) ? state.navigable : state;
      var url = (nav && nav.url) ? nav.url.format(normalize(state.params, params || {})) : null;
      if (!$locationProvider.html5Mode() && url) {
        url = "#" + $locationProvider.hashPrefix() + url;
      }

      if (baseHref !== '/') {
        if ($locationProvider.html5Mode()) {
          url = baseHref.slice(0, -1) + url;
        } else if (options.absolute){
          url = baseHref.slice(1) + url;
        }
      }

      if (options.absolute && url) {
        url = $location.protocol() + '://' + 
              $location.host() + 
              ($location.port() == 80 || $location.port() == 443 ? '' : ':' + $location.port()) + 
              (!$locationProvider.html5Mode() && url ? '/' : '') + 
              url;
      }
      return url;
    };

    /**
     * @ngdoc function
     * @name ui.router.state.$state#get
     * @methodOf ui.router.state.$state
     *
     * @description
     * Returns the state configuration object for any specific state or all states.
     *
     * @param {string|object=} stateOrName If provided, will only get the config for
     * the requested state. If not provided, returns an array of ALL state configs.
     * @returns {object|array} State configuration object or array of all objects.
     */
    $state.get = function (stateOrName, context) {
      if (!isDefined(stateOrName)) {
        var list = [];
        forEach(states, function(state) { list.push(state.self); });
        return list;
      }
      var state = findState(stateOrName, context);
      return (state && state.self) ? state.self : null;
    };

    function resolveState(state, params, paramsAreFiltered, inherited, dst) {
      // Make a restricted $stateParams with only the parameters that apply to this state if
      // necessary. In addition to being available to the controller and onEnter/onExit callbacks,
      // we also need $stateParams to be available for any $injector calls we make during the
      // dependency resolution process.
      var $stateParams = (paramsAreFiltered) ? params : filterByKeys(state.params, params);
      var locals = { $stateParams: $stateParams };

      // Resolve 'global' dependencies for the state, i.e. those not specific to a view.
      // We're also including $stateParams in this; that way the parameters are restricted
      // to the set that should be visible to the state, and are independent of when we update
      // the global $state and $stateParams values.
      dst.resolve = $resolve.resolve(state.resolve, locals, dst.resolve, state);
      var promises = [ dst.resolve.then(function (globals) {
        dst.globals = globals;
      }) ];
      if (inherited) promises.push(inherited);

      // Resolve template and dependencies for all views.
      forEach(state.views, function (view, name) {
        var injectables = (view.resolve && view.resolve !== state.resolve ? view.resolve : {});
        injectables.$template = [ function () {
          return $view.load(name, { view: view, locals: locals, params: $stateParams, notify: false }) || '';
        }];

        promises.push($resolve.resolve(injectables, locals, dst.resolve, state).then(function (result) {
          // References to the controller (only instantiated at link time)
          if (isFunction(view.controllerProvider) || isArray(view.controllerProvider)) {
            var injectLocals = angular.extend({}, injectables, locals);
            result.$$controller = $injector.invoke(view.controllerProvider, null, injectLocals);
          } else {
            result.$$controller = view.controller;
          }
          // Provide access to the state itself for internal use
          result.$$state = state;
          result.$$controllerAs = view.controllerAs;
          dst[name] = result;
        }));
      });

      // Wait for all the promises and then return the activation object
      return $q.all(promises).then(function (values) {
        return dst;
      });
    }

    return $state;
  }

  function shouldTriggerReload(to, from, locals, options) {
    if ( to === from && ((locals === from.locals && !options.reload) || (to.self.reloadOnSearch === false)) ) {
      return true;
    }
  }
}

angular.module('ui.router.state')
  .value('$stateParams', {})
  .provider('$state', $StateProvider);


$ViewProvider.$inject = [];
function $ViewProvider() {

  this.$get = $get;
  /**
   * @ngdoc object
   * @name ui.router.state.$view
   *
   * @requires ui.router.util.$templateFactory
   * @requires $rootScope
   *
   * @description
   *
   */
  $get.$inject = ['$rootScope', '$templateFactory'];
  function $get(   $rootScope,   $templateFactory) {
    return {
      // $view.load('full.viewName', { template: ..., controller: ..., resolve: ..., async: false, params: ... })
      /**
       * @ngdoc function
       * @name ui.router.state.$view#load
       * @methodOf ui.router.state.$view
       *
       * @description
       *
       * @param {string} name name
       * @param {object} options option object.
       */
      load: function load(name, options) {
        var result, defaults = {
          template: null, controller: null, view: null, locals: null, notify: true, async: true, params: {}
        };
        options = extend(defaults, options);

        if (options.view) {
          result = $templateFactory.fromConfig(options.view, options.params, options.locals);
        }
        if (result && options.notify) {
        /**
         * @ngdoc event
         * @name ui.router.state.$state#$viewContentLoading
         * @eventOf ui.router.state.$view
         * @eventType broadcast on root scope
         * @description
         *
         * Fired once the view **begins loading**, *before* the DOM is rendered.
         *
         * @param {Object} event Event object.
         * @param {Object} viewConfig The view config properties (template, controller, etc).
         *
         * @example
         *
         * <pre>
         * $scope.$on('$viewContentLoading',
         * function(event, viewConfig){
         *     // Access to all the view config properties.
         *     // and one special property 'targetView'
         *     // viewConfig.targetView
         * });
         * </pre>
         */
          $rootScope.$broadcast('$viewContentLoading', options);
        }
        return result;
      }
    };
  }
}

angular.module('ui.router.state').provider('$view', $ViewProvider);

/**
 * @ngdoc object
 * @name ui.router.state.$uiViewScrollProvider
 *
 * @description
 * Provider that returns the {@link ui.router.state.$uiViewScroll} service function.
 */
function $ViewScrollProvider() {

  var useAnchorScroll = false;

  /**
   * @ngdoc function
   * @name ui.router.state.$uiViewScrollProvider#useAnchorScroll
   * @methodOf ui.router.state.$uiViewScrollProvider
   *
   * @description
   * Reverts back to using the core [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll) service for
   * scrolling based on the url anchor.
   */
  this.useAnchorScroll = function () {
    useAnchorScroll = true;
  };

  /**
   * @ngdoc object
   * @name ui.router.state.$uiViewScroll
   *
   * @requires $anchorScroll
   * @requires $timeout
   *
   * @description
   * When called with a jqLite element, it scrolls the element into view (after a
   * `$timeout` so the DOM has time to refresh).
   *
   * If you prefer to rely on `$anchorScroll` to scroll the view to the anchor,
   * this can be enabled by calling {@link ui.router.state.$uiViewScrollProvider#methods_useAnchorScroll `$uiViewScrollProvider.useAnchorScroll()`}.
   */
  this.$get = ['$anchorScroll', '$timeout', function ($anchorScroll, $timeout) {
    if (useAnchorScroll) {
      return $anchorScroll;
    }

    return function ($element) {
      $timeout(function () {
        $element[0].scrollIntoView();
      }, 0, false);
    };
  }];
}

angular.module('ui.router.state').provider('$uiViewScroll', $ViewScrollProvider);

/**
 * @ngdoc directive
 * @name ui.router.state.directive:ui-view
 *
 * @requires ui.router.state.$state
 * @requires $compile
 * @requires $controller
 * @requires $injector
 * @requires ui.router.state.$uiViewScroll
 * @requires $document
 *
 * @restrict ECA
 *
 * @description
 * The ui-view directive tells $state where to place your templates.
 *
 * @param {string=} ui-view A view name. The name should be unique amongst the other views in the
 * same state. You can have views of the same name that live in different states.
 *
 * @param {string=} autoscroll It allows you to set the scroll behavior of the browser window
 * when a view is populated. By default, $anchorScroll is overridden by ui-router's custom scroll
 * service, {@link ui.router.state.$uiViewScroll}. This custom service let's you
 * scroll ui-view elements into view when they are populated during a state activation.
 *
 * *Note: To revert back to old [`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll)
 * functionality, call `$uiViewScrollProvider.useAnchorScroll()`.*
 *
 * @param {string=} onload Expression to evaluate whenever the view updates.
 * 
 * @example
 * A view can be unnamed or named. 
 * <pre>
 * <!-- Unnamed -->
 * <div ui-view></div> 
 * 
 * <!-- Named -->
 * <div ui-view="viewName"></div>
 * </pre>
 *
 * You can only have one unnamed view within any template (or root html). If you are only using a 
 * single view and it is unnamed then you can populate it like so:
 * <pre>
 * <div ui-view></div> 
 * $stateProvider.state("home", {
 *   template: "<h1>HELLO!</h1>"
 * })
 * </pre>
 * 
 * The above is a convenient shortcut equivalent to specifying your view explicitly with the {@link ui.router.state.$stateProvider#views `views`}
 * config property, by name, in this case an empty name:
 * <pre>
 * $stateProvider.state("home", {
 *   views: {
 *     "": {
 *       template: "<h1>HELLO!</h1>"
 *     }
 *   }    
 * })
 * </pre>
 * 
 * But typically you'll only use the views property if you name your view or have more than one view 
 * in the same template. There's not really a compelling reason to name a view if its the only one, 
 * but you could if you wanted, like so:
 * <pre>
 * <div ui-view="main"></div>
 * </pre> 
 * <pre>
 * $stateProvider.state("home", {
 *   views: {
 *     "main": {
 *       template: "<h1>HELLO!</h1>"
 *     }
 *   }    
 * })
 * </pre>
 * 
 * Really though, you'll use views to set up multiple views:
 * <pre>
 * <div ui-view></div>
 * <div ui-view="chart"></div> 
 * <div ui-view="data"></div> 
 * </pre>
 * 
 * <pre>
 * $stateProvider.state("home", {
 *   views: {
 *     "": {
 *       template: "<h1>HELLO!</h1>"
 *     },
 *     "chart": {
 *       template: "<chart_thing/>"
 *     },
 *     "data": {
 *       template: "<data_thing/>"
 *     }
 *   }    
 * })
 * </pre>
 *
 * Examples for `autoscroll`:
 *
 * <pre>
 * <!-- If autoscroll present with no expression,
 *      then scroll ui-view into view -->
 * <ui-view autoscroll/>
 *
 * <!-- If autoscroll present with valid expression,
 *      then scroll ui-view into view if expression evaluates to true -->
 * <ui-view autoscroll='true'/>
 * <ui-view autoscroll='false'/>
 * <ui-view autoscroll='scopeVariable'/>
 * </pre>
 */
$ViewDirective.$inject = ['$state', '$injector', '$uiViewScroll'];
function $ViewDirective(   $state,   $injector,   $uiViewScroll) {

  function getService() {
    return ($injector.has) ? function(service) {
      return $injector.has(service) ? $injector.get(service) : null;
    } : function(service) {
      try {
        return $injector.get(service);
      } catch (e) {
        return null;
      }
    };
  }

  var service = getService(),
      $animator = service('$animator'),
      $animate = service('$animate');

  // Returns a set of DOM manipulation functions based on which Angular version
  // it should use
  function getRenderer(attrs, scope) {
    var statics = function() {
      return {
        enter: function (element, target, cb) { target.after(element); cb(); },
        leave: function (element, cb) { element.remove(); cb(); }
      };
    };

    if ($animate) {
      return {
        enter: function(element, target, cb) { $animate.enter(element, null, target, cb); },
        leave: function(element, cb) { $animate.leave(element, cb); }
      };
    }

    if ($animator) {
      var animate = $animator && $animator(scope, attrs);

      return {
        enter: function(element, target, cb) {animate.enter(element, null, target); cb(); },
        leave: function(element, cb) { animate.leave(element); cb(); }
      };
    }

    return statics();
  }

  var directive = {
    restrict: 'ECA',
    terminal: true,
    priority: 400,
    transclude: 'element',
    compile: function (tElement, tAttrs, $transclude) {
      return function (scope, $element, attrs) {
        var previousEl, currentEl, currentScope, latestLocals,
            onloadExp     = attrs.onload || '',
            autoScrollExp = attrs.autoscroll,
            renderer      = getRenderer(attrs, scope);

        scope.$on('$stateChangeSuccess', function() {
          updateView(false);
        });
        scope.$on('$viewContentLoading', function() {
          updateView(false);
        });

        updateView(true);

        function cleanupLastView() {
          if (previousEl) {
            previousEl.remove();
            previousEl = null;
          }

          if (currentScope) {
            currentScope.$destroy();
            currentScope = null;
          }

          if (currentEl) {
            renderer.leave(currentEl, function() {
              previousEl = null;
            });

            previousEl = currentEl;
            currentEl = null;
          }
        }

        function updateView(firstTime) {
          var newScope        = scope.$new(),
              name            = currentEl && currentEl.data('$uiViewName'),
              previousLocals  = name && $state.$current && $state.$current.locals[name];

          if (!firstTime && previousLocals === latestLocals) return; // nothing to do

          var clone = $transclude(newScope, function(clone) {
            renderer.enter(clone, $element, function onUiViewEnter() {
              if (angular.isDefined(autoScrollExp) && !autoScrollExp || scope.$eval(autoScrollExp)) {
                $uiViewScroll(clone);
              }
            });
            cleanupLastView();
          });

          latestLocals = $state.$current.locals[clone.data('$uiViewName')];

          currentEl = clone;
          currentScope = newScope;
          /**
           * @ngdoc event
           * @name ui.router.state.directive:ui-view#$viewContentLoaded
           * @eventOf ui.router.state.directive:ui-view
           * @eventType emits on ui-view directive scope
           * @description           *
           * Fired once the view is **loaded**, *after* the DOM is rendered.
           *
           * @param {Object} event Event object.
           */
          currentScope.$emit('$viewContentLoaded');
          currentScope.$eval(onloadExp);
        }
      };
    }
  };

  return directive;
}

$ViewDirectiveFill.$inject = ['$compile', '$controller', '$state'];
function $ViewDirectiveFill ($compile, $controller, $state) {
  return {
    restrict: 'ECA',
    priority: -400,
    compile: function (tElement) {
      var initial = tElement.html();
      return function (scope, $element, attrs) {
        var name      = attrs.uiView || attrs.name || '',
            inherited = $element.inheritedData('$uiView');

        if (name.indexOf('@') < 0) {
          name = name + '@' + (inherited ? inherited.state.name : '');
        }

        $element.data('$uiViewName', name);

        var current = $state.$current,
            locals  = current && current.locals[name];

        if (! locals) {
          return;
        }

        $element.data('$uiView', { name: name, state: locals.$$state });
        $element.html(locals.$template ? locals.$template : initial);

        var link = $compile($element.contents());

        if (locals.$$controller) {
          locals.$scope = scope;
          var controller = $controller(locals.$$controller, locals);
          if (locals.$$controllerAs) {
            scope[locals.$$controllerAs] = controller;
          }
          $element.data('$ngControllerController', controller);
          $element.children().data('$ngControllerController', controller);
        }

        link(scope);
      };
    }
  };
}

angular.module('ui.router.state').directive('uiView', $ViewDirective);
angular.module('ui.router.state').directive('uiView', $ViewDirectiveFill);

function parseStateRef(ref) {
  var parsed = ref.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/);
  if (!parsed || parsed.length !== 4) throw new Error("Invalid state ref '" + ref + "'");
  return { state: parsed[1], paramExpr: parsed[3] || null };
}

function stateContext(el) {
  var stateData = el.parent().inheritedData('$uiView');

  if (stateData && stateData.state && stateData.state.name) {
    return stateData.state;
  }
}

/**
 * @ngdoc directive
 * @name ui.router.state.directive:ui-sref
 *
 * @requires ui.router.state.$state
 * @requires $timeout
 *
 * @restrict A
 *
 * @description
 * A directive that binds a link (`<a>` tag) to a state. If the state has an associated 
 * URL, the directive will automatically generate & update the `href` attribute via 
 * the {@link ui.router.state.$state#methods_href $state.href()} method. Clicking 
 * the link will trigger a state transition with optional parameters. 
 *
 * Also middle-clicking, right-clicking, and ctrl-clicking on the link will be 
 * handled natively by the browser.
 *
 * You can also use relative state paths within ui-sref, just like the relative 
 * paths passed to `$state.go()`. You just need to be aware that the path is relative
 * to the state that the link lives in, in other words the state that loaded the 
 * template containing the link.
 *
 * You can specify options to pass to {@link ui.router.state.$state#go $state.go()}
 * using the `ui-sref-opts` attribute. Options are restricted to `location`, `inherit`,
 * and `reload`.
 *
 * @example
 * Here's an example of how you'd use ui-sref and how it would compile. If you have the 
 * following template:
 * <pre>
 * <a ui-sref="home">Home</a> | <a ui-sref="about">About</a>
 * 
 * <ul>
 *     <li ng-repeat="contact in contacts">
 *         <a ui-sref="contacts.detail({ id: contact.id })">{{ contact.name }}</a>
 *     </li>
 * </ul>
 * </pre>
 * 
 * Then the compiled html would be (assuming Html5Mode is off):
 * <pre>
 * <a href="#/home" ui-sref="home">Home</a> | <a href="#/about" ui-sref="about">About</a>
 * 
 * <ul>
 *     <li ng-repeat="contact in contacts">
 *         <a href="#/contacts/1" ui-sref="contacts.detail({ id: contact.id })">Joe</a>
 *     </li>
 *     <li ng-repeat="contact in contacts">
 *         <a href="#/contacts/2" ui-sref="contacts.detail({ id: contact.id })">Alice</a>
 *     </li>
 *     <li ng-repeat="contact in contacts">
 *         <a href="#/contacts/3" ui-sref="contacts.detail({ id: contact.id })">Bob</a>
 *     </li>
 * </ul>
 *
 * <a ui-sref="home" ui-sref-opts="{reload: true}">Home</a>
 * </pre>
 *
 * @param {string} ui-sref 'stateName' can be any valid absolute or relative state
 * @param {Object} ui-sref-opts options to pass to {@link ui.router.state.$state#go $state.go()}
 */
$StateRefDirective.$inject = ['$state', '$timeout'];
function $StateRefDirective($state, $timeout) {
  var allowedOptions = ['location', 'inherit', 'reload'];

  return {
    restrict: 'A',
    require: '?^uiSrefActive',
    link: function(scope, element, attrs, uiSrefActive) {
      var ref = parseStateRef(attrs.uiSref);
      var params = null, url = null, base = stateContext(element) || $state.$current;
      var isForm = element[0].nodeName === "FORM";
      var attr = isForm ? "action" : "href", nav = true;

      var options = {
        relative: base
      };
      var optionsOverride = scope.$eval(attrs.uiSrefOpts) || {};
      angular.forEach(allowedOptions, function(option) {
        if (option in optionsOverride) {
          options[option] = optionsOverride[option];
        }
      });

      var update = function(newVal) {
        if (newVal) params = newVal;
        if (!nav) return;

        var newHref = $state.href(ref.state, params, options);

        if (uiSrefActive) {
          uiSrefActive.$$setStateInfo(ref.state, params);
        }
        if (!newHref) {
          nav = false;
          return false;
        }
        element[0][attr] = newHref;
      };

      if (ref.paramExpr) {
        scope.$watch(ref.paramExpr, function(newVal, oldVal) {
          if (newVal !== params) update(newVal);
        }, true);
        params = scope.$eval(ref.paramExpr);
      }
      update();

      if (isForm) return;

      element.bind("click", function(e) {
        var button = e.which || e.button;
        if ( !(button > 1 || e.ctrlKey || e.metaKey || e.shiftKey || element.attr('target')) ) {
          // HACK: This is to allow ng-clicks to be processed before the transition is initiated:
          $timeout(function() {
            $state.go(ref.state, params, options);
          });
          e.preventDefault();
        }
      });
    }
  };
}

/**
 * @ngdoc directive
 * @name ui.router.state.directive:ui-sref-active
 *
 * @requires ui.router.state.$state
 * @requires ui.router.state.$stateParams
 * @requires $interpolate
 *
 * @restrict A
 *
 * @description
 * A directive working alongside ui-sref to add classes to an element when the 
 * related ui-sref directive's state is active, and removing them when it is inactive.
 * The primary use-case is to simplify the special appearance of navigation menus 
 * relying on `ui-sref`, by having the "active" state's menu button appear different,
 * distinguishing it from the inactive menu items.
 *
 * @example
 * Given the following template:
 * <pre>
 * <ul>
 *   <li ui-sref-active="active" class="item">
 *     <a href ui-sref="app.user({user: 'bilbobaggins'})">@bilbobaggins</a>
 *   </li>
 * </ul>
 * </pre>
 * 
 * When the app state is "app.user", and contains the state parameter "user" with value "bilbobaggins", 
 * the resulting HTML will appear as (note the 'active' class):
 * <pre>
 * <ul>
 *   <li ui-sref-active="active" class="item active">
 *     <a ui-sref="app.user({user: 'bilbobaggins'})" href="/users/bilbobaggins">@bilbobaggins</a>
 *   </li>
 * </ul>
 * </pre>
 * 
 * The class name is interpolated **once** during the directives link time (any further changes to the 
 * interpolated value are ignored). 
 * 
 * Multiple classes may be specified in a space-separated format:
 * <pre>
 * <ul>
 *   <li ui-sref-active='class1 class2 class3'>
 *     <a ui-sref="app.user">link</a>
 *   </li>
 * </ul>
 * </pre>
 */
$StateActiveDirective.$inject = ['$state', '$stateParams', '$interpolate'];
function $StateActiveDirective($state, $stateParams, $interpolate) {
  return {
    restrict: "A",
    controller: ['$scope', '$element', '$attrs', function($scope, $element, $attrs) {
      var state, params, activeClass;

      // There probably isn't much point in $observing this
      activeClass = $interpolate($attrs.uiSrefActive || '', false)($scope);

      // Allow uiSref to communicate with uiSrefActive
      this.$$setStateInfo = function(newState, newParams) {
        state = $state.get(newState, stateContext($element));
        params = newParams;
        update();
      };

      $scope.$on('$stateChangeSuccess', update);

      // Update route state
      function update() {
        if ($state.$current.self === state && matchesParams()) {
          $element.addClass(activeClass);
        } else {
          $element.removeClass(activeClass);
        }
      }

      function matchesParams() {
        return !params || equalForKeys(params, $stateParams);
      }
    }]
  };
}

angular.module('ui.router.state')
  .directive('uiSref', $StateRefDirective)
  .directive('uiSrefActive', $StateActiveDirective);

/**
 * @ngdoc filter
 * @name ui.router.state.filter:isState
 *
 * @requires ui.router.state.$state
 *
 * @description
 * Translates to {@link ui.router.state.$state#methods_is $state.is("stateName")}.
 */
$IsStateFilter.$inject = ['$state'];
function $IsStateFilter($state) {
  return function(state) {
    return $state.is(state);
  };
}

/**
 * @ngdoc filter
 * @name ui.router.state.filter:includedByState
 *
 * @requires ui.router.state.$state
 *
 * @description
 * Translates to {@link ui.router.state.$state#methods_includes $state.includes('fullOrPartialStateName')}.
 */
$IncludedByStateFilter.$inject = ['$state'];
function $IncludedByStateFilter($state) {
  return function(state) {
    return $state.includes(state);
  };
}

angular.module('ui.router.state')
  .filter('isState', $IsStateFilter)
  .filter('includedByState', $IncludedByStateFilter);

/*
 * @ngdoc object
 * @name ui.router.compat.$routeProvider
 *
 * @requires ui.router.state.$stateProvider
 * @requires ui.router.router.$urlRouterProvider
 *
 * @description
 * `$routeProvider` of the `ui.router.compat` module overwrites the existing
 * `routeProvider` from the core. This is done to provide compatibility between
 * the UI Router and the core router.
 *
 * It also provides a `when()` method to register routes that map to certain urls.
 * Behind the scenes it actually delegates either to 
 * {@link ui.router.router.$urlRouterProvider $urlRouterProvider} or to the 
 * {@link ui.router.state.$stateProvider $stateProvider} to postprocess the given 
 * router definition object.
 */
$RouteProvider.$inject = ['$stateProvider', '$urlRouterProvider'];
function $RouteProvider(  $stateProvider,    $urlRouterProvider) {

  var routes = [];

  onEnterRoute.$inject = ['$$state'];
  function onEnterRoute(   $$state) {
    /*jshint validthis: true */
    this.locals = $$state.locals.globals;
    this.params = this.locals.$stateParams;
  }

  function onExitRoute() {
    /*jshint validthis: true */
    this.locals = null;
    this.params = null;
  }

  this.when = when;
  /*
   * @ngdoc function
   * @name ui.router.compat.$routeProvider#when
   * @methodOf ui.router.compat.$routeProvider
   *
   * @description
   * Registers a route with a given route definition object. The route definition
   * object has the same interface the angular core route definition object has.
   * 
   * @example
   * <pre>
   * var app = angular.module('app', ['ui.router.compat']);
   *
   * app.config(function ($routeProvider) {
   *   $routeProvider.when('home', {
   *     controller: function () { ... },
   *     templateUrl: 'path/to/template'
   *   });
   * });
   * </pre>
   *
   * @param {string} url URL as string
   * @param {object} route Route definition object
   *
   * @return {object} $routeProvider - $routeProvider instance
   */
  function when(url, route) {
    /*jshint validthis: true */
    if (route.redirectTo != null) {
      // Redirect, configure directly on $urlRouterProvider
      var redirect = route.redirectTo, handler;
      if (isString(redirect)) {
        handler = redirect; // leave $urlRouterProvider to handle
      } else if (isFunction(redirect)) {
        // Adapt to $urlRouterProvider API
        handler = function (params, $location) {
          return redirect(params, $location.path(), $location.search());
        };
      } else {
        throw new Error("Invalid 'redirectTo' in when()");
      }
      $urlRouterProvider.when(url, handler);
    } else {
      // Regular route, configure as state
      $stateProvider.state(inherit(route, {
        parent: null,
        name: 'route:' + encodeURIComponent(url),
        url: url,
        onEnter: onEnterRoute,
        onExit: onExitRoute
      }));
    }
    routes.push(route);
    return this;
  }

  /*
   * @ngdoc object
   * @name ui.router.compat.$route
   *
   * @requires ui.router.state.$state
   * @requires $rootScope
   * @requires $routeParams
   *
   * @property {object} routes - Array of registered routes.
   * @property {object} params - Current route params as object.
   * @property {string} current - Name of the current route.
   *
   * @description
   * The `$route` service provides interfaces to access defined routes. It also let's
   * you access route params through `$routeParams` service, so you have fully
   * control over all the stuff you would actually get from angular's core `$route`
   * service.
   */
  this.$get = $get;
  $get.$inject = ['$state', '$rootScope', '$routeParams'];
  function $get(   $state,   $rootScope,   $routeParams) {

    var $route = {
      routes: routes,
      params: $routeParams,
      current: undefined
    };

    function stateAsRoute(state) {
      return (state.name !== '') ? state : undefined;
    }

    $rootScope.$on('$stateChangeStart', function (ev, to, toParams, from, fromParams) {
      $rootScope.$broadcast('$routeChangeStart', stateAsRoute(to), stateAsRoute(from));
    });

    $rootScope.$on('$stateChangeSuccess', function (ev, to, toParams, from, fromParams) {
      $route.current = stateAsRoute(to);
      $rootScope.$broadcast('$routeChangeSuccess', stateAsRoute(to), stateAsRoute(from));
      copy(toParams, $route.params);
    });

    $rootScope.$on('$stateChangeError', function (ev, to, toParams, from, fromParams, error) {
      $rootScope.$broadcast('$routeChangeError', stateAsRoute(to), stateAsRoute(from), error);
    });

    return $route;
  }
}

angular.module('ui.router.compat')
  .provider('$route', $RouteProvider)
  .directive('ngView', $ViewDirective);
})(window, window.angular);
define("angularRoute", ["angular","ngStorage","ngdialog","ngScrollTop","ngDraw","angularQrcode","ngTouch"], (function (global) {
    return function () {
        var ret, fn;
        return ret || global.angularRoute;
    };
}(this)));

/*
 AngularJS v1.4.0
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(I,d,B){'use strict';function D(f,q){q=q||{};d.forEach(q,function(d,h){delete q[h]});for(var h in f)!f.hasOwnProperty(h)||"$"===h.charAt(0)&&"$"===h.charAt(1)||(q[h]=f[h]);return q}var x=d.$$minErr("$resource"),C=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;d.module("ngResource",["ng"]).provider("$resource",function(){var f=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}};
this.$get=["$http","$q",function(q,h){function u(d,g){this.template=d;this.defaults=s({},f.defaults,g);this.urlParams={}}function w(y,g,l,m){function c(b,k){var c={};k=s({},g,k);r(k,function(a,k){v(a)&&(a=a());var d;if(a&&a.charAt&&"@"==a.charAt(0)){d=b;var e=a.substr(1);if(null==e||""===e||"hasOwnProperty"===e||!C.test("."+e))throw x("badmember",e);for(var e=e.split("."),n=0,g=e.length;n<g&&d!==B;n++){var h=e[n];d=null!==d?d[h]:B}}else d=a;c[k]=d});return c}function F(b){return b.resource}function e(b){D(b||
{},this)}var G=new u(y,m);l=s({},f.defaults.actions,l);e.prototype.toJSON=function(){var b=s({},this);delete b.$promise;delete b.$resolved;return b};r(l,function(b,k){var g=/^(POST|PUT|PATCH)$/i.test(b.method);e[k]=function(a,z,m,y){var n={},f,l,A;switch(arguments.length){case 4:A=y,l=m;case 3:case 2:if(v(z)){if(v(a)){l=a;A=z;break}l=z;A=m}else{n=a;f=z;l=m;break}case 1:v(a)?l=a:g?f=a:n=a;break;case 0:break;default:throw x("badargs",arguments.length);}var u=this instanceof e,p=u?f:b.isArray?[]:new e(f),
t={},w=b.interceptor&&b.interceptor.response||F,C=b.interceptor&&b.interceptor.responseError||B;r(b,function(b,a){"params"!=a&&"isArray"!=a&&"interceptor"!=a&&(t[a]=H(b))});g&&(t.data=f);G.setUrlParams(t,s({},c(f,b.params||{}),n),b.url);n=q(t).then(function(a){var c=a.data,g=p.$promise;if(c){if(d.isArray(c)!==!!b.isArray)throw x("badcfg",k,b.isArray?"array":"object",d.isArray(c)?"array":"object",t.method,t.url);b.isArray?(p.length=0,r(c,function(a){"object"===typeof a?p.push(new e(a)):p.push(a)})):
(D(c,p),p.$promise=g)}p.$resolved=!0;a.resource=p;return a},function(a){p.$resolved=!0;(A||E)(a);return h.reject(a)});n=n.then(function(a){var b=w(a);(l||E)(b,a.headers);return b},C);return u?n:(p.$promise=n,p.$resolved=!1,p)};e.prototype["$"+k]=function(a,b,c){v(a)&&(c=b,b=a,a={});a=e[k].call(this,a,this,b,c);return a.$promise||a}});e.bind=function(b){return w(y,s({},g,b),l)};return e}var E=d.noop,r=d.forEach,s=d.extend,H=d.copy,v=d.isFunction;u.prototype={setUrlParams:function(f,g,l){var m=this,
c=l||m.template,h,e,q=m.urlParams={};r(c.split(/\W/),function(b){if("hasOwnProperty"===b)throw x("badname");!/^\d+$/.test(b)&&b&&(new RegExp("(^|[^\\\\]):"+b+"(\\W|$)")).test(c)&&(q[b]=!0)});c=c.replace(/\\:/g,":");g=g||{};r(m.urlParams,function(b,k){h=g.hasOwnProperty(k)?g[k]:m.defaults[k];d.isDefined(h)&&null!==h?(e=encodeURIComponent(h).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,
"+"),c=c.replace(new RegExp(":"+k+"(\\W|$)","g"),function(b,a){return e+a})):c=c.replace(new RegExp("(/?):"+k+"(\\W|$)","g"),function(b,a,c){return"/"==c.charAt(0)?c:a+c})});m.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");f.url=c.replace(/\/\\\./,"/.");r(g,function(b,c){m.urlParams[c]||(f.params=f.params||{},f.params[c]=b)})}};return w}]})})(window,window.angular);
//# sourceMappingURL=angular-resource.min.js.map
;
define("angularResource", ["angular"], (function (global) {
    return function () {
        var ret, fn;
        return ret || global.angularResource;
    };
}(this)));

/* 
* @Author: anchen
* @Date:   2016-01-12 20:39:33
* @Last Modified by:   anchen
* @Last Modified time: 2016-01-12 21:50:31
*/


define('filter',['app', 'jweixin', 'jquery'], function (app, wx, $) {

    app
        /*当前登录状态*/
        .filter('isRegister', function ($localStorage, $filter, $state) {
            return function (certification) {
                var obj = {};
                obj.register = false;
                obj.user = {};
                if ($localStorage.user != undefined) {
                    obj.register = true;
                    if (certification != undefined) { $localStorage.user.certification = certification; };
                    if ($localStorage.user.certification == undefined) {
                        $localStorage.user.userName = '亲爱的用户';
                    } else {
                        $localStorage.user.userName = $localStorage.user.realName;
                    }
                    obj.user = $localStorage.user;
                } else {
                    obj.register = false;
                    obj.user.userName = '亲爱的用户';
                }
                return obj;
            }
        })
        /*浏览记录*/
        .filter('isPath', function ($localStorage, $filter, $state) {
            return function (url) {
                $localStorage.pathUrl.push(url);
            }
        })
        /*跳回上一页*/
        .filter('跳回上一页', function ($localStorage, $state) {

            return function (number) {
                var num = 1;
                if (number != undefined) {
                    num = number;
                };
                if ($localStorage.pathUrl != undefined) {
                    if ($localStorage.pathUrl.length > 0) {
                        if ($localStorage.pathUrl[$localStorage.pathUrl.length - num] == undefined) {
                            delete $localStorage.userForm;
                            $state.go('main.home');
                        }
                        else if ($localStorage.cp != undefined) {
                            // else{
                            if ($localStorage.active != undefined) {
                                $state.go($localStorage.pathUrl[$localStorage.pathUrl.length - num], { pid: $localStorage.cp.info.id, wap: true, active: $localStorage.active });
                            }
                            else {
                                $state.go($localStorage.pathUrl[$localStorage.pathUrl.length - num], { pid: $localStorage.cp.info.id, wap: true });
                            }
                            // }
                        }
                        else {
                            if ($localStorage.active != undefined) {
                                $state.go($localStorage.pathUrl[$localStorage.pathUrl.length - num], { wap: true, active: $localStorage.active });
                            }
                            else {
                                $state.go($localStorage.pathUrl[$localStorage.pathUrl.length - num], { wap: true });
                            }
                            // $state.go($localStorage.pathUrl[$localStorage.pathUrl.length - num],{wap:true});
                        }
                        for (var i = 0; i < num; i++) {
                            $localStorage.pathUrl.pop();
                        }
                    } else {
                        delete $localStorage.userForm;
                        $state.go('main.home');
                    }
                } else {
                    delete $localStorage.userForm;
                    $state.go('main.home');
                    $localStorage.pathUrl = [];
                }
            }
        })
        /*清空缓存*/
        .filter('清空缓存', function ($localStorage) {
            return function () {
                $localStorage.pathUrl = [];
                delete $localStorage.user;
                if ($localStorage.showActivityDialog != undefined) {
                    delete $localStorage.showActivityDialog;
                }
                if ($localStorage.showActivityRedbagDialog != undefined) {
                    delete $localStorage.showActivityRedbagDialog;
                }
            }
        })
        /*显示密码*/
        .filter('isShowPw', function () {
            return function (bool) {
                var classPw = {};
                if (bool) { classPw.type = 'text'; } else { classPw.type = 'passWord'; };
                return classPw;
            }
        })
        /*性别*/
        .filter('sex', function () {
            return function (type) {
                var x = {};
                if (type == 1) { x = '先生'; } else { x = '女士'; };
                return x;
            }
        })
        /*倒计时*/
        .filter('60秒倒计时', function ($timeout) {
            return function (scope, timeNum) {
                scope.nowTimer = '获取验证码';
                var timer;
                var isError = false;
                var nowTimer = timeNum;
                if (scope.isSubMin) {
                    setTimerOut();
                }
                function setTimerOut() {
                    // scope.isSubMin=false;
                    timer = $timeout(
                        function () {
                            if (nowTimer <= 0) {
                                if (isError) {
                                    scope.nowTimer = '获取验证码';
                                } else {
                                    scope.nowTimer = '重发';
                                }
                                scope.disabledPhoneBtn = false;
                                scope.isSubMin = true;
                                // if (scope.changeIMG != undefined) {
                                //     scope.changeIMG();
                                // };

                            } else {
                                scope.isSubMin = false;
                                nowTimer -= 1;
                                scope.nowTimer = nowTimer + '秒 ';
                                setTimerOut();
                            }
                        },
                        1000
                    );
                };
                scope.stop = function () {
                    nowTimer = 0;
                    isError = true;
                };
            }
        })

        /*错误信息----------------------------------------------*/

        .filter('serverZuceError', function ($rootScope) {//手机
            return function (form, name) {
                var error = {
                    1001: "短信验证码为空",
                    1002: "短信验证码错误",
                    1003: "手机号错误",
                    1004: "图片验证码错误",
                    1005: "密码格式6-18位字母数字混合",
                    1006: "未勾选注册协议",
                    1007: "手机号已注册",
                    1008: "推荐人不存在"
                };
                $rootScope.errorText = error[name];
                $rootScope.maskError = true;
                return error[name];
            }
        })
        /*错误信息----------------------------------------------*/

        .filter('手机短信验证错误', function ($rootScope) {//手机
            return function (form, name) {
                var error = {
                    1001: "短信验证码为空",
                    1002: "系统错误",
                    1003: "短信发送失败",
                    8888: "频繁操作"
                };
                $rootScope.errorText = error[name];
                $rootScope.maskError = true;
                return error[name];
            }
        })
        /*登录密码验证*/
        .filter('denLuPassWordError', function () {
            return function (code, name) {
                var error = {
                    1001: "账号或密码为空",
                    1003: "账号或密码错误"
                };
                code.$valid = false;
                var text = '';
                if (code.$error["serverError"]) {
                    code.$valid = true;
                    delete code.$error.pattern;
                    delete code.$error.required;
                    if (error[name] != undefined) {
                        text = error[name];
                    } else {
                        code.$valid = false;
                    }
                }
                return text;
            }
        })
        /*登录用户名*/
        .filter('denLuUserNameError', function () {
            return function (code, name) {
                var error = {
                    1001: "账号或密码为空",
                    1003: "账号或密码错误"
                };
                code.$valid = false;
                var text = '';
                if (code.$error["required"]) {
                    if (code.$dirty) {
                        code.$valid = true;
                    };
                    delete code.$error.serverError;
                    text = '请输入您的手机号';
                } else
                    if (code.$error["pattern"]) {
                        code.$valid = true;
                        delete code.$error.serverError;
                        text = '此用户名无效';
                    } else
                        if (code.$error["minlength"]) {
                            code.$valid = true;
                            delete code.$error.serverError;
                            text = '用户名长度错误';
                        } else
                            if (code.$error["serverError"]) {
                                code.$valid = true;
                                delete code.$error.pattern;
                                delete code.$error.minlength;
                                delete code.$error.required;
                                if (error[name] != undefined) {
                                    text = error[name];
                                } else {
                                    code.$valid = false;
                                }
                            }
                return text;
            }
        })
        .filter('serverSmsError', function ($rootScope) {//短信
            return function (form, name) {
                var error = {
                    1001: "图片验证码不正确",
                    1002: "每个手机号当天只能发送5条",
                    1003: "短信发送失败"
                };
                $rootScope.errorText = error[name];
                $rootScope.maskError = true;
                return error[name];
            }
        })
        .filter('errorMsgDialog', function ($rootScope) {
            return function (name, dialog, replenish) {
                var error = {
                    noSelect: "请选需要操作的节点!",
                    noSelectRole: "请在角色列表中选中角色才能分配权限！",
                    delVerify: "确定要删除节点：",
                    loginErro: "登录失败：",
                    netErro: "网络异常：请检查你的网络！",
                    addOK: "新增成功!",
                    delOK: "删除成功!",
                    updateOK: "修改成功!",
                    czOK: "操作成功!",
                    none: ""
                };
                var errormessage;
                if (replenish !== undefined) {
                    errormessage = error[name] + replenish;
                } else {
                    errormessage = error[name];
                }
                return dialog;
            }
        })
        /*服务器-errorCode*/
        .filter('服务器信息', function (ngDialog, $filter) {
            return function (code, scope, YorN) {
                var error = {
                    1001: "账号或密码为空",
                    1002: "验证码错误",
                    1003: "账号或密码错误",
                    9998: "请重新登录",
                    9999: "系统错误，请稍后刷新重试",
                    10001: "当日用户无分享记录",
                    test: "网络错误"
                };
                scope.msg = {};
                scope.msg.text = error[code];

                if (YorN == 'y') {
                    scope.msg = {};
                    scope.msg.btnYes = '确定';
                    // scope.msg.btnNo='忽略';
                    scope.msg.title = '通知：';
                    scope.msg.text = error[code];
                    $filter('提示跳转')('template/error/dlog.html', scope);
                } else {
                    return error[code];
                }
            };
        })
        .filter('实名认证错误信息', function (ngDialog, $filter) {
            return function (code, scope, YorN) {
                var error = {
                    1001: "真实姓名不能为空",
                    1002: "身份证号不能为空",
                    1003: "银行卡号不能为空",
                    1004: "手机号码不能为空",
                    1005: "短信验证码不能为空",
                    1006: "短信验证码错误",
                    1007: "银行卡类型不符，请更换银行卡后重试",
                    1008: "此卡未开通银联在线支付功能,实名认证失败，请联系发卡银行",
                    1009: "不支持此银行卡的验证",
                    1010: "免费验证次数已用完，请联系客服人员。",
                    1011: "认证失败",
                    1012: "该身份证号已认证",
                    1013: "渠道不能为空",
                    1014: "请核对个人信息",
                    1015: "请核对银行卡信息",
                    1016: "该银行卡bin不支持",
                    1017: "认证失败，系统异常请稍后再试",
                    9998: "您的登录已过期或已在其他设备登录，请重新登录",
                    9999: "系统错误",
                    test: "网络错误"
                };
                scope.msg = {};
                scope.msg.text = error[code];
                if (YorN == 'y') {
                    scope.msg = {};
                    scope.msg.btnYes = '确定';
                    // scope.msg.btnNo='忽略';
                    scope.msg.title = '提示：';
                    scope.msg.text = error[code];
                    $filter('提示跳转')('template/error/dlog.html', scope);
                } else {
                    return error[code];
                }
            };
        })
        .filter('投资错误信息', function (ngDialog, $filter) {
            return function (code, scope, YorN) {
                var error = {
                    1001: "交易密码错误",
                    1002: "产品已募集完",
                    1003: "项目可投资金额不足",
                    1004: "小于起投金额",
                    1005: "非递增金额整数倍",
                    1006: "投资金额大于项目单笔投资限额",
                    1007: "账户可用余额不足",
                    1008: "已投资过产品，不能投资新手产品",
                    1009: "用户不存在",
                    1010: "优惠券不可用",
                    1011: "投资失败,请稍后再试",
                    2001: "交易密码已被锁定",
                    9998: "您的登录已过期或已在其他设备登录，请重新登录",
                    9999: "系统错误",
                    noInp: "请输入投资金额",
                    noPwd: "请输入交易密码",
                    ok: "投资成功",
                    test: "网络错误"
                };
                scope.msg = {};
                scope.msg.text = error[code];
                if (YorN == 'y') {
                    scope.msg = {};
                    scope.msg.btnYes = null;
                    // scope.msg.btnNo='忽略';
                    scope.msg.title = '提示：';
                    scope.msg.text = error[code];
                    $filter('提示跳转')('template/error/dlog.html', scope);
                } else {
                    return error[code];
                }
            };
        })
        .filter('实名短信错误信息', function (ngDialog, $filter) {
            return function (code, scope, YorN) {
                var error = {
                    1001: "手机号码有误",
                    1002: "系统错误",
                    1003: "短信发送失败",
                    1004: "银行卡尾号不能为空",
                    8888: "频繁操作",
                    ok: '短信发送成功',
                    test: "网络错误"
                };
                scope.msg = {};
                scope.msg.text = error[code];
                if (YorN == 'y') {
                    scope.msg = {};
                    scope.msg.btnYes = null;
                    // scope.msg.btnNo='忽略';
                    scope.msg.title = '提示：';
                    scope.msg.text = error[code];
                    $filter('提示跳转')('template/error/dlog.html', scope);
                } else {
                    return error[code];
                }
            };
        })
        .filter('意见反馈信息', function (ngDialog, $filter) {
            return function (code, scope, YorN) {
                var error = {
                    ok: '感谢您对我们的支持'
                };
                scope.msg = {};
                scope.msg.text = error[code];
                if (YorN == 'y') {
                    scope.msg = {};
                    scope.msg.btnYes = null;
                    // scope.msg.btnNo='忽略';
                    scope.msg.title = '提示：';
                    scope.msg.text = error[code];
                    $filter('提示跳转')('template/error/dlog.html', scope);
                } else {
                    return error[code];
                }
            };
        })
        /*根据用户状态提示跳转页面方向*/
        .filter('提示跳转', function (ngDialog) {
            return function (templateurl, scope) {
                ngDialog.open({
                    template: templateurl,
                    scope: scope,
                    closeByDocument: false,
                    plain: false
                });
                // return  dialog;
            };
        })
        /***********************换算*******************************************/
        .filter('isNumber2', function ($rootScope) {
            return function (num, type, flag) {
                if (num == undefined) {
                    if (flag == undefined) {
                        return 0;
                    }
                } else {
                    if (isNaN(num)) {
                        if (flag == undefined) {
                            return 0;
                        }
                    } else {
                        var num = new Number(num);
                        var num = num.toFixed(4);
                        if (type != undefined) {
                            num = num.substring(0, num.lastIndexOf('.') + 0) // 123456.78
                        } else {
                            num = num.substring(0, num.lastIndexOf('.') + 3) // 123456.78
                        }
                    }

                    $rootScope.shouyi = num;
                    return num;
                }
            };
        })
        .filter('mosaic', function () {
            return function (str) {
                if (!str) {
                    return str;
                }
                if (str.match(/^1[3|4|5|7|8][0-9]{9}$/)) {
                    return str.substr(0, 3) + '****' + str.substr(7, str.length - 7)
                } else {
                    if (str.length > 2) {
                        return str.substr(0, 1) + '********'.substring(0, str.length - 2) + str.substr(str.length - 1, 1)
                    } else {
                        return str.substr(0, 1) + '*';
                    }
                }
            };
        })
        /***********************换算*******************************************/
        .filter('setProgress', function () {
            return function (num) {
                if (num == undefined) {
                    return 0;
                } else {
                    if (isNaN(num)) {
                        return 0;
                    } else {
                        if (num > 0 && num <= 1) {
                            num = 1;
                        } else if (num >= 99 && num < 100) {
                            num = 99;
                        } else {
                            num = parseInt(num);
                        }
                    }
                    return num;
                }
            }
        })
        .filter('提现错误信息', function (ngDialog, $filter) {
            return function (msg, scope) {
                var error = {
                    'required': "请输入提现金额",
                    'pattern': "请输入正确的数值",
                    'morethan': "提现金额至少为1元",
                    'morethan3': "提现金额至少为3元",
                    'withdrawlimit': "提现金额最多为" + scope.cash.funds + "元",
                    'maxlimit': "提现金额最多为5,000,000元"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                }, 1500);
            };
        })
        .filter('提现申请错误信息', function (ngDialog, $filter) {
            return function (msg) {
                var error = {
                    9999: "系统错误",
                    1001: "提现金额有误",
                    1002: "交易密码不能为空",
                    1003: "交易密码错误",
                    1004: "余额不足",
                    1005: "交易失败，请再次申请",
                    1006: "处理中",
                    1007: "该笔需要收取手续费",
                    1008: "该笔不需要收取手续费",
                    1009: "渠道不能为空",
                    2002: "返现或体验金收益需完成一次真实投资后才可提现"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '（' + msg + '）' + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            };
        })
        .filter('充值错误信息', function (ngDialog, $filter) {
            return function (msg, scope) {
                var error = {
                    'required': "请输入充值金额",
                    'pattern': "请输入正确的数值",
                    'more3': "充值金额至少为3元",
                    'rechargelimit': "充值金额最多为" + scope.recharge.singleQuota + "元"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                }, 1500);
            };
        })
        .filter('修改交易密码错误信息', function (ngDialog, $filter) {
            return function (msg, scope) {
                var error = {
                    'codeRequired': "请输入短信验证码",
                    'tpwdRequired': "请输入交易密码",
                    'tpwdPattern': "交易密码格式错误"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                }, 1500);
            };
        })
        .filter('修改登录密码错误信息', function (ngDialog, $filter) {
            return function (msg, scope) {
                var error = {
                    'codeRequired': "请输入短信验证码",
                    'pwdRequired': "请输入登录密码",
                    'pwdPattern': "登录密码格式错误"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                }, 1500);
            };
        })
        .filter('登录交易密码短信验证码错误信息', function (ngDialog, $filter) {
            return function (msg) {
                var error = {
                    9999: "系统错误",
                    8888: "频繁操作",
                    1001: "手机号码有误",
                    // 1002: "当天短信发送超过限制",
                    1002: "系统错误",
                    1003: "短信发送失败"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            };
        })
        .filter('重置交易密码短信验证码错误信息', function (ngDialog, $filter) {
            return function (msg) {
                var error = {
                    9999: "系统错误",
                    8888: "频繁操作",
                    1001: "发送失败"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            };
        })
        .filter('重置交易密码错误信息', function (ngDialog, $filter) {
            return function (msg, scope) {
                var error = {
                    9999: "系统错误",
                    1001: "验证码错误",
                    1002: "密码为空",
                    1003: "交易密码不合法"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
                scope.isSubmit = false;
            };
        })
        .filter('重置登录密码错误信息', function (ngDialog, $filter) {
            return function (msg, scope) {
                var error = {
                    9999: "系统错误",
                    1001: "验证码错误",
                    1002: "密码为空",
                    1003: "登录密码不合法"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
                scope.isSubmit = false;
            };
        })
        .filter('重置密码成功', function (ngDialog, $filter, $state) {
            return function (msg, scope) {
                ngDialog.open({
                    template: '<p class="success-msg">' + msg + '</p>',
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
                scope.isSubmit = false;
                setTimeout(function () {
                    ngDialog.closeAll();
                    $filter('清空缓存')()
                    $state.go('dl');
                }, 1500);
            };
        })
        .filter('重置交易密码成功', function (ngDialog, $filter, $state) {
            return function (msg, scope) {
                ngDialog.open({
                    template: '<p class="success-msg">' + msg + '</p>',
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
                scope.isSubmit = false;
                setTimeout(function () {
                    ngDialog.closeAll();
                    $filter('跳回上一页')();
                }, 1500);
            };
        })
        .filter('创建订单错误信息', function (ngDialog, $filter) {
            return function (msg) {
                var error = {
                    9999: "系统错误",
                    1001: "金额有误",
                    1002: "系统错误，请稍后重试",
                    1003: "超过限额，请修改金额后重试"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            };
        })
        .filter('充值弹窗', function (ngDialog, $state, $localStorage) {
            return function (scope) {
                scope.closeDialog = function (bool) {
                    scope.isSubmit = false;
                    ngDialog.closeAll();
                };
                ngDialog.open({
                    template: '../../template/dialog/recharge-dialog.html',
                    className: 'recharge-dialog-wrap ngdialog-theme-default',
                    scope: scope,
                    closeByDocument: false,
                    showClose: false
                });
            };
        })
        .filter('投资交易密码错误信息', function (ngDialog, $state, $localStorage) {
            return function (scope) {
                scope.closeDialog = function () {
                    ngDialog.closeAll();
                };
                ngDialog.open({
                    template: '<div class="recharge-dialog forget"><div class="title">提示</div><p>连续输错三次，您的交易密码已被锁定！请一小时后再试，或点击忘记密码</p><div class="btns"><span ng-click="closeDialog()">稍后再试</span><span class="right" ng-click="closeDialog()" ui-sref="resetTradePwd({firstset:false})">忘记密码</span></div></div>',
                    className: 'recharge-dialog-wrap ngdialog-theme-default',
                    scope: scope,
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
            };
        })
        .filter('充值验证码error信息', function (ngDialog, $filter) {
            return function (msg) {
                var error = {
                    9999: "系统错误",
                    8888: "频繁操作",
                    1002: "短信发送失败"
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            };
        })
        .filter('登录错误信息', function (ngDialog, $filter) {
            return function (msg) {
                var error = {
                    1001: "账号或密码为空",
                    1003: "账号或密码错误",
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            };
        })
        .filter('认证充值错误信息', function (ngDialog, $filter, $state) {
            return function (msg, scope) {
                var error = {
                    9999: "系统错误",
                    1001: "充值金额有误",
                    1002: "验证码不能为空",
                    1003: "验证码错误",
                    1004: "处理中",
                    1005: "系统错误，请稍后重试",
                    1006: "超出单卡号累计交易次数限制",
                    1007: "超出银行授信额度",
                    1008: "超过用户在银行设置的限额",
                    1009: "持卡人身份证验证失败",
                    1010: "对不起，您累计交易支付金额超出单笔限额",
                    1011: "对不起，您累计交易支付金额超出当日限额",
                    1012: "对不起，您累计交易支付金额超出当月限额",
                    1013: "非法用户号",
                    1014: "该卡暂不支持支付，请更换其他银行卡重试",
                    1015: "该卡暂不支持支付，请稍后再试",
                    1016: "交易超时",
                    1017: "交易金额不能大于最大限额",
                    1018: "交易金额不能低于最小限额",
                    1019: "交易金额超过渠道当月限额",
                    1020: "交易金额为空",
                    1021: "交易金额有误错误",
                    1022: "交易失败，风险受限",
                    1023: "交易失败，详情请咨询您的发卡行",
                    1024: "金额格式有误",
                    1025: "仅支持个人银行卡支付",
                    1026: "您的银行卡不支持该业务，请与发卡行联系",
                    1027: "请核对个人身份证信息",
                    1028: "请核对您的订单号",
                    1029: "请核对您的个人信息",
                    1030: "请核对您的银行卡信息",
                    1031: "请核对您的银行信息",
                    1032: "请核对您的银行预留手机号",
                    1033: "未开通无卡支付或交易超过限额，详情请咨询您的发卡行",
                    1034: "信息错误，请核对",
                    1035: "银行户名不能为空",
                    1036: "银行卡未开通银联在线支付，请向银行咨询",
                    1037: "银行名称无效",
                    1038: "银行系统繁忙，交易失败，请稍后再提交",
                    1039: "银行账号不能为空",
                    1040: "余额不足",
                    1041: "证件号错误，请核实",
                    1042: "证件号码不能为空",
                    1043: "证件类型与卡号不符",
                    1044: "银行账户余额不足"
                };
                // ngDialog.closeAll();
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '（' + msg + '）' + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
                // setTimeout(function () {
                //     ngDialog.closeAll();
                //     $state.go('recharge', null, {
                //         reload: true
                //     });
                // }, 1500);
            };
        })
        .filter('充值成功', function (ngDialog, $filter, $state, $localStorage) {
            return function (scope, type) {
                ngDialog.closeAll();
                var msg = '';
                if (type == 'ing') {
                    msg = '<p class="success-msg">充值处理中，请稍后查询处理结果</p>';
                } else {
                    msg = '<h3 class="success-msg">充值成功</h3><main>您已成功充值' + $filter('currency')(scope.successAmount, '') + '元<br>预计将在10分钟内到账，请耐心等待。</main>';
                }
                ngDialog.open({
                    template: msg,
                    showClose: false,
                    closeByDocument: false,
                    plain: true
                });
                setTimeout(function () {
                    ngDialog.closeAll();
                    if (scope.changcheng2 == true) {
                        $state.go('changcheng2');
                    }
                    else if ($localStorage.cp != undefined) {
                        if ($localStorage.cp.prize != undefined) {
                            $state.go('tjsinvestment', { wap: true, pid: $localStorage.cp.info.id });
                        }
                        else {
                            $state.go('investment');
                        }
                    } else {
                        $state.go('main.myaccountHome');
                    }

                }, 1500);
            };
        })
        .filter('isCPtradeType', function () {
            return function (tradeType) {
                var t = {
                    1: "充值",
                    2: "提现",
                    3: "投资",
                    4: "活动",
                    5: "提现手续费",
                    6: "回款",
                    7: "体验金"
                };
                return t[tradeType];
            };
        })
        .filter('isBankType', function () {
            return function (tradeType) {
                var t = {
                    1: "中国工商银行",
                    2: "中国农业银行",
                    3: "中国建设银行",
                    4: "中国银行",
                    5: "中国邮政储蓄银行",
                    6: "招商银行",
                    7: "兴业银行",
                    8: "中国光大银行",
                    9: "广发银行",
                    10: "平安银行",
                    11: "中国民生银行",
                    12: "浦发银行",
                    13: "中信银行",
                    14: "上海银行",
                    15: "北京银行",
                    16: "交通银行",
                    17: "兰州银行",
                    18: "华夏银行"
                };
                return t[tradeType];
            };
        })
        .filter('isCPstatus', function () {
            return function (status) {
                var t = {
                    1: "处理中",
                    2: "失败",
                    3: "成功",
                    4: "募集中",
                    5: "待续投"
                };
                return t[status];
            };
        })
        .filter('time-out', function ($rootScope, $interval) {
            return function (status) {
                $scope.timer = interval(function () {
                }, 1000);
            };
        })
        // 单选
        .filter('isBool', function ($rootScope, $interval) {
            return function (bool) {
                // console.log(bool);
                if (bool) {
                    bool = false;
                } else {
                    bool = true;
                }
                return bool;
            };
        })
        /*×××××××××××××××××××××××××× over ×××××××××××××××××××××××××××××××*/
        //  倒计时弹窗
        .filter('倒计时弹窗', function (ngDialog) {
            return function (scope) {
                ngDialog.open({
                    template: '../../template/dialog/countdown-dialog.html',
                    className: 'special-dialog-wrap ngdialog-theme-default',
                    scope: scope,
                    closeByDocument: false,
                    plain: false,
                    showClose: false
                });
            };
        })
        //  幸运码弹窗
        .filter('幸运码弹窗', function (ngDialog, $timeout) {
            return function (scope) {
                ngDialog.open({
                    template: '../../template/dialog/special-code-dialog.html',
                    className: 'special-dialog-wrap ngdialog-theme-default',
                    scope: scope,
                    closeByDocument: false,
                    plain: false,
                    showClose: false
                });
                $timeout(function () {
                    $('.goToApp').attr('href', 'jsmp://page=9?pid=' + scope.product.id + '&ptype=' + scope.product.type + '&atid=1');
                })
            };
        })
        .filter('prizeStatus', function () {
            return function (code) {
                var map = {
                    0: '未开奖',
                    1: '未中奖',
                    2: '已中奖'
                };
                if (code >= 0 && map[code]) { return map[code] };
                return '无数据';
            }
        })
        .filter('phonesub', function () {
            return function (str, str2) {
                return str ? str.substring(0, 3) + str2 + str.substring(7) : '';
            }
        })
        .filter('percent', function () {
            return function (str) {
                var r = /^[1-9]?[0-9]*\.[1-9]*$/;
                var t = r.test(str);
                if (str < 1) {
                    return str * 10 + "‰";
                } else {
                    if (!t) {
                        str = parseInt(str);
                    }
                    return str + "%";
                }
            }
        })
        .filter('currency2', function () {
            return function (str) {
                if (str) {
                    str += "";
                    if (str.indexOf('.') != -1 && str.length - 1 - str.indexOf('.') > 2) {
                        str = str.toFixed(2);
                    } else if (str.indexOf('.') != -1 && str.length - 1 - str.indexOf('.') < 2) {
                        str += "0";
                    } else if (str.indexOf('.') == -1) {
                        str += ".00";
                    }
                    return str;
                } else {
                    return "-";
                }
            }
        })
        .filter('stringsub', function () {
            return function (str, num) {
                if (str) {
                    var len = 0, str2 = "";
                    for (var i = 0; i < str.length; i++) {
                        if (str.charCodeAt(i) > 127 || str.charCodeAt(i) == 94) {
                            len += 2;
                        } else {
                            len++;
                        }
                        if (len > num) {
                            str2 = str.substring(0, i - 1) + "...";
                            break;
                        } else {
                            str2 = str;
                        }
                    }
                    return str2;
                } else {
                    return "";
                }
            }
        })
        .filter('asHtml', function ($sce) {
            return function (data) {
                return $sce.trustAsHtml(data);
            }
        })
        .filter('getdate', function () {
            return function (date, i) {
                return new Date(new Date(date).getTime() + (86400000 * i));
            }
        })
        .filter('serverCenter', function (ngDialog) {
            return function (scope) {
                scope.closeDialog = function (bool) {
                    scope.isSubmit = false;
                    ngDialog.closeAll();
                };
                ngDialog.open({
                    template: '../../template/dialog/server-dialog.html',
                    className: 'recharge-dialog-wrap ngdialog-theme-default',
                    scope: scope,
                    closeByDocument: true,
                    showClose: false,
                });
            };
        })
        .filter('reminder', function (ngDialog, $filter) {
            return function (msg) {
                var error = {
                    1001: "敬请期待",
                };
                ngDialog.open({
                    template: '<p class="error-msg">' + error[msg] + '</p>',
                    showClose: false,
                    closeByDocument: true,
                    plain: true
                });
            };
        })
        .filter('wechatReminder', function (ngDialog) {
            return function (scope) {
                scope.closeDialog = function (bool) {
                    scope.isSubmit = false;
                    ngDialog.closeAll();
                };
                ngDialog.open({
                    template: '../../template/dialog/wechat-dialog.html',
                    className: 'recharge-dialog-wrap ngdialog-theme-default',
                    scope: scope,
                    closeByDocument: true,
                    showClose: false,
                });
            };
        })
        .filter('invest-coupon-dialog', function (ngDialog) {
            return function (scope) {
                scope.closeDialog = function (bool) {
                    scope.isSubmit = false;
                    ngDialog.closeAll();
                };
                ngDialog.open({
                    template: '../../template/dialog/invest-coupon-dialog.html',
                    className: 'recharge-dialog-wrap ngdialog-theme-default',
                    scope: scope,
                    closeByDocument: true,
                    showClose: false,
                });
            };
        })
        /*活动-errorCode*/
        .filter('活动信息', function (ngDialog, $filter) {
            return function (code, scope, YorN) {
                var error = {
                    1001: "活动尚未开始，请耐心等待",
                    1002: "活动已结束"
                };
                scope.msg = {};
                scope.msg.text = error[code];

                if (YorN == 'y') {
                    scope.msg = {};
                    //scope.msg.btnYes = '确定';
                    // scope.msg.btnNo='忽略';
                    scope.msg.title = '通知：';
                    scope.msg.text = error[code];
                    $filter('提示跳转')('template/error/dlog.html', scope);
                } else {
                    return error[code];
                }
            };
        })
        .filter('nameformat', function () {
            return function (name) {
                if (name.length === 2) {
                    return name.substring(0, 1) + '*'
                } else if (name.length > 2) {
                    return name.substring(0, 1) + '*' + name.substring(name.length - 1)
                } else {
                    return name
                }
            }
        })
        .filter('protocolFilter', function () {
            return function () {
                return window.location.protocol
            }
        })
        .filter('微信邀请分享-渠道', function () {
            return function (linkstr) {
                setTimeout(function () {
                    var urlstr = window.location.href;
                    if (urlstr === 'https://m.zhuomilicai.com' || urlstr === 'https://m.zhuomilicai.com/') {
                        urlstr = 'https://m.zhuomilicai.com/main/home'
                    }
                    $.ajax({
                        url: '/product/signWeChat.dos',
                        type: 'post',
                        data: { url: urlstr, version: '2.0.0', channel: '3' },
                        success: function (data) {
                            if (data.success) {
                                wx.config({
                                    debug: false,
                                    appId: data.map.appid,
                                    timestamp: data.map.timestamp,
                                    nonceStr: data.map.noncestr,
                                    signature: data.map.sign,
                                    jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']
                                });
                                wx.ready(function () {
                                    wx.onMenuShareTimeline({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/zhuomireg?wap=true&' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/invite.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareAppMessage({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/zhuomireg?wap=true&' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/invite.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareQQ({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/zhuomireg?wap=true&' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/invite.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareWeibo({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/zhuomireg?wap=true&' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/invite.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareQZone({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/zhuomireg?wap=true&' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/invite.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                })
                            };
                        }
                    });
                })
            }
        })
        .filter('微信邀请分享-邀请', function () {
            return function (linkstr) {
                setTimeout(function () {
                    var urlstr = window.location.href;
                    if (urlstr === 'https://m.zhuomilicai.com' || urlstr === 'https://m.zhuomilicai.com/') {
                        urlstr = 'https://m.zhuomilicai.com/main/home'
                    }
                    $.ajax({
                        url: '/product/signWeChat.dos',
                        type: 'post',
                        data: { url: urlstr, version: '2.0.0', channel: '3' },
                        success: function (data) {
                            if (data.success) {
                                wx.config({
                                    debug: false,
                                    appId: data.map.appid,
                                    timestamp: data.map.timestamp,
                                    nonceStr: data.map.noncestr,
                                    signature: data.map.sign,
                                    jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']
                                });
                                wx.ready(function () {
                                    wx.onMenuShareTimeline({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/inviteReg?' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareAppMessage({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/inviteReg?' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareQQ({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/inviteReg?' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareWeibo({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/inviteReg?' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                    wx.onMenuShareQZone({
                                        title: '啄米理财，国企背景',
                                        desc: '注册就送618红包+99999体验金', // 分享描述
                                        link: 'https://m.zhuomilicai.com/inviteReg?' + linkstr, // 分享链接
                                        imgUrl: 'https://m.zhuomilicai.com/images/wechat-share/inviteReg.png', // 分享图标
                                        success: function () {
                                            alert('分享成功！');
                                        },
                                        cancel: function () {
                                            alert('您取消了分享！');
                                        }
                                    });
                                })
                            };
                        }
                    });
                })

            }
        })
});
/* 
* @Author: lee
* @Date:   2016-01-12 21:01:57
* @Last Modified by:   anchen
* @Last Modified time: 2016-01-13 11:14:45
*/


define('urlFilters',['app'], function (app) {

    app
        /*app接口*/
        .filter('getUrl', function () {
            return function (name) {
                var base = '/'
                var urls = {
                    //啄米活动
                    '啄米返现活动': base + 'activity/activeAwardList.dos',
                    //啄米上线30天标接口
                    '30天标': base + 'product/ActiveProductId.dos',
                    // 首页
                    "shouYe": base + "index/index.dos",
                    "myacc": base + "accountIndex/info.dos",
                    "我的红包": base + "activity/index.dos",
                    "拆红包": base + "member/getOpenRed.dos",
                    /*注册接口*/
                    "getyzm": base + "register/sendRegMsg.dos",
                    "getPhone": base + "register/existMobilePhone.dos",
                    "zuce": base + "register/reg.dos",
                    "picCode": base + "login/validateCode.dos",
                    "信息认证": base + "memberSetting/sendBankMsg.dos",
                    "实名认证": base + "memberSetting/bankInfoVerify.dos",
                    "充值": base + "recharge/index.dos",
                    "创建订单": base + "recharge/createPayOrder.dos",
                    "充值验证码": base + "recharge/sendRechargeSms.dos",
                    "认证充值": base + "recharge/goPay.dos",
                    "goRecharge": base + "recharge/wapRechge.dos",

                    "提现": base + "withdrawals/index.dos",
                    "提现申请": base + "withdrawals/addWithdrawals.dos",
                    /*我的*/
                    "我的资产": base + "accountIndex/myFunds.dos",
                    "站内信": base + "messageCenter/getMessage.dos",

                    "我的投资": base + "investCenter/productList.dos",

                    "我的明细": base + "assetRecord/index.dos",
                    "我的信息": base + "memberSetting/index.dos",
                    "我的银行卡": base + "memberSetting/myBankInfo.dos",
                    "我的消息": base + "messageCenter/getMessage.dos",

                    /*登录*/
                    "login": base + "login/doLogin.dos",
                    "短信验证": base + "memberSetting/sendForgetTpwdCode.dos",
                    "完成设置交易密码提交": base + "memberSetting/updateTpwdBySms.dos",
                    "判断用户状态": base + "memberSetting/index.dos",

                    /*产品*/
                    "cplist": base + "product/list.dos",
                    "cpDetail": base + "product/detail.dos",
                    "cpPicAndInvest": base + "product/detail_info.dos",
                    "产品可用全部优惠券": base + "activity/usable.dos",
                    "产品可用优惠券": base + "activity/getUsableCoupon.dos",
                    "购买产品": base + "product/invest.dos",

                    "交易密码重置短信验证码": base + "memberSetting/sendForgetTpwdCode.dos",
                    "设置交易密码": base + "memberSetting/updateTpwdBySms.dos",

                    "登录密码重置短信验证码": base + "memberSetting/forgetPwdSmsCode.dos",
                    "设置登录密码": base + "memberSetting/updateLoginPassWord.dos",
                    "意见反馈": base + "system/feedback.dos",
                    "银行限额列表": base + "recharge/getBankQuotaList.dos",
                    '我的邀请列表': base + "activity/myInvitation.dos",

                    "好友互推": base + "recommend/myFriendInvest.dos",
                    'selectInvest': base + 'product/selectInvest.dos',
                    '回款记录': base + "investCenter/repayInfoDetail.dos",
                    'selectProductInfo': base + "product/selectProductInfoRecommend.dos",

                    '我的幸运码': base + "product/getMyLuckCodes.dos",
                    'getMyPrizeRecords': base + 'activity/getMyPrizeRecords.dos',
                    '活动标详情': base + "product/getNewActivityProduct.dos",
                    '活动开奖结果': base + "activity/getActivityPrizeResult.dos",
                    'getPrizeInfoByProductId': base + 'activity/getPrizeInfoByProductId.dos',
                    'zadan': base + 'activity/getRandomCouponByProductId.dos',
                    'signWeChat': base + 'product/signWeChat.dos',
                    index: base + "",
                    'getActivityFriendConfigAll': 'activity/getActivityFriendConfigAll.dos',
                    'getActivityFriendConfig': 'activity/getActivityFriendConfig.dos',
                    'getActivityFriendStatistics': 'activity/getActivityFriendStatistics.dos',
                    'getTheRewards': 'assetRecord/getTheRewards.dos',
                    'getPromoteRedelivery': 'member/getPromoteRedelivery.dos',
                    'getUse': 'member/getUse.dos',
                    'getReservation': 'product/getReservation.dos',
                    'myInvitation': 'activity/myInvitation.dos',
                    'getContinueReward': 'product/getContinueReward.dos',
                    'addContinueReward': 'product/addContinueReward.dos',
                    // 双蛋活动
                    '双旦活动': base + 'activity/doubleAggIndex.dos',
                    '拆双旦红包': base + 'activity/tearOpen.dos',
                    '双旦分享': base + 'activity/dobuleEggShare.dos',
                    // 年末豪礼投即送活动
                    'tjs活动页': base + 'activity/investSendPrizeIndex.dos',
                    'tjs产品奖品': base + 'activity/selectProductPrize.dos',
                    'tjs投资记录': base + 'activity/accountInvestLogs.dos',
                    'tjs修改地址': base + 'member/updateReceiptAddress.dos',
                    'tjs添加地址': base + 'member/insertReceiptAddress.dos',
                    'tjs获取地址': base + 'member/getReceiptAddress.dos',
                    'tjs添加预约': base + 'activity/insertPrizeInfo.dos',
                    'tjs许愿': base + 'activity/wishCommit.dos',
                    // 活动聚合页
                    '活动聚合': base + 'activity/getAllActivity.dos',
                    // 关于我们
                    '网站公告': base + 'aboutus/newsInformationList.dos',
                    '公告详情': base + 'aboutus/newsDetails.dos',
                    // 长城宽带落地页
                    'getGreatWallInfo': base + 'activity/getGreatWallInfo.dos',
                    // 邀请好友4-返现前5
                    '返现前5': base + 'activity/getTopFive.dos',
                    // 体验标
                    '体验标详情': base + 'product/experienceDetail.dos',
                    '体验标投资': base + 'product/experienceInvest.dos',
                    // 春节活动
                    '压岁钱分享页': base + 'jsActivityLuckMoney/getshaerUserName.dos',
                    '领压岁钱': base + 'jsActivityLuckMoney/getJsActivityLuckyMoney.dos',
                    // 元宵活动
                    '吃元宵': base + 'activity/eatGlutinous.dos',
                    '元宵领取记录': base + 'activity/getEatGlutinousLog.dos',
                    // 新手标推广页排行榜
                    '新手标推广页排行榜': base + 'activity/getNoviceListAndCount.dos',
                    // iPhone7推广页
                    'iPhoneSEM': base + 'activity/iPhoneSEM.dos',
                    // 新体验金推广页
                    'lastRegMember': base + 'activity/lastRegMember.dos',
                    // 活动聚合页开放日往期列表
                    'getOpenDayList': base + 'activity/getOpenDayList.dos',
                    // 开放日报名
                    '开放日报名': base + 'activity/SignUp.dos',
                    // 开放日活动内容
                    'getOpenDayDetail': base + 'activity/getOpenDayDetail.dos',
                    // 开放日活动详情页
                    'getOpenDayArticleDetail': base + 'activity/getOpenDayArticleDetail.dos',
                    // 邀请好友三重礼top10
                    '邀请好友三重礼top10': base + 'activity/getRankingList.dos',
                    // 我的邀请页面
                    '我的邀请': base + 'activity/firstInvestList.dos',
                    // 推广页获取个人信息
                    '推广页账户': base + 'activity/getMyAccount.dos',
                    // app2.0翻牌领取记录
                    'app2.0翻牌领取记录': base + 'activity/flopIndex.dos',
                    // app2.0翻牌
                    'app2.0翻牌': base + 'activity/flop.dos',
                    // 公益活动列表
                    '公益活动列表': base + 'activity/offlineActivityList.dos',
                    // 公益活动内容
                    '公益活动内容': base + 'activity/offlineActivityDetail.dos',
                    // 518理财节
                    '518理财节': base + 'activity/activityMay18d.dos',
                    // 518产品详情
                    '518产品详情': base + 'product/getPorductList.dos',
                    // 活动标列表banner
                    '活动标列表banner': base + 'product/activityPrizeBanner.dos',
                    // 富友支付接口
                    'fuyoupaytest': 'http://www-1.fuiou.com:18670/mobile_pay/h5pay/payAction.pay',
                    'fuyoupay': 'https://mpay.fuiou.com:16128/h5pay/payAction.pay',
                    'selectCity': base + 'recharge/getCityList.dos',
                    'raisedAndRepayedNum': base + 'product/raisedAndRepayedNum.dos',

                    'pastProductList': base + 'product/productList.dos',


                    'julyActiveAwardRank': base + 'activity/julyActiveAwardRank.dos',

                    'leapMonthActive': base + 'product/leapMonthActive.dos',
                    'leapMonthStatist': base + 'product/leapMonthStatist.dos',

                    'summerRedpaperSendActive': base + 'product/summerRedpaperSendActive.dos',
                    'summerRedpaperSendList': base + 'activity/summerRedpaperSendList.dos',
                    'summerRedpaperSend': base + 'activity/summerRedpaperSend.dos',


                    'moneySeasonRedSend': base + 'activity/moneySeasonRedSend.dos',
                    'getMyInvestStatistics': base + 'activity/getMyInvestStatistics.dos',
                    'moneySeasonRedSendActive': base + 'product/moneySeasonRedSendActive.dos',

                    'qixiActivityIndex': base + 'activity/qixiActivityIndex.dos',
                    'qixiActivityLottery': base + 'activity/qixiActivityLottery.dos',
                    'qixiActivityWinningMembers': base + 'activity/qixiActivityWinningMembers.dos',
                    'myQixiActivityGifts': base + 'activity/myQixiActivityGifts.dos',
                    'insertDeliveryAddress': base + 'member/insertDeliveryAddress.dos',

                    'financingInvestStatistics': base + 'activity/financingInvestStatistics.dos',
                    '双十二活动': base + 'statistics/decemberTwelve.dos',
                    // 元旦活动
                    "一键领取": base + 'holidaysActivity/newYearRedBag.dos',
                    "奖品兑换":base + 'holidaysActivity/newYearReward.dos',
                    "积分显示": base + 'holidaysActivity/getMemberPoint.dos',
                };
                return urls[name];
            }
        })
});
/*
  angular-md5 - v0.1.8 
  2015-11-17
*/
define('md5js',["angular"
       ],function(angular){
/* commonjs package manager support (eg componentjs) */
// if (typeof module !== "undefined" && typeof exports !== "undefined" && module.exports === exports) {
//   module.exports = "angular-md5";
// }
// (function(angular) {
  angular.module("angular-md5", [ "gdi2290.md5" ]);
  angular.module("ngMd5", [ "gdi2290.md5" ]);
  angular.module("gdi2290.md5", [ "gdi2290.gravatar-filter", "gdi2290.md5-service", "gdi2290.md5-filter" ]);
  "use strict";
  angular.module("gdi2290.gravatar-filter", []).filter("gravatar", [ "md5", function(md5) {
    var cache = {};
    return function(text, defaultText) {
      if (!cache[text]) {
        defaultText = defaultText ? md5.createHash(defaultText.toString().toLowerCase()) : "";
        cache[text] = text ? md5.createHash(text.toString().toLowerCase()) : defaultText;
      }
      return cache[text];
    };
  } ]);
  "use strict";
  angular.module("gdi2290.md5-filter", []).filter("md5", [ "md5", function(md5) {
    return function(text) {
      return text ? md5.createHash(text.toString().toLowerCase()) : text;
    };
  } ]);
  "use strict";
  angular.module("gdi2290.md5-service", []).factory("md5", [ function() {
    var md5 = {
      createHash: function(str) {
        if (null === str) {
          return null;
        }
        var xl;
        var rotateLeft = function(lValue, iShiftBits) {
          return lValue << iShiftBits | lValue >>> 32 - iShiftBits;
        };
        var addUnsigned = function(lX, lY) {
          var lX4, lY4, lX8, lY8, lResult;
          lX8 = lX & 2147483648;
          lY8 = lY & 2147483648;
          lX4 = lX & 1073741824;
          lY4 = lY & 1073741824;
          lResult = (lX & 1073741823) + (lY & 1073741823);
          if (lX4 & lY4) {
            return lResult ^ 2147483648 ^ lX8 ^ lY8;
          }
          if (lX4 | lY4) {
            if (lResult & 1073741824) {
              return lResult ^ 3221225472 ^ lX8 ^ lY8;
            } else {
              return lResult ^ 1073741824 ^ lX8 ^ lY8;
            }
          } else {
            return lResult ^ lX8 ^ lY8;
          }
        };
        var _F = function(x, y, z) {
          return x & y | ~x & z;
        };
        var _G = function(x, y, z) {
          return x & z | y & ~z;
        };
        var _H = function(x, y, z) {
          return x ^ y ^ z;
        };
        var _I = function(x, y, z) {
          return y ^ (x | ~z);
        };
        var _FF = function(a, b, c, d, x, s, ac) {
          a = addUnsigned(a, addUnsigned(addUnsigned(_F(b, c, d), x), ac));
          return addUnsigned(rotateLeft(a, s), b);
        };
        var _GG = function(a, b, c, d, x, s, ac) {
          a = addUnsigned(a, addUnsigned(addUnsigned(_G(b, c, d), x), ac));
          return addUnsigned(rotateLeft(a, s), b);
        };
        var _HH = function(a, b, c, d, x, s, ac) {
          a = addUnsigned(a, addUnsigned(addUnsigned(_H(b, c, d), x), ac));
          return addUnsigned(rotateLeft(a, s), b);
        };
        var _II = function(a, b, c, d, x, s, ac) {
          a = addUnsigned(a, addUnsigned(addUnsigned(_I(b, c, d), x), ac));
          return addUnsigned(rotateLeft(a, s), b);
        };
        var convertToWordArray = function(str) {
          var lWordCount;
          var lMessageLength = str.length;
          var lNumberOfWords_temp1 = lMessageLength + 8;
          var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;
          var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;
          var lWordArray = new Array(lNumberOfWords - 1);
          var lBytePosition = 0;
          var lByteCount = 0;
          while (lByteCount < lMessageLength) {
            lWordCount = (lByteCount - lByteCount % 4) / 4;
            lBytePosition = lByteCount % 4 * 8;
            lWordArray[lWordCount] = lWordArray[lWordCount] | str.charCodeAt(lByteCount) << lBytePosition;
            lByteCount++;
          }
          lWordCount = (lByteCount - lByteCount % 4) / 4;
          lBytePosition = lByteCount % 4 * 8;
          lWordArray[lWordCount] = lWordArray[lWordCount] | 128 << lBytePosition;
          lWordArray[lNumberOfWords - 2] = lMessageLength << 3;
          lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;
          return lWordArray;
        };
        var wordToHex = function(lValue) {
          var wordToHexValue = "", wordToHexValue_temp = "", lByte, lCount;
          for (lCount = 0; lCount <= 3; lCount++) {
            lByte = lValue >>> lCount * 8 & 255;
            wordToHexValue_temp = "0" + lByte.toString(16);
            wordToHexValue = wordToHexValue + wordToHexValue_temp.substr(wordToHexValue_temp.length - 2, 2);
          }
          return wordToHexValue;
        };
        var x = [], k, AA, BB, CC, DD, a, b, c, d, S11 = 7, S12 = 12, S13 = 17, S14 = 22, S21 = 5, S22 = 9, S23 = 14, S24 = 20, S31 = 4, S32 = 11, S33 = 16, S34 = 23, S41 = 6, S42 = 10, S43 = 15, S44 = 21;
        x = convertToWordArray(str);
        a = 1732584193;
        b = 4023233417;
        c = 2562383102;
        d = 271733878;
        xl = x.length;
        for (k = 0; k < xl; k += 16) {
          AA = a;
          BB = b;
          CC = c;
          DD = d;
          a = _FF(a, b, c, d, x[k + 0], S11, 3614090360);
          d = _FF(d, a, b, c, x[k + 1], S12, 3905402710);
          c = _FF(c, d, a, b, x[k + 2], S13, 606105819);
          b = _FF(b, c, d, a, x[k + 3], S14, 3250441966);
          a = _FF(a, b, c, d, x[k + 4], S11, 4118548399);
          d = _FF(d, a, b, c, x[k + 5], S12, 1200080426);
          c = _FF(c, d, a, b, x[k + 6], S13, 2821735955);
          b = _FF(b, c, d, a, x[k + 7], S14, 4249261313);
          a = _FF(a, b, c, d, x[k + 8], S11, 1770035416);
          d = _FF(d, a, b, c, x[k + 9], S12, 2336552879);
          c = _FF(c, d, a, b, x[k + 10], S13, 4294925233);
          b = _FF(b, c, d, a, x[k + 11], S14, 2304563134);
          a = _FF(a, b, c, d, x[k + 12], S11, 1804603682);
          d = _FF(d, a, b, c, x[k + 13], S12, 4254626195);
          c = _FF(c, d, a, b, x[k + 14], S13, 2792965006);
          b = _FF(b, c, d, a, x[k + 15], S14, 1236535329);
          a = _GG(a, b, c, d, x[k + 1], S21, 4129170786);
          d = _GG(d, a, b, c, x[k + 6], S22, 3225465664);
          c = _GG(c, d, a, b, x[k + 11], S23, 643717713);
          b = _GG(b, c, d, a, x[k + 0], S24, 3921069994);
          a = _GG(a, b, c, d, x[k + 5], S21, 3593408605);
          d = _GG(d, a, b, c, x[k + 10], S22, 38016083);
          c = _GG(c, d, a, b, x[k + 15], S23, 3634488961);
          b = _GG(b, c, d, a, x[k + 4], S24, 3889429448);
          a = _GG(a, b, c, d, x[k + 9], S21, 568446438);
          d = _GG(d, a, b, c, x[k + 14], S22, 3275163606);
          c = _GG(c, d, a, b, x[k + 3], S23, 4107603335);
          b = _GG(b, c, d, a, x[k + 8], S24, 1163531501);
          a = _GG(a, b, c, d, x[k + 13], S21, 2850285829);
          d = _GG(d, a, b, c, x[k + 2], S22, 4243563512);
          c = _GG(c, d, a, b, x[k + 7], S23, 1735328473);
          b = _GG(b, c, d, a, x[k + 12], S24, 2368359562);
          a = _HH(a, b, c, d, x[k + 5], S31, 4294588738);
          d = _HH(d, a, b, c, x[k + 8], S32, 2272392833);
          c = _HH(c, d, a, b, x[k + 11], S33, 1839030562);
          b = _HH(b, c, d, a, x[k + 14], S34, 4259657740);
          a = _HH(a, b, c, d, x[k + 1], S31, 2763975236);
          d = _HH(d, a, b, c, x[k + 4], S32, 1272893353);
          c = _HH(c, d, a, b, x[k + 7], S33, 4139469664);
          b = _HH(b, c, d, a, x[k + 10], S34, 3200236656);
          a = _HH(a, b, c, d, x[k + 13], S31, 681279174);
          d = _HH(d, a, b, c, x[k + 0], S32, 3936430074);
          c = _HH(c, d, a, b, x[k + 3], S33, 3572445317);
          b = _HH(b, c, d, a, x[k + 6], S34, 76029189);
          a = _HH(a, b, c, d, x[k + 9], S31, 3654602809);
          d = _HH(d, a, b, c, x[k + 12], S32, 3873151461);
          c = _HH(c, d, a, b, x[k + 15], S33, 530742520);
          b = _HH(b, c, d, a, x[k + 2], S34, 3299628645);
          a = _II(a, b, c, d, x[k + 0], S41, 4096336452);
          d = _II(d, a, b, c, x[k + 7], S42, 1126891415);
          c = _II(c, d, a, b, x[k + 14], S43, 2878612391);
          b = _II(b, c, d, a, x[k + 5], S44, 4237533241);
          a = _II(a, b, c, d, x[k + 12], S41, 1700485571);
          d = _II(d, a, b, c, x[k + 3], S42, 2399980690);
          c = _II(c, d, a, b, x[k + 10], S43, 4293915773);
          b = _II(b, c, d, a, x[k + 1], S44, 2240044497);
          a = _II(a, b, c, d, x[k + 8], S41, 1873313359);
          d = _II(d, a, b, c, x[k + 15], S42, 4264355552);
          c = _II(c, d, a, b, x[k + 6], S43, 2734768916);
          b = _II(b, c, d, a, x[k + 13], S44, 1309151649);
          a = _II(a, b, c, d, x[k + 4], S41, 4149444226);
          d = _II(d, a, b, c, x[k + 11], S42, 3174756917);
          c = _II(c, d, a, b, x[k + 2], S43, 718787259);
          b = _II(b, c, d, a, x[k + 9], S44, 3951481745);
          a = addUnsigned(a, AA);
          b = addUnsigned(b, BB);
          c = addUnsigned(c, CC);
          d = addUnsigned(d, DD);
        }
        var temp = wordToHex(a) + wordToHex(b) + wordToHex(c) + wordToHex(d);
        return temp.toLowerCase();
      }
    };
    return md5;
  } ]);
// })(angular);

}) ;
	
	var effects = ['fade', 'scrollX', 'scrollY'];
	
	// Slider构造函数
	function Slider(config) {
	
		// 将用户配置和默认配置合并后得到最终配置赋给slider对象
		// 参考jQuery.extend的用法
		this.config = $.extend({}, Slider._defaults, config);
		
		// 根据config进行设置（比如显示默认，设置循环播放，设置按钮）
		this.element = $(this.config.element).eq(0); // 只取第一个元素，传入选择器或者jq对象都可以
		this.panels = this.element.children();

		if (!this.element.length || this.panels.length <= 1) {
			return ;
		}
		
		this.initPanels();
		this.setTriggers();
		this.addViewArea(this.element);
		this.display(this.config.active);
		if (this.config.autoPlay) {
			this.autoPlay();
		}
	}
	
	// 默认设置
	Slider._defaults = {
		element: '',
		effect: 'fade',
		autoPlay: true,
		circular: true,
		interval: 3000,
		duration: 800,
		triggerWrap: '',
		triggerType: 'hover',
		active: 0,
		onChange: function(index) {}
	};
	
	Slider.prototype = {
		
		// 重置构造函数
		constructor: Slider,
		
		// 根据配置的effect初始panels样式
		initPanels: function() {
			var _effect = this.config.effect;
			_effect = effects.join('').indexOf(_effect) > -1 ? _effect : effects[0];
			
			switch (_effect) {
				case 'fade':
					this.panels.css({
						'position': 'absolute'
					}).eq(this.config.active).show().siblings().hide();
					break;
				case 'scrollX':
					this.panels.css('float', 'left');
					this.gap = this.panels.eq(0).clone().attr('role', 'clone').appendTo(this.element).width();
					this.direct = 'left';
					this.element.css('width', this.gap * (this.panels.length + 1));
					break;
				case 'scrollY':
					this.gap = this.panels.eq(0).clone().attr('role', 'clone').appendTo(this.element).height();
					this.direct = 'top';
					this.element.css('height', 'auto');
					break;
				// no default		
			}
		},
		
		// 显示第index个元素
		display: function(index, callback) {
			var that = this,
				_config = this.config,
				duration = _config.duration,
				target = this.direct ? this.element : this.panels.eq(index),
				props = {},
				activeIndex;
			
			if (typeof index === 'undefined' || index === this.active) {
				return;
			}

			if (!this.direct) {
				if (typeof this.active !== 'undefined') {
					this.panels.eq(this.active).fadeOut(duration);
				}
				props['opacity'] = 'show';
			} else {
				props['margin-' + this.direct] = (- this.gap * index);
			}
			
			if (that.direct && (index === that.panels.length)) {
				activeIndex = 0;
			} else {
				activeIndex = index;
			}
			
			that.triggers && that.triggers.removeClass().eq(activeIndex).addClass('active');
			that.active = activeIndex;
			
			if ($.isFunction(_config.onChange)) {
				_config.onChange.call(that, activeIndex);
			}
			// 执行动画
			this.anim = target.animate(props, duration, function() {
			
				that.anim = null;
	
				// 有回调则执行回调
				if ($.isFunction(callback)) {
					callback.call(that, index);
				}
			});
		},
		
		// 显示下一个元素
		displayNext: function() {
			var length = this.panels.length,
				next = this.direct ? this.active + 1 : (this.active + 1) % length;
			
			this.display(next, function() {
			
				// 滚动效果的时候，最后个执行完设置到初始位置
				if (this.direct && (next === length)) {
					this.element.css('margin-' + this.direct, 0);
				}
			});
		},
		
		// 显示前一个元素
		displayPrev: function() {
			var length = this.panels.length,
				active = this.active,
				prev = (active === 0 ? length - 1 : active - 1);
			
			// 重置到最后位置
			if (this.direct && active === 0) {
				this.element.css('margin-' + this.direct, - (length * this.gap)); 
			}
			
			this.display(prev);
		},
		
		// 自动播放
		autoPlay: function() {
			var that = this;
			if (!this._interval) {
				this._interval = setInterval(function() {
					that.displayNext();
				}, this.config.interval);
			}
		},
		
		// 暂停播放
		pause: function() {
			if (this._interval) {
				clearInterval(this._interval);
				this._interval = null;
			}
		},
		
		// 设置1，2，3…按钮
		setTriggers: function() {
			var $btnWrap = $(this.config.triggerWrap);
			if ($btnWrap.length) {
				var that = this,
					eventType = this.config.triggerType || 'hover',
					timer = null,
					str = '';
				for (var i = 0; i < this.panels.length; i++) {
					str += '<i data-rel="' + i + '">' + (i + 1) + '</i>';
				}
				this.triggers = $(str).appendTo($btnWrap);
				this.triggers[eventType](function() {
					var index = (+ this.getAttribute('data-rel'));
					timer && clearTimeout(timer);
					timer = setTimeout(function() {
						that.display(index);
						timer = null;
					}, 200);
				}).on('mouseleave', function() {
					timer && clearTimeout(timer);
				});
				
				this.addViewArea($btnWrap);
			}
		},
		
		// 设定区域停止播放
		addViewArea: function(elem) {
			var that = this,
				autoPlay = that.config.autoPlay;
			$(elem).on('mouseover', function() {
				autoPlay && that.pause();
			}).on('mouseout', function() {
				autoPlay && that.autoPlay();
			});	
		}
	};

define("slider", function(){});

define('router',['jweixin', "app", 'filter', 'urlFilters', 'md5js', 'slider'], function (wx, app) {
    var rootApp = app;
    rootApp.config([
        '$compileProvider',
        function ($compileProvider) {
            $compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|sms|jsmp):/);
            // Angular v1.2 之前使用 $compileProvider.urlSanitizationWhitelist(...)
        }
    ]);
    rootApp.factory('httpInterceptor', ['$q', '$injector', '$rootScope', function ($q, $injector, $rootScope) {
        $rootScope.version = '1.0.0';
        $rootScope.channel = '3';
        var httpInterceptor = {
            'responseError': function (response) {
                return $q.reject("response", response);
            },
            'response': function (response) {
                // response.headers["Access-Control-Allow-Origin"]= "*";
                // response.headers["Access-Control-Allow-Methods"]="POST";
                // response.headers["Access-Control-Allow-Headers"]="x-requested-with,content-type";
                return response;
            },
            'request': function (config) {
                config.headers['X-Requested-With'] = "XMLHttpRequest";
                config.headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';
                // config.headers['Content-Type'] = 'application/json; charset=UTF-8;';
                return config;
            },
            'requestError': function (config) {
                return $q.reject(config);
            }
        };
        return httpInterceptor;
    }]);
    rootApp.factory('isWeixin', function () {
        return function () {
            var ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                return true;
            } else {
                return false;
            }
        }
    });
    rootApp.run([
        '$rootScope',
        '$state',
        '$stateParams',
        '$localStorage',
        '$templateCache',
        function ($rootScope, $state, $stateParams, $localStorage, $templateCache) {
            $localStorage.pathUrl = [];
            $rootScope.$state = $state;
            $rootScope.$stateParams = $stateParams;
            $rootScope.maskHidde = false;
            $rootScope.maskError = false;
            $rootScope.appPath = '../';
            // var urlstr = window.location.href;
            // if (urlstr.split('.com').length < 2 || (urlstr.split('.com').length > 1 && urlstr.split('.com')[1] == "/")) {
            //     if (urlstr.substring(urlstr.length - 1, urlstr.length) == "/") {
            //         urlstr += "main/home";
            //     } else {
            //         urlstr += "/main/home";
            //     }
            // }
            // $.ajax({
            //     url: '/product/signWeChat.dos',
            //     type: 'post',
            //     data: { url: urlstr, version: '2.0.0', channel: '3' },
            //     success: function (data) {
            //         if (data.success) {
            //             wx.config({
            //                 debug: false,
            //                 appId: data.map.appid,
            //                 timestamp: data.map.timestamp,
            //                 nonceStr: data.map.noncestr,
            //                 signature: data.map.sign,
            //                 jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']
            //             });
            //         };
            //     }
            // });
        }
    ])
    rootApp.config(function ($httpProvider, $stateProvider, $urlRouterProvider, $locationProvider, $uiViewScrollProvider) {
        //用于改变state时跳至顶部
        // $uiViewScrollProvider.userAnchorScroll();
        $locationProvider.html5Mode(true);
        var date = "?date=" + new Date().getTime();

        // 默认进入先重定向
        var param = function (obj) {
            var query = '',
                name, value, fullSubName, subName, subValue, innerObj, i;

            for (name in obj) {
                value = obj[name];

                if (value instanceof Array) {
                    for (i = 0; i < value.length; ++i) {
                        subValue = value[i];
                        fullSubName = name + '[' + i + ']';
                        innerObj = {};
                        innerObj[fullSubName] = subValue;
                        query += param(innerObj) + '&';
                    }
                } else if (value instanceof Object) {
                    for (subName in value) {
                        subValue = value[subName];
                        fullSubName = name + '[' + subName + ']';
                        innerObj = {};
                        innerObj[fullSubName] = subValue;
                        query += param(innerObj) + '&';
                    }
                } else if (value !== undefined && value !== null)
                    query += encodeURIComponent(name) + '=' + encodeURIComponent(value) + '&';
            }

            return query.length ? query.substr(0, query.length - 1) : query;
        };
        // Override $http service's default transformRequest = 改变request payload 中的传参类型=str
        $httpProvider.defaults.transformRequest = [function (data) {
            return angular.isObject(data) && String(data) !== '[object File]' ? param(data) : data;
        }];
        $httpProvider.interceptors.push('httpInterceptor');

        $urlRouterProvider.otherwise('main/home');

        $stateProvider
            .state('main', {
                //abstract: true,
                url: '/main',
                templateUrl: 'template/page-home.html' + date
            })
            .state('main.home', {
                url: '/home',
                templateUrl: 'template/home.html' + date
            })
            .state('dl', {
                url: '/dl?returnurl',
                templateUrl: 'template/login/sign.html' + date
            })
            /*实名认证*/
            .state('certification', {
                url: '/certification?from',
                templateUrl: 'template/Certification/shiMingRengZheng.html' + date
            })
            /*静态页面*/
            .state('zhuce', {
                url: '/zhuce?recommPhone&myPhone&myToFrom&maskType?frompc&toWhere&recommCode',
                templateUrl: 'template/login/register.html' + date
            })
            // .state('newRegister', {
            //     url: '/newRegister?phone&from&recommPhone',
            //     templateUrl: 'template/pages/newRegister.html' + date
            // })
            //CP080
            // .state('CP080', {
            //     url: '/CP080',
            //     templateUrl: 'template/app/CP080.html' + date
            // })
            // .state('enroll', {
            //     url: '/enroll',
            //     templateUrl: 'template/login/enroll.html' + date
            // })
            // .state('whymeApp', {
            //     url: '/whymeApp',
            //     templateUrl: 'template/pages/whyme-app.html' + date
            // })
            .state('main.more', {
                url: '/more',
                templateUrl: 'template/pages/more.html' + date,
            })
            .state('GYWM', {
                url: '/GYWM?wap',
                templateUrl: 'template/pages/GYWM.html' + date,
                controller: "GYWMCtrl"
            })
            
            // .state('GYWM.ZJHY', {
            //     url: '/ZJHY?wap',
            //     templateUrl: 'template/pages/ZJHY.html' + date,
            //     controller: "GYWMCtrl"
            // })
            // .state('GYWM.HYSJ', {
            //     url: '/HYSJ?wap',
            //     templateUrl: 'template/pages/HYSJ.html' + date,
            //     controller: "GYWMCtrl"
            // })
            // .state('GYWM.LXWM', {
            //     url: '/LXWM?wap',
            //     templateUrl: 'template/pages/LXWM.html' + date,
            //     controller: "GYWMCtrl"
            // })
            .state('GSJS', {
                url: '/GSJS?wap',
                templateUrl: 'template/pages/GSJS.html' + date
            })
            .state('GSJS-ios', {
                url: '/GSJS-ios?wap',
                templateUrl: 'template/pages/GSJS-ios.html' + date
            })
            // .state('GDJS',{
            //     url: '/GDJS?wap',
            //     templateUrl: 'template/pages/GDJS.html'+date
            // })
            // .state('GLTD', {
            //     url: '/GLTD?wap',
            //     templateUrl: 'template/pages/GLTD.html' + date
            // })
            .state('GSZZ', {
                url: '/GSZZ?wap',
                templateUrl: 'template/pages/GSZZ.html' + date
            })
            .state('GSZZ-ios', {
                url: '/GSZZ-ios?wap',
                templateUrl: 'template/pages/GSZZ-ios.html' + date
            })
            .state('WZGG', {
                url: '/WZGG?wap',
                templateUrl: 'template/pages/WZGG.html' + date
            })
            .state('GGXQ', {
                url: '/GGXQ?wap&artiId&from',
                templateUrl: 'template/pages/GGXQ.html' + date
            })
            // .state('YYYZ', {
            //     url: '/YYYZ?wap',
            //     templateUrl: 'template/pages/YYYZ.html' + date
            // })
            // .state('GQJG', {
            //     url: '/GQJG?wap',
            //     templateUrl: 'template/pages/GQJG.html' + date
            // })
            .state('YJFK', {
                url: '/YJFK',
                templateUrl: 'template/pages/YJFK.html' + date
            })
            //汇元资讯
            .state('HYZX',{
                url:'/HYZX?wap',
                templateUrl:'template/pages/HYZX.html' + date
            })
            //理财课堂
            .state('LCKT',{
                url:'/LCKT?wap',
                templateUrl:'template/pages/LCKT.html' + date
            })
            //信息披露
            .state('XXPL',{
                url:'/XXPL?wap',
                templateUrl:'template/pages/XXPL.html' + date
            })
            .state('realname', {
                url: '/realname',
                templateUrl: 'template/login/realname.html' + date
            })
            .state('password', {
                url: '/password',
                templateUrl: 'template/login/setpassword.html' + date
            })
            /*产品*/
            .state('newhand', {
                url: '/newhand?pid&uid&wap&app',
                templateUrl: 'template/newhand/newhand.html' + date
            })
            .state('newhandApp', {
                url: '/newhandApp?pid&uid&wap&app',
                templateUrl: 'template/newhand/newhandApp.html' + date
            })
            .state('cpDetail', {
                url: '/cpDetail?pid&uid&isShowRule&from',
                templateUrl: 'template/cp/cpDetail.html' + date
            })
            .state('aqbzDetail', {
                url: '/aqbzDetail?wap',
                templateUrl: 'template/cp/aqbz.html' + date,
                controller: "aqbzDetailCtrl"
            })
            .state('aqbzDetailApp', {
                url: '/aqbzDetailApp?wap',
                templateUrl: 'template/cp/aqbzApp.html' + date,
                controller: "aqbzDetailCtrl"
            })
            .state('investment', {
                url: '/investment?cpid&amt&pid&uid',
                templateUrl: 'template/cp/investment.html' + date
            })
            .state('investSuccess', {
                url: '/investSuccess',
                templateUrl: 'template/cp/investSuccess.html' + date,
                controller: "investSuccess"
            })
            .state('continuedInvest', {
                url: '/continuedInvest',
                templateUrl: 'template/cp/xutou.html' + date,
                controller: "continuedInvest"
            })
            .state('coupon', {
                url: '/coupon?cpid&amt',
                templateUrl: 'template/cp/coupon.html' + date
            })
            // 我的账户-体验金
            .state('myTyj', {
                url: '/myTyj',
                templateUrl: 'template/myaccount/myTyj.html' + date,
                controller: 'myTyjController'
            })
            // 体验金活动页
            // .state('tyj', {
            //     url: '/tyj?wap&uid',
            //     templateUrl: 'template/activity/tyj.html' + date,
            //     controller: 'tyjController'
            // })
            // 体验金注册成功页
            .state('tyjRegSuccess', {
                url: '/tyjRegSuccess',
                templateUrl: 'template/activity/tyjRegSuccess.html' + date,
                // controller:'tyjRegSuccessController'
            })
            // 体验金详情页
            .state('tyjdetail', {
                url: '/tyjdetail',
                templateUrl: 'template/cp/tyjdetail.html' + date,
                controller: 'tyjdetailController'
            })
            // 体验金投资成功页
            .state('tyjSuccess', {
                url: '/tyjSuccess',
                templateUrl: 'template/cp/tyjSuccess.html' + date,
                controller: 'tyjSuccessController'
            })
            //元旦活动
            .state('yuandanCtrl', {
                url: '/yuandanCtrl?uid&token&app',
                templateUrl: 'template/activityhy/yuandan.html' + date,
                controller: 'yuandanCtrl'
            })
           
            // 双蛋活动
            // .state('shuangdan', {
            //     url: '/shuangdan?wap&uid',
            //     templateUrl: 'template/activity/shuangdan.html' + date,
            //     controller: 'shuangdanController'
            // })
            // .state('shuangdanshare', {
            //     url: '/shuangdanshare?wap&uid',
            //     templateUrl: 'template/activity/shuangdanshare.html' + date,
            //     controller: 'shuangdanshareController'
            // })
            // .state('shuangdanshyd', {
            //     url: '/shuangdanshyd',
            //     templateUrl: 'template/activity/shuangdanshyd.html' + date
            // })
            // 年末豪礼投即送活动
            // 活动页
            // .state('tjs', {
            //     url: '/tjs?wap&uid',
            //     templateUrl: 'template/activity/tjs.html' + date,
            //     controller: 'tjsController'
            // })
            // 礼品预约
            // .state('giftyy', {
            //     url: '/giftyy?wap&id',
            //     templateUrl: 'template/activity/giftyy.html' + date,
            //     controller: 'giftyyController'
            // })
            // 投即送标的详情页
            // .state('tjsdetail', {
            //     url: '/tjsdetail?wap&pid&from',
            //     templateUrl: 'template/activity/tjsdetail.html' + date,
            //     controller: 'tjsdetailController'
            // })
            // 投即送确认投资页
            // .state('tjsinvestment', {
            //     url: '/tjsinvestment?wap&pid',
            //     templateUrl: 'template/activity/tjsinvestment.html' + date,
            //     controller: 'tjsinvestmentController'
            // })
            // 投即送投资成功页
            // .state('tjssuccess', {
            //     url: '/tjssuccess?wap',
            //     templateUrl: 'template/activity/tjssuccess.html' + date,
            //     controller: 'tjssuccessController'
            // })
            // 我的账户进入的投资即送
            // .state('mytjs', {
            //     url: '/mytjs?wap&uid',
            //     templateUrl: 'template/activity/mytjs.html' + date,
            //     controller: 'mytjsController'
            // })
            // 投即送-礼品心愿
            // .state('tjswish', {
            //     url: '/tjswish?wap&uid',
            //     templateUrl: 'template/activity/tjswish.html' + date,
            //     controller: 'tjswishController'
            // })
            // 填投即送地址
            // .state('tjsaddress', {
            //     url: '/tjsaddress?wap&investId&type',
            //     templateUrl: 'template/activity/tjsaddress.html' + date,
            //     controller: 'tjsaddressController'
            // })
            // 礼品详情页
            // .state('prizedetail', {
            //     url: '/prizedetail?wap',
            //     templateUrl: 'template/activity/prizedetail.html' + date,
            //     controller: 'prizedetailController'
            // })
            // 新闻发布会专题页
            // .state('conference', {
            //     url: '/conference?wap&currentv',
            //     templateUrl: 'template/activity/conference.html'+date,
            //     controller:'conferenceController'
            // })
            // 企业形象推广页
            // .state('promote', {
            //     url: '/promote?wap',
            //     templateUrl: 'template/activity/promote.html'+date,
            //     controller:'promoteController'
            // })
            //我的账户
            .state('main.myaccountHome', {
                url: '/myaccountHome',
                templateUrl: 'template/myaccount/account-home.html' + date
            })
            .state('main.bankBillList', {
                url: '/bankBillList',
                templateUrl: 'template/cp/invests-list.html' + date
            })
            // .state('hbopen', {
            //     url: '/hbopen',
            //     templateUrl: 'template/myaccount/my-hbopen.html' + date
            // })
            .state('investDetail', {
                url: '/investDetail',
                templateUrl: 'template/myaccount/invest-detail.html' + date
            })
            .state('investRecord', {
                url: '/investRecord',
                templateUrl: 'template/myaccount/invest-record.html' + date
            })
            .state('minxi', {
                url: '/minxi',
                templateUrl: 'template/myaccount/my-minxi.html' + date
            })
            .state('paybackDetail', {
                url: '/paybackDetail',
                templateUrl: 'template/myaccount/payback-detail.html' + date
            })
            .state('investProtocol', {
                url: '/investProtocol',
                templateUrl: 'template/myaccount/invest-investProtocol.html' + date
            })
            .state('myCoupon', {
                url: '/myCoupon?active',
                templateUrl: 'template/myaccount/myCoupon.html' + date
            })
            .state('myUselessCoupon', {
                url: '/myUselessCoupon',
                templateUrl: 'template/myaccount/myCoupon-useless.html' + date
            })
            .state('myAssets', {
                url: '/myAssets',
                templateUrl: 'template/myaccount/my-assets.html' + date
            })
            .state('myActivity', {
                url: '/myActivity',
                templateUrl: 'template/myaccount/my-activity.html' + date
            })
            .state('activityPerson', {
                url: '/activityPerson?id&wap',
                templateUrl: 'template/cp/activityPerson.html' + date
            })
            .state('myInvest', {
                url: '/myInvest?tab',
                templateUrl: 'template/myaccount/my-invest.html' + date
            })
            .state('myInvestDetail', {
                url: '/myInvestDetail?info',
                templateUrl: 'template/myaccount/my-invest-detail.html' + date
            })
            .state('mycashed', {
                url: '/mycashed?cashedId',
                templateUrl: 'template/myaccount/my-cashed.html' + date
            })
            //充值提现
            .state('recharge', {
                url: '/recharge?from',
                templateUrl: 'template/recharge/recharge.html' + date
            })
            .state('getCash', {
                url: '/getCash',
                templateUrl: 'template/recharge/get-cash.html' + date
            })
            .state('myInvitation', {
                url: '/myInvitation',
                templateUrl: 'template/myaccount/my-invitation.html' + date
            })
            .state('myInfo', {
                url: '/myInfo',
                templateUrl: 'template/myaccount/my-info.html' + date
            })
            .state('myBank', {
                url: '/myBank',
                templateUrl: 'template/myaccount/my-bank.html' + date
            })
            .state('myMessage', {
                url: '/myMessage',
                templateUrl: 'template/myaccount/my-message.html' + date
            })
            .state('znMessage', {
                url: '/znMessage',
                templateUrl: 'template/myaccount/zn-message.html' + date
            })
            .state('resetTradePwd', {
                url: '/resetTradePwd?firstset&amt&cpid',
                templateUrl: 'template/myaccount/reset-tradepwd.html' + date
            })
//          .state('findPwd', {
//              url: '/findPwd?forget',
//              templateUrl: 'template/myaccount/findPwd.html' + date
//          })
            .state('resetPwd', {
                url: '/resetPwd?forget',
                templateUrl: 'template/myaccount/reset-pwd.html' + date
            })
            .state('payPW', {
                url: '/payPW',
                templateUrl: 'template/recharge/payPassWord.html' + date
            })
            .state('inviteCenter', {
                url: '/inviteCenter',
                templateUrl: 'template/myaccount/inviteCenter.html' + date
            })
            // .state('getCashSuccess', {
            //     url: '/getCashSuccess',
            //     templateUrl: 'template/recharge/get-cash-success.html' + date
            // })
            // .state('triplegift', {
            //     url: '/triplegift',
            //     templateUrl: 'template/activity/triplegift.html' + date
            // })
            // .state('financing', {
            //     url: '/financing',
            //     templateUrl: 'template/activity/financing.html' + date
            // })
            // .state('spider', {
            //     url: '/spider',
            //     templateUrl: 'template/activity/spider-app.html' + date
            // })
            // .state('sendmask', {
            //     url: '/sendmask',
            //     templateUrl: 'template/activity/sendmask.html' + date
            // })
            // .state('aunt', {
            //     url: '/aunt',
            //     templateUrl: 'template/activity/aunt.html' + date
            // })
            // .state('telecom', {
            //     url: '/telecom',
            //     templateUrl: 'template/activity/telecom.html' + date
            // })
            // .state('rechargegift', {
            //     url: '/rechargegift',
            //     templateUrl: 'template/activity/rechargegift.html' + date
            // })
            // .state('ZJJL', {
            //     url: '/ZJJL',
            //     templateUrl: 'template/activity/ZJJL.html' + date
            // })
            // .state('invite', {
            //     url: '/invite',
            //     templateUrl: 'template/activity/invite.html' + date
            // })
            // .state('aqbz', {
            //     url: '/aqbz?wap',
            //     templateUrl: 'template/pages/AQBZ.html' + date
            // })
            // 渠道推广注册页
            // .state('newcomer', {
            //     url: '/newcomer?wap',
            //     templateUrl: 'template/pages/newcomer.html' + date
            // })
            // .state('flwhz', {
            //     url: '/flwhz',
            //     templateUrl: 'template/pages/flwhz.html' + date
            // })
            // .state('invite-rules', {
            //     url: '/invite-rules',
            //     templateUrl: 'template/activity/invite-rules.html' + date
            // })
            // .state('XSXQ', {
            //     url: '/XSXQ?wap',
            //     templateUrl: 'template/pages/XSXQ.html' + date
            // })
            // iPhone活动页
            // .state('special', {
            //     url: '/special?wap',
            //     templateUrl: 'template/activity/iPhone.html' + date,
            //     controller: 'iPhoneController'
            // })
            // .state('special', {
            //     url: '/special?wap',
            //     templateUrl: 'template/activity/special.html' + date
            // })
            // .state('iphonelist', {
            //     url: '/iphonelist?wap',
            //     templateUrl: 'template/activity/iphonelist.html' + date
            // })
            // .state('hlsbt', {
            //     url: '/hlsbt',
            //     templateUrl: 'template/activity/hlsbt.html' + date
            // })
            // .state('inviteFriend1', {
            //     url: '/inviteFriend1?wap&afid&uid',
            //     templateUrl: 'template/activity/inviteFriend1.html' + date,
            //     controller: 'inviteFriend1'
            // })
            // .state('inviteFriend2', {
            //     url: '/inviteFriend2?wap&afid&uid',
            //     templateUrl: 'template/activity/inviteFriend2.html' + date,
            //     controller: 'inviteFriend2'
            // })
            // .state('inviteFriend3', {
            //     url: '/inviteFriend3?wap&afid&uid',
            //     templateUrl: 'template/activity/inviteFriend3.html' + date,
            //     controller: 'inviteFriend3'
            // })
            // .state('inviteFriend4', {
            //     url: '/inviteFriend4?wap&afid&uid',
            //     templateUrl: 'template/activity/inviteFriend4.html' + date,
            //     controller: 'inviteFriend4'
            // })
            // .state('inviteFriend5', {
            //     url: '/inviteFriend5?wap&afid&uid',
            //     templateUrl: 'template/activity/inviteFriend5.html' + date,
            //     controller: 'inviteFriend5'
            // })
            // .state('inviteFriend6', {
            //     url: '/inviteFriend6?wap&afid&uid',
            //     templateUrl: 'template/activity/inviteFriend6.html' + date,
            //     controller: 'inviteFriend6'
            // })
            // .state('inviteFriendTri', {
            //     url: '/inviteFriendTri?wap&afid&uid',
            //     templateUrl: 'template/activity/inviteFriendTri.html' + date,
            //     controller: 'inviteFriendTri'
            // })
            // .state('friendreg', {
            //     url: '/friendreg?frompc&recommCode',
            //     templateUrl: 'template/activity/friendReg.html' + date,
            //     controller: 'friendregController'
            // })
            // .state('myMission', {
            //     url: '/myMission',
            //     templateUrl: 'template/myaccount/myMission.html' + date,
            //     controller: 'myMissionCtrl'
            // })
            // 活动聚合页
            .state('actList', {
                url: '/actList?wap&active',
                templateUrl: 'template/myaccount/actList.html' + date,
                controller: 'actListController'
            })
            //往期活动
            .state('actHistoryList', {
                url: '/actHistoryList?wap&active',
                templateUrl: 'template/myaccount/actHistoryList.html' + date,
                controller: 'actHistoryListController'
            })
            //邀请好友
            .state('inviteFri', {
                url: '/inviteFri?upgrade&wap&app',
                templateUrl: 'template/activityhy/inviteFriend.html' + date
            })
            //邀请好友App
            .state('inviteFriApp', {
                url: '/inviteFriApp?upgrade&wap&app',
                templateUrl: 'template/activityhy/inviteFriendApp.html' + date
            })
            //双十二活动
            .state('shuangSE', {
                url: '/shuangSE?upgrade&wap&app',
                templateUrl: 'template/activity/shaung12.html' + date
            })
            //圣诞活动
            .state('christmasCtrl', {
                url: '/christmasCtrl?upgrade&wap&app',
                templateUrl: 'template/activity/Christmas.html' + date
            })
            //云锐开发
            .state('yunrui', {
                url: '/yunrui',
                templateUrl: 'template/activityhy/yunrui.html' + date
            })
            //360导航
            .state('nav360', {
                url: '/nav360',
                templateUrl: 'template/activityhy/nav360.html' + date
            })
            //典典养车
            .state('ddyc', {
                url: '/ddyc',
                templateUrl: 'template/activityhy/ddyc.html' + date
            })
            //车点点
            .state('chediandian', {
                url: '/chediandian',
                templateUrl: 'template/activityhy/chediandian.html' + date
            })
            //
            // .state('appdownload', {
            //     url: '/appdownload',
            //     templateUrl: 'template/pages/appdownload.html' + date,
            //     controller: 'appdownload'
            // })
            // .state('app2download', {
            //     url: '/app2download',
            //     templateUrl: 'template/pages/app2download.html' + date,
            //     controller: 'app2download'
            // })
            // .state('carReg', {
            //     url: '/carReg',
            //     templateUrl: 'template/activity/carReg.html' + date,
            //     controller: 'controllerRegister'
            // })
            // .state('changcheng', {
            //     url: '/changcheng',
            //     templateUrl:'template/activity/changcheng.html'+date,
            //     controller:'controllerRegister'
            // })
            // .state('changcheng2', {
            //     url: '/changcheng2',
            //     templateUrl:'template/activity/changcheng2.html'+date,
            //     controller:'changcheng2Controller'
            // })
            // .state('yuebiao', {
            //     url: '/yuebiao?prid&name&toState&pid',
            //     templateUrl: 'template/activity/yuebiao.html' + date,
            //     controller: 'yuebiaoCtrl'
            // })
            // .state('fanli', {
            //     url: '/fanli?toFrom',
            //     templateUrl: 'template/activity/fanli.html' + date,
            //     controller: 'fanliCtrl'
            // })
            // 新年活动页
            // .state('newyear', {
            //     url: '/newyear?wap&uid',
            //     templateUrl: 'template/activity/newyear.html' + date,
            //     controller: 'newyearController'
            // })
            // 新年活动一
            // .state('newyearact1', {
            //     url: '/newyearact1?wap&uid',
            //     templateUrl: 'template/activity/newyearact1.html' + date,
            //     controller: 'newyearact1Controller'
            // })
            // 新年活动分享页
            // .state('newyearshare', {
            //     url: '/newyearshare?wap&uid&phone&recommPhone',
            //     templateUrl: 'template/activity/newyearshare.html' + date,
            //     controller: 'newyearshareController'
            // })
            // 媒体报道
            // .state('report', {
            //     url: '/report?page&wap',
            //     templateUrl: 'template/pages/report.html' + date,
            //     controller: 'reportController'
            // })
            // 元宵活动
            // .state('yuanxiao', {
            //     url: '/yuanxiao?wap&uid',
            //     templateUrl: 'template/activity/yuanxiao.html' + date,
            //     controller: 'yuanxiaoController'
            // })
            // 新手标推广页
            // .state('newhandreg', {
            //     url: '/newhandreg?wap',
            //     templateUrl: 'template/newhand/newhandreg.html'+date,
            //     controller:'newhandregController'
            // })
            // 新体验金推广页（外）
            // .state('newtyj', {
            //     url: '/newtyj?wap&uid',
            //     templateUrl: 'template/activity/newtyj.html' + date,
            //     controller: 'newtyjController'
            // })
            // iPhone7推广页
            // .state('iPhonead', {
            //     url: '/iPhonead?wap',
            //     templateUrl: 'template/activity/iPhonead.html' + date,
            //     controller: 'iPhoneadController'
            // })
            // 垂直管理推广页
            // .state('czglad', {
            //     url: '/czglad?wap',
            //     templateUrl: 'template/activity/czglad.html'+date,
            //     controller:'czgladController'
            // })
            // 投即送推广页
            // .state('tjsad', {
            //     url: '/tjsad?wap',
            //     templateUrl: 'template/activity/tjsad.html' + date,
            //     controller: 'tjsadController'
            // })
            // 开放日报名页
            // .state('kfrEnrol', {
            //     url: '/kfrEnrol?wap&openDayId',
            //     templateUrl: 'template/myaccount/kfr-enrol.html' + date,
            //     controller: 'kfrEnrolController'
            // })
            // 优惠券温馨提示
            .state('reminder', {
                url: '/reminder?wap',
                templateUrl: 'template/myaccount/reminder.html' + date,
                controller: 'reminderController'
            })
            // app2.0翻牌
            // .state('app2lottery', {
            //     url: '/app2lottery?wap&version&uid&channel',
            //     templateUrl: 'template/activity/app2lottery.html' + date,
            //     controller: 'app2lotteryController'
            // })
            // 小米推广页
            // .state('xiaomiad', {
            //     url: '/xiaomiad?wap&uid&channel&version',
            //     templateUrl: 'template/activity/xiaomiad.html' + date,
            //     controller: 'xiaomiadController'
            // })
            // 开放日活动页
            // .state('openday', {
            //     url: '/openday?wap',
            //     templateUrl: 'template/activity/openday.html' + date,
            //     controller: 'opendayController'
            // })
            // 公益活动页
            // .state('publicWelfare', {
            //     url: '/publicWelfare?wap&id',
            //     templateUrl: 'template/activity/publicWelfare.html' + date,
            //     controller: 'publicWelfareController'
            // })
            // 新体验金推广页(内)
            // .state('newtyj2', {
            //     url: '/newtyj2?wap&uid',
            //     templateUrl: 'template/activity/newtyj2.html' + date,
            //     controller: 'newtyj2Controller'
            // })
            // 518理财节
            // .state('festival518', {
            //     url: '/festival518?wap&uid',
            //     templateUrl: 'template/activity/festival518.html' + date,
            //     controller: 'festival518Controller'
            // })
            // 企融计划列表页
            .state('normalcplist', {
                url: '/normalcplist',
                templateUrl: 'template/cp/normalcplist.html' + date,
                controller: 'normalcplistController'
            })
            // 已募集企融计划列表页
            .state('pastcplist', {
                url: '/pastcplist',
                templateUrl: 'template/cp/pastcplist.html' + date,
                controller: 'pastcplistController'
            })
            // 活动标列表页
            .state('activitycplist', {
                url: '/activitycplist',
                templateUrl: 'template/cp/activitycplist.html' + date,
                controller: 'activitycplistController'
            })
            // 新手注册
            .state('hongyareg', {
                url: '/zhuomireg?toFrom&tid&phone',
                templateUrl: 'template/activityhy/reg.html' + date,
                // controller: 'hongyaregCtrl'
            })
            //chedaojiayou 渠道推广
            // .state('oilReg', {
            //     url: '/oilReg',
            //     templateUrl: 'template/activityhy/reg_oil.html' + date,
            // })
            //小米运动 渠道推广
            // .state('xiaomiReg', {
            //     url: '/xiaomiReg',
            //     templateUrl: 'template/activityhy/reg_xiaomi.html' + date,
            // })
            // xiaomiyundong 渠道推广
            // .state('xmydReg1', {
            //     url: '/xmydReg1',
            //     templateUrl: 'template/activityhy/reg_xmyd1.html' + date,
            // })
            // .state('xmydReg2', {
            //     url: '/xmydReg2',
            //     templateUrl: 'template/activityhy/reg_xmyd2.html' + date,
            // })
            // 头条推广
            // .state('jinritoutiao', {
            //     url: '/jinritoutiao',
            //     templateUrl: 'template/activityhy/toutiao.html' + date,
            // })
            // 车点点
            // .state('chediandian', {
            //     url: '/chediandian',
            //     templateUrl: 'template/activityhy/reg_cdd.html' + date,
            // })
            // 新手注册
            .state('inviteReg', {
                url: '/inviteReg?toFrom&tid&invitePerson&app',
                templateUrl: 'template/activityhy/inviteReg.html' + date,
            })
            // 邀请活动
            .state('hongyainvite', {
                url: '/zhuomiinvite?toFrom&wap',
                templateUrl: 'template/activityhy/invite.html' + date,
            })
            // 下载页面
            .state('zhuomidownload', {
                url: '/zhuomidownload',
                templateUrl: 'template/activityhy/download.html' + date,
            })
            // 体验金注册成功页
            .state('tyjRegSuccess2', {
                url: '/tyjRegSuccess2',
                templateUrl: 'template/activity/tyjRegSuccess2.html' + date,
            })
            // 投资月
            // .state('hongyatouziyue', {
            //     url: '/hongyatouziyue?wap&uid&app',
            //     templateUrl: 'template/activityhy/touziyue.html' + date,
            // })
            // 0710加息活动
            // .state('hongyajiaxi', {
            //     url: '/hongyajiaxi?wap',
            //     templateUrl: 'template/activityhy/jiaxi.html' + date,
            // })
            // 闰6月活动
            // .state('hongyarunyue', {
            //     url: '/hongyarunyue?wap&uid&token',
            //     templateUrl: 'template/activityhy/runyue.html' + date,
            // })
            // 8月红包月活动
            // .state('hongyahongbaoyu', {
            //     url: '/hongyahongbaoyu?wap&uid&token',
            //     templateUrl: 'template/activityhy/hongbaoyu.html' + date,
            // })
            // .state('hongyaAugust', {
            //     url: '/hongyaAugust?wap&uid&token',
            //     templateUrl: 'template/activityhy/august.html' + date,
            // })
            // .state('hongyaqixi', {
            //     url: '/hongyaqixi?wap&uid&token',
            //     templateUrl: 'template/activityhy/qixi.html' + date,
            // })
            // .state('hongyaFanA', {
            //     url: '/hongyaFanA?wap&uid&token',
            //     templateUrl: 'template/activityhy/fan_a.html' + date,
            // })
            //////////////////////////////////////////////////////////
            //活动
            .state('zmBackCash', {
                url: '/zmBackCash?wap&uid&token',
                templateUrl: 'template/zmActive/zmInvite.html' + date
            })
            //车到加油
            .state('chedaoReg', {
                url: '/chedaoReg',
                templateUrl: 'template/zmChannel/chedao.html' + date
            })
            // CHEDIANDIAN
            .state('chediandianReg', {
                url: '/chediandianReg',
                templateUrl: 'template/zmChannel/chediandian.html' + date
            })
    })
    /*---------------------------Banner-----------------------------------*/
    rootApp.directive(
        'myBanner',
        function () {
            var temp = '<div class="swiper-container swiper-container-h" style="width:100%;">' +
                '<div class="swiper-wrapper">' +
                '</div>' +
                '<div class="swiper-pagination swiper-pagination-h"></div>' +
                '</div>';
            return {
                restrict: 'E',
                template: temp,
                replace: true,
                scope: {
                    banner: '='
                },
                controller: [
                    '$scope',
                    '$state',
                    'resourceService',
                    '$filter',
                    '$timeout',
                    '$element',
                    '$stateParams',
                    '$localStorage',
                    '$compile',
                    function ($scope, $state, resourceService, $filter, $timeout, $element,$stateParams, $localStorage, $compile) {
                        if ($localStorage.user != undefined) {
                            $scope.userId = '&uid=' + $localStorage.user.member.uid;
                            $scope.token = '&token=' + $localStorage.user.token;
                        } else { $scope.userId = '';$scope.token = ''; };
                        var str = "";
                        $scope.$watch(function () { return $scope.banner }, function (n, o) {
                            if (n && n.length > 0) {
                                for (var i = 0; i < n.length; i++) {
                                    str += '<div class="swiper-slide"><a target="_blank" href="' + n[i].location + "&wap=true" + $scope.userId + $scope.token +'"><img ng-src="' + n[i].imgUrl + '" alt=""></a></div>';
                                }
//                              console.log($scope.token);
                                $element[0].childNodes[0].innerHTML = str;
                                $compile($element[0].childNodes[0])($scope);
                                $timeout(function () {
                                    swiperH = new Swiper('.swiper-container-h', {
                                        pagination: '.swiper-pagination-h',
                                        paginationClickable: true,
                                        loop:true,
                                        // spaceBetween: 50,
                                        preventClicks: false
                                    });
                                });
                            }
                        })
                    }],
            };
        }
    );
    rootApp.directive('scroll', ['$timeout', function ($timeout) {
        return {
            restrict: 'E',
            replace: true,
            templateUrl: 'template/find-active.html',
            scope: {
                data: '='
            },
            link: function ($scope, element, attrs) {
                $scope.init = function () {
                    $timeout(function () {
                        var swiper = new Swiper('.active-swiper', {
                            pagination: '.swiper-pagination',
                            paginationClickable: true,
                            centeredSlides: true,
                            autoplay:2000,
                            loop:true,
							effect: 'slide'
                        })
                    }, 0)
                }
            }
        }
    }])
    rootApp.directive('repeatFinish', function () {
        return {
            link: function (scope, element, attr) {
                if (scope.$last && scope.data) {
                    scope.$parent.init()
                }
            }
        }
    })
    rootApp.directive(
        'ngSwiper',
        function () {
            var temp = '<div class="swiper-container {{ngSwiper.name}}" ng-transclude>' +

                '</div>';
            return {
                restrict: 'A',
                template: temp,
                replace: true,
                scope: {
                    ngSwiperConf: '=',
                    ngSwiper: "="
                },
                transclude: true,
                controller: [
                    '$scope',
                    '$timeout',
                    '$element',
                    '$compile',
                    function ($scope, $timeout, $element, $compile) {
                        $scope.ngSwiper.initSwiper = function () {
                            $timeout(function () {
                                $scope.ngSwiper.swiper = new Swiper("." + $scope.ngSwiper.name, $scope.ngSwiperConf);
                            });
                        }
                        if ($scope.ngSwiper.readyLoading) {
                            $scope.ngSwiper.initSwiper();
                        }
                    }
                ],
            };
        });
    /*进度条*/
    rootApp.directive(
        'myCirclePlan',
        function () {
            var temp = '<div class="prg-cont rad-prg" id="progress">12</div>'
            return {
                restrict: 'E',
                // templateUrl:'template/cp/cpTpl.html',
                template: temp,
                replace: false,
                transclude: true,
                scope: true,
                controller: [
                    '$scope',
                    '$state',
                    'resourceService',
                    '$filter',
                    '$element',
                    function ($scope, $state, resourceService, $filter, $element) {

                        $('#progress1').radialIndicator({
                            initValue: 10,
                            displayNumber: false
                        });
                    }],
            };
        }
    );
    /*刮刮卡*/
    rootApp.directive(
        'ggk',
        function () {
            var temp = '<div id="scratch">' +
                '<div id="card">￥5000000元</div>' +
                '</div>'
            return {
                restrict: 'E',
                // templateUrl:'template/cp/cpTpl.html',
                template: temp,
                replace: false,
                transclude: true,
                scope: true,
                controller: [
                    '$scope',
                    '$state',
                    'resourceService',
                    '$filter',
                    '$element',
                    function ($scope, $state, resourceService, $filter, $element) {
                        // console.log(LuckyCard);
                    }],
            };
        }
    );

    // 提现金额小于余额
    rootApp.directive('withdrawlimit', function () {
        return {
            restrict: "A",
            require: 'ngModel',
            link: function (scope, elem, attrs, ngModelController) {

                ngModelController.$parsers.unshift(function (viewVal) {
                    if (viewVal == '') {
                        ngModelController.$setValidity("withdrawlimit", true);
                        return viewVal;
                    }
                    if (viewVal <= scope.cash.funds) {
                        ngModelController.$setValidity("withdrawlimit", true);
                        return viewVal;
                    }
                    else {
                        ngModelController.$setValidity("withdrawlimit", false);
                        return undefined;
                    }
                    // if (scope.cash.funds <= 100000) {
                    // } else {
                    //     ngModelController.$setValidity("withdrawlimit", true);
                    //     return viewVal;
                    // }
                })
            }
        }
    });

    // 提现金额单笔最高限额
    rootApp.directive('maxlimit', function () {
        return {
            restrict: "A",
            require: 'ngModel',
            link: function (scope, elem, attrs, ngModelController) {

                ngModelController.$parsers.unshift(function (viewVal) {
                    if (scope.cash.funds > 5000000) {
                        if (viewVal == '' || scope.cashForm.cash.$error.withdrawlimit) {
                            ngModelController.$setValidity("maxlimit", true);
                            return viewVal;
                        }
                        if (viewVal <= 5000000) {
                            ngModelController.$setValidity("maxlimit", true);
                            return viewVal;
                        }
                        else {
                            ngModelController.$setValidity("maxlimit", false);
                            return undefined;
                        }
                    } else {
                        ngModelController.$setValidity("maxlimit", true);
                        return viewVal;
                    }
                });
            }
        };
    });

    // 输入金额大于1
    rootApp.directive('morethan', function () {
        return {
            restrict: "A",
            require: 'ngModel',
            link: function (scope, elem, attrs, ngModelController) {
                ngModelController.$parsers.unshift(function (viewVal) {
                    if (viewVal == '') {
                        ngModelController.$setValidity("morethan", true);
                        return viewVal;
                    }
                    if (viewVal >= 1) {
                        ngModelController.$setValidity("morethan", true);
                        return viewVal;
                    } else {
                        ngModelController.$setValidity("morethan", false);
                        return undefined;
                    }
                });
            }
        };
    });

    rootApp.directive('morethan3', function () {
        return {
            restrict: "A",
            require: 'ngModel',
            link: function (scope, elem, attrs, ngModelController) {
                ngModelController.$parsers.unshift(function (viewVal) {
                    if (viewVal == '') {
                        ngModelController.$setValidity("morethan3", true);
                        return viewVal;
                    }
                    if (viewVal >= 3) {
                        ngModelController.$setValidity("morethan3", true);
                        return viewVal;
                    } else {
                        ngModelController.$setValidity("morethan3", false);
                        return undefined;
                    }
                });
            }
        };
    });

    rootApp.directive('more3', function () {
        return {
            restrict: "A",
            require: 'ngModel',
            link: function (scope, elem, attrs, ngModelController) {
                ngModelController.$parsers.unshift(function (viewVal) {
                    if (viewVal == '') {
                        ngModelController.$setValidity("more3", true);
                        return viewVal;
                    }
                    if (viewVal >= 3) {
                        ngModelController.$setValidity("more3", true);
                        return viewVal;
                    } else {
                        ngModelController.$setValidity("more3", false);
                        return undefined;
                    }
                });
            }
        };
    });

    // 充值金额小于单笔限额
    rootApp.directive('rechargelimit', function () {
        return {
            restrict: "A",
            require: 'ngModel',
            link: function (scope, elem, attrs, ngModelController) {
                ngModelController.$parsers.unshift(function (viewVal) {
                    if (viewVal == '') {
                        ngModelController.$setValidity("rechargelimit", true);
                        return viewVal;
                    }
                    if (viewVal <= scope.recharge.singleQuota) {
                        ngModelController.$setValidity("rechargelimit", true);
                        return viewVal;
                    } else {
                        ngModelController.$setValidity("rechargelimit", false);
                        return undefined;
                    }
                });
            }
        };
    });
    //普通标
//  rootApp.directive('ring', function () {
//          return {
//              restrict: 'A',
//              scope: true,
//              link: function ($scope, element, attrs) {
//                  var width = $(element).width();
//
//                  if (attrs.color == 'blue') {
//                      var startColor = '#fff800'; //新手
//                      var endColor = '#fff800';
//                  } else {
//                      var startColor = '#fff800';
//                      var endColor = '#fff800';
//                  }
//                  var config = {
//                      width: width,
//                      radius: ($scope.radius - 8) / 2,
//                      barWidth: 1,
//                      startColor: startColor,
//                      endColor: endColor,
//                      barBgColor: '#ffffff',
//                      percentage: true,
//                      displayNumber: true,
//                      fontSize: 10,
//                      fontWeight: 'lighter',
//                      roundCorner: false,
//                      initValue: 0,
//                      interpolate: true,
//                      barColor: '#ffffff',
//                      frameTime: (1000 / attrs.progress)
//                  }
//                  if (attrs.progress >= 100) {
//
//                      config.initValue = 100;
//                      config.barColor = '#fff800';
//                      config.startColor = '#fff800';
//                      config.endColor = '#fff800';
//                  }
//                  else if (attrs.progress <= 0) {
//                      config.roundCorner = false;
//                  }
//                  var radialObj = $(element).linearIndicator(config).data('linearIndicator');
//                  radialObj.animate(attrs.progress);
//              }
//          }
//      })
    /*rootApp.directive('ring', ['$timeout', function ($timeout) {
        return {
            restrict: 'AE',
            scope: {
                data: '@'
            },
            link: function ($scope, element, attrs) {
                $timeout(function () {
                    var ctx = element[0].getContext('2d')
                    var center = 56
//                  var rad = Math.PI * 2 / 100
//                  var grad = ctx.createLinearGradient(56, 0, 0, 0)
					var grad = ctx.createLinearGradient(0, 0, 56, 0)
                    grad.addColorStop(0, '#fdb73e')
                    grad.addColorStop(1, '#fc764d')
                    var speed = 0

                    function bgCircle() {
                        ctx.save()
                        ctx.beginPath()
                        ctx.lineWidth = 2
                        ctx.strokeStyle = "#e8e8e8";
                        //ctx.arc(center, center, 53, 0, Math.PI * 2, false)//画圆或者圆弧
                        ctx.stroke()
                        ctx.closePath()
                        ctx.restore()
                    }
                    function activeCircle(n) {
                        ctx.save()
                        ctx.strokeStyle = grad
                        ctx.lineWidth = 2
                        ctx.beginPath()
                        //ctx.arc(center, center, 53, -Math.PI / 2, -Math.PI / 2 + n * rad, false)
                        ctx.stroke()
                        ctx.closePath()
                        ctx.restore()
                    }
                    function text(n) {
                        ctx.save()
                        ctx.beginPath()
                        ctx.fillStyle = "#f06043"
                        ctx.font = "0.8125rem '微软雅黑'"
//                      ctx.textAlign = 'center'
						ctx.textAlign = 'end'
                        ctx.textBaseline = "middle"
                        ctx.fillText(n + '%', center, center)
                        ctx.stroke()
                        ctx.closePath()
                        ctx.restore()
                    }
                    (function drawFrame() {
                        var animatId = window.requestAnimationFrame(drawFrame, element[0])
                        ctx.clearRect(0, 0, center * 2, center * 2)
                        bgCircle()
                        text(speed)
                        activeCircle(speed)
                        if (speed >= parseInt($scope.data)) {
                            speed = 0
                            window.cancelAnimationFrame(animatId)
                        }
                        speed += 1;
                    }())
                }, 10)
            }
        }
    }])*/
    // -----------------------------------------------server---------------------------------------------//
    rootApp.directive('getdate', function () {
        return {
            restrict: 'E',
            scope: {
                type: '@'
            },
            templateUrl: 'template/getDate.html',
            replace: true,
            link: function (scope, el, attrs) {
                console.log(scope.type)
                var now = new Date()
                var day = {
                    0: '星期日',
                    1: '星期一',
                    2: '星期二',
                    3: '星期三',
                    4: '星期四',
                    5: '星期五',
                    6: '星期六'
                }
                scope.date = now.getDate()
                scope.day = day[now.getDay()]
            }
        }
    })
    rootApp.factory(
        'resourceService',
        ['$state', '$resource', '$http', '$rootScope', 'ngDialog', '$filter', '$localStorage', 'md5', '$location', function ($state, $resource, $http, $rootScope, ngDialog, $filter, $localStorage, md5, $location) {
            return new resourceService($resource, $http, $state, $rootScope, ngDialog, $filter, $localStorage, md5, $location);
        }]);
    function resourceService(resource, http, $state, $rootScope, ngDialog, $filter, $localStorage, md5, $location) {
        var actions = {
            'query': {
                method: 'GET'
            },
            'queryPost': {
                method: 'POST'
            },
            'toJsonP': {
                method: 'JSONP'
            }
        };
        //加载json模板页面
        this.getJsonPServer = function (scope, url, data, type) {
            showMask($rootScope);
            var queryResource = resource(url, {}, actions);
            queryResource.toJsonP(data, function (data) {
                removeMask($rootScope);
                scope.$broadcast('resourceService_GET_JSON.MYEVENT', data, type);
            }, function (error) {
                removeMask($rootScope);
                $filter('errorUserMessages')('netErro', ngDialog, scope);
            });
        };//加载json模板页面
        this.getJsonServer = function (scope, url, data, type) {
            showMask($rootScope);
            var queryResource = resource(url, {}, actions);
            queryResource.query(data, function (data) {
                removeMask($rootScope);
                scope.$broadcast('resourceService_GET_JSON.MYEVENT', data, type);
            }, function (error) {
                removeMask($rootScope);
                $filter('errorUserMessages')('netErro', ngDialog, scope);
            });
        };
        //查找
        this.queryPost = function (scope, url, data, type) {
            scope.submitBool = false;
            showMask($rootScope);
            /*临时改变时间*/
            var queryResource = resource(url, {}, actions);
            if (!data.version) {
                data.version = $rootScope.version;
            }
            if (!data.channel) {
                data.channel = $rootScope.channel;
            }
            if (!data.token) {
                data.token = $filter('isRegister')().user.token;
            }
            if (data.passWord != undefined) {
                data.passWord = hex_sha256(md5.createHash(data.passWord || ''));
            }
            if (data.tpwd != undefined) {
                data.tpwd = hex_sha256(md5.createHash(data.tpwd || ''));
            }
            if (data.tpw != undefined) {
                data.tpw = hex_sha256(md5.createHash(data.tpw || ''));
            }
            if (data.pwd != undefined) {
                data.pwd = hex_sha256(md5.createHash(data.pwd || ''));
            }
            queryResource.queryPost(data, function (data) {
                scope.submitBool = true;
                removeMask($rootScope);
                if (data.success) {
                    scope.$broadcast('resourceService.QUERY_POST_MYEVENT', data, type);
                } else {
                    if (data.errorCode == '9999') {
                        // $state.go('404');
                        $filter('服务器信息')(data.errorCode, scope, 'y');
                        scope.onClick = function (type) {
                            if (type == 'yes') {
                                delete $localStorage.user;
                                ngDialog.close();
                                $state.go('main.home');
                            }
                        }
                    } else if (data.errorCode == '9998') {
                        $filter('实名认证错误信息')(data.errorCode, scope, 'y');
                        scope.onClick = function (type) {
                            if (type == 'yes') {
                                delete $localStorage.user;
                                ngDialog.close();
                                $state.go('dl');
                            }
                        }
                    }
                    else if (data.errorCode == 'XTWH') {
                        window.location.href = 'http://m.zhuomilicai.com/template/pages/maintenance.html';
                    }
                    else {
                        scope.$broadcast('resourceService.QUERY_POST_MYEVENT', data, type);
                    }
                }
            }, function (error) {
                removeMask($rootScope);
            });
        };
        /******静态调结束*******/
        function showMask(rootSp) {
            rootSp.maskHidde = true;
        };
        function removeMask(rootSp) {
            rootSp.maskHidde = false;
        };
    };
    // 微信签名
    rootApp.factory('signWeChatService', function () {
        return function () {
            var urlstr = window.location.href;
            if (urlstr.split('.com').length < 2 || (urlstr.split('.com').length > 1 && urlstr.split('.com')[1] == "/")) {
                if (urlstr.substring(urlstr.length - 1, urlstr.length) == "/") {
                    urlstr += "main/home";
                } else {
                    urlstr += "/main/home";
                }
            };
            $.ajax({
                url: '/product/signWeChat.dos',
                type: 'post',
                data: { url: urlstr, version: '2.0.0', channel: '3' },
                success: function (data) {
                    if (data.success) {
                        wx.config({
                            debug: false,
                            appId: data.map.appid,
                            timestamp: data.map.timestamp,
                            nonceStr: data.map.noncestr,
                            signature: data.map.sign,
                            jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'onMenuShareQQ', 'onMenuShareWeibo', 'onMenuShareQZone']
                        });
                    };
                }
            });
        }
    })
});



/* 
* @Author: lee
* @Date:   2016-01-10 23:52:03
* @Last Modified by:   anchen
* @Last Modified time: 2016-01-12 16:31:37
*/



define('bootstrap',['require',
        'angular',
        'jweixin',
        'jquery',
        'angularRoute',
        'angularResource',
        'app', 
        'router'
       ],function(require,angular,wx,$){
            'use strict';
            require(['domReady!'],function(document){
                angular.bootstrap(document,['webapp']);
            });
        });
//---------------------------------------------------------------------
//
// QR Code Generator for JavaScript
//
// Copyright (c) 2009 Kazuhiko Arase
//
// URL: http://www.d-project.com/
//
// Licensed under the MIT license:
//  http://www.opensource.org/licenses/mit-license.php
//
// The word 'QR Code' is registered trademark of
// DENSO WAVE INCORPORATED
//  http://www.denso-wave.com/qrcode/faqpatent-e.html
//
//---------------------------------------------------------------------

var qrcode = function() {

  //---------------------------------------------------------------------
  // qrcode
  //---------------------------------------------------------------------

  /**
   * qrcode
   * @param typeNumber 1 to 40
   * @param errorCorrectLevel 'L','M','Q','H'
   */
  var qrcode = function(typeNumber, errorCorrectLevel) {

    var PAD0 = 0xEC;
    var PAD1 = 0x11;

    var _typeNumber = typeNumber;
    var _errorCorrectLevel = QRErrorCorrectLevel[errorCorrectLevel];
    var _modules = null;
    var _moduleCount = 0;
    var _dataCache = null;
    var _dataList = new Array();

    var _this = {};

    var makeImpl = function(test, maskPattern) {

      _moduleCount = _typeNumber * 4 + 17;
      _modules = function(moduleCount) {
        var modules = new Array(moduleCount);
        for (var row = 0; row < moduleCount; row += 1) {
          modules[row] = new Array(moduleCount);
          for (var col = 0; col < moduleCount; col += 1) {
            modules[row][col] = null;
          }
        }
        return modules;
      }(_moduleCount);

      setupPositionProbePattern(0, 0);
      setupPositionProbePattern(_moduleCount - 7, 0);
      setupPositionProbePattern(0, _moduleCount - 7);
      setupPositionAdjustPattern();
      setupTimingPattern();
      setupTypeInfo(test, maskPattern);

      if (_typeNumber >= 7) {
        setupTypeNumber(test);
      }

      if (_dataCache == null) {
        _dataCache = createData(_typeNumber, _errorCorrectLevel, _dataList);
      }

      mapData(_dataCache, maskPattern);
    };

    var setupPositionProbePattern = function(row, col) {

      for (var r = -1; r <= 7; r += 1) {

        if (row + r <= -1 || _moduleCount <= row + r) continue;

        for (var c = -1; c <= 7; c += 1) {

          if (col + c <= -1 || _moduleCount <= col + c) continue;

          if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )
              || (0 <= c && c <= 6 && (r == 0 || r == 6) )
              || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {
            _modules[row + r][col + c] = true;
          } else {
            _modules[row + r][col + c] = false;
          }
        }
      }
    };

    var getBestMaskPattern = function() {

      var minLostPoint = 0;
      var pattern = 0;

      for (var i = 0; i < 8; i += 1) {

        makeImpl(true, i);

        var lostPoint = QRUtil.getLostPoint(_this);

        if (i == 0 || minLostPoint > lostPoint) {
          minLostPoint = lostPoint;
          pattern = i;
        }
      }

      return pattern;
    };

    var setupTimingPattern = function() {

      for (var r = 8; r < _moduleCount - 8; r += 1) {
        if (_modules[r][6] != null) {
          continue;
        }
        _modules[r][6] = (r % 2 == 0);
      }

      for (var c = 8; c < _moduleCount - 8; c += 1) {
        if (_modules[6][c] != null) {
          continue;
        }
        _modules[6][c] = (c % 2 == 0);
      }
    };

    var setupPositionAdjustPattern = function() {

      var pos = QRUtil.getPatternPosition(_typeNumber);

      for (var i = 0; i < pos.length; i += 1) {

        for (var j = 0; j < pos.length; j += 1) {

          var row = pos[i];
          var col = pos[j];

          if (_modules[row][col] != null) {
            continue;
          }

          for (var r = -2; r <= 2; r += 1) {

            for (var c = -2; c <= 2; c += 1) {

              if (r == -2 || r == 2 || c == -2 || c == 2
                  || (r == 0 && c == 0) ) {
                _modules[row + r][col + c] = true;
              } else {
                _modules[row + r][col + c] = false;
              }
            }
          }
        }
      }
    };

    var setupTypeNumber = function(test) {

      var bits = QRUtil.getBCHTypeNumber(_typeNumber);

      for (var i = 0; i < 18; i += 1) {
        var mod = (!test && ( (bits >> i) & 1) == 1);
        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;
      }

      for (var i = 0; i < 18; i += 1) {
        var mod = (!test && ( (bits >> i) & 1) == 1);
        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;
      }
    };

    var setupTypeInfo = function(test, maskPattern) {

      var data = (_errorCorrectLevel << 3) | maskPattern;
      var bits = QRUtil.getBCHTypeInfo(data);

      // vertical
      for (var i = 0; i < 15; i += 1) {

        var mod = (!test && ( (bits >> i) & 1) == 1);

        if (i < 6) {
          _modules[i][8] = mod;
        } else if (i < 8) {
          _modules[i + 1][8] = mod;
        } else {
          _modules[_moduleCount - 15 + i][8] = mod;
        }
      }

      // horizontal
      for (var i = 0; i < 15; i += 1) {

        var mod = (!test && ( (bits >> i) & 1) == 1);

        if (i < 8) {
          _modules[8][_moduleCount - i - 1] = mod;
        } else if (i < 9) {
          _modules[8][15 - i - 1 + 1] = mod;
        } else {
          _modules[8][15 - i - 1] = mod;
        }
      }

      // fixed module
      _modules[_moduleCount - 8][8] = (!test);
    };

    var mapData = function(data, maskPattern) {

      var inc = -1;
      var row = _moduleCount - 1;
      var bitIndex = 7;
      var byteIndex = 0;
      var maskFunc = QRUtil.getMaskFunction(maskPattern);

      for (var col = _moduleCount - 1; col > 0; col -= 2) {

        if (col == 6) col -= 1;

        while (true) {

          for (var c = 0; c < 2; c += 1) {

            if (_modules[row][col - c] == null) {

              var dark = false;

              if (byteIndex < data.length) {
                dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);
              }

              var mask = maskFunc(row, col - c);

              if (mask) {
                dark = !dark;
              }

              _modules[row][col - c] = dark;
              bitIndex -= 1;

              if (bitIndex == -1) {
                byteIndex += 1;
                bitIndex = 7;
              }
            }
          }

          row += inc;

          if (row < 0 || _moduleCount <= row) {
            row -= inc;
            inc = -inc;
            break;
          }
        }
      }
    };

    var createBytes = function(buffer, rsBlocks) {

      var offset = 0;

      var maxDcCount = 0;
      var maxEcCount = 0;

      var dcdata = new Array(rsBlocks.length);
      var ecdata = new Array(rsBlocks.length);

      for (var r = 0; r < rsBlocks.length; r += 1) {

        var dcCount = rsBlocks[r].dataCount;
        var ecCount = rsBlocks[r].totalCount - dcCount;

        maxDcCount = Math.max(maxDcCount, dcCount);
        maxEcCount = Math.max(maxEcCount, ecCount);

        dcdata[r] = new Array(dcCount);

        for (var i = 0; i < dcdata[r].length; i += 1) {
          dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];
        }
        offset += dcCount;

        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);
        var rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);

        var modPoly = rawPoly.mod(rsPoly);
        ecdata[r] = new Array(rsPoly.getLength() - 1);
        for (var i = 0; i < ecdata[r].length; i += 1) {
          var modIndex = i + modPoly.getLength() - ecdata[r].length;
          ecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;
        }
      }

      var totalCodeCount = 0;
      for (var i = 0; i < rsBlocks.length; i += 1) {
        totalCodeCount += rsBlocks[i].totalCount;
      }

      var data = new Array(totalCodeCount);
      var index = 0;

      for (var i = 0; i < maxDcCount; i += 1) {
        for (var r = 0; r < rsBlocks.length; r += 1) {
          if (i < dcdata[r].length) {
            data[index] = dcdata[r][i];
            index += 1;
          }
        }
      }

      for (var i = 0; i < maxEcCount; i += 1) {
        for (var r = 0; r < rsBlocks.length; r += 1) {
          if (i < ecdata[r].length) {
            data[index] = ecdata[r][i];
            index += 1;
          }
        }
      }

      return data;
    };

    var createData = function(typeNumber, errorCorrectLevel, dataList) {

      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);

      var buffer = qrBitBuffer();

      for (var i = 0; i < dataList.length; i += 1) {
        var data = dataList[i];
        buffer.put(data.getMode(), 4);
        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );
        data.write(buffer);
      }

      // calc num max data.
      var totalDataCount = 0;
      for (var i = 0; i < rsBlocks.length; i += 1) {
        totalDataCount += rsBlocks[i].dataCount;
      }

      if (buffer.getLengthInBits() > totalDataCount * 8) {
        throw new Error('code length overflow. ('
          + buffer.getLengthInBits()
          + '>'
          + totalDataCount * 8
          + ')');
      }

      // end code
      if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {
        buffer.put(0, 4);
      }

      // padding
      while (buffer.getLengthInBits() % 8 != 0) {
        buffer.putBit(false);
      }

      // padding
      while (true) {

        if (buffer.getLengthInBits() >= totalDataCount * 8) {
          break;
        }
        buffer.put(PAD0, 8);

        if (buffer.getLengthInBits() >= totalDataCount * 8) {
          break;
        }
        buffer.put(PAD1, 8);
      }

      return createBytes(buffer, rsBlocks);
    };

    _this.addData = function(data) {
      var newData = qr8BitByte(data);
      _dataList.push(newData);
      _dataCache = null;
    };

    _this.isDark = function(row, col) {
      if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {
        throw new Error(row + ',' + col);
      }
      return _modules[row][col];
    };

    _this.getModuleCount = function() {
      return _moduleCount;
    };

    _this.make = function() {
      makeImpl(false, getBestMaskPattern() );
    };

    _this.createTableTag = function(cellSize, margin) {

      cellSize = cellSize || 2;
      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;

      var qrHtml = '';

      qrHtml += '<table style="';
      qrHtml += ' border-width: 0px; border-style: none;';
      qrHtml += ' border-collapse: collapse;';
      qrHtml += ' padding: 0px; margin: ' + margin + 'px;';
      qrHtml += '">';
      qrHtml += '<tbody>';

      for (var r = 0; r < _this.getModuleCount(); r += 1) {

        qrHtml += '<tr>';

        for (var c = 0; c < _this.getModuleCount(); c += 1) {
          qrHtml += '<td style="';
          qrHtml += ' border-width: 0px; border-style: none;';
          qrHtml += ' border-collapse: collapse;';
          qrHtml += ' padding: 0px; margin: 0px;';
          qrHtml += ' width: ' + cellSize + 'px;';
          qrHtml += ' height: ' + cellSize + 'px;';
          qrHtml += ' background-color: ';
          qrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';
          qrHtml += ';';
          qrHtml += '"/>';
        }

        qrHtml += '</tr>';
      }

      qrHtml += '</tbody>';
      qrHtml += '</table>';

      return qrHtml;
    };

    _this.createSvgTag = function(cellSize, margin) {

      cellSize = cellSize || 2;
      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;
      var size = _this.getModuleCount() * cellSize + margin * 2;
      var c, mc, r, mr, qrSvg='', rect;

      rect = 'l' + cellSize + ',0 0,' + cellSize +
        ' -' + cellSize + ',0 0,-' + cellSize + 'z ';

      qrSvg += '<svg';
      qrSvg += ' width="' + size + 'px"';
      qrSvg += ' height="' + size + 'px"';
      qrSvg += ' xmlns="http://www.w3.org/2000/svg"';
      qrSvg += '>';
      qrSvg += '<path d="';

      for (r = 0; r < _this.getModuleCount(); r += 1) {
        mr = r * cellSize + margin;
        for (c = 0; c < _this.getModuleCount(); c += 1) {
          if (_this.isDark(r, c) ) {
            mc = c*cellSize+margin;
            qrSvg += 'M' + mc + ',' + mr + rect;
          }
        }
      }

      qrSvg += '" stroke="transparent" fill="black"/>';
      qrSvg += '</svg>';

      return qrSvg;
    };

    _this.createImgTag = function(cellSize, margin) {

      cellSize = cellSize || 2;
      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;

      var size = _this.getModuleCount() * cellSize + margin * 2;
      var min = margin;
      var max = size - margin;

      return createImgTag(size, size, function(x, y) {
        if (min <= x && x < max && min <= y && y < max) {
          var c = Math.floor( (x - min) / cellSize);
          var r = Math.floor( (y - min) / cellSize);
          return _this.isDark(r, c)? 0 : 1;
        } else {
          return 1;
        }
      } );
    };

    return _this;
  };

  //---------------------------------------------------------------------
  // qrcode.stringToBytes
  //---------------------------------------------------------------------

  qrcode.stringToBytes = function(s) {
    var bytes = new Array();
    for (var i = 0; i < s.length; i += 1) {
      var c = s.charCodeAt(i);
      bytes.push(c & 0xff);
    }
    return bytes;
  };

  //---------------------------------------------------------------------
  // qrcode.createStringToBytes
  //---------------------------------------------------------------------

  /**
   * @param unicodeData base64 string of byte array.
   * [16bit Unicode],[16bit Bytes], ...
   * @param numChars
   */
  qrcode.createStringToBytes = function(unicodeData, numChars) {

    // create conversion map.

    var unicodeMap = function() {

      var bin = base64DecodeInputStream(unicodeData);
      var read = function() {
        var b = bin.read();
        if (b == -1) throw new Error();
        return b;
      };

      var count = 0;
      var unicodeMap = {};
      while (true) {
        var b0 = bin.read();
        if (b0 == -1) break;
        var b1 = read();
        var b2 = read();
        var b3 = read();
        var k = String.fromCharCode( (b0 << 8) | b1);
        var v = (b2 << 8) | b3;
        unicodeMap[k] = v;
        count += 1;
      }
      if (count != numChars) {
        throw new Error(count + ' != ' + numChars);
      }

      return unicodeMap;
    }();

    var unknownChar = '?'.charCodeAt(0);

    return function(s) {
      var bytes = new Array();
      for (var i = 0; i < s.length; i += 1) {
        var c = s.charCodeAt(i);
        if (c < 128) {
          bytes.push(c);
        } else {
          var b = unicodeMap[s.charAt(i)];
          if (typeof b == 'number') {
            if ( (b & 0xff) == b) {
              // 1byte
              bytes.push(b);
            } else {
              // 2bytes
              bytes.push(b >>> 8);
              bytes.push(b & 0xff);
            }
          } else {
            bytes.push(unknownChar);
          }
        }
      }
      return bytes;
    };
  };

  //---------------------------------------------------------------------
  // QRMode
  //---------------------------------------------------------------------

  var QRMode = {
    MODE_NUMBER :    1 << 0,
    MODE_ALPHA_NUM : 1 << 1,
    MODE_8BIT_BYTE : 1 << 2,
    MODE_KANJI :     1 << 3
  };

  //---------------------------------------------------------------------
  // QRErrorCorrectLevel
  //---------------------------------------------------------------------

  var QRErrorCorrectLevel = {
    L : 1,
    M : 0,
    Q : 3,
    H : 2
  };

  //---------------------------------------------------------------------
  // QRMaskPattern
  //---------------------------------------------------------------------

  var QRMaskPattern = {
    PATTERN000 : 0,
    PATTERN001 : 1,
    PATTERN010 : 2,
    PATTERN011 : 3,
    PATTERN100 : 4,
    PATTERN101 : 5,
    PATTERN110 : 6,
    PATTERN111 : 7
  };

  //---------------------------------------------------------------------
  // QRUtil
  //---------------------------------------------------------------------

  var QRUtil = function() {

    var PATTERN_POSITION_TABLE = [
      [],
      [6, 18],
      [6, 22],
      [6, 26],
      [6, 30],
      [6, 34],
      [6, 22, 38],
      [6, 24, 42],
      [6, 26, 46],
      [6, 28, 50],
      [6, 30, 54],
      [6, 32, 58],
      [6, 34, 62],
      [6, 26, 46, 66],
      [6, 26, 48, 70],
      [6, 26, 50, 74],
      [6, 30, 54, 78],
      [6, 30, 56, 82],
      [6, 30, 58, 86],
      [6, 34, 62, 90],
      [6, 28, 50, 72, 94],
      [6, 26, 50, 74, 98],
      [6, 30, 54, 78, 102],
      [6, 28, 54, 80, 106],
      [6, 32, 58, 84, 110],
      [6, 30, 58, 86, 114],
      [6, 34, 62, 90, 118],
      [6, 26, 50, 74, 98, 122],
      [6, 30, 54, 78, 102, 126],
      [6, 26, 52, 78, 104, 130],
      [6, 30, 56, 82, 108, 134],
      [6, 34, 60, 86, 112, 138],
      [6, 30, 58, 86, 114, 142],
      [6, 34, 62, 90, 118, 146],
      [6, 30, 54, 78, 102, 126, 150],
      [6, 24, 50, 76, 102, 128, 154],
      [6, 28, 54, 80, 106, 132, 158],
      [6, 32, 58, 84, 110, 136, 162],
      [6, 26, 54, 82, 110, 138, 166],
      [6, 30, 58, 86, 114, 142, 170]
    ];
    var G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);
    var G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);
    var G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);

    var _this = {};

    var getBCHDigit = function(data) {
      var digit = 0;
      while (data != 0) {
        digit += 1;
        data >>>= 1;
      }
      return digit;
    };

    _this.getBCHTypeInfo = function(data) {
      var d = data << 10;
      while (getBCHDigit(d) - getBCHDigit(G15) >= 0) {
        d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );
      }
      return ( (data << 10) | d) ^ G15_MASK;
    };

    _this.getBCHTypeNumber = function(data) {
      var d = data << 12;
      while (getBCHDigit(d) - getBCHDigit(G18) >= 0) {
        d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );
      }
      return (data << 12) | d;
    };

    _this.getPatternPosition = function(typeNumber) {
      return PATTERN_POSITION_TABLE[typeNumber - 1];
    };

    _this.getMaskFunction = function(maskPattern) {

      switch (maskPattern) {

      case QRMaskPattern.PATTERN000 :
        return function(i, j) { return (i + j) % 2 == 0; };
      case QRMaskPattern.PATTERN001 :
        return function(i, j) { return i % 2 == 0; };
      case QRMaskPattern.PATTERN010 :
        return function(i, j) { return j % 3 == 0; };
      case QRMaskPattern.PATTERN011 :
        return function(i, j) { return (i + j) % 3 == 0; };
      case QRMaskPattern.PATTERN100 :
        return function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };
      case QRMaskPattern.PATTERN101 :
        return function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };
      case QRMaskPattern.PATTERN110 :
        return function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };
      case QRMaskPattern.PATTERN111 :
        return function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };

      default :
        throw new Error('bad maskPattern:' + maskPattern);
      }
    };

    _this.getErrorCorrectPolynomial = function(errorCorrectLength) {
      var a = qrPolynomial([1], 0);
      for (var i = 0; i < errorCorrectLength; i += 1) {
        a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );
      }
      return a;
    };

    _this.getLengthInBits = function(mode, type) {

      if (1 <= type && type < 10) {

        // 1 - 9

        switch(mode) {
        case QRMode.MODE_NUMBER    : return 10;
        case QRMode.MODE_ALPHA_NUM : return 9;
        case QRMode.MODE_8BIT_BYTE : return 8;
        case QRMode.MODE_KANJI     : return 8;
        default :
          throw new Error('mode:' + mode);
        }

      } else if (type < 27) {

        // 10 - 26

        switch(mode) {
        case QRMode.MODE_NUMBER    : return 12;
        case QRMode.MODE_ALPHA_NUM : return 11;
        case QRMode.MODE_8BIT_BYTE : return 16;
        case QRMode.MODE_KANJI     : return 10;
        default :
          throw new Error('mode:' + mode);
        }

      } else if (type < 41) {

        // 27 - 40

        switch(mode) {
        case QRMode.MODE_NUMBER    : return 14;
        case QRMode.MODE_ALPHA_NUM : return 13;
        case QRMode.MODE_8BIT_BYTE : return 16;
        case QRMode.MODE_KANJI     : return 12;
        default :
          throw new Error('mode:' + mode);
        }

      } else {
        throw new Error('type:' + type);
      }
    };

    _this.getLostPoint = function(qrcode) {

      var moduleCount = qrcode.getModuleCount();

      var lostPoint = 0;

      // LEVEL1

      for (var row = 0; row < moduleCount; row += 1) {
        for (var col = 0; col < moduleCount; col += 1) {

          var sameCount = 0;
          var dark = qrcode.isDark(row, col);

          for (var r = -1; r <= 1; r += 1) {

            if (row + r < 0 || moduleCount <= row + r) {
              continue;
            }

            for (var c = -1; c <= 1; c += 1) {

              if (col + c < 0 || moduleCount <= col + c) {
                continue;
              }

              if (r == 0 && c == 0) {
                continue;
              }

              if (dark == qrcode.isDark(row + r, col + c) ) {
                sameCount += 1;
              }
            }
          }

          if (sameCount > 5) {
            lostPoint += (3 + sameCount - 5);
          }
        }
      };

      // LEVEL2

      for (var row = 0; row < moduleCount - 1; row += 1) {
        for (var col = 0; col < moduleCount - 1; col += 1) {
          var count = 0;
          if (qrcode.isDark(row, col) ) count += 1;
          if (qrcode.isDark(row + 1, col) ) count += 1;
          if (qrcode.isDark(row, col + 1) ) count += 1;
          if (qrcode.isDark(row + 1, col + 1) ) count += 1;
          if (count == 0 || count == 4) {
            lostPoint += 3;
          }
        }
      }

      // LEVEL3

      for (var row = 0; row < moduleCount; row += 1) {
        for (var col = 0; col < moduleCount - 6; col += 1) {
          if (qrcode.isDark(row, col)
              && !qrcode.isDark(row, col + 1)
              &&  qrcode.isDark(row, col + 2)
              &&  qrcode.isDark(row, col + 3)
              &&  qrcode.isDark(row, col + 4)
              && !qrcode.isDark(row, col + 5)
              &&  qrcode.isDark(row, col + 6) ) {
            lostPoint += 40;
          }
        }
      }

      for (var col = 0; col < moduleCount; col += 1) {
        for (var row = 0; row < moduleCount - 6; row += 1) {
          if (qrcode.isDark(row, col)
              && !qrcode.isDark(row + 1, col)
              &&  qrcode.isDark(row + 2, col)
              &&  qrcode.isDark(row + 3, col)
              &&  qrcode.isDark(row + 4, col)
              && !qrcode.isDark(row + 5, col)
              &&  qrcode.isDark(row + 6, col) ) {
            lostPoint += 40;
          }
        }
      }

      // LEVEL4

      var darkCount = 0;

      for (var col = 0; col < moduleCount; col += 1) {
        for (var row = 0; row < moduleCount; row += 1) {
          if (qrcode.isDark(row, col) ) {
            darkCount += 1;
          }
        }
      }

      var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;
      lostPoint += ratio * 10;

      return lostPoint;
    };

    return _this;
  }();

  //---------------------------------------------------------------------
  // QRMath
  //---------------------------------------------------------------------

  var QRMath = function() {

    var EXP_TABLE = new Array(256);
    var LOG_TABLE = new Array(256);

    // initialize tables
    for (var i = 0; i < 8; i += 1) {
      EXP_TABLE[i] = 1 << i;
    }
    for (var i = 8; i < 256; i += 1) {
      EXP_TABLE[i] = EXP_TABLE[i - 4]
        ^ EXP_TABLE[i - 5]
        ^ EXP_TABLE[i - 6]
        ^ EXP_TABLE[i - 8];
    }
    for (var i = 0; i < 255; i += 1) {
      LOG_TABLE[EXP_TABLE[i] ] = i;
    }

    var _this = {};

    _this.glog = function(n) {

      if (n < 1) {
        throw new Error('glog(' + n + ')');
      }

      return LOG_TABLE[n];
    };

    _this.gexp = function(n) {

      while (n < 0) {
        n += 255;
      }

      while (n >= 256) {
        n -= 255;
      }

      return EXP_TABLE[n];
    };

    return _this;
  }();

  //---------------------------------------------------------------------
  // qrPolynomial
  //---------------------------------------------------------------------

  function qrPolynomial(num, shift) {

    if (typeof num.length == 'undefined') {
      throw new Error(num.length + '/' + shift);
    }

    var _num = function() {
      var offset = 0;
      while (offset < num.length && num[offset] == 0) {
        offset += 1;
      }
      var _num = new Array(num.length - offset + shift);
      for (var i = 0; i < num.length - offset; i += 1) {
        _num[i] = num[i + offset];
      }
      return _num;
    }();

    var _this = {};

    _this.getAt = function(index) {
      return _num[index];
    };

    _this.getLength = function() {
      return _num.length;
    };

    _this.multiply = function(e) {

      var num = new Array(_this.getLength() + e.getLength() - 1);

      for (var i = 0; i < _this.getLength(); i += 1) {
        for (var j = 0; j < e.getLength(); j += 1) {
          num[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );
        }
      }

      return qrPolynomial(num, 0);
    };

    _this.mod = function(e) {

      if (_this.getLength() - e.getLength() < 0) {
        return _this;
      }

      var ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );

      var num = new Array(_this.getLength() );
      for (var i = 0; i < _this.getLength(); i += 1) {
        num[i] = _this.getAt(i);
      }

      for (var i = 0; i < e.getLength(); i += 1) {
        num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);
      }

      // recursive call
      return qrPolynomial(num, 0).mod(e);
    };

    return _this;
  };

  //---------------------------------------------------------------------
  // QRRSBlock
  //---------------------------------------------------------------------

  var QRRSBlock = function() {

    var RS_BLOCK_TABLE = [

      // L
      // M
      // Q
      // H

      // 1
      [1, 26, 19],
      [1, 26, 16],
      [1, 26, 13],
      [1, 26, 9],

      // 2
      [1, 44, 34],
      [1, 44, 28],
      [1, 44, 22],
      [1, 44, 16],

      // 3
      [1, 70, 55],
      [1, 70, 44],
      [2, 35, 17],
      [2, 35, 13],

      // 4
      [1, 100, 80],
      [2, 50, 32],
      [2, 50, 24],
      [4, 25, 9],

      // 5
      [1, 134, 108],
      [2, 67, 43],
      [2, 33, 15, 2, 34, 16],
      [2, 33, 11, 2, 34, 12],

      // 6
      [2, 86, 68],
      [4, 43, 27],
      [4, 43, 19],
      [4, 43, 15],

      // 7
      [2, 98, 78],
      [4, 49, 31],
      [2, 32, 14, 4, 33, 15],
      [4, 39, 13, 1, 40, 14],

      // 8
      [2, 121, 97],
      [2, 60, 38, 2, 61, 39],
      [4, 40, 18, 2, 41, 19],
      [4, 40, 14, 2, 41, 15],

      // 9
      [2, 146, 116],
      [3, 58, 36, 2, 59, 37],
      [4, 36, 16, 4, 37, 17],
      [4, 36, 12, 4, 37, 13],

      // 10
      [2, 86, 68, 2, 87, 69],
      [4, 69, 43, 1, 70, 44],
      [6, 43, 19, 2, 44, 20],
      [6, 43, 15, 2, 44, 16],

      // 11
      [4, 101, 81],
      [1, 80, 50, 4, 81, 51],
      [4, 50, 22, 4, 51, 23],
      [3, 36, 12, 8, 37, 13],

      // 12
      [2, 116, 92, 2, 117, 93],
      [6, 58, 36, 2, 59, 37],
      [4, 46, 20, 6, 47, 21],
      [7, 42, 14, 4, 43, 15],

      // 13
      [4, 133, 107],
      [8, 59, 37, 1, 60, 38],
      [8, 44, 20, 4, 45, 21],
      [12, 33, 11, 4, 34, 12],

      // 14
      [3, 145, 115, 1, 146, 116],
      [4, 64, 40, 5, 65, 41],
      [11, 36, 16, 5, 37, 17],
      [11, 36, 12, 5, 37, 13],

      // 15
      [5, 109, 87, 1, 110, 88],
      [5, 65, 41, 5, 66, 42],
      [5, 54, 24, 7, 55, 25],
      [11, 36, 12, 7, 37, 13],

      // 16
      [5, 122, 98, 1, 123, 99],
      [7, 73, 45, 3, 74, 46],
      [15, 43, 19, 2, 44, 20],
      [3, 45, 15, 13, 46, 16],

      // 17
      [1, 135, 107, 5, 136, 108],
      [10, 74, 46, 1, 75, 47],
      [1, 50, 22, 15, 51, 23],
      [2, 42, 14, 17, 43, 15],

      // 18
      [5, 150, 120, 1, 151, 121],
      [9, 69, 43, 4, 70, 44],
      [17, 50, 22, 1, 51, 23],
      [2, 42, 14, 19, 43, 15],

      // 19
      [3, 141, 113, 4, 142, 114],
      [3, 70, 44, 11, 71, 45],
      [17, 47, 21, 4, 48, 22],
      [9, 39, 13, 16, 40, 14],

      // 20
      [3, 135, 107, 5, 136, 108],
      [3, 67, 41, 13, 68, 42],
      [15, 54, 24, 5, 55, 25],
      [15, 43, 15, 10, 44, 16],

      // 21
      [4, 144, 116, 4, 145, 117],
      [17, 68, 42],
      [17, 50, 22, 6, 51, 23],
      [19, 46, 16, 6, 47, 17],

      // 22
      [2, 139, 111, 7, 140, 112],
      [17, 74, 46],
      [7, 54, 24, 16, 55, 25],
      [34, 37, 13],

      // 23
      [4, 151, 121, 5, 152, 122],
      [4, 75, 47, 14, 76, 48],
      [11, 54, 24, 14, 55, 25],
      [16, 45, 15, 14, 46, 16],

      // 24
      [6, 147, 117, 4, 148, 118],
      [6, 73, 45, 14, 74, 46],
      [11, 54, 24, 16, 55, 25],
      [30, 46, 16, 2, 47, 17],

      // 25
      [8, 132, 106, 4, 133, 107],
      [8, 75, 47, 13, 76, 48],
      [7, 54, 24, 22, 55, 25],
      [22, 45, 15, 13, 46, 16],

      // 26
      [10, 142, 114, 2, 143, 115],
      [19, 74, 46, 4, 75, 47],
      [28, 50, 22, 6, 51, 23],
      [33, 46, 16, 4, 47, 17],

      // 27
      [8, 152, 122, 4, 153, 123],
      [22, 73, 45, 3, 74, 46],
      [8, 53, 23, 26, 54, 24],
      [12, 45, 15, 28, 46, 16],

      // 28
      [3, 147, 117, 10, 148, 118],
      [3, 73, 45, 23, 74, 46],
      [4, 54, 24, 31, 55, 25],
      [11, 45, 15, 31, 46, 16],

      // 29
      [7, 146, 116, 7, 147, 117],
      [21, 73, 45, 7, 74, 46],
      [1, 53, 23, 37, 54, 24],
      [19, 45, 15, 26, 46, 16],

      // 30
      [5, 145, 115, 10, 146, 116],
      [19, 75, 47, 10, 76, 48],
      [15, 54, 24, 25, 55, 25],
      [23, 45, 15, 25, 46, 16],

      // 31
      [13, 145, 115, 3, 146, 116],
      [2, 74, 46, 29, 75, 47],
      [42, 54, 24, 1, 55, 25],
      [23, 45, 15, 28, 46, 16],

      // 32
      [17, 145, 115],
      [10, 74, 46, 23, 75, 47],
      [10, 54, 24, 35, 55, 25],
      [19, 45, 15, 35, 46, 16],

      // 33
      [17, 145, 115, 1, 146, 116],
      [14, 74, 46, 21, 75, 47],
      [29, 54, 24, 19, 55, 25],
      [11, 45, 15, 46, 46, 16],

      // 34
      [13, 145, 115, 6, 146, 116],
      [14, 74, 46, 23, 75, 47],
      [44, 54, 24, 7, 55, 25],
      [59, 46, 16, 1, 47, 17],

      // 35
      [12, 151, 121, 7, 152, 122],
      [12, 75, 47, 26, 76, 48],
      [39, 54, 24, 14, 55, 25],
      [22, 45, 15, 41, 46, 16],

      // 36
      [6, 151, 121, 14, 152, 122],
      [6, 75, 47, 34, 76, 48],
      [46, 54, 24, 10, 55, 25],
      [2, 45, 15, 64, 46, 16],

      // 37
      [17, 152, 122, 4, 153, 123],
      [29, 74, 46, 14, 75, 47],
      [49, 54, 24, 10, 55, 25],
      [24, 45, 15, 46, 46, 16],

      // 38
      [4, 152, 122, 18, 153, 123],
      [13, 74, 46, 32, 75, 47],
      [48, 54, 24, 14, 55, 25],
      [42, 45, 15, 32, 46, 16],

      // 39
      [20, 147, 117, 4, 148, 118],
      [40, 75, 47, 7, 76, 48],
      [43, 54, 24, 22, 55, 25],
      [10, 45, 15, 67, 46, 16],

      // 40
      [19, 148, 118, 6, 149, 119],
      [18, 75, 47, 31, 76, 48],
      [34, 54, 24, 34, 55, 25],
      [20, 45, 15, 61, 46, 16]
    ];

    var qrRSBlock = function(totalCount, dataCount) {
      var _this = {};
      _this.totalCount = totalCount;
      _this.dataCount = dataCount;
      return _this;
    };

    var _this = {};

    var getRsBlockTable = function(typeNumber, errorCorrectLevel) {

      switch(errorCorrectLevel) {
      case QRErrorCorrectLevel.L :
        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];
      case QRErrorCorrectLevel.M :
        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];
      case QRErrorCorrectLevel.Q :
        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];
      case QRErrorCorrectLevel.H :
        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];
      default :
        return undefined;
      }
    };

    _this.getRSBlocks = function(typeNumber, errorCorrectLevel) {

      var rsBlock = getRsBlockTable(typeNumber, errorCorrectLevel);

      if (typeof rsBlock == 'undefined') {
        throw new Error('bad rs block @ typeNumber:' + typeNumber +
            '/errorCorrectLevel:' + errorCorrectLevel);
      }

      var length = rsBlock.length / 3;

      var list = new Array();

      for (var i = 0; i < length; i += 1) {

        var count = rsBlock[i * 3 + 0];
        var totalCount = rsBlock[i * 3 + 1];
        var dataCount = rsBlock[i * 3 + 2];

        for (var j = 0; j < count; j += 1) {
          list.push(qrRSBlock(totalCount, dataCount) );
        }
      }

      return list;
    };

    return _this;
  }();

  //---------------------------------------------------------------------
  // qrBitBuffer
  //---------------------------------------------------------------------

  var qrBitBuffer = function() {

    var _buffer = new Array();
    var _length = 0;

    var _this = {};

    _this.getBuffer = function() {
      return _buffer;
    };

    _this.getAt = function(index) {
      var bufIndex = Math.floor(index / 8);
      return ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;
    };

    _this.put = function(num, length) {
      for (var i = 0; i < length; i += 1) {
        _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);
      }
    };

    _this.getLengthInBits = function() {
      return _length;
    };

    _this.putBit = function(bit) {

      var bufIndex = Math.floor(_length / 8);
      if (_buffer.length <= bufIndex) {
        _buffer.push(0);
      }

      if (bit) {
        _buffer[bufIndex] |= (0x80 >>> (_length % 8) );
      }

      _length += 1;
    };

    return _this;
  };

  //---------------------------------------------------------------------
  // qr8BitByte
  //---------------------------------------------------------------------

  var qr8BitByte = function(data) {

    var _mode = QRMode.MODE_8BIT_BYTE;
    var _data = data;
    var _bytes = qrcode.stringToBytes(data);

    var _this = {};

    _this.getMode = function() {
      return _mode;
    };

    _this.getLength = function(buffer) {
      return _bytes.length;
    };

    _this.write = function(buffer) {
      for (var i = 0; i < _bytes.length; i += 1) {
        buffer.put(_bytes[i], 8);
      }
    };

    return _this;
  };

  //=====================================================================
  // GIF Support etc.
  //

  //---------------------------------------------------------------------
  // byteArrayOutputStream
  //---------------------------------------------------------------------

  var byteArrayOutputStream = function() {

    var _bytes = new Array();

    var _this = {};

    _this.writeByte = function(b) {
      _bytes.push(b & 0xff);
    };

    _this.writeShort = function(i) {
      _this.writeByte(i);
      _this.writeByte(i >>> 8);
    };

    _this.writeBytes = function(b, off, len) {
      off = off || 0;
      len = len || b.length;
      for (var i = 0; i < len; i += 1) {
        _this.writeByte(b[i + off]);
      }
    };

    _this.writeString = function(s) {
      for (var i = 0; i < s.length; i += 1) {
        _this.writeByte(s.charCodeAt(i) );
      }
    };

    _this.toByteArray = function() {
      return _bytes;
    };

    _this.toString = function() {
      var s = '';
      s += '[';
      for (var i = 0; i < _bytes.length; i += 1) {
        if (i > 0) {
          s += ',';
        }
        s += _bytes[i];
      }
      s += ']';
      return s;
    };

    return _this;
  };

  //---------------------------------------------------------------------
  // base64EncodeOutputStream
  //---------------------------------------------------------------------

  var base64EncodeOutputStream = function() {

    var _buffer = 0;
    var _buflen = 0;
    var _length = 0;
    var _base64 = '';

    var _this = {};

    var writeEncoded = function(b) {
      _base64 += String.fromCharCode(encode(b & 0x3f) );
    };

    var encode = function(n) {
      if (n < 0) {
        // error.
      } else if (n < 26) {
        return 0x41 + n;
      } else if (n < 52) {
        return 0x61 + (n - 26);
      } else if (n < 62) {
        return 0x30 + (n - 52);
      } else if (n == 62) {
        return 0x2b;
      } else if (n == 63) {
        return 0x2f;
      }
      throw new Error('n:' + n);
    };

    _this.writeByte = function(n) {

      _buffer = (_buffer << 8) | (n & 0xff);
      _buflen += 8;
      _length += 1;

      while (_buflen >= 6) {
        writeEncoded(_buffer >>> (_buflen - 6) );
        _buflen -= 6;
      }
    };

    _this.flush = function() {

      if (_buflen > 0) {
        writeEncoded(_buffer << (6 - _buflen) );
        _buffer = 0;
        _buflen = 0;
      }

      if (_length % 3 != 0) {
        // padding
        var padlen = 3 - _length % 3;
        for (var i = 0; i < padlen; i += 1) {
          _base64 += '=';
        }
      }
    };

    _this.toString = function() {
      return _base64;
    };

    return _this;
  };

  //---------------------------------------------------------------------
  // base64DecodeInputStream
  //---------------------------------------------------------------------

  var base64DecodeInputStream = function(str) {

    var _str = str;
    var _pos = 0;
    var _buffer = 0;
    var _buflen = 0;

    var _this = {};

    _this.read = function() {

      while (_buflen < 8) {

        if (_pos >= _str.length) {
          if (_buflen == 0) {
            return -1;
          }
          throw new Error('unexpected end of file./' + _buflen);
        }

        var c = _str.charAt(_pos);
        _pos += 1;

        if (c == '=') {
          _buflen = 0;
          return -1;
        } else if (c.match(/^\s$/) ) {
          // ignore if whitespace.
          continue;
        }

        _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );
        _buflen += 6;
      }

      var n = (_buffer >>> (_buflen - 8) ) & 0xff;
      _buflen -= 8;
      return n;
    };

    var decode = function(c) {
      if (0x41 <= c && c <= 0x5a) {
        return c - 0x41;
      } else if (0x61 <= c && c <= 0x7a) {
        return c - 0x61 + 26;
      } else if (0x30 <= c && c <= 0x39) {
        return c - 0x30 + 52;
      } else if (c == 0x2b) {
        return 62;
      } else if (c == 0x2f) {
        return 63;
      } else {
        throw new Error('c:' + c);
      }
    };

    return _this;
  };

  //---------------------------------------------------------------------
  // gifImage (B/W)
  //---------------------------------------------------------------------

  var gifImage = function(width, height) {

    var _width = width;
    var _height = height;
    var _data = new Array(width * height);

    var _this = {};

    _this.setPixel = function(x, y, pixel) {
      _data[y * _width + x] = pixel;
    };

    _this.write = function(out) {

      //---------------------------------
      // GIF Signature

      out.writeString('GIF87a');

      //---------------------------------
      // Screen Descriptor

      out.writeShort(_width);
      out.writeShort(_height);

      out.writeByte(0x80); // 2bit
      out.writeByte(0);
      out.writeByte(0);

      //---------------------------------
      // Global Color Map

      // black
      out.writeByte(0x00);
      out.writeByte(0x00);
      out.writeByte(0x00);

      // white
      out.writeByte(0xff);
      out.writeByte(0xff);
      out.writeByte(0xff);

      //---------------------------------
      // Image Descriptor

      out.writeString(',');
      out.writeShort(0);
      out.writeShort(0);
      out.writeShort(_width);
      out.writeShort(_height);
      out.writeByte(0);

      //---------------------------------
      // Local Color Map

      //---------------------------------
      // Raster Data

      var lzwMinCodeSize = 2;
      var raster = getLZWRaster(lzwMinCodeSize);

      out.writeByte(lzwMinCodeSize);

      var offset = 0;

      while (raster.length - offset > 255) {
        out.writeByte(255);
        out.writeBytes(raster, offset, 255);
        offset += 255;
      }

      out.writeByte(raster.length - offset);
      out.writeBytes(raster, offset, raster.length - offset);
      out.writeByte(0x00);

      //---------------------------------
      // GIF Terminator
      out.writeString(';');
    };

    var bitOutputStream = function(out) {

      var _out = out;
      var _bitLength = 0;
      var _bitBuffer = 0;

      var _this = {};

      _this.write = function(data, length) {

        if ( (data >>> length) != 0) {
          throw new Error('length over');
        }

        while (_bitLength + length >= 8) {
          _out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );
          length -= (8 - _bitLength);
          data >>>= (8 - _bitLength);
          _bitBuffer = 0;
          _bitLength = 0;
        }

        _bitBuffer = (data << _bitLength) | _bitBuffer;
        _bitLength = _bitLength + length;
      };

      _this.flush = function() {
        if (_bitLength > 0) {
          _out.writeByte(_bitBuffer);
        }
      };

      return _this;
    };

    var getLZWRaster = function(lzwMinCodeSize) {

      var clearCode = 1 << lzwMinCodeSize;
      var endCode = (1 << lzwMinCodeSize) + 1;
      var bitLength = lzwMinCodeSize + 1;

      // Setup LZWTable
      var table = lzwTable();

      for (var i = 0; i < clearCode; i += 1) {
        table.add(String.fromCharCode(i) );
      }
      table.add(String.fromCharCode(clearCode) );
      table.add(String.fromCharCode(endCode) );

      var byteOut = byteArrayOutputStream();
      var bitOut = bitOutputStream(byteOut);

      // clear code
      bitOut.write(clearCode, bitLength);

      var dataIndex = 0;

      var s = String.fromCharCode(_data[dataIndex]);
      dataIndex += 1;

      while (dataIndex < _data.length) {

        var c = String.fromCharCode(_data[dataIndex]);
        dataIndex += 1;

        if (table.contains(s + c) ) {

          s = s + c;

        } else {

          bitOut.write(table.indexOf(s), bitLength);

          if (table.size() < 0xfff) {

            if (table.size() == (1 << bitLength) ) {
              bitLength += 1;
            }

            table.add(s + c);
          }

          s = c;
        }
      }

      bitOut.write(table.indexOf(s), bitLength);

      // end code
      bitOut.write(endCode, bitLength);

      bitOut.flush();

      return byteOut.toByteArray();
    };

    var lzwTable = function() {

      var _map = {};
      var _size = 0;

      var _this = {};

      _this.add = function(key) {
        if (_this.contains(key) ) {
          throw new Error('dup key:' + key);
        }
        _map[key] = _size;
        _size += 1;
      };

      _this.size = function() {
        return _size;
      };

      _this.indexOf = function(key) {
        return _map[key];
      };

      _this.contains = function(key) {
        return typeof _map[key] != 'undefined';
      };

      return _this;
    };

    return _this;
  };

  var createImgTag = function(width, height, getPixel, alt) {

    var gif = gifImage(width, height);
    for (var y = 0; y < height; y += 1) {
      for (var x = 0; x < width; x += 1) {
        gif.setPixel(x, y, getPixel(x, y) );
      }
    }

    var b = byteArrayOutputStream();
    gif.write(b);

    var base64 = base64EncodeOutputStream();
    var bytes = b.toByteArray();
    for (var i = 0; i < bytes.length; i += 1) {
      base64.writeByte(bytes[i]);
    }
    base64.flush();

    var img = '';
    img += '<img';
    img += '\u0020src="';
    img += 'data:image/gif;base64,';
    img += base64;
    img += '"';
    img += '\u0020width="';
    img += width;
    img += '"';
    img += '\u0020height="';
    img += height;
    img += '"';
    if (alt) {
      img += '\u0020alt="';
      img += alt;
      img += '"';
    }
    img += '/>';

    return img;
  };

  //---------------------------------------------------------------------
  // returns qrcode function.

  return qrcode;
}();

(function (factory) {
  if (typeof define === 'function' && define.amd) {
      define('qrcode',[], factory);
  } else if (typeof exports === 'object') {
      module.exports = factory();
  }
}(function () {
    return qrcode;
}));

/**
 * Swiper 3.4.0
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 * 
 * http://www.idangero.us/swiper/
 * 
 * Copyright 2016, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 * 
 * Licensed under MIT
 * 
 * Released on: October 16, 2016
 */
!function(){"use strict";function e(e){e.fn.swiper=function(a){var s;return e(this).each(function(){var e=new t(this,a);s||(s=e)}),s}}var a,t=function(e,i){function n(e){return Math.floor(e)}function o(){var e=S.params.autoplay,a=S.slides.eq(S.activeIndex);a.attr("data-swiper-autoplay")&&(e=a.attr("data-swiper-autoplay")||S.params.autoplay),S.autoplayTimeoutId=setTimeout(function(){S.params.loop?(S.fixLoop(),S._slideNext(),S.emit("onAutoplay",S)):S.isEnd?i.autoplayStopOnLast?S.stopAutoplay():(S._slideTo(0),S.emit("onAutoplay",S)):(S._slideNext(),S.emit("onAutoplay",S))},e)}function l(e,t){var s=a(e.target);if(!s.is(t))if("string"==typeof t)s=s.parents(t);else if(t.nodeType){var i;return s.parents().each(function(e,a){a===t&&(i=t)}),i?t:void 0}if(0!==s.length)return s[0]}function p(e,a){a=a||{};var t=window.MutationObserver||window.WebkitMutationObserver,s=new t(function(e){e.forEach(function(e){S.onResize(!0),S.emit("onObserverUpdate",S,e)})});s.observe(e,{attributes:"undefined"==typeof a.attributes||a.attributes,childList:"undefined"==typeof a.childList||a.childList,characterData:"undefined"==typeof a.characterData||a.characterData}),S.observers.push(s)}function d(e){e.originalEvent&&(e=e.originalEvent);var a=e.keyCode||e.charCode;if(!S.params.allowSwipeToNext&&(S.isHorizontal()&&39===a||!S.isHorizontal()&&40===a))return!1;if(!S.params.allowSwipeToPrev&&(S.isHorizontal()&&37===a||!S.isHorizontal()&&38===a))return!1;if(!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||document.activeElement&&document.activeElement.nodeName&&("input"===document.activeElement.nodeName.toLowerCase()||"textarea"===document.activeElement.nodeName.toLowerCase()))){if(37===a||39===a||38===a||40===a){var t=!1;if(S.container.parents("."+S.params.slideClass).length>0&&0===S.container.parents("."+S.params.slideActiveClass).length)return;var s={left:window.pageXOffset,top:window.pageYOffset},i=window.innerWidth,r=window.innerHeight,n=S.container.offset();S.rtl&&(n.left=n.left-S.container[0].scrollLeft);for(var o=[[n.left,n.top],[n.left+S.width,n.top],[n.left,n.top+S.height],[n.left+S.width,n.top+S.height]],l=0;l<o.length;l++){var p=o[l];p[0]>=s.left&&p[0]<=s.left+i&&p[1]>=s.top&&p[1]<=s.top+r&&(t=!0)}if(!t)return}S.isHorizontal()?(37!==a&&39!==a||(e.preventDefault?e.preventDefault():e.returnValue=!1),(39===a&&!S.rtl||37===a&&S.rtl)&&S.slideNext(),(37===a&&!S.rtl||39===a&&S.rtl)&&S.slidePrev()):(38!==a&&40!==a||(e.preventDefault?e.preventDefault():e.returnValue=!1),40===a&&S.slideNext(),38===a&&S.slidePrev())}}function u(){var e="onwheel",a=e in document;if(!a){var t=document.createElement("div");t.setAttribute(e,"return;"),a="function"==typeof t[e]}return!a&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}function c(e){e.originalEvent&&(e=e.originalEvent);var a=0,t=S.rtl?-1:1,s=m(e);if(S.params.mousewheelForceToAxis)if(S.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return;a=s.pixelX*t}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return;a=s.pixelY}else a=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*t:-s.pixelY;if(0!==a){if(S.params.mousewheelInvert&&(a=-a),S.params.freeMode){var i=S.getWrapperTranslate()+a*S.params.mousewheelSensitivity,r=S.isBeginning,n=S.isEnd;if(i>=S.minTranslate()&&(i=S.minTranslate()),i<=S.maxTranslate()&&(i=S.maxTranslate()),S.setWrapperTransition(0),S.setWrapperTranslate(i),S.updateProgress(),S.updateActiveIndex(),(!r&&S.isBeginning||!n&&S.isEnd)&&S.updateClasses(),S.params.freeModeSticky?(clearTimeout(S.mousewheel.timeout),S.mousewheel.timeout=setTimeout(function(){S.slideReset()},300)):S.params.lazyLoading&&S.lazy&&S.lazy.load(),S.emit("onScroll",S,e),S.params.autoplay&&S.params.autoplayDisableOnInteraction&&S.stopAutoplay(),0===i||i===S.maxTranslate())return}else{if((new window.Date).getTime()-S.mousewheel.lastScrollTime>60)if(a<0)if(S.isEnd&&!S.params.loop||S.animating){if(S.params.mousewheelReleaseOnEdges)return!0}else S.slideNext(),S.emit("onScroll",S,e);else if(S.isBeginning&&!S.params.loop||S.animating){if(S.params.mousewheelReleaseOnEdges)return!0}else S.slidePrev(),S.emit("onScroll",S,e);S.mousewheel.lastScrollTime=(new window.Date).getTime()}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1}}function m(e){var a=10,t=40,s=800,i=0,r=0,n=0,o=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(i=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(i=r,r=0),n=i*a,o=r*a,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||o)&&e.deltaMode&&(1===e.deltaMode?(n*=t,o*=t):(n*=s,o*=s)),n&&!i&&(i=n<1?-1:1),o&&!r&&(r=o<1?-1:1),{spinX:i,spinY:r,pixelX:n,pixelY:o}}function h(e,t){e=a(e);var s,i,r,n=S.rtl?-1:1;s=e.attr("data-swiper-parallax")||"0",i=e.attr("data-swiper-parallax-x"),r=e.attr("data-swiper-parallax-y"),i||r?(i=i||"0",r=r||"0"):S.isHorizontal()?(i=s,r="0"):(r=s,i="0"),i=i.indexOf("%")>=0?parseInt(i,10)*t*n+"%":i*t*n+"px",r=r.indexOf("%")>=0?parseInt(r,10)*t+"%":r*t+"px",e.transform("translate3d("+i+", "+r+",0px)")}function g(e){return 0!==e.indexOf("on")&&(e=e[0]!==e[0].toUpperCase()?"on"+e[0].toUpperCase()+e.substring(1):"on"+e),e}if(!(this instanceof t))return new t(e,i);var f={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flip:{slideShadows:!0,limitRotation:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,zoom:!1,zoomMax:3,zoomMin:1,zoomToggle:!0,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,mousewheelEventsTarged:"container",hashnav:!1,hashnavWatchState:!1,history:!1,replaceState:!1,breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",normalizeSlideIndex:!0,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",paginationClickableClass:"swiper-pagination-clickable",paginationModifierClass:"swiper-pagination-",lazyLoadingClass:"swiper-lazy",lazyStatusLoadingClass:"swiper-lazy-loading",lazyStatusLoadedClass:"swiper-lazy-loaded",lazyPreloaderClass:"swiper-lazy-preloader",notificationClass:"swiper-notification",preloaderClass:"preloader",zoomContainerClass:"swiper-zoom-container",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},v=i&&i.virtualTranslate;i=i||{};var w={};for(var y in i)if("object"!=typeof i[y]||null===i[y]||(i[y].nodeType||i[y]===window||i[y]===document||"undefined"!=typeof s&&i[y]instanceof s||"undefined"!=typeof jQuery&&i[y]instanceof jQuery))w[y]=i[y];else{w[y]={};for(var x in i[y])w[y][x]=i[y][x]}for(var T in f)if("undefined"==typeof i[T])i[T]=f[T];else if("object"==typeof i[T])for(var b in f[T])"undefined"==typeof i[T][b]&&(i[T][b]=f[T][b]);var S=this;if(S.params=i,S.originalParams=w,S.classNames=[],"undefined"!=typeof a&&"undefined"!=typeof s&&(a=s),("undefined"!=typeof a||(a="undefined"==typeof s?window.Dom7||window.Zepto||window.jQuery:s))&&(S.$=a,S.currentBreakpoint=void 0,S.getActiveBreakpoint=function(){if(!S.params.breakpoints)return!1;var e,a=!1,t=[];for(e in S.params.breakpoints)S.params.breakpoints.hasOwnProperty(e)&&t.push(e);t.sort(function(e,a){return parseInt(e,10)>parseInt(a,10)});for(var s=0;s<t.length;s++)e=t[s],e>=window.innerWidth&&!a&&(a=e);return a||"max"},S.setBreakpoint=function(){var e=S.getActiveBreakpoint();if(e&&S.currentBreakpoint!==e){var a=e in S.params.breakpoints?S.params.breakpoints[e]:S.originalParams,t=S.params.loop&&a.slidesPerView!==S.params.slidesPerView;for(var s in a)S.params[s]=a[s];S.currentBreakpoint=e,t&&S.destroyLoop&&S.reLoop(!0)}},S.params.breakpoints&&S.setBreakpoint(),S.container=a(e),0!==S.container.length)){if(S.container.length>1){var C=[];return S.container.each(function(){C.push(new t(this,i))}),C}S.container[0].swiper=S,S.container.data("swiper",S),S.classNames.push(S.params.containerModifierClass+S.params.direction),S.params.freeMode&&S.classNames.push(S.params.containerModifierClass+"free-mode"),S.support.flexbox||(S.classNames.push(S.params.containerModifierClass+"no-flexbox"),S.params.slidesPerColumn=1),S.params.autoHeight&&S.classNames.push(S.params.containerModifierClass+"autoheight"),(S.params.parallax||S.params.watchSlidesVisibility)&&(S.params.watchSlidesProgress=!0),S.params.touchReleaseOnEdges&&(S.params.resistanceRatio=0),["cube","coverflow","flip"].indexOf(S.params.effect)>=0&&(S.support.transforms3d?(S.params.watchSlidesProgress=!0,S.classNames.push(S.params.containerModifierClass+"3d")):S.params.effect="slide"),"slide"!==S.params.effect&&S.classNames.push(S.params.containerModifierClass+S.params.effect),"cube"===S.params.effect&&(S.params.resistanceRatio=0,S.params.slidesPerView=1,S.params.slidesPerColumn=1,S.params.slidesPerGroup=1,S.params.centeredSlides=!1,S.params.spaceBetween=0,S.params.virtualTranslate=!0,S.params.setWrapperSize=!1),"fade"!==S.params.effect&&"flip"!==S.params.effect||(S.params.slidesPerView=1,S.params.slidesPerColumn=1,S.params.slidesPerGroup=1,S.params.watchSlidesProgress=!0,S.params.spaceBetween=0,S.params.setWrapperSize=!1,"undefined"==typeof v&&(S.params.virtualTranslate=!0)),S.params.grabCursor&&S.support.touch&&(S.params.grabCursor=!1),S.wrapper=S.container.children("."+S.params.wrapperClass),S.params.pagination&&(S.paginationContainer=a(S.params.pagination),S.params.uniqueNavElements&&"string"==typeof S.params.pagination&&S.paginationContainer.length>1&&1===S.container.find(S.params.pagination).length&&(S.paginationContainer=S.container.find(S.params.pagination)),"bullets"===S.params.paginationType&&S.params.paginationClickable?S.paginationContainer.addClass(S.params.paginationModifierClass+"clickable"):S.params.paginationClickable=!1,S.paginationContainer.addClass(S.params.paginationModifierClass+S.params.paginationType)),(S.params.nextButton||S.params.prevButton)&&(S.params.nextButton&&(S.nextButton=a(S.params.nextButton),S.params.uniqueNavElements&&"string"==typeof S.params.nextButton&&S.nextButton.length>1&&1===S.container.find(S.params.nextButton).length&&(S.nextButton=S.container.find(S.params.nextButton))),S.params.prevButton&&(S.prevButton=a(S.params.prevButton),S.params.uniqueNavElements&&"string"==typeof S.params.prevButton&&S.prevButton.length>1&&1===S.container.find(S.params.prevButton).length&&(S.prevButton=S.container.find(S.params.prevButton)))),S.isHorizontal=function(){return"horizontal"===S.params.direction},S.rtl=S.isHorizontal()&&("rtl"===S.container[0].dir.toLowerCase()||"rtl"===S.container.css("direction")),S.rtl&&S.classNames.push(S.params.containerModifierClass+"rtl"),S.rtl&&(S.wrongRTL="-webkit-box"===S.wrapper.css("display")),S.params.slidesPerColumn>1&&S.classNames.push(S.params.containerModifierClass+"multirow"),S.device.android&&S.classNames.push(S.params.containerModifierClass+"android"),S.container.addClass(S.classNames.join(" ")),S.translate=0,S.progress=0,S.velocity=0,S.lockSwipeToNext=function(){S.params.allowSwipeToNext=!1,S.params.allowSwipeToPrev===!1&&S.params.grabCursor&&S.unsetGrabCursor()},S.lockSwipeToPrev=function(){S.params.allowSwipeToPrev=!1,S.params.allowSwipeToNext===!1&&S.params.grabCursor&&S.unsetGrabCursor()},S.lockSwipes=function(){S.params.allowSwipeToNext=S.params.allowSwipeToPrev=!1,S.params.grabCursor&&S.unsetGrabCursor()},S.unlockSwipeToNext=function(){S.params.allowSwipeToNext=!0,S.params.allowSwipeToPrev===!0&&S.params.grabCursor&&S.setGrabCursor()},S.unlockSwipeToPrev=function(){S.params.allowSwipeToPrev=!0,S.params.allowSwipeToNext===!0&&S.params.grabCursor&&S.setGrabCursor()},S.unlockSwipes=function(){S.params.allowSwipeToNext=S.params.allowSwipeToPrev=!0,S.params.grabCursor&&S.setGrabCursor()},S.setGrabCursor=function(e){S.container[0].style.cursor="move",S.container[0].style.cursor=e?"-webkit-grabbing":"-webkit-grab",S.container[0].style.cursor=e?"-moz-grabbin":"-moz-grab",S.container[0].style.cursor=e?"grabbing":"grab"},S.unsetGrabCursor=function(){S.container[0].style.cursor=""},S.params.grabCursor&&S.setGrabCursor(),S.imagesToLoad=[],S.imagesLoaded=0,S.loadImage=function(e,a,t,s,i,r){function n(){r&&r()}var o;e.complete&&i?n():a?(o=new window.Image,o.onload=n,o.onerror=n,s&&(o.sizes=s),t&&(o.srcset=t),a&&(o.src=a)):n()},S.preloadImages=function(){function e(){"undefined"!=typeof S&&null!==S&&(void 0!==S.imagesLoaded&&S.imagesLoaded++,S.imagesLoaded===S.imagesToLoad.length&&(S.params.updateOnImagesReady&&S.update(),S.emit("onImagesReady",S)))}S.imagesToLoad=S.container.find("img");for(var a=0;a<S.imagesToLoad.length;a++)S.loadImage(S.imagesToLoad[a],S.imagesToLoad[a].currentSrc||S.imagesToLoad[a].getAttribute("src"),S.imagesToLoad[a].srcset||S.imagesToLoad[a].getAttribute("srcset"),S.imagesToLoad[a].sizes||S.imagesToLoad[a].getAttribute("sizes"),!0,e)},S.autoplayTimeoutId=void 0,S.autoplaying=!1,S.autoplayPaused=!1,S.startAutoplay=function(){return"undefined"==typeof S.autoplayTimeoutId&&(!!S.params.autoplay&&(!S.autoplaying&&(S.autoplaying=!0,S.emit("onAutoplayStart",S),void o())))},S.stopAutoplay=function(e){S.autoplayTimeoutId&&(S.autoplayTimeoutId&&clearTimeout(S.autoplayTimeoutId),S.autoplaying=!1,S.autoplayTimeoutId=void 0,S.emit("onAutoplayStop",S))},S.pauseAutoplay=function(e){S.autoplayPaused||(S.autoplayTimeoutId&&clearTimeout(S.autoplayTimeoutId),S.autoplayPaused=!0,0===e?(S.autoplayPaused=!1,o()):S.wrapper.transitionEnd(function(){S&&(S.autoplayPaused=!1,S.autoplaying?o():S.stopAutoplay())}))},S.minTranslate=function(){return-S.snapGrid[0]},S.maxTranslate=function(){return-S.snapGrid[S.snapGrid.length-1]},S.updateAutoHeight=function(){var e=[],a=0;if("auto"!==S.params.slidesPerView&&S.params.slidesPerView>1)for(r=0;r<Math.ceil(S.params.slidesPerView);r++){var t=S.activeIndex+r;if(t>S.slides.length)break;e.push(S.slides.eq(t)[0])}else e.push(S.slides.eq(S.activeIndex)[0]);for(r=0;r<e.length;r++)if("undefined"!=typeof e[r]){var s=e[r].offsetHeight;a=s>a?s:a}a&&S.wrapper.css("height",a+"px")},S.updateContainerSize=function(){var e,a;e="undefined"!=typeof S.params.width?S.params.width:S.container[0].clientWidth,a="undefined"!=typeof S.params.height?S.params.height:S.container[0].clientHeight,0===e&&S.isHorizontal()||0===a&&!S.isHorizontal()||(e=e-parseInt(S.container.css("padding-left"),10)-parseInt(S.container.css("padding-right"),10),a=a-parseInt(S.container.css("padding-top"),10)-parseInt(S.container.css("padding-bottom"),10),S.width=e,S.height=a,S.size=S.isHorizontal()?S.width:S.height)},S.updateSlidesSize=function(){S.slides=S.wrapper.children("."+S.params.slideClass),S.snapGrid=[],S.slidesGrid=[],S.slidesSizesGrid=[];var e,a=S.params.spaceBetween,t=-S.params.slidesOffsetBefore,s=0,i=0;if("undefined"!=typeof S.size){"string"==typeof a&&a.indexOf("%")>=0&&(a=parseFloat(a.replace("%",""))/100*S.size),S.virtualSize=-a,S.rtl?S.slides.css({marginLeft:"",marginTop:""}):S.slides.css({marginRight:"",marginBottom:""});var r;S.params.slidesPerColumn>1&&(r=Math.floor(S.slides.length/S.params.slidesPerColumn)===S.slides.length/S.params.slidesPerColumn?S.slides.length:Math.ceil(S.slides.length/S.params.slidesPerColumn)*S.params.slidesPerColumn,"auto"!==S.params.slidesPerView&&"row"===S.params.slidesPerColumnFill&&(r=Math.max(r,S.params.slidesPerView*S.params.slidesPerColumn)));var o,l=S.params.slidesPerColumn,p=r/l,d=p-(S.params.slidesPerColumn*p-S.slides.length);for(e=0;e<S.slides.length;e++){o=0;var u=S.slides.eq(e);if(S.params.slidesPerColumn>1){var c,m,h;"column"===S.params.slidesPerColumnFill?(m=Math.floor(e/l),h=e-m*l,(m>d||m===d&&h===l-1)&&++h>=l&&(h=0,m++),c=m+h*r/l,u.css({"-webkit-box-ordinal-group":c,"-moz-box-ordinal-group":c,"-ms-flex-order":c,"-webkit-order":c,order:c})):(h=Math.floor(e/p),m=e-h*p),u.css("margin-"+(S.isHorizontal()?"top":"left"),0!==h&&S.params.spaceBetween&&S.params.spaceBetween+"px").attr("data-swiper-column",m).attr("data-swiper-row",h)}"none"!==u.css("display")&&("auto"===S.params.slidesPerView?(o=S.isHorizontal()?u.outerWidth(!0):u.outerHeight(!0),S.params.roundLengths&&(o=n(o))):(o=(S.size-(S.params.slidesPerView-1)*a)/S.params.slidesPerView,S.params.roundLengths&&(o=n(o)),S.isHorizontal()?S.slides[e].style.width=o+"px":S.slides[e].style.height=o+"px"),S.slides[e].swiperSlideSize=o,S.slidesSizesGrid.push(o),S.params.centeredSlides?(t=t+o/2+s/2+a,0===e&&(t=t-S.size/2-a),Math.abs(t)<.001&&(t=0),i%S.params.slidesPerGroup===0&&S.snapGrid.push(t),S.slidesGrid.push(t)):(i%S.params.slidesPerGroup===0&&S.snapGrid.push(t),S.slidesGrid.push(t),t=t+o+a),S.virtualSize+=o+a,s=o,i++)}S.virtualSize=Math.max(S.virtualSize,S.size)+S.params.slidesOffsetAfter;var g;if(S.rtl&&S.wrongRTL&&("slide"===S.params.effect||"coverflow"===S.params.effect)&&S.wrapper.css({width:S.virtualSize+S.params.spaceBetween+"px"}),S.support.flexbox&&!S.params.setWrapperSize||(S.isHorizontal()?S.wrapper.css({width:S.virtualSize+S.params.spaceBetween+"px"}):S.wrapper.css({height:S.virtualSize+S.params.spaceBetween+"px"})),S.params.slidesPerColumn>1&&(S.virtualSize=(o+S.params.spaceBetween)*r,S.virtualSize=Math.ceil(S.virtualSize/S.params.slidesPerColumn)-S.params.spaceBetween,S.isHorizontal()?S.wrapper.css({width:S.virtualSize+S.params.spaceBetween+"px"}):S.wrapper.css({height:S.virtualSize+S.params.spaceBetween+"px"}),S.params.centeredSlides)){for(g=[],e=0;e<S.snapGrid.length;e++)S.snapGrid[e]<S.virtualSize+S.snapGrid[0]&&g.push(S.snapGrid[e]);S.snapGrid=g}if(!S.params.centeredSlides){for(g=[],e=0;e<S.snapGrid.length;e++)S.snapGrid[e]<=S.virtualSize-S.size&&g.push(S.snapGrid[e]);S.snapGrid=g,Math.floor(S.virtualSize-S.size)-Math.floor(S.snapGrid[S.snapGrid.length-1])>1&&S.snapGrid.push(S.virtualSize-S.size)}0===S.snapGrid.length&&(S.snapGrid=[0]),0!==S.params.spaceBetween&&(S.isHorizontal()?S.rtl?S.slides.css({marginLeft:a+"px"}):S.slides.css({marginRight:a+"px"}):S.slides.css({marginBottom:a+"px"})),S.params.watchSlidesProgress&&S.updateSlidesOffset()}},S.updateSlidesOffset=function(){for(var e=0;e<S.slides.length;e++)S.slides[e].swiperSlideOffset=S.isHorizontal()?S.slides[e].offsetLeft:S.slides[e].offsetTop},S.updateSlidesProgress=function(e){if("undefined"==typeof e&&(e=S.translate||0),0!==S.slides.length){"undefined"==typeof S.slides[0].swiperSlideOffset&&S.updateSlidesOffset();var a=-e;S.rtl&&(a=e),S.slides.removeClass(S.params.slideVisibleClass);for(var t=0;t<S.slides.length;t++){var s=S.slides[t],i=(a+(S.params.centeredSlides?S.minTranslate():0)-s.swiperSlideOffset)/(s.swiperSlideSize+S.params.spaceBetween);if(S.params.watchSlidesVisibility){var r=-(a-s.swiperSlideOffset),n=r+S.slidesSizesGrid[t],o=r>=0&&r<S.size||n>0&&n<=S.size||r<=0&&n>=S.size;o&&S.slides.eq(t).addClass(S.params.slideVisibleClass)}s.progress=S.rtl?-i:i}}},S.updateProgress=function(e){"undefined"==typeof e&&(e=S.translate||0);var a=S.maxTranslate()-S.minTranslate(),t=S.isBeginning,s=S.isEnd;0===a?(S.progress=0,S.isBeginning=S.isEnd=!0):(S.progress=(e-S.minTranslate())/a,S.isBeginning=S.progress<=0,S.isEnd=S.progress>=1),S.isBeginning&&!t&&S.emit("onReachBeginning",S),S.isEnd&&!s&&S.emit("onReachEnd",S),S.params.watchSlidesProgress&&S.updateSlidesProgress(e),S.emit("onProgress",S,S.progress)},S.updateActiveIndex=function(){var e,a,t,s=S.rtl?S.translate:-S.translate;for(a=0;a<S.slidesGrid.length;a++)"undefined"!=typeof S.slidesGrid[a+1]?s>=S.slidesGrid[a]&&s<S.slidesGrid[a+1]-(S.slidesGrid[a+1]-S.slidesGrid[a])/2?e=a:s>=S.slidesGrid[a]&&s<S.slidesGrid[a+1]&&(e=a+1):s>=S.slidesGrid[a]&&(e=a);S.params.normalizeSlideIndex&&(e<0||"undefined"==typeof e)&&(e=0),t=Math.floor(e/S.params.slidesPerGroup),t>=S.snapGrid.length&&(t=S.snapGrid.length-1),e!==S.activeIndex&&(S.snapIndex=t,S.previousIndex=S.activeIndex,S.activeIndex=e,S.updateClasses(),S.updateRealIndex())},S.updateRealIndex=function(){S.realIndex=S.slides.eq(S.activeIndex).attr("data-swiper-slide-index")||S.activeIndex},S.updateClasses=function(){S.slides.removeClass(S.params.slideActiveClass+" "+S.params.slideNextClass+" "+S.params.slidePrevClass+" "+S.params.slideDuplicateActiveClass+" "+S.params.slideDuplicateNextClass+" "+S.params.slideDuplicatePrevClass);var e=S.slides.eq(S.activeIndex);e.addClass(S.params.slideActiveClass),i.loop&&(e.hasClass(S.params.slideDuplicateClass)?S.wrapper.children("."+S.params.slideClass+":not(."+S.params.slideDuplicateClass+')[data-swiper-slide-index="'+S.realIndex+'"]').addClass(S.params.slideDuplicateActiveClass):S.wrapper.children("."+S.params.slideClass+"."+S.params.slideDuplicateClass+'[data-swiper-slide-index="'+S.realIndex+'"]').addClass(S.params.slideDuplicateActiveClass));var t=e.next("."+S.params.slideClass).addClass(S.params.slideNextClass);S.params.loop&&0===t.length&&(t=S.slides.eq(0),t.addClass(S.params.slideNextClass));var s=e.prev("."+S.params.slideClass).addClass(S.params.slidePrevClass);if(S.params.loop&&0===s.length&&(s=S.slides.eq(-1),s.addClass(S.params.slidePrevClass)),i.loop&&(t.hasClass(S.params.slideDuplicateClass)?S.wrapper.children("."+S.params.slideClass+":not(."+S.params.slideDuplicateClass+')[data-swiper-slide-index="'+t.attr("data-swiper-slide-index")+'"]').addClass(S.params.slideDuplicateNextClass):S.wrapper.children("."+S.params.slideClass+"."+S.params.slideDuplicateClass+'[data-swiper-slide-index="'+t.attr("data-swiper-slide-index")+'"]').addClass(S.params.slideDuplicateNextClass),s.hasClass(S.params.slideDuplicateClass)?S.wrapper.children("."+S.params.slideClass+":not(."+S.params.slideDuplicateClass+')[data-swiper-slide-index="'+s.attr("data-swiper-slide-index")+'"]').addClass(S.params.slideDuplicatePrevClass):S.wrapper.children("."+S.params.slideClass+"."+S.params.slideDuplicateClass+'[data-swiper-slide-index="'+s.attr("data-swiper-slide-index")+'"]').addClass(S.params.slideDuplicatePrevClass)),S.paginationContainer&&S.paginationContainer.length>0){var r,n=S.params.loop?Math.ceil((S.slides.length-2*S.loopedSlides)/S.params.slidesPerGroup):S.snapGrid.length;if(S.params.loop?(r=Math.ceil((S.activeIndex-S.loopedSlides)/S.params.slidesPerGroup),r>S.slides.length-1-2*S.loopedSlides&&(r-=S.slides.length-2*S.loopedSlides),r>n-1&&(r-=n),r<0&&"bullets"!==S.params.paginationType&&(r=n+r)):r="undefined"!=typeof S.snapIndex?S.snapIndex:S.activeIndex||0,"bullets"===S.params.paginationType&&S.bullets&&S.bullets.length>0&&(S.bullets.removeClass(S.params.bulletActiveClass),S.paginationContainer.length>1?S.bullets.each(function(){a(this).index()===r&&a(this).addClass(S.params.bulletActiveClass)}):S.bullets.eq(r).addClass(S.params.bulletActiveClass)),"fraction"===S.params.paginationType&&(S.paginationContainer.find("."+S.params.paginationCurrentClass).text(r+1),S.paginationContainer.find("."+S.params.paginationTotalClass).text(n)),"progress"===S.params.paginationType){var o=(r+1)/n,l=o,p=1;S.isHorizontal()||(p=o,l=1),S.paginationContainer.find("."+S.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+l+") scaleY("+p+")").transition(S.params.speed)}"custom"===S.params.paginationType&&S.params.paginationCustomRender&&(S.paginationContainer.html(S.params.paginationCustomRender(S,r+1,n)),S.emit("onPaginationRendered",S,S.paginationContainer[0]))}S.params.loop||(S.params.prevButton&&S.prevButton&&S.prevButton.length>0&&(S.isBeginning?(S.prevButton.addClass(S.params.buttonDisabledClass),S.params.a11y&&S.a11y&&S.a11y.disable(S.prevButton)):(S.prevButton.removeClass(S.params.buttonDisabledClass),S.params.a11y&&S.a11y&&S.a11y.enable(S.prevButton))),S.params.nextButton&&S.nextButton&&S.nextButton.length>0&&(S.isEnd?(S.nextButton.addClass(S.params.buttonDisabledClass),S.params.a11y&&S.a11y&&S.a11y.disable(S.nextButton)):(S.nextButton.removeClass(S.params.buttonDisabledClass),S.params.a11y&&S.a11y&&S.a11y.enable(S.nextButton))))},S.updatePagination=function(){if(S.params.pagination&&S.paginationContainer&&S.paginationContainer.length>0){var e="";if("bullets"===S.params.paginationType){for(var a=S.params.loop?Math.ceil((S.slides.length-2*S.loopedSlides)/S.params.slidesPerGroup):S.snapGrid.length,t=0;t<a;t++)e+=S.params.paginationBulletRender?S.params.paginationBulletRender(S,t,S.params.bulletClass):"<"+S.params.paginationElement+' class="'+S.params.bulletClass+'"></'+S.params.paginationElement+">";S.paginationContainer.html(e),S.bullets=S.paginationContainer.find("."+S.params.bulletClass),S.params.paginationClickable&&S.params.a11y&&S.a11y&&S.a11y.initPagination()}"fraction"===S.params.paginationType&&(e=S.params.paginationFractionRender?S.params.paginationFractionRender(S,S.params.paginationCurrentClass,S.params.paginationTotalClass):'<span class="'+S.params.paginationCurrentClass+'"></span> / <span class="'+S.params.paginationTotalClass+'"></span>',S.paginationContainer.html(e)),"progress"===S.params.paginationType&&(e=S.params.paginationProgressRender?S.params.paginationProgressRender(S,S.params.paginationProgressbarClass):'<span class="'+S.params.paginationProgressbarClass+'"></span>',S.paginationContainer.html(e)),"custom"!==S.params.paginationType&&S.emit("onPaginationRendered",S,S.paginationContainer[0])}},S.update=function(e){function a(){S.rtl?-S.translate:S.translate;s=Math.min(Math.max(S.translate,S.maxTranslate()),S.minTranslate()),S.setWrapperTranslate(s),S.updateActiveIndex(),S.updateClasses()}if(S.updateContainerSize(),S.updateSlidesSize(),S.updateProgress(),S.updatePagination(),S.updateClasses(),S.params.scrollbar&&S.scrollbar&&S.scrollbar.set(),e){var t,s;S.controller&&S.controller.spline&&(S.controller.spline=void 0),S.params.freeMode?(a(),S.params.autoHeight&&S.updateAutoHeight()):(t=("auto"===S.params.slidesPerView||S.params.slidesPerView>1)&&S.isEnd&&!S.params.centeredSlides?S.slideTo(S.slides.length-1,0,!1,!0):S.slideTo(S.activeIndex,0,!1,!0),t||a())}else S.params.autoHeight&&S.updateAutoHeight()},S.onResize=function(e){S.params.breakpoints&&S.setBreakpoint();var a=S.params.allowSwipeToPrev,t=S.params.allowSwipeToNext;S.params.allowSwipeToPrev=S.params.allowSwipeToNext=!0,S.updateContainerSize(),S.updateSlidesSize(),("auto"===S.params.slidesPerView||S.params.freeMode||e)&&S.updatePagination(),S.params.scrollbar&&S.scrollbar&&S.scrollbar.set(),S.controller&&S.controller.spline&&(S.controller.spline=void 0);var s=!1;if(S.params.freeMode){var i=Math.min(Math.max(S.translate,S.maxTranslate()),S.minTranslate());S.setWrapperTranslate(i),S.updateActiveIndex(),S.updateClasses(),S.params.autoHeight&&S.updateAutoHeight()}else S.updateClasses(),s=("auto"===S.params.slidesPerView||S.params.slidesPerView>1)&&S.isEnd&&!S.params.centeredSlides?S.slideTo(S.slides.length-1,0,!1,!0):S.slideTo(S.activeIndex,0,!1,!0);S.params.lazyLoading&&!s&&S.lazy&&S.lazy.load(),S.params.allowSwipeToPrev=a,S.params.allowSwipeToNext=t},S.touchEventsDesktop={start:"mousedown",move:"mousemove",end:"mouseup"},window.navigator.pointerEnabled?S.touchEventsDesktop={start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled&&(S.touchEventsDesktop={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}),S.touchEvents={start:S.support.touch||!S.params.simulateTouch?"touchstart":S.touchEventsDesktop.start,move:S.support.touch||!S.params.simulateTouch?"touchmove":S.touchEventsDesktop.move,end:S.support.touch||!S.params.simulateTouch?"touchend":S.touchEventsDesktop.end},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===S.params.touchEventsTarget?S.container:S.wrapper).addClass("swiper-wp8-"+S.params.direction),S.initEvents=function(e){var a=e?"off":"on",t=e?"removeEventListener":"addEventListener",s="container"===S.params.touchEventsTarget?S.container[0]:S.wrapper[0],r=S.support.touch?s:document,n=!!S.params.nested;if(S.browser.ie)s[t](S.touchEvents.start,S.onTouchStart,!1),r[t](S.touchEvents.move,S.onTouchMove,n),r[t](S.touchEvents.end,S.onTouchEnd,!1);else{if(S.support.touch){var o=!("touchstart"!==S.touchEvents.start||!S.support.passiveListener||!S.params.passiveListeners)&&{passive:!0,capture:!1};s[t](S.touchEvents.start,S.onTouchStart,o),s[t](S.touchEvents.move,S.onTouchMove,n),s[t](S.touchEvents.end,S.onTouchEnd,o)}(i.simulateTouch&&!S.device.ios&&!S.device.android||i.simulateTouch&&!S.support.touch&&S.device.ios)&&(s[t]("mousedown",S.onTouchStart,!1),document[t]("mousemove",S.onTouchMove,n),document[t]("mouseup",S.onTouchEnd,!1))}window[t]("resize",S.onResize),S.params.nextButton&&S.nextButton&&S.nextButton.length>0&&(S.nextButton[a]("click",S.onClickNext),S.params.a11y&&S.a11y&&S.nextButton[a]("keydown",S.a11y.onEnterKey)),S.params.prevButton&&S.prevButton&&S.prevButton.length>0&&(S.prevButton[a]("click",S.onClickPrev),S.params.a11y&&S.a11y&&S.prevButton[a]("keydown",S.a11y.onEnterKey)),S.params.pagination&&S.params.paginationClickable&&(S.paginationContainer[a]("click","."+S.params.bulletClass,S.onClickIndex),S.params.a11y&&S.a11y&&S.paginationContainer[a]("keydown","."+S.params.bulletClass,S.a11y.onEnterKey)),(S.params.preventClicks||S.params.preventClicksPropagation)&&s[t]("click",S.preventClicks,!0)},S.attachEvents=function(){S.initEvents()},S.detachEvents=function(){S.initEvents(!0)},S.allowClick=!0,S.preventClicks=function(e){S.allowClick||(S.params.preventClicks&&e.preventDefault(),S.params.preventClicksPropagation&&S.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))},S.onClickNext=function(e){e.preventDefault(),S.isEnd&&!S.params.loop||S.slideNext()},S.onClickPrev=function(e){e.preventDefault(),S.isBeginning&&!S.params.loop||S.slidePrev()},S.onClickIndex=function(e){
e.preventDefault();var t=a(this).index()*S.params.slidesPerGroup;S.params.loop&&(t+=S.loopedSlides),S.slideTo(t)},S.updateClickedSlide=function(e){var t=l(e,"."+S.params.slideClass),s=!1;if(t)for(var i=0;i<S.slides.length;i++)S.slides[i]===t&&(s=!0);if(!t||!s)return S.clickedSlide=void 0,void(S.clickedIndex=void 0);if(S.clickedSlide=t,S.clickedIndex=a(t).index(),S.params.slideToClickedSlide&&void 0!==S.clickedIndex&&S.clickedIndex!==S.activeIndex){var r,n=S.clickedIndex;if(S.params.loop){if(S.animating)return;r=a(S.clickedSlide).attr("data-swiper-slide-index"),S.params.centeredSlides?n<S.loopedSlides-S.params.slidesPerView/2||n>S.slides.length-S.loopedSlides+S.params.slidesPerView/2?(S.fixLoop(),n=S.wrapper.children("."+S.params.slideClass+'[data-swiper-slide-index="'+r+'"]:not(.'+S.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){S.slideTo(n)},0)):S.slideTo(n):n>S.slides.length-S.params.slidesPerView?(S.fixLoop(),n=S.wrapper.children("."+S.params.slideClass+'[data-swiper-slide-index="'+r+'"]:not(.'+S.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){S.slideTo(n)},0)):S.slideTo(n)}else S.slideTo(n)}};var z,M,E,P,I,k,L,D,B,H,G="input, select, textarea, button, video",X=Date.now(),Y=[];S.animating=!1,S.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var A,O;S.onTouchStart=function(e){if(e.originalEvent&&(e=e.originalEvent),A="touchstart"===e.type,A||!("which"in e)||3!==e.which){if(S.params.noSwiping&&l(e,"."+S.params.noSwipingClass))return void(S.allowClick=!0);if(!S.params.swipeHandler||l(e,S.params.swipeHandler)){var t=S.touches.currentX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,s=S.touches.currentY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY;if(!(S.device.ios&&S.params.iOSEdgeSwipeDetection&&t<=S.params.iOSEdgeSwipeThreshold)){if(z=!0,M=!1,E=!0,I=void 0,O=void 0,S.touches.startX=t,S.touches.startY=s,P=Date.now(),S.allowClick=!0,S.updateContainerSize(),S.swipeDirection=void 0,S.params.threshold>0&&(D=!1),"touchstart"!==e.type){var i=!0;a(e.target).is(G)&&(i=!1),document.activeElement&&a(document.activeElement).is(G)&&document.activeElement.blur(),i&&e.preventDefault()}S.emit("onTouchStart",S,e)}}}},S.onTouchMove=function(e){if(e.originalEvent&&(e=e.originalEvent),!A||"mousemove"!==e.type){if(e.preventedByNestedSwiper)return S.touches.startX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,void(S.touches.startY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY);if(S.params.onlyExternal)return S.allowClick=!1,void(z&&(S.touches.startX=S.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,S.touches.startY=S.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,P=Date.now()));if(A&&S.params.touchReleaseOnEdges&&!S.params.loop)if(S.isHorizontal()){if(S.touches.currentX<S.touches.startX&&S.translate<=S.maxTranslate()||S.touches.currentX>S.touches.startX&&S.translate>=S.minTranslate())return}else if(S.touches.currentY<S.touches.startY&&S.translate<=S.maxTranslate()||S.touches.currentY>S.touches.startY&&S.translate>=S.minTranslate())return;if(A&&document.activeElement&&e.target===document.activeElement&&a(e.target).is(G))return M=!0,void(S.allowClick=!1);if(E&&S.emit("onTouchMove",S,e),!(e.targetTouches&&e.targetTouches.length>1)){if(S.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,S.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof I){var t;S.isHorizontal()&&S.touches.currentY===S.touches.startY||!S.isHorizontal()&&S.touches.currentX!==S.touches.startX?I=!1:(t=180*Math.atan2(Math.abs(S.touches.currentY-S.touches.startY),Math.abs(S.touches.currentX-S.touches.startX))/Math.PI,I=S.isHorizontal()?t>S.params.touchAngle:90-t>S.params.touchAngle)}if(I&&S.emit("onTouchMoveOpposite",S,e),"undefined"==typeof O&&S.browser.ieTouch&&(S.touches.currentX===S.touches.startX&&S.touches.currentY===S.touches.startY||(O=!0)),z){if(I)return void(z=!1);if(O||!S.browser.ieTouch){S.allowClick=!1,S.emit("onSliderMove",S,e),e.preventDefault(),S.params.touchMoveStopPropagation&&!S.params.nested&&e.stopPropagation(),M||(i.loop&&S.fixLoop(),L=S.getWrapperTranslate(),S.setWrapperTransition(0),S.animating&&S.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),S.params.autoplay&&S.autoplaying&&(S.params.autoplayDisableOnInteraction?S.stopAutoplay():S.pauseAutoplay()),H=!1,!S.params.grabCursor||S.params.allowSwipeToNext!==!0&&S.params.allowSwipeToPrev!==!0||S.setGrabCursor(!0)),M=!0;var s=S.touches.diff=S.isHorizontal()?S.touches.currentX-S.touches.startX:S.touches.currentY-S.touches.startY;s*=S.params.touchRatio,S.rtl&&(s=-s),S.swipeDirection=s>0?"prev":"next",k=s+L;var r=!0;if(s>0&&k>S.minTranslate()?(r=!1,S.params.resistance&&(k=S.minTranslate()-1+Math.pow(-S.minTranslate()+L+s,S.params.resistanceRatio))):s<0&&k<S.maxTranslate()&&(r=!1,S.params.resistance&&(k=S.maxTranslate()+1-Math.pow(S.maxTranslate()-L-s,S.params.resistanceRatio))),r&&(e.preventedByNestedSwiper=!0),!S.params.allowSwipeToNext&&"next"===S.swipeDirection&&k<L&&(k=L),!S.params.allowSwipeToPrev&&"prev"===S.swipeDirection&&k>L&&(k=L),S.params.threshold>0){if(!(Math.abs(s)>S.params.threshold||D))return void(k=L);if(!D)return D=!0,S.touches.startX=S.touches.currentX,S.touches.startY=S.touches.currentY,k=L,void(S.touches.diff=S.isHorizontal()?S.touches.currentX-S.touches.startX:S.touches.currentY-S.touches.startY)}S.params.followFinger&&((S.params.freeMode||S.params.watchSlidesProgress)&&S.updateActiveIndex(),S.params.freeMode&&(0===Y.length&&Y.push({position:S.touches[S.isHorizontal()?"startX":"startY"],time:P}),Y.push({position:S.touches[S.isHorizontal()?"currentX":"currentY"],time:(new window.Date).getTime()})),S.updateProgress(k),S.setWrapperTranslate(k))}}}}},S.onTouchEnd=function(e){if(e.originalEvent&&(e=e.originalEvent),E&&S.emit("onTouchEnd",S,e),E=!1,z){S.params.grabCursor&&M&&z&&(S.params.allowSwipeToNext===!0||S.params.allowSwipeToPrev===!0)&&S.setGrabCursor(!1);var t=Date.now(),s=t-P;if(S.allowClick&&(S.updateClickedSlide(e),S.emit("onTap",S,e),s<300&&t-X>300&&(B&&clearTimeout(B),B=setTimeout(function(){S&&(S.params.paginationHide&&S.paginationContainer.length>0&&!a(e.target).hasClass(S.params.bulletClass)&&S.paginationContainer.toggleClass(S.params.paginationHiddenClass),S.emit("onClick",S,e))},300)),s<300&&t-X<300&&(B&&clearTimeout(B),S.emit("onDoubleTap",S,e))),X=Date.now(),setTimeout(function(){S&&(S.allowClick=!0)},0),!z||!M||!S.swipeDirection||0===S.touches.diff||k===L)return void(z=M=!1);z=M=!1;var i;if(i=S.params.followFinger?S.rtl?S.translate:-S.translate:-k,S.params.freeMode){if(i<-S.minTranslate())return void S.slideTo(S.activeIndex);if(i>-S.maxTranslate())return void(S.slides.length<S.snapGrid.length?S.slideTo(S.snapGrid.length-1):S.slideTo(S.slides.length-1));if(S.params.freeModeMomentum){if(Y.length>1){var r=Y.pop(),n=Y.pop(),o=r.position-n.position,l=r.time-n.time;S.velocity=o/l,S.velocity=S.velocity/2,Math.abs(S.velocity)<S.params.freeModeMinimumVelocity&&(S.velocity=0),(l>150||(new window.Date).getTime()-r.time>300)&&(S.velocity=0)}else S.velocity=0;S.velocity=S.velocity*S.params.freeModeMomentumVelocityRatio,Y.length=0;var p=1e3*S.params.freeModeMomentumRatio,d=S.velocity*p,u=S.translate+d;S.rtl&&(u=-u);var c,m=!1,h=20*Math.abs(S.velocity)*S.params.freeModeMomentumBounceRatio;if(u<S.maxTranslate())S.params.freeModeMomentumBounce?(u+S.maxTranslate()<-h&&(u=S.maxTranslate()-h),c=S.maxTranslate(),m=!0,H=!0):u=S.maxTranslate();else if(u>S.minTranslate())S.params.freeModeMomentumBounce?(u-S.minTranslate()>h&&(u=S.minTranslate()+h),c=S.minTranslate(),m=!0,H=!0):u=S.minTranslate();else if(S.params.freeModeSticky){var g,f=0;for(f=0;f<S.snapGrid.length;f+=1)if(S.snapGrid[f]>-u){g=f;break}u=Math.abs(S.snapGrid[g]-u)<Math.abs(S.snapGrid[g-1]-u)||"next"===S.swipeDirection?S.snapGrid[g]:S.snapGrid[g-1],S.rtl||(u=-u)}if(0!==S.velocity)p=S.rtl?Math.abs((-u-S.translate)/S.velocity):Math.abs((u-S.translate)/S.velocity);else if(S.params.freeModeSticky)return void S.slideReset();S.params.freeModeMomentumBounce&&m?(S.updateProgress(c),S.setWrapperTransition(p),S.setWrapperTranslate(u),S.onTransitionStart(),S.animating=!0,S.wrapper.transitionEnd(function(){S&&H&&(S.emit("onMomentumBounce",S),S.setWrapperTransition(S.params.speed),S.setWrapperTranslate(c),S.wrapper.transitionEnd(function(){S&&S.onTransitionEnd()}))})):S.velocity?(S.updateProgress(u),S.setWrapperTransition(p),S.setWrapperTranslate(u),S.onTransitionStart(),S.animating||(S.animating=!0,S.wrapper.transitionEnd(function(){S&&S.onTransitionEnd()}))):S.updateProgress(u),S.updateActiveIndex()}return void((!S.params.freeModeMomentum||s>=S.params.longSwipesMs)&&(S.updateProgress(),S.updateActiveIndex()))}var v,w=0,y=S.slidesSizesGrid[0];for(v=0;v<S.slidesGrid.length;v+=S.params.slidesPerGroup)"undefined"!=typeof S.slidesGrid[v+S.params.slidesPerGroup]?i>=S.slidesGrid[v]&&i<S.slidesGrid[v+S.params.slidesPerGroup]&&(w=v,y=S.slidesGrid[v+S.params.slidesPerGroup]-S.slidesGrid[v]):i>=S.slidesGrid[v]&&(w=v,y=S.slidesGrid[S.slidesGrid.length-1]-S.slidesGrid[S.slidesGrid.length-2]);var x=(i-S.slidesGrid[w])/y;if(s>S.params.longSwipesMs){if(!S.params.longSwipes)return void S.slideTo(S.activeIndex);"next"===S.swipeDirection&&(x>=S.params.longSwipesRatio?S.slideTo(w+S.params.slidesPerGroup):S.slideTo(w)),"prev"===S.swipeDirection&&(x>1-S.params.longSwipesRatio?S.slideTo(w+S.params.slidesPerGroup):S.slideTo(w))}else{if(!S.params.shortSwipes)return void S.slideTo(S.activeIndex);"next"===S.swipeDirection&&S.slideTo(w+S.params.slidesPerGroup),"prev"===S.swipeDirection&&S.slideTo(w)}}},S._slideTo=function(e,a){return S.slideTo(e,a,!0,!0)},S.slideTo=function(e,a,t,s){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=0),e<0&&(e=0),S.snapIndex=Math.floor(e/S.params.slidesPerGroup),S.snapIndex>=S.snapGrid.length&&(S.snapIndex=S.snapGrid.length-1);var i=-S.snapGrid[S.snapIndex];if(S.params.autoplay&&S.autoplaying&&(s||!S.params.autoplayDisableOnInteraction?S.pauseAutoplay(a):S.stopAutoplay()),S.updateProgress(i),S.params.normalizeSlideIndex)for(var r=0;r<S.slidesGrid.length;r++)-Math.floor(100*i)>=Math.floor(100*S.slidesGrid[r])&&(e=r);return!(!S.params.allowSwipeToNext&&i<S.translate&&i<S.minTranslate())&&(!(!S.params.allowSwipeToPrev&&i>S.translate&&i>S.maxTranslate()&&(S.activeIndex||0)!==e)&&("undefined"==typeof a&&(a=S.params.speed),S.previousIndex=S.activeIndex||0,S.activeIndex=e,S.updateRealIndex(),S.rtl&&-i===S.translate||!S.rtl&&i===S.translate?(S.params.autoHeight&&S.updateAutoHeight(),S.updateClasses(),"slide"!==S.params.effect&&S.setWrapperTranslate(i),!1):(S.updateClasses(),S.onTransitionStart(t),0===a||S.browser.lteIE9?(S.setWrapperTranslate(i),S.setWrapperTransition(0),S.onTransitionEnd(t)):(S.setWrapperTranslate(i),S.setWrapperTransition(a),S.animating||(S.animating=!0,S.wrapper.transitionEnd(function(){S&&S.onTransitionEnd(t)}))),!0)))},S.onTransitionStart=function(e){"undefined"==typeof e&&(e=!0),S.params.autoHeight&&S.updateAutoHeight(),S.lazy&&S.lazy.onTransitionStart(),e&&(S.emit("onTransitionStart",S),S.activeIndex!==S.previousIndex&&(S.emit("onSlideChangeStart",S),S.activeIndex>S.previousIndex?S.emit("onSlideNextStart",S):S.emit("onSlidePrevStart",S)))},S.onTransitionEnd=function(e){S.animating=!1,S.setWrapperTransition(0),"undefined"==typeof e&&(e=!0),S.lazy&&S.lazy.onTransitionEnd(),e&&(S.emit("onTransitionEnd",S),S.activeIndex!==S.previousIndex&&(S.emit("onSlideChangeEnd",S),S.activeIndex>S.previousIndex?S.emit("onSlideNextEnd",S):S.emit("onSlidePrevEnd",S))),S.params.history&&S.history&&S.history.setHistory(S.params.history,S.activeIndex),S.params.hashnav&&S.hashnav&&S.hashnav.setHash()},S.slideNext=function(e,a,t){if(S.params.loop){if(S.animating)return!1;S.fixLoop();S.container[0].clientLeft;return S.slideTo(S.activeIndex+S.params.slidesPerGroup,a,e,t)}return S.slideTo(S.activeIndex+S.params.slidesPerGroup,a,e,t)},S._slideNext=function(e){return S.slideNext(!0,e,!0)},S.slidePrev=function(e,a,t){if(S.params.loop){if(S.animating)return!1;S.fixLoop();S.container[0].clientLeft;return S.slideTo(S.activeIndex-1,a,e,t)}return S.slideTo(S.activeIndex-1,a,e,t)},S._slidePrev=function(e){return S.slidePrev(!0,e,!0)},S.slideReset=function(e,a,t){return S.slideTo(S.activeIndex,a,e)},S.disableTouchControl=function(){return S.params.onlyExternal=!0,!0},S.enableTouchControl=function(){return S.params.onlyExternal=!1,!0},S.setWrapperTransition=function(e,a){S.wrapper.transition(e),"slide"!==S.params.effect&&S.effects[S.params.effect]&&S.effects[S.params.effect].setTransition(e),S.params.parallax&&S.parallax&&S.parallax.setTransition(e),S.params.scrollbar&&S.scrollbar&&S.scrollbar.setTransition(e),S.params.control&&S.controller&&S.controller.setTransition(e,a),S.emit("onSetTransition",S,e)},S.setWrapperTranslate=function(e,a,t){var s=0,i=0,r=0;S.isHorizontal()?s=S.rtl?-e:e:i=e,S.params.roundLengths&&(s=n(s),i=n(i)),S.params.virtualTranslate||(S.support.transforms3d?S.wrapper.transform("translate3d("+s+"px, "+i+"px, "+r+"px)"):S.wrapper.transform("translate("+s+"px, "+i+"px)")),S.translate=S.isHorizontal()?s:i;var o,l=S.maxTranslate()-S.minTranslate();o=0===l?0:(e-S.minTranslate())/l,o!==S.progress&&S.updateProgress(e),a&&S.updateActiveIndex(),"slide"!==S.params.effect&&S.effects[S.params.effect]&&S.effects[S.params.effect].setTranslate(S.translate),S.params.parallax&&S.parallax&&S.parallax.setTranslate(S.translate),S.params.scrollbar&&S.scrollbar&&S.scrollbar.setTranslate(S.translate),S.params.control&&S.controller&&S.controller.setTranslate(S.translate,t),S.emit("onSetTranslate",S,S.translate)},S.getTranslate=function(e,a){var t,s,i,r;return"undefined"==typeof a&&(a="x"),S.params.virtualTranslate?S.rtl?-S.translate:S.translate:(i=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(s=i.transform||i.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),r=new window.WebKitCSSMatrix("none"===s?"":s)):(r=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),t=r.toString().split(",")),"x"===a&&(s=window.WebKitCSSMatrix?r.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===a&&(s=window.WebKitCSSMatrix?r.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),S.rtl&&s&&(s=-s),s||0)},S.getWrapperTranslate=function(e){return"undefined"==typeof e&&(e=S.isHorizontal()?"x":"y"),S.getTranslate(S.wrapper[0],e)},S.observers=[],S.initObservers=function(){if(S.params.observeParents)for(var e=S.container.parents(),a=0;a<e.length;a++)p(e[a]);p(S.container[0],{childList:!1}),p(S.wrapper[0],{attributes:!1})},S.disconnectObservers=function(){for(var e=0;e<S.observers.length;e++)S.observers[e].disconnect();S.observers=[]},S.createLoop=function(){S.wrapper.children("."+S.params.slideClass+"."+S.params.slideDuplicateClass).remove();var e=S.wrapper.children("."+S.params.slideClass);"auto"!==S.params.slidesPerView||S.params.loopedSlides||(S.params.loopedSlides=e.length),S.loopedSlides=parseInt(S.params.loopedSlides||S.params.slidesPerView,10),S.loopedSlides=S.loopedSlides+S.params.loopAdditionalSlides,S.loopedSlides>e.length&&(S.loopedSlides=e.length);var t,s=[],i=[];for(e.each(function(t,r){var n=a(this);t<S.loopedSlides&&i.push(r),t<e.length&&t>=e.length-S.loopedSlides&&s.push(r),n.attr("data-swiper-slide-index",t)}),t=0;t<i.length;t++)S.wrapper.append(a(i[t].cloneNode(!0)).addClass(S.params.slideDuplicateClass));for(t=s.length-1;t>=0;t--)S.wrapper.prepend(a(s[t].cloneNode(!0)).addClass(S.params.slideDuplicateClass))},S.destroyLoop=function(){S.wrapper.children("."+S.params.slideClass+"."+S.params.slideDuplicateClass).remove(),S.slides.removeAttr("data-swiper-slide-index")},S.reLoop=function(e){var a=S.activeIndex-S.loopedSlides;S.destroyLoop(),S.createLoop(),S.updateSlidesSize(),e&&S.slideTo(a+S.loopedSlides,0,!1)},S.fixLoop=function(){var e;S.activeIndex<S.loopedSlides?(e=S.slides.length-3*S.loopedSlides+S.activeIndex,e+=S.loopedSlides,S.slideTo(e,0,!1,!0)):("auto"===S.params.slidesPerView&&S.activeIndex>=2*S.loopedSlides||S.activeIndex>S.slides.length-2*S.params.slidesPerView)&&(e=-S.slides.length+S.activeIndex+S.loopedSlides,e+=S.loopedSlides,S.slideTo(e,0,!1,!0))},S.appendSlide=function(e){if(S.params.loop&&S.destroyLoop(),"object"==typeof e&&e.length)for(var a=0;a<e.length;a++)e[a]&&S.wrapper.append(e[a]);else S.wrapper.append(e);S.params.loop&&S.createLoop(),S.params.observer&&S.support.observer||S.update(!0)},S.prependSlide=function(e){S.params.loop&&S.destroyLoop();var a=S.activeIndex+1;if("object"==typeof e&&e.length){for(var t=0;t<e.length;t++)e[t]&&S.wrapper.prepend(e[t]);a=S.activeIndex+e.length}else S.wrapper.prepend(e);S.params.loop&&S.createLoop(),S.params.observer&&S.support.observer||S.update(!0),S.slideTo(a,0,!1)},S.removeSlide=function(e){S.params.loop&&(S.destroyLoop(),S.slides=S.wrapper.children("."+S.params.slideClass));var a,t=S.activeIndex;if("object"==typeof e&&e.length){for(var s=0;s<e.length;s++)a=e[s],S.slides[a]&&S.slides.eq(a).remove(),a<t&&t--;t=Math.max(t,0)}else a=e,S.slides[a]&&S.slides.eq(a).remove(),a<t&&t--,t=Math.max(t,0);S.params.loop&&S.createLoop(),S.params.observer&&S.support.observer||S.update(!0),S.params.loop?S.slideTo(t+S.loopedSlides,0,!1):S.slideTo(t,0,!1)},S.removeAllSlides=function(){for(var e=[],a=0;a<S.slides.length;a++)e.push(a);S.removeSlide(e)},S.effects={fade:{setTranslate:function(){for(var e=0;e<S.slides.length;e++){var a=S.slides.eq(e),t=a[0].swiperSlideOffset,s=-t;S.params.virtualTranslate||(s-=S.translate);var i=0;S.isHorizontal()||(i=s,s=0);var r=S.params.fade.crossFade?Math.max(1-Math.abs(a[0].progress),0):1+Math.min(Math.max(a[0].progress,-1),0);a.css({opacity:r}).transform("translate3d("+s+"px, "+i+"px, 0px)")}},setTransition:function(e){if(S.slides.transition(e),S.params.virtualTranslate&&0!==e){var a=!1;S.slides.transitionEnd(function(){if(!a&&S){a=!0,S.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],t=0;t<e.length;t++)S.wrapper.trigger(e[t])}})}}},flip:{setTranslate:function(){for(var e=0;e<S.slides.length;e++){var t=S.slides.eq(e),s=t[0].progress;S.params.flip.limitRotation&&(s=Math.max(Math.min(t[0].progress,1),-1));var i=t[0].swiperSlideOffset,r=-180*s,n=r,o=0,l=-i,p=0;if(S.isHorizontal()?S.rtl&&(n=-n):(p=l,l=0,o=-n,n=0),t[0].style.zIndex=-Math.abs(Math.round(s))+S.slides.length,S.params.flip.slideShadows){var d=S.isHorizontal()?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),u=S.isHorizontal()?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom");0===d.length&&(d=a('<div class="swiper-slide-shadow-'+(S.isHorizontal()?"left":"top")+'"></div>'),t.append(d)),0===u.length&&(u=a('<div class="swiper-slide-shadow-'+(S.isHorizontal()?"right":"bottom")+'"></div>'),t.append(u)),d.length&&(d[0].style.opacity=Math.max(-s,0)),u.length&&(u[0].style.opacity=Math.max(s,0))}t.transform("translate3d("+l+"px, "+p+"px, 0px) rotateX("+o+"deg) rotateY("+n+"deg)")}},setTransition:function(e){if(S.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),S.params.virtualTranslate&&0!==e){var t=!1;S.slides.eq(S.activeIndex).transitionEnd(function(){if(!t&&S&&a(this).hasClass(S.params.slideActiveClass)){t=!0,S.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],s=0;s<e.length;s++)S.wrapper.trigger(e[s])}})}}},cube:{setTranslate:function(){var e,t=0;S.params.cube.shadow&&(S.isHorizontal()?(e=S.wrapper.find(".swiper-cube-shadow"),0===e.length&&(e=a('<div class="swiper-cube-shadow"></div>'),S.wrapper.append(e)),e.css({height:S.width+"px"})):(e=S.container.find(".swiper-cube-shadow"),0===e.length&&(e=a('<div class="swiper-cube-shadow"></div>'),S.container.append(e))));for(var s=0;s<S.slides.length;s++){var i=S.slides.eq(s),r=90*s,n=Math.floor(r/360);S.rtl&&(r=-r,n=Math.floor(-r/360));var o=Math.max(Math.min(i[0].progress,1),-1),l=0,p=0,d=0;s%4===0?(l=4*-n*S.size,d=0):(s-1)%4===0?(l=0,d=4*-n*S.size):(s-2)%4===0?(l=S.size+4*n*S.size,d=S.size):(s-3)%4===0&&(l=-S.size,d=3*S.size+4*S.size*n),S.rtl&&(l=-l),S.isHorizontal()||(p=l,l=0);var u="rotateX("+(S.isHorizontal()?0:-r)+"deg) rotateY("+(S.isHorizontal()?r:0)+"deg) translate3d("+l+"px, "+p+"px, "+d+"px)";if(o<=1&&o>-1&&(t=90*s+90*o,S.rtl&&(t=90*-s-90*o)),i.transform(u),S.params.cube.slideShadows){var c=S.isHorizontal()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top"),m=S.isHorizontal()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom");0===c.length&&(c=a('<div class="swiper-slide-shadow-'+(S.isHorizontal()?"left":"top")+'"></div>'),i.append(c)),0===m.length&&(m=a('<div class="swiper-slide-shadow-'+(S.isHorizontal()?"right":"bottom")+'"></div>'),i.append(m)),c.length&&(c[0].style.opacity=Math.max(-o,0)),m.length&&(m[0].style.opacity=Math.max(o,0))}}if(S.wrapper.css({"-webkit-transform-origin":"50% 50% -"+S.size/2+"px","-moz-transform-origin":"50% 50% -"+S.size/2+"px","-ms-transform-origin":"50% 50% -"+S.size/2+"px","transform-origin":"50% 50% -"+S.size/2+"px"}),S.params.cube.shadow)if(S.isHorizontal())e.transform("translate3d(0px, "+(S.width/2+S.params.cube.shadowOffset)+"px, "+-S.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+S.params.cube.shadowScale+")");else{var h=Math.abs(t)-90*Math.floor(Math.abs(t)/90),g=1.5-(Math.sin(2*h*Math.PI/360)/2+Math.cos(2*h*Math.PI/360)/2),f=S.params.cube.shadowScale,v=S.params.cube.shadowScale/g,w=S.params.cube.shadowOffset;e.transform("scale3d("+f+", 1, "+v+") translate3d(0px, "+(S.height/2+w)+"px, "+-S.height/2/v+"px) rotateX(-90deg)")}var y=S.isSafari||S.isUiWebView?-S.size/2:0;S.wrapper.transform("translate3d(0px,0,"+y+"px) rotateX("+(S.isHorizontal()?0:t)+"deg) rotateY("+(S.isHorizontal()?-t:0)+"deg)")},setTransition:function(e){S.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),S.params.cube.shadow&&!S.isHorizontal()&&S.container.find(".swiper-cube-shadow").transition(e)}},coverflow:{setTranslate:function(){for(var e=S.translate,t=S.isHorizontal()?-e+S.width/2:-e+S.height/2,s=S.isHorizontal()?S.params.coverflow.rotate:-S.params.coverflow.rotate,i=S.params.coverflow.depth,r=0,n=S.slides.length;r<n;r++){var o=S.slides.eq(r),l=S.slidesSizesGrid[r],p=o[0].swiperSlideOffset,d=(t-p-l/2)/l*S.params.coverflow.modifier,u=S.isHorizontal()?s*d:0,c=S.isHorizontal()?0:s*d,m=-i*Math.abs(d),h=S.isHorizontal()?0:S.params.coverflow.stretch*d,g=S.isHorizontal()?S.params.coverflow.stretch*d:0;Math.abs(g)<.001&&(g=0),Math.abs(h)<.001&&(h=0),Math.abs(m)<.001&&(m=0),Math.abs(u)<.001&&(u=0),Math.abs(c)<.001&&(c=0);var f="translate3d("+g+"px,"+h+"px,"+m+"px)  rotateX("+c+"deg) rotateY("+u+"deg)";if(o.transform(f),o[0].style.zIndex=-Math.abs(Math.round(d))+1,S.params.coverflow.slideShadows){var v=S.isHorizontal()?o.find(".swiper-slide-shadow-left"):o.find(".swiper-slide-shadow-top"),w=S.isHorizontal()?o.find(".swiper-slide-shadow-right"):o.find(".swiper-slide-shadow-bottom");0===v.length&&(v=a('<div class="swiper-slide-shadow-'+(S.isHorizontal()?"left":"top")+'"></div>'),o.append(v)),0===w.length&&(w=a('<div class="swiper-slide-shadow-'+(S.isHorizontal()?"right":"bottom")+'"></div>'),o.append(w)),v.length&&(v[0].style.opacity=d>0?d:0),w.length&&(w[0].style.opacity=-d>0?-d:0)}}if(S.browser.ie){var y=S.wrapper[0].style;y.perspectiveOrigin=t+"px 50%"}},setTransition:function(e){S.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}},S.lazy={initialImageLoaded:!1,loadImageInSlide:function(e,t){if("undefined"!=typeof e&&("undefined"==typeof t&&(t=!0),0!==S.slides.length)){var s=S.slides.eq(e),i=s.find("."+S.params.lazyLoadingClass+":not(."+S.params.lazyStatusLoadedClass+"):not(."+S.params.lazyStatusLoadingClass+")");!s.hasClass(S.params.lazyLoadingClass)||s.hasClass(S.params.lazyStatusLoadedClass)||s.hasClass(S.params.lazyStatusLoadingClass)||(i=i.add(s[0])),0!==i.length&&i.each(function(){var e=a(this);e.addClass(S.params.lazyStatusLoadingClass);var i=e.attr("data-background"),r=e.attr("data-src"),n=e.attr("data-srcset"),o=e.attr("data-sizes");S.loadImage(e[0],r||i,n,o,!1,function(){if(i?(e.css("background-image",'url("'+i+'")'),e.removeAttr("data-background")):(n&&(e.attr("srcset",n),e.removeAttr("data-srcset")),o&&(e.attr("sizes",o),e.removeAttr("data-sizes")),r&&(e.attr("src",r),e.removeAttr("data-src"))),e.addClass(S.params.lazyStatusLoadedClass).removeClass(S.params.lazyStatusLoadingClass),s.find("."+S.params.lazyPreloaderClass+", ."+S.params.preloaderClass).remove(),S.params.loop&&t){var a=s.attr("data-swiper-slide-index");if(s.hasClass(S.params.slideDuplicateClass)){var l=S.wrapper.children('[data-swiper-slide-index="'+a+'"]:not(.'+S.params.slideDuplicateClass+")");S.lazy.loadImageInSlide(l.index(),!1)}else{var p=S.wrapper.children("."+S.params.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]');S.lazy.loadImageInSlide(p.index(),!1)}}S.emit("onLazyImageReady",S,s[0],e[0])}),S.emit("onLazyImageLoad",S,s[0],e[0])})}},load:function(){var e,t=S.params.slidesPerView;if("auto"===t&&(t=0),S.lazy.initialImageLoaded||(S.lazy.initialImageLoaded=!0),S.params.watchSlidesVisibility)S.wrapper.children("."+S.params.slideVisibleClass).each(function(){S.lazy.loadImageInSlide(a(this).index())});else if(t>1)for(e=S.activeIndex;e<S.activeIndex+t;e++)S.slides[e]&&S.lazy.loadImageInSlide(e);else S.lazy.loadImageInSlide(S.activeIndex);if(S.params.lazyLoadingInPrevNext)if(t>1||S.params.lazyLoadingInPrevNextAmount&&S.params.lazyLoadingInPrevNextAmount>1){var s=S.params.lazyLoadingInPrevNextAmount,i=t,r=Math.min(S.activeIndex+i+Math.max(s,i),S.slides.length),n=Math.max(S.activeIndex-Math.max(i,s),0);for(e=S.activeIndex+t;e<r;e++)S.slides[e]&&S.lazy.loadImageInSlide(e);for(e=n;e<S.activeIndex;e++)S.slides[e]&&S.lazy.loadImageInSlide(e)}else{var o=S.wrapper.children("."+S.params.slideNextClass);o.length>0&&S.lazy.loadImageInSlide(o.index());var l=S.wrapper.children("."+S.params.slidePrevClass);l.length>0&&S.lazy.loadImageInSlide(l.index())}},onTransitionStart:function(){S.params.lazyLoading&&(S.params.lazyLoadingOnTransitionStart||!S.params.lazyLoadingOnTransitionStart&&!S.lazy.initialImageLoaded)&&S.lazy.load()},onTransitionEnd:function(){S.params.lazyLoading&&!S.params.lazyLoadingOnTransitionStart&&S.lazy.load()}},S.scrollbar={isTouched:!1,setDragPosition:function(e){var a=S.scrollbar,t=S.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY,s=t-a.track.offset()[S.isHorizontal()?"left":"top"]-a.dragSize/2,i=-S.minTranslate()*a.moveDivider,r=-S.maxTranslate()*a.moveDivider;s<i?s=i:s>r&&(s=r),s=-s/a.moveDivider,S.updateProgress(s),S.setWrapperTranslate(s,!0)},dragStart:function(e){var a=S.scrollbar;a.isTouched=!0,e.preventDefault(),e.stopPropagation(),a.setDragPosition(e),clearTimeout(a.dragTimeout),a.track.transition(0),S.params.scrollbarHide&&a.track.css("opacity",1),S.wrapper.transition(100),a.drag.transition(100),S.emit("onScrollbarDragStart",S)},dragMove:function(e){var a=S.scrollbar;a.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,a.setDragPosition(e),S.wrapper.transition(0),a.track.transition(0),a.drag.transition(0),S.emit("onScrollbarDragMove",S))},dragEnd:function(e){var a=S.scrollbar;a.isTouched&&(a.isTouched=!1,S.params.scrollbarHide&&(clearTimeout(a.dragTimeout),a.dragTimeout=setTimeout(function(){a.track.css("opacity",0),a.track.transition(400)},1e3)),S.emit("onScrollbarDragEnd",S),S.params.scrollbarSnapOnRelease&&S.slideReset())},draggableEvents:function(){return S.params.simulateTouch!==!1||S.support.touch?S.touchEvents:S.touchEventsDesktop}(),enableDraggable:function(){var e=S.scrollbar,t=S.support.touch?e.track:document;a(e.track).on(e.draggableEvents.start,e.dragStart),a(t).on(e.draggableEvents.move,e.dragMove),a(t).on(e.draggableEvents.end,e.dragEnd)},disableDraggable:function(){var e=S.scrollbar,t=S.support.touch?e.track:document;a(e.track).off(S.draggableEvents.start,e.dragStart),a(t).off(S.draggableEvents.move,e.dragMove),a(t).off(S.draggableEvents.end,e.dragEnd)},set:function(){if(S.params.scrollbar){var e=S.scrollbar;e.track=a(S.params.scrollbar),S.params.uniqueNavElements&&"string"==typeof S.params.scrollbar&&e.track.length>1&&1===S.container.find(S.params.scrollbar).length&&(e.track=S.container.find(S.params.scrollbar)),e.drag=e.track.find(".swiper-scrollbar-drag"),0===e.drag.length&&(e.drag=a('<div class="swiper-scrollbar-drag"></div>'),e.track.append(e.drag)),e.drag[0].style.width="",e.drag[0].style.height="",e.trackSize=S.isHorizontal()?e.track[0].offsetWidth:e.track[0].offsetHeight,e.divider=S.size/S.virtualSize,e.moveDivider=e.divider*(e.trackSize/S.size),e.dragSize=e.trackSize*e.divider,S.isHorizontal()?e.drag[0].style.width=e.dragSize+"px":e.drag[0].style.height=e.dragSize+"px",e.divider>=1?e.track[0].style.display="none":e.track[0].style.display="",S.params.scrollbarHide&&(e.track[0].style.opacity=0)}},setTranslate:function(){if(S.params.scrollbar){var e,a=S.scrollbar,t=(S.translate||0,a.dragSize);e=(a.trackSize-a.dragSize)*S.progress,S.rtl&&S.isHorizontal()?(e=-e,e>0?(t=a.dragSize-e,e=0):-e+a.dragSize>a.trackSize&&(t=a.trackSize+e)):e<0?(t=a.dragSize+e,e=0):e+a.dragSize>a.trackSize&&(t=a.trackSize-e),S.isHorizontal()?(S.support.transforms3d?a.drag.transform("translate3d("+e+"px, 0, 0)"):a.drag.transform("translateX("+e+"px)"),a.drag[0].style.width=t+"px"):(S.support.transforms3d?a.drag.transform("translate3d(0px, "+e+"px, 0)"):a.drag.transform("translateY("+e+"px)"),a.drag[0].style.height=t+"px"),S.params.scrollbarHide&&(clearTimeout(a.timeout),a.track[0].style.opacity=1,a.timeout=setTimeout(function(){a.track[0].style.opacity=0,a.track.transition(400)},1e3))}},setTransition:function(e){S.params.scrollbar&&S.scrollbar.drag.transition(e)}},S.controller={LinearSpline:function(e,a){this.x=e,this.y=a,this.lastIndex=e.length-1;var t,s;this.x.length;this.interpolate=function(e){return e?(s=i(this.x,e),t=s-1,(e-this.x[t])*(this.y[s]-this.y[t])/(this.x[s]-this.x[t])+this.y[t]):0};var i=function(){var e,a,t;return function(s,i){for(a=-1,e=s.length;e-a>1;)s[t=e+a>>1]<=i?a=t:e=t;return e}}()},getInterpolateFunction:function(e){S.controller.spline||(S.controller.spline=S.params.loop?new S.controller.LinearSpline(S.slidesGrid,e.slidesGrid):new S.controller.LinearSpline(S.snapGrid,e.snapGrid))},setTranslate:function(e,a){function s(a){e=a.rtl&&"horizontal"===a.params.direction?-S.translate:S.translate,"slide"===S.params.controlBy&&(S.controller.getInterpolateFunction(a),r=-S.controller.spline.interpolate(-e)),r&&"container"!==S.params.controlBy||(i=(a.maxTranslate()-a.minTranslate())/(S.maxTranslate()-S.minTranslate()),r=(e-S.minTranslate())*i+a.minTranslate()),S.params.controlInverse&&(r=a.maxTranslate()-r),a.updateProgress(r),a.setWrapperTranslate(r,!1,S),a.updateActiveIndex()}var i,r,n=S.params.control;if(S.isArray(n))for(var o=0;o<n.length;o++)n[o]!==a&&n[o]instanceof t&&s(n[o]);else n instanceof t&&a!==n&&s(n)},setTransition:function(e,a){function s(a){a.setWrapperTransition(e,S),0!==e&&(a.onTransitionStart(),a.wrapper.transitionEnd(function(){r&&(a.params.loop&&"slide"===S.params.controlBy&&a.fixLoop(),a.onTransitionEnd())}))}var i,r=S.params.control;if(S.isArray(r))for(i=0;i<r.length;i++)r[i]!==a&&r[i]instanceof t&&s(r[i]);else r instanceof t&&a!==r&&s(r)}},S.hashnav={onHashCange:function(e,a){var t=document.location.hash.replace("#",""),s=S.slides.eq(S.activeIndex).attr("data-hash");t!==s&&S.slideTo(S.wrapper.children("."+S.params.slideClass+'[data-hash="'+t+'"]').index());
},attachEvents:function(e){var t=e?"off":"on";a(window)[t]("hashchange",S.hashnav.onHashCange)},setHash:function(){if(S.hashnav.initialized&&S.params.hashnav)if(S.params.replaceState&&window.history&&window.history.replaceState)window.history.replaceState(null,null,"#"+S.slides.eq(S.activeIndex).attr("data-hash")||"");else{var e=S.slides.eq(S.activeIndex),a=e.attr("data-hash")||e.attr("data-history");document.location.hash=a||""}},init:function(){if(S.params.hashnav&&!S.params.history){S.hashnav.initialized=!0;var e=document.location.hash.replace("#","");if(e){for(var a=0,t=0,s=S.slides.length;t<s;t++){var i=S.slides.eq(t),r=i.attr("data-hash")||i.attr("data-history");if(r===e&&!i.hasClass(S.params.slideDuplicateClass)){var n=i.index();S.slideTo(n,a,S.params.runCallbacksOnInit,!0)}}S.params.hashnavWatchState&&S.hashnav.attachEvents()}}},destroy:function(){S.params.hashnavWatchState&&S.hashnav.attachEvents(!0)}},S.history={init:function(){if(S.params.history){if(!window.history||!window.history.pushState)return S.params.history=!1,void(S.params.hashnav=!0);S.history.initialized=!0,this.paths=this.getPathValues(),(this.paths.key||this.paths.value)&&(this.scrollToSlide(0,this.paths.value,S.params.runCallbacksOnInit),S.params.replaceState||window.addEventListener("popstate",this.setHistoryPopState))}},setHistoryPopState:function(){S.history.paths=S.history.getPathValues(),S.history.scrollToSlide(S.params.speed,S.history.paths.value,!1)},getPathValues:function(){var e=window.location.pathname.slice(1).split("/"),a=e.length,t=e[a-2],s=e[a-1];return{key:t,value:s}},setHistory:function(e,a){if(S.history.initialized&&S.params.history){var t=S.slides.eq(a),s=this.slugify(t.attr("data-history"));window.location.pathname.includes(e)||(s=e+"/"+s),S.params.replaceState?window.history.replaceState(null,null,s):window.history.pushState(null,null,s)}},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,a,t){if(a)for(var s=0,i=S.slides.length;s<i;s++){var r=S.slides.eq(s),n=this.slugify(r.attr("data-history"));if(n===a&&!r.hasClass(S.params.slideDuplicateClass)){var o=r.index();S.slideTo(o,e,t)}}else S.slideTo(0,e,t)}},S.disableKeyboardControl=function(){S.params.keyboardControl=!1,a(document).off("keydown",d)},S.enableKeyboardControl=function(){S.params.keyboardControl=!0,a(document).on("keydown",d)},S.mousewheel={event:!1,lastScrollTime:(new window.Date).getTime()},S.params.mousewheelControl&&(S.mousewheel.event=navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":u()?"wheel":"mousewheel"),S.disableMousewheelControl=function(){if(!S.mousewheel.event)return!1;var e=S.container;return"container"!==S.params.mousewheelEventsTarged&&(e=a(S.params.mousewheelEventsTarged)),e.off(S.mousewheel.event,c),!0},S.enableMousewheelControl=function(){if(!S.mousewheel.event)return!1;var e=S.container;return"container"!==S.params.mousewheelEventsTarged&&(e=a(S.params.mousewheelEventsTarged)),e.on(S.mousewheel.event,c),!0},S.parallax={setTranslate:function(){S.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){h(this,S.progress)}),S.slides.each(function(){var e=a(this);e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var a=Math.min(Math.max(e[0].progress,-1),1);h(this,a)})})},setTransition:function(e){"undefined"==typeof e&&(e=S.params.speed),S.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var t=a(this),s=parseInt(t.attr("data-swiper-parallax-duration"),10)||e;0===e&&(s=0),t.transition(s)})}},S.zoom={scale:1,currentScale:1,isScaling:!1,gesture:{slide:void 0,slideWidth:void 0,slideHeight:void 0,image:void 0,imageWrap:void 0,zoomMax:S.params.zoomMax},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var a=e.targetTouches[0].pageX,t=e.targetTouches[0].pageY,s=e.targetTouches[1].pageX,i=e.targetTouches[1].pageY,r=Math.sqrt(Math.pow(s-a,2)+Math.pow(i-t,2));return r},onGestureStart:function(e){var t=S.zoom;if(!S.support.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;t.gesture.scaleStart=t.getDistanceBetweenTouches(e)}return t.gesture.slide&&t.gesture.slide.length||(t.gesture.slide=a(this),0===t.gesture.slide.length&&(t.gesture.slide=S.slides.eq(S.activeIndex)),t.gesture.image=t.gesture.slide.find("img, svg, canvas"),t.gesture.imageWrap=t.gesture.image.parent("."+S.params.zoomContainerClass),t.gesture.zoomMax=t.gesture.imageWrap.attr("data-swiper-zoom")||S.params.zoomMax,0!==t.gesture.imageWrap.length)?(t.gesture.image.transition(0),void(t.isScaling=!0)):void(t.gesture.image=void 0)},onGestureChange:function(e){var a=S.zoom;if(!S.support.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;a.gesture.scaleMove=a.getDistanceBetweenTouches(e)}a.gesture.image&&0!==a.gesture.image.length&&(S.support.gestures?a.scale=e.scale*a.currentScale:a.scale=a.gesture.scaleMove/a.gesture.scaleStart*a.currentScale,a.scale>a.gesture.zoomMax&&(a.scale=a.gesture.zoomMax-1+Math.pow(a.scale-a.gesture.zoomMax+1,.5)),a.scale<S.params.zoomMin&&(a.scale=S.params.zoomMin+1-Math.pow(S.params.zoomMin-a.scale+1,.5)),a.gesture.image.transform("translate3d(0,0,0) scale("+a.scale+")"))},onGestureEnd:function(e){var a=S.zoom;!S.support.gestures&&("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2)||a.gesture.image&&0!==a.gesture.image.length&&(a.scale=Math.max(Math.min(a.scale,a.gesture.zoomMax),S.params.zoomMin),a.gesture.image.transition(S.params.speed).transform("translate3d(0,0,0) scale("+a.scale+")"),a.currentScale=a.scale,a.isScaling=!1,1===a.scale&&(a.gesture.slide=void 0))},onTouchStart:function(e,a){var t=e.zoom;t.gesture.image&&0!==t.gesture.image.length&&(t.image.isTouched||("android"===e.device.os&&a.preventDefault(),t.image.isTouched=!0,t.image.touchesStart.x="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,t.image.touchesStart.y="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY))},onTouchMove:function(e){var a=S.zoom;if(a.gesture.image&&0!==a.gesture.image.length&&(S.allowClick=!1,a.image.isTouched&&a.gesture.slide)){a.image.isMoved||(a.image.width=a.gesture.image[0].offsetWidth,a.image.height=a.gesture.image[0].offsetHeight,a.image.startX=S.getTranslate(a.gesture.imageWrap[0],"x")||0,a.image.startY=S.getTranslate(a.gesture.imageWrap[0],"y")||0,a.gesture.slideWidth=a.gesture.slide[0].offsetWidth,a.gesture.slideHeight=a.gesture.slide[0].offsetHeight,a.gesture.imageWrap.transition(0));var t=a.image.width*a.scale,s=a.image.height*a.scale;if(!(t<a.gesture.slideWidth&&s<a.gesture.slideHeight)){if(a.image.minX=Math.min(a.gesture.slideWidth/2-t/2,0),a.image.maxX=-a.image.minX,a.image.minY=Math.min(a.gesture.slideHeight/2-s/2,0),a.image.maxY=-a.image.minY,a.image.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a.image.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!a.image.isMoved&&!a.isScaling){if(S.isHorizontal()&&Math.floor(a.image.minX)===Math.floor(a.image.startX)&&a.image.touchesCurrent.x<a.image.touchesStart.x||Math.floor(a.image.maxX)===Math.floor(a.image.startX)&&a.image.touchesCurrent.x>a.image.touchesStart.x)return void(a.image.isTouched=!1);if(!S.isHorizontal()&&Math.floor(a.image.minY)===Math.floor(a.image.startY)&&a.image.touchesCurrent.y<a.image.touchesStart.y||Math.floor(a.image.maxY)===Math.floor(a.image.startY)&&a.image.touchesCurrent.y>a.image.touchesStart.y)return void(a.image.isTouched=!1)}e.preventDefault(),e.stopPropagation(),a.image.isMoved=!0,a.image.currentX=a.image.touchesCurrent.x-a.image.touchesStart.x+a.image.startX,a.image.currentY=a.image.touchesCurrent.y-a.image.touchesStart.y+a.image.startY,a.image.currentX<a.image.minX&&(a.image.currentX=a.image.minX+1-Math.pow(a.image.minX-a.image.currentX+1,.8)),a.image.currentX>a.image.maxX&&(a.image.currentX=a.image.maxX-1+Math.pow(a.image.currentX-a.image.maxX+1,.8)),a.image.currentY<a.image.minY&&(a.image.currentY=a.image.minY+1-Math.pow(a.image.minY-a.image.currentY+1,.8)),a.image.currentY>a.image.maxY&&(a.image.currentY=a.image.maxY-1+Math.pow(a.image.currentY-a.image.maxY+1,.8)),a.velocity.prevPositionX||(a.velocity.prevPositionX=a.image.touchesCurrent.x),a.velocity.prevPositionY||(a.velocity.prevPositionY=a.image.touchesCurrent.y),a.velocity.prevTime||(a.velocity.prevTime=Date.now()),a.velocity.x=(a.image.touchesCurrent.x-a.velocity.prevPositionX)/(Date.now()-a.velocity.prevTime)/2,a.velocity.y=(a.image.touchesCurrent.y-a.velocity.prevPositionY)/(Date.now()-a.velocity.prevTime)/2,Math.abs(a.image.touchesCurrent.x-a.velocity.prevPositionX)<2&&(a.velocity.x=0),Math.abs(a.image.touchesCurrent.y-a.velocity.prevPositionY)<2&&(a.velocity.y=0),a.velocity.prevPositionX=a.image.touchesCurrent.x,a.velocity.prevPositionY=a.image.touchesCurrent.y,a.velocity.prevTime=Date.now(),a.gesture.imageWrap.transform("translate3d("+a.image.currentX+"px, "+a.image.currentY+"px,0)")}}},onTouchEnd:function(e,a){var t=e.zoom;if(t.gesture.image&&0!==t.gesture.image.length){if(!t.image.isTouched||!t.image.isMoved)return t.image.isTouched=!1,void(t.image.isMoved=!1);t.image.isTouched=!1,t.image.isMoved=!1;var s=300,i=300,r=t.velocity.x*s,n=t.image.currentX+r,o=t.velocity.y*i,l=t.image.currentY+o;0!==t.velocity.x&&(s=Math.abs((n-t.image.currentX)/t.velocity.x)),0!==t.velocity.y&&(i=Math.abs((l-t.image.currentY)/t.velocity.y));var p=Math.max(s,i);t.image.currentX=n,t.image.currentY=l;var d=t.image.width*t.scale,u=t.image.height*t.scale;t.image.minX=Math.min(t.gesture.slideWidth/2-d/2,0),t.image.maxX=-t.image.minX,t.image.minY=Math.min(t.gesture.slideHeight/2-u/2,0),t.image.maxY=-t.image.minY,t.image.currentX=Math.max(Math.min(t.image.currentX,t.image.maxX),t.image.minX),t.image.currentY=Math.max(Math.min(t.image.currentY,t.image.maxY),t.image.minY),t.gesture.imageWrap.transition(p).transform("translate3d("+t.image.currentX+"px, "+t.image.currentY+"px,0)")}},onTransitionEnd:function(e){var a=e.zoom;a.gesture.slide&&e.previousIndex!==e.activeIndex&&(a.gesture.image.transform("translate3d(0,0,0) scale(1)"),a.gesture.imageWrap.transform("translate3d(0,0,0)"),a.gesture.slide=a.gesture.image=a.gesture.imageWrap=void 0,a.scale=a.currentScale=1)},toggleZoom:function(e,t){var s=e.zoom;if(s.gesture.slide||(s.gesture.slide=e.clickedSlide?a(e.clickedSlide):e.slides.eq(e.activeIndex),s.gesture.image=s.gesture.slide.find("img, svg, canvas"),s.gesture.imageWrap=s.gesture.image.parent("."+e.params.zoomContainerClass)),s.gesture.image&&0!==s.gesture.image.length){var i,r,n,o,l,p,d,u,c,m,h,g,f,v,w,y,x,T;"undefined"==typeof s.image.touchesStart.x&&t?(i="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,r="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(i=s.image.touchesStart.x,r=s.image.touchesStart.y),s.scale&&1!==s.scale?(s.scale=s.currentScale=1,s.gesture.imageWrap.transition(300).transform("translate3d(0,0,0)"),s.gesture.image.transition(300).transform("translate3d(0,0,0) scale(1)"),s.gesture.slide=void 0):(s.scale=s.currentScale=s.gesture.imageWrap.attr("data-swiper-zoom")||e.params.zoomMax,t?(x=s.gesture.slide[0].offsetWidth,T=s.gesture.slide[0].offsetHeight,n=s.gesture.slide.offset().left,o=s.gesture.slide.offset().top,l=n+x/2-i,p=o+T/2-r,c=s.gesture.image[0].offsetWidth,m=s.gesture.image[0].offsetHeight,h=c*s.scale,g=m*s.scale,f=Math.min(x/2-h/2,0),v=Math.min(T/2-g/2,0),w=-f,y=-v,d=l*s.scale,u=p*s.scale,d<f&&(d=f),d>w&&(d=w),u<v&&(u=v),u>y&&(u=y)):(d=0,u=0),s.gesture.imageWrap.transition(300).transform("translate3d("+d+"px, "+u+"px,0)"),s.gesture.image.transition(300).transform("translate3d(0,0,0) scale("+s.scale+")"))}},attachEvents:function(e){var t=e?"off":"on";if(S.params.zoom){var s=(S.slides,!("touchstart"!==S.touchEvents.start||!S.support.passiveListener||!S.params.passiveListeners)&&{passive:!0,capture:!1});S.support.gestures?(S.slides[t]("gesturestart",S.zoom.onGestureStart,s),S.slides[t]("gesturechange",S.zoom.onGestureChange,s),S.slides[t]("gestureend",S.zoom.onGestureEnd,s)):"touchstart"===S.touchEvents.start&&(S.slides[t](S.touchEvents.start,S.zoom.onGestureStart,s),S.slides[t](S.touchEvents.move,S.zoom.onGestureChange,s),S.slides[t](S.touchEvents.end,S.zoom.onGestureEnd,s)),S[t]("touchStart",S.zoom.onTouchStart),S.slides.each(function(e,s){a(s).find("."+S.params.zoomContainerClass).length>0&&a(s)[t](S.touchEvents.move,S.zoom.onTouchMove)}),S[t]("touchEnd",S.zoom.onTouchEnd),S[t]("transitionEnd",S.zoom.onTransitionEnd),S.params.zoomToggle&&S.on("doubleTap",S.zoom.toggleZoom)}},init:function(){S.zoom.attachEvents()},destroy:function(){S.zoom.attachEvents(!0)}},S._plugins=[];for(var N in S.plugins){var W=S.plugins[N](S,S.params[N]);W&&S._plugins.push(W)}return S.callPlugins=function(e){for(var a=0;a<S._plugins.length;a++)e in S._plugins[a]&&S._plugins[a][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},S.emitterEventListeners={},S.emit=function(e){S.params[e]&&S.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var a;if(S.emitterEventListeners[e])for(a=0;a<S.emitterEventListeners[e].length;a++)S.emitterEventListeners[e][a](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);S.callPlugins&&S.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},S.on=function(e,a){return e=g(e),S.emitterEventListeners[e]||(S.emitterEventListeners[e]=[]),S.emitterEventListeners[e].push(a),S},S.off=function(e,a){var t;if(e=g(e),"undefined"==typeof a)return S.emitterEventListeners[e]=[],S;if(S.emitterEventListeners[e]&&0!==S.emitterEventListeners[e].length){for(t=0;t<S.emitterEventListeners[e].length;t++)S.emitterEventListeners[e][t]===a&&S.emitterEventListeners[e].splice(t,1);return S}},S.once=function(e,a){e=g(e);var t=function(){a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),S.off(e,t)};return S.on(e,t),S},S.a11y={makeFocusable:function(e){return e.attr("tabIndex","0"),e},addRole:function(e,a){return e.attr("role",a),e},addLabel:function(e,a){return e.attr("aria-label",a),e},disable:function(e){return e.attr("aria-disabled",!0),e},enable:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){13===e.keyCode&&(a(e.target).is(S.params.nextButton)?(S.onClickNext(e),S.isEnd?S.a11y.notify(S.params.lastSlideMessage):S.a11y.notify(S.params.nextSlideMessage)):a(e.target).is(S.params.prevButton)&&(S.onClickPrev(e),S.isBeginning?S.a11y.notify(S.params.firstSlideMessage):S.a11y.notify(S.params.prevSlideMessage)),a(e.target).is("."+S.params.bulletClass)&&a(e.target)[0].click())},liveRegion:a('<span class="'+S.params.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var a=S.a11y.liveRegion;0!==a.length&&(a.html(""),a.html(e))},init:function(){S.params.nextButton&&S.nextButton&&S.nextButton.length>0&&(S.a11y.makeFocusable(S.nextButton),S.a11y.addRole(S.nextButton,"button"),S.a11y.addLabel(S.nextButton,S.params.nextSlideMessage)),S.params.prevButton&&S.prevButton&&S.prevButton.length>0&&(S.a11y.makeFocusable(S.prevButton),S.a11y.addRole(S.prevButton,"button"),S.a11y.addLabel(S.prevButton,S.params.prevSlideMessage)),a(S.container).append(S.a11y.liveRegion)},initPagination:function(){S.params.pagination&&S.params.paginationClickable&&S.bullets&&S.bullets.length&&S.bullets.each(function(){var e=a(this);S.a11y.makeFocusable(e),S.a11y.addRole(e,"button"),S.a11y.addLabel(e,S.params.paginationBulletMessage.replace(/{{index}}/,e.index()+1))})},destroy:function(){S.a11y.liveRegion&&S.a11y.liveRegion.length>0&&S.a11y.liveRegion.remove()}},S.init=function(){S.params.loop&&S.createLoop(),S.updateContainerSize(),S.updateSlidesSize(),S.updatePagination(),S.params.scrollbar&&S.scrollbar&&(S.scrollbar.set(),S.params.scrollbarDraggable&&S.scrollbar.enableDraggable()),"slide"!==S.params.effect&&S.effects[S.params.effect]&&(S.params.loop||S.updateProgress(),S.effects[S.params.effect].setTranslate()),S.params.loop?S.slideTo(S.params.initialSlide+S.loopedSlides,0,S.params.runCallbacksOnInit):(S.slideTo(S.params.initialSlide,0,S.params.runCallbacksOnInit),0===S.params.initialSlide&&(S.parallax&&S.params.parallax&&S.parallax.setTranslate(),S.lazy&&S.params.lazyLoading&&(S.lazy.load(),S.lazy.initialImageLoaded=!0))),S.attachEvents(),S.params.observer&&S.support.observer&&S.initObservers(),S.params.preloadImages&&!S.params.lazyLoading&&S.preloadImages(),S.params.zoom&&S.zoom&&S.zoom.init(),S.params.autoplay&&S.startAutoplay(),S.params.keyboardControl&&S.enableKeyboardControl&&S.enableKeyboardControl(),S.params.mousewheelControl&&S.enableMousewheelControl&&S.enableMousewheelControl(),S.params.hashnavReplaceState&&(S.params.replaceState=S.params.hashnavReplaceState),S.params.history&&S.history&&S.history.init(),S.params.hashnav&&S.hashnav&&S.hashnav.init(),S.params.a11y&&S.a11y&&S.a11y.init(),S.emit("onInit",S)},S.cleanupStyles=function(){S.container.removeClass(S.classNames.join(" ")).removeAttr("style"),S.wrapper.removeAttr("style"),S.slides&&S.slides.length&&S.slides.removeClass([S.params.slideVisibleClass,S.params.slideActiveClass,S.params.slideNextClass,S.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),S.paginationContainer&&S.paginationContainer.length&&S.paginationContainer.removeClass(S.params.paginationHiddenClass),S.bullets&&S.bullets.length&&S.bullets.removeClass(S.params.bulletActiveClass),S.params.prevButton&&a(S.params.prevButton).removeClass(S.params.buttonDisabledClass),S.params.nextButton&&a(S.params.nextButton).removeClass(S.params.buttonDisabledClass),S.params.scrollbar&&S.scrollbar&&(S.scrollbar.track&&S.scrollbar.track.length&&S.scrollbar.track.removeAttr("style"),S.scrollbar.drag&&S.scrollbar.drag.length&&S.scrollbar.drag.removeAttr("style"))},S.destroy=function(e,a){S.detachEvents(),S.stopAutoplay(),S.params.scrollbar&&S.scrollbar&&S.params.scrollbarDraggable&&S.scrollbar.disableDraggable(),S.params.loop&&S.destroyLoop(),a&&S.cleanupStyles(),S.disconnectObservers(),S.params.zoom&&S.zoom&&S.zoom.destroy(),S.params.keyboardControl&&S.disableKeyboardControl&&S.disableKeyboardControl(),S.params.mousewheelControl&&S.disableMousewheelControl&&S.disableMousewheelControl(),S.params.a11y&&S.a11y&&S.a11y.destroy(),S.params.history&&!S.params.replaceState&&window.removeEventListener("popstate",S.history.setHistoryPopState),S.params.hashnav&&S.hashnav&&S.hashnav.destroy(),S.emit("onDestroy"),e!==!1&&(S=null)},S.init(),S}};t.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1,lteIE9:function(){var e=document.createElement("div");return e.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->",1===e.getElementsByTagName("i").length}()},device:function(){var e=navigator.userAgent,a=e.match(/(Android);?[\s\/]+([\d.]+)?/),t=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),i=!t&&e.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:t||i||s,android:a}}(),support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){for(var e=document.createElement("div").style,a="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),t=0;t<a.length;t++)if(a[t]in e)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}(),passiveListener:function(){var e=!1;try{var a=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveListener",null,a)}catch(e){}return e}(),gestures:function(){return"ongesturestart"in window}()},plugins:{}};for(var s=(function(){var e=function(e){var a=this,t=0;for(t=0;t<e.length;t++)a[t]=e[t];return a.length=e.length,this},a=function(a,t){var s=[],i=0;if(a&&!t&&a instanceof e)return a;if(a)if("string"==typeof a){var r,n,o=a.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var l="div";for(0===o.indexOf("<li")&&(l="ul"),0===o.indexOf("<tr")&&(l="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(l="tr"),0===o.indexOf("<tbody")&&(l="table"),0===o.indexOf("<option")&&(l="select"),n=document.createElement(l),n.innerHTML=a,i=0;i<n.childNodes.length;i++)s.push(n.childNodes[i])}else for(r=t||"#"!==a[0]||a.match(/[ .<>:~]/)?(t||document).querySelectorAll(a):[document.getElementById(a.split("#")[1])],i=0;i<r.length;i++)r[i]&&s.push(r[i])}else if(a.nodeType||a===window||a===document)s.push(a);else if(a.length>0&&a[0].nodeType)for(i=0;i<a.length;i++)s.push(a[i]);return new e(s)};return e.prototype={addClass:function(e){if("undefined"==typeof e)return this;for(var a=e.split(" "),t=0;t<a.length;t++)for(var s=0;s<this.length;s++)this[s].classList.add(a[t]);return this},removeClass:function(e){for(var a=e.split(" "),t=0;t<a.length;t++)for(var s=0;s<this.length;s++)this[s].classList.remove(a[t]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var a=e.split(" "),t=0;t<a.length;t++)for(var s=0;s<this.length;s++)this[s].classList.toggle(a[t]);return this},attr:function(e,a){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var t=0;t<this.length;t++)if(2===arguments.length)this[t].setAttribute(e,a);else for(var s in e)this[t][s]=e[s],this[t].setAttribute(s,e[s]);return this},removeAttr:function(e){for(var a=0;a<this.length;a++)this[a].removeAttribute(e);return this},data:function(e,a){if("undefined"!=typeof a){for(var t=0;t<this.length;t++){var s=this[t];s.dom7ElementDataStorage||(s.dom7ElementDataStorage={}),s.dom7ElementDataStorage[e]=a}return this}if(this[0]){var i=this[0].getAttribute("data-"+e);return i?i:this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:void 0}},transform:function(e){for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransform=t.MsTransform=t.msTransform=t.MozTransform=t.OTransform=t.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e}return this},on:function(e,t,s,i){function r(e){var i=e.target;if(a(i).is(t))s.call(i,e);else for(var r=a(i).parents(),n=0;n<r.length;n++)a(r[n]).is(t)&&s.call(r[n],e)}var n,o,l=e.split(" ");for(n=0;n<this.length;n++)if("function"==typeof t||t===!1)for("function"==typeof t&&(s=arguments[1],i=arguments[2]||!1),o=0;o<l.length;o++)this[n].addEventListener(l[o],s,i);else for(o=0;o<l.length;o++)this[n].dom7LiveListeners||(this[n].dom7LiveListeners=[]),this[n].dom7LiveListeners.push({listener:s,liveListener:r}),this[n].addEventListener(l[o],r,i);return this},off:function(e,a,t,s){for(var i=e.split(" "),r=0;r<i.length;r++)for(var n=0;n<this.length;n++)if("function"==typeof a||a===!1)"function"==typeof a&&(t=arguments[1],s=arguments[2]||!1),this[n].removeEventListener(i[r],t,s);else if(this[n].dom7LiveListeners)for(var o=0;o<this[n].dom7LiveListeners.length;o++)this[n].dom7LiveListeners[o].listener===t&&this[n].removeEventListener(i[r],this[n].dom7LiveListeners[o].liveListener,s);return this},once:function(e,a,t,s){function i(n){t(n),r.off(e,a,i,s)}var r=this;"function"==typeof a&&(a=!1,t=arguments[1],s=arguments[2]),r.on(e,a,i,s)},trigger:function(e,a){for(var t=0;t<this.length;t++){var s;try{s=new window.CustomEvent(e,{detail:a,bubbles:!0,cancelable:!0})}catch(t){s=document.createEvent("Event"),s.initEvent(e,!0,!0),s.detail=a}this[t].dispatchEvent(s)}return this},transitionEnd:function(e){function a(r){if(r.target===this)for(e.call(this,r),t=0;t<s.length;t++)i.off(s[t],a)}var t,s=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(e)for(t=0;t<s.length;t++)i.on(s[t],a);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],a=e.getBoundingClientRect(),t=document.body,s=e.clientTop||t.clientTop||0,i=e.clientLeft||t.clientLeft||0,r=window.pageYOffset||e.scrollTop,n=window.pageXOffset||e.scrollLeft;return{top:a.top+r-s,left:a.left+n-i}}return null},css:function(e,a){var t;if(1===arguments.length){if("string"!=typeof e){for(t=0;t<this.length;t++)for(var s in e)this[t].style[s]=e[s];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(t=0;t<this.length;t++)this[t].style[e]=a;return this}return this},each:function(e){for(var a=0;a<this.length;a++)e.call(this[a],a,this[a]);return this},html:function(e){if("undefined"==typeof e)return this[0]?this[0].innerHTML:void 0;for(var a=0;a<this.length;a++)this[a].innerHTML=e;return this},text:function(e){if("undefined"==typeof e)return this[0]?this[0].textContent.trim():null;for(var a=0;a<this.length;a++)this[a].textContent=e;return this},is:function(t){if(!this[0])return!1;var s,i;if("string"==typeof t){var r=this[0];if(r===document)return t===document;if(r===window)return t===window;if(r.matches)return r.matches(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector)return r.mozMatchesSelector(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);for(s=a(t),i=0;i<s.length;i++)if(s[i]===this[0])return!0;return!1}if(t===document)return this[0]===document;if(t===window)return this[0]===window;if(t.nodeType||t instanceof e){for(s=t.nodeType?[t]:t,i=0;i<s.length;i++)if(s[i]===this[0])return!0;return!1}return!1},index:function(){if(this[0]){for(var e=this[0],a=0;null!==(e=e.previousSibling);)1===e.nodeType&&a++;return a}},eq:function(a){if("undefined"==typeof a)return this;var t,s=this.length;return a>s-1?new e([]):a<0?(t=s+a,new e(t<0?[]:[this[t]])):new e([this[a]])},append:function(a){var t,s;for(t=0;t<this.length;t++)if("string"==typeof a){var i=document.createElement("div");for(i.innerHTML=a;i.firstChild;)this[t].appendChild(i.firstChild)}else if(a instanceof e)for(s=0;s<a.length;s++)this[t].appendChild(a[s]);else this[t].appendChild(a);return this},prepend:function(a){var t,s;for(t=0;t<this.length;t++)if("string"==typeof a){var i=document.createElement("div");for(i.innerHTML=a,s=i.childNodes.length-1;s>=0;s--)this[t].insertBefore(i.childNodes[s],this[t].childNodes[0])}else if(a instanceof e)for(s=0;s<a.length;s++)this[t].insertBefore(a[s],this[t].childNodes[0]);else this[t].insertBefore(a,this[t].childNodes[0]);return this},insertBefore:function(e){for(var t=a(e),s=0;s<this.length;s++)if(1===t.length)t[0].parentNode.insertBefore(this[s],t[0]);else if(t.length>1)for(var i=0;i<t.length;i++)t[i].parentNode.insertBefore(this[s].cloneNode(!0),t[i])},insertAfter:function(e){for(var t=a(e),s=0;s<this.length;s++)if(1===t.length)t[0].parentNode.insertBefore(this[s],t[0].nextSibling);else if(t.length>1)for(var i=0;i<t.length;i++)t[i].parentNode.insertBefore(this[s].cloneNode(!0),t[i].nextSibling)},next:function(t){return new e(this.length>0?t?this[0].nextElementSibling&&a(this[0].nextElementSibling).is(t)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(t){var s=[],i=this[0];if(!i)return new e([]);for(;i.nextElementSibling;){var r=i.nextElementSibling;t?a(r).is(t)&&s.push(r):s.push(r),i=r}return new e(s)},prev:function(t){return new e(this.length>0?t?this[0].previousElementSibling&&a(this[0].previousElementSibling).is(t)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(t){var s=[],i=this[0];if(!i)return new e([]);for(;i.previousElementSibling;){var r=i.previousElementSibling;t?a(r).is(t)&&s.push(r):s.push(r),i=r}return new e(s)},parent:function(e){for(var t=[],s=0;s<this.length;s++)e?a(this[s].parentNode).is(e)&&t.push(this[s].parentNode):t.push(this[s].parentNode);return a(a.unique(t))},parents:function(e){for(var t=[],s=0;s<this.length;s++)for(var i=this[s].parentNode;i;)e?a(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return a(a.unique(t))},find:function(a){for(var t=[],s=0;s<this.length;s++)for(var i=this[s].querySelectorAll(a),r=0;r<i.length;r++)t.push(i[r]);return new e(t)},children:function(t){for(var s=[],i=0;i<this.length;i++)for(var r=this[i].childNodes,n=0;n<r.length;n++)t?1===r[n].nodeType&&a(r[n]).is(t)&&s.push(r[n]):1===r[n].nodeType&&s.push(r[n]);return new e(a.unique(s))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){var e,t,s=this;for(e=0;e<arguments.length;e++){var i=a(arguments[e]);for(t=0;t<i.length;t++)s[s.length]=i[t],s.length++}return s}},a.fn=e.prototype,a.unique=function(e){for(var a=[],t=0;t<e.length;t++)a.indexOf(e[t])===-1&&a.push(e[t]);return a},a}()),i=["jQuery","Zepto","Dom7"],r=0;r<i.length;r++)window[i[r]]&&e(window[i[r]]);var n;n="undefined"==typeof s?window.Dom7||window.Zepto||window.jQuery:s,n&&("transitionEnd"in n.fn||(n.fn.transitionEnd=function(e){function a(r){if(r.target===this)for(e.call(this,r),t=0;t<s.length;t++)i.off(s[t],a)}var t,s=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(e)for(t=0;t<s.length;t++)i.on(s[t],a);return this}),"transform"in n.fn||(n.fn.transform=function(e){for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransform=t.MsTransform=t.msTransform=t.MozTransform=t.OTransform=t.transform=e}return this}),"transition"in n.fn||(n.fn.transition=function(e){"string"!=typeof e&&(e+="ms");for(var a=0;a<this.length;a++){var t=this[a].style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e}return this}),"outerWidth"in n.fn||(n.fn.outerWidth=function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null})),window.Swiper=t}(),"undefined"!=typeof module?module.exports=window.Swiper:"function"==typeof define&&define.amd&&define('swiper',[],function(){"use strict";return window.Swiper});
//# sourceMappingURL=maps/swiper.min.js.map
;
/* 
* @Author: lee
* @Date:   2016-01-11 00:28:48
* @Last Modified by:   anchen
* @Last Modified time: 2016-01-11 00:29:00
*/


define('domReady',[],function(){"use strict";function e(e){var t;for(t=0;e.length>t;t+=1)e[t](h)}function t(){var t=c;l&&t.length&&(c=[],e(t))}function i(){l||(l=!0,o&&clearInterval(o),t())}function n(e){return l?e(h):c.push(e),n}var r,s,o,a="undefined"!=typeof window&&window.document,l=!a,h=a?document:null,c=[];if(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(window.attachEvent){window.attachEvent("onload",i),s=document.createElement("div");try{r=null===window.frameElement}catch(u){}s.doScroll&&r&&window.external&&(o=setInterval(function(){try{s.doScroll(),i()}catch(e){}},30))}"complete"===document.readyState&&i()}return n.version="2.0.1",n.load=function(e,t,i,r){r.isBuild?i(null):n(i)},n});
require.config({
    baseUrl: '../js',
    paths: {
        //一些库文件
        'jquery': '../framework/jquery-1.9.1',
        'angular': '../framework/angular-1.3.0.14/angular.min',
        'angularRoute': '../framework/angular-ui-router',
        'domReady': '../framework/domReady',
        'ngStorage': "../framework/ngStorage.min",
        'angularResource': "../framework/angular-resource.min",
        'md5js': "../framework/md-5",
        'SHR256': "../framework/SHR256",
        'ngInfiniteScroll': "../framework/ngInfiniteScroll",
        'gagaka': "../framework/lucky-card.min",
        // 'weixin': "../framework/weixin_1",
        //js文件
        'bootstrap': "bootstrap",
        'app': "app",
        'webappControllers': "module",
        'filter': "./filters/filter",
        'urlFilters': "./filters/urlFilters",
        'ngdialog': "./ng/dialog/ngDialog",
        'router': "router",
        'ngScrollTop': "./ng/ngScrollTop",
        'ngDraw': "./ng/ngDraw",
        'jweixin': '../framework/jweixin-1.0.0',
        'qrcode': '../framework/qrcode',
        'angularQrcode': '../framework/angular-qrcode',
        'swiper': '../framework/swiper.min',
        'ngscrollbar': '../framework/ngscrollbar',
        'xue': '../framework/xue',
        'ngTouch': './ng/ngTouch',
        'radialIndicator': '../framework/radialIndicator',
        'linearIndicator': '../framework/linearIndicator',


        'clipboard': '../framework/copy-to-clipboard',
        'slider': '../framework/slider',
        'asPieProgress': '../framework/jquery-asPieProgress',
        'rainbow': '../framework/rainbow.min',
        'appControllers': "module",


        'sign3rd': "../framework/sign3rd",

    },
    shim: {
        'angular': {
            exports: 'angular'
        },
        'angularRoute': {
            deps: ['angular', 'ngStorage', 'ngdialog', 'ngScrollTop', 'ngDraw', 'angularQrcode', 'ngTouch'],
            exports: 'angularRoute'
        },
        'angularResource': {
            deps: ['angular'],
            exports: 'angularResource'
        },
        'angularQrcode': {
            deps: ['angular']
        },
        'app': {
            deps: ['ngscrollbar']
        },
        'ngscrollbar': {
            deps: ['angular']
        },
        'ngTouch': {
            deps: ['app']
        },
        'jqmeter': {
            deps: ['jquery'],
            exports: 'jqmeter'
        }
    },
    deps: ['bootstrap', 'jweixin', 'qrcode', 'swiper'],
    urlArgs: "bust=" + (new Date()).getTime()  //防止读取缓存，调试用
});
define("main", function(){});

